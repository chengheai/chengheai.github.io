{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":1,"renderable":0},{"_id":"source/images/WX20181012-155029.png","path":"images/WX20181012-155029.png","modified":1,"renderable":0},{"_id":"source/images/WX20181106-205333@2x.png","path":"images/WX20181106-205333@2x.png","modified":1,"renderable":0},{"_id":"source/images/logo.png","path":"images/logo.png","modified":1,"renderable":0},{"_id":"source/images/WX20181106-205401@2x.png","path":"images/WX20181106-205401@2x.png","modified":1,"renderable":0},{"_id":"source/images/WechatIMG27.png","path":"images/WechatIMG27.png","modified":1,"renderable":0},{"_id":"source/images/wIQDW7wiZ8.gif","path":"images/wIQDW7wiZ8.gif","modified":1,"renderable":0},{"_id":"source/images/zKX0PnVPvt.gif","path":"images/zKX0PnVPvt.gif","modified":1,"renderable":0},{"_id":"themes/indigo/source/css/style.less","path":"css/style.less","modified":1,"renderable":1},{"_id":"themes/indigo/source/img/alipay.jpg","path":"img/alipay.jpg","modified":1,"renderable":1},{"_id":"themes/indigo/source/img/avatar.jpg","path":"img/avatar.jpg","modified":1,"renderable":1},{"_id":"themes/indigo/source/img/brand.jpg","path":"img/brand.jpg","modified":1,"renderable":1},{"_id":"themes/indigo/source/img/cc.png","path":"img/cc.png","modified":1,"renderable":1},{"_id":"themes/indigo/source/img/img-err.png","path":"img/img-err.png","modified":1,"renderable":1},{"_id":"themes/indigo/source/img/img-loading.png","path":"img/img-loading.png","modified":1,"renderable":1},{"_id":"themes/indigo/source/img/wechat.jpg","path":"img/wechat.jpg","modified":1,"renderable":1},{"_id":"themes/indigo/source/js/main.js","path":"js/main.js","modified":1,"renderable":1},{"_id":"themes/indigo/source/js/main.min.js","path":"js/main.min.js","modified":1,"renderable":1},{"_id":"themes/indigo/source/js/search.js","path":"js/search.js","modified":1,"renderable":1},{"_id":"themes/indigo/source/js/search.min.js","path":"js/search.min.js","modified":1,"renderable":1},{"_id":"themes/indigo/source/img/wechat.png","path":"img/wechat.png","modified":1,"renderable":1},{"_id":"themes/indigo/source/img/alipay.png","path":"img/alipay.png","modified":1,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Bold.eot","path":"css/fonts/roboto/Roboto-Bold.eot","modified":1,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Bold.woff2","path":"css/fonts/roboto/Roboto-Bold.woff2","modified":1,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Light.eot","path":"css/fonts/roboto/Roboto-Light.eot","modified":1,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Light.woff2","path":"css/fonts/roboto/Roboto-Light.woff2","modified":1,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Medium.eot","path":"css/fonts/roboto/Roboto-Medium.eot","modified":1,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Regular.eot","path":"css/fonts/roboto/Roboto-Regular.eot","modified":1,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Medium.woff2","path":"css/fonts/roboto/Roboto-Medium.woff2","modified":1,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Regular.woff","path":"css/fonts/roboto/Roboto-Regular.woff","modified":1,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Regular.woff2","path":"css/fonts/roboto/Roboto-Regular.woff2","modified":1,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Thin.woff2","path":"css/fonts/roboto/Roboto-Thin.woff2","modified":1,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Bold.woff","path":"css/fonts/roboto/Roboto-Bold.woff","modified":1,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Light.woff","path":"css/fonts/roboto/Roboto-Light.woff","modified":1,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Medium.woff","path":"css/fonts/roboto/Roboto-Medium.woff","modified":1,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Thin.eot","path":"css/fonts/roboto/Roboto-Thin.eot","modified":1,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Thin.woff","path":"css/fonts/roboto/Roboto-Thin.woff","modified":1,"renderable":1},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.woff2","path":"css/fonts/fontawesome/fontawesome-webfont.woff2","modified":1,"renderable":1},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.woff","path":"css/fonts/fontawesome/fontawesome-webfont.woff","modified":1,"renderable":1},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.eot","path":"css/fonts/fontawesome/fontawesome-webfont.eot","modified":1,"renderable":1},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.ttf","path":"css/fonts/fontawesome/fontawesome-webfont.ttf","modified":1,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Bold.ttf","path":"css/fonts/roboto/Roboto-Bold.ttf","modified":1,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Light.ttf","path":"css/fonts/roboto/Roboto-Light.ttf","modified":1,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Medium.ttf","path":"css/fonts/roboto/Roboto-Medium.ttf","modified":1,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Regular.ttf","path":"css/fonts/roboto/Roboto-Regular.ttf","modified":1,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Thin.ttf","path":"css/fonts/roboto/Roboto-Thin.ttf","modified":1,"renderable":1},{"_id":"themes/indigo/source/css/fonts/fontawesome/FontAwesome.otf","path":"css/fonts/fontawesome/FontAwesome.otf","modified":1,"renderable":1},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.svg","path":"css/fonts/fontawesome/fontawesome-webfont.svg","modified":1,"renderable":1},{"_id":"source/images/2019-01-07 20-49-30.2019-01-07 20_50_06.gif","path":"images/2019-01-07 20-49-30.2019-01-07 20_50_06.gif","modified":1,"renderable":0},{"_id":"source/images/2019-01-07 20-14-33.2019-01-07 20_15_33.gif","path":"images/2019-01-07 20-14-33.2019-01-07 20_15_33.gif","modified":1,"renderable":0},{"_id":"source/images/2018-12-28 16-39-06.2018-12-28 16_41_51.gif","path":"images/2018-12-28 16-39-06.2018-12-28 16_41_51.gif","modified":1,"renderable":0}],"Cache":[{"_id":"themes/indigo/.DS_Store","hash":"002071591ea0dd7f3a98af28502d9a0a418267b3","modified":1585060056532},{"_id":"themes/indigo/_config.yml","hash":"e872f2b590e50ce249d52a8f914933bc2a8f407b","modified":1585060346834},{"_id":"themes/indigo/package.json","hash":"c795e3100ae3655bfa8b39adcca7333a7925b47f","modified":1557570744271},{"_id":"source/.DS_Store","hash":"80fd83fb13f4ec08bf2f5e32f470991e9d6f0676","modified":1545986977042},{"_id":"source/CNAME","hash":"5a1cd0ea6365986026b414e546a1a7d600c0765b","modified":1633769312048},{"_id":"themes/indigo/README.md","hash":"4bf26d9b43bf24b8e0a1a0d058437a347972f5e6","modified":1557563538046},{"_id":"themes/indigo/.editorconfig","hash":"9b0445427777519defe360ea38c61729d847b3d3","modified":1557563538045},{"_id":"themes/indigo/LICENSE","hash":"24944bf7920108f5a4790e6071c32e9102760c37","modified":1557563538046},{"_id":"themes/indigo/.git/config","hash":"ad7f294e99db5c98f19132b2670141fe40d333c8","modified":1557563498087},{"_id":"themes/indigo/.git/FETCH_HEAD","hash":"c445bcbe1795210dd2cd9728fc3f74ccba941efc","modified":1557563507455},{"_id":"themes/indigo/.git/index","hash":"7607652230ec701f98ccbf1fbcb8d1a44d2d899e","modified":1633946026801},{"_id":"themes/indigo/.git/packed-refs","hash":"c7ffafcc8cd05341c3adc76b1ede3a50249d7cef","modified":1557562702497},{"_id":"themes/indigo/.git/ORIG_HEAD","hash":"a84af794bb0b8c69d6c32c87c06cd270f88874fb","modified":1557563508838},{"_id":"themes/indigo/layout/archive.ejs","hash":"d039719e21f6a6fa2925b00aaa623a180a78c818","modified":1557563538056},{"_id":"themes/indigo/layout/categories.ejs","hash":"41783d2069d5080566a99e6312aa2113105f8b41","modified":1557563538056},{"_id":"themes/indigo/layout/category.ejs","hash":"7ea26a8a935886963eda82f41c7bd5270cf780d9","modified":1557563538056},{"_id":"themes/indigo/layout/page.ejs","hash":"afb98face24d39a21ebbbde6592a9afc98572aa4","modified":1557563538057},{"_id":"themes/indigo/layout/post.ejs","hash":"afbf8532dc8d148ca4dff2ca127a3382907cf2f5","modified":1557563538058},{"_id":"themes/indigo/layout/tag.ejs","hash":"36786a3de7f6cad58209603f7d84ba23addea174","modified":1557563538058},{"_id":"themes/indigo/layout/tags.ejs","hash":"20466446c41409d14a3d42ccaec24a65a045efef","modified":1557563538058},{"_id":"themes/indigo/languages/en.yml","hash":"ec62c826a78e190cbb88347f561b1cbfc8923ba4","modified":1557629660838},{"_id":"themes/indigo/languages/ja.yml","hash":"74fd480874bf5e773ba7f9d2a94697cda979091f","modified":1557563538047},{"_id":"themes/indigo/languages/nl-NL","hash":"9085c04491f93066f2369911cc2175b59ae596ad","modified":1557563538047},{"_id":"themes/indigo/languages/zh-CN.yml","hash":"7dc6ae434dde390b6768d244132e23cc78c33817","modified":1557563538047},{"_id":"themes/indigo/languages/zh-TW.yml","hash":"6a9e820be66eb12ae746f2527e0dc1adf927c685","modified":1557563538047},{"_id":"themes/indigo/scripts/plugins.js","hash":"e439d717513616bedeed37ba9b05117470809b21","modified":1557563538059},{"_id":"themes/indigo/source/.DS_Store","hash":"1dae3df9c67ff21e94af4660fdcbf062ecb463be","modified":1585060056532},{"_id":"themes/indigo/layout/layout.ejs","hash":"d52f43fa9572d70cae834e4887c8897b43744805","modified":1557563538057},{"_id":"source/categories/index.md","hash":"9192731b08b3d3ebd80797c8e2901b9dbcbf3263","modified":1633769312098},{"_id":"source/tags/index.md","hash":"ba559a769a25818e76b4098f2557af445bc1a077","modified":1633769312157},{"_id":"source/images/.DS_Store","hash":"2e12cf9eeb666a914e1e2d5a6d92f72ec5613a88","modified":1539333307874},{"_id":"themes/indigo/layout/index.ejs","hash":"39477807b98b2d2df78f3b82498a11e90be8222c","modified":1557563538057},{"_id":"source/images/WX20181012-155029.png","hash":"be45d09ca473473e0f84bb6e77887fd5a9b10c1f","modified":1633769312153},{"_id":"source/images/WX20181106-205333@2x.png","hash":"ab30d20a6e48e2fa7d3c1074af6f19659ec51ac0","modified":1633769312154},{"_id":"source/images/logo.png","hash":"1a6ace377133f14a2b2cd7c48f10369a6bc54b2e","modified":1539164429744},{"_id":"source/_posts/Axios无法在Safari浏览器及微信中打开.md","hash":"9d9111e20cfa3f9efc01f248e55c605ddaa76e3f","modified":1633769312049},{"_id":"source/_posts/DateTimePicker自定义选择大于当前时间限制.md","hash":"92d0acca26979ce3d1e70141407237b476ce711c","modified":1633769312049},{"_id":"source/images/WX20181106-205401@2x.png","hash":"612c37fa9a23140fbf4e98379fd8c027829cd230","modified":1633769312154},{"_id":"source/_posts/Engineer该有的姿态.md","hash":"666d4e267a465834e3bf8e12db7687e28a5482b7","modified":1633769312056},{"_id":"source/_posts/Linux执行history命令显示命令执行时间.md","hash":"8f944317f1de015f40ae5763347acefd588b36cc","modified":1633769312057},{"_id":"source/_posts/Mac下使用rz、sz远程上传、下载.md","hash":"ea3e61b401c22bcfe39ff48bda0e7d305ec1fb8e","modified":1633769312057},{"_id":"source/_posts/Mint-ui-infinite-scroll解决重复加载.md","hash":"9fa396df545be0c76e97ea8d714ad50bab65de70","modified":1633769312059},{"_id":"source/_posts/Mac终端命令大全.md","hash":"2419ba73ba8b1d27bd8fbe1213d60cf85f913682","modified":1633769312058},{"_id":"source/_posts/MongoDB导入与导出.md","hash":"283de55597463324d1a2050a4f783025c3232229","modified":1633769312059},{"_id":"source/_posts/VSCode快捷键Mac.md","hash":"ea9a2b5c77e7d7c17e10476a2857b85075af7769","modified":1633769312060},{"_id":"source/_posts/Vuejs-Element监听-window-resize-el-menu响应式显示.md","hash":"a350decf0b4a6e934f00de565e31bff043783e0e","modified":1633769312061},{"_id":"source/_posts/csdn-blog.md","hash":"d634d2ea4fa0af7060fa3c7c062c267b6ac0f053","modified":1633769312061},{"_id":"source/_posts/chart力导图node节点图片代替.md","hash":"f91bf1e1bf322a96aba217be3edc7227692ea0ba","modified":1633769312061},{"_id":"source/_posts/css划圆形进度条的demo.md","hash":"49791a6c1c70255669c5fb5bf826ce25d7f383bb","modified":1633769312062},{"_id":"source/_posts/css布局两边固定中间自适应方法集.md","hash":"580a1e0b7dcab2e66bdf652ad5757182fffe29b5","modified":1633769312063},{"_id":"source/_posts/css常见的规范标准.md","hash":"18aa2f2b098012a992e821fafb0d61926859cc87","modified":1633769312064},{"_id":"source/_posts/daterange设置上下7天选择区间.md","hash":"1698c0420bd6787ba29948814386d36e1d541d3f","modified":1633769312064},{"_id":"source/_posts/el-input在vue中优雅实现禁止输入特殊字符.md","hash":"fba9b5025e4173bd1c5030e459c3ca894bd186c5","modified":1633769312065},{"_id":"source/_posts/el-time-picker自定义选择大于当前时间限制.md","hash":"df963037e0e28d79fb03a1ef923aa982c7d60719","modified":1633769312066},{"_id":"source/_posts/git中配置别名git.md","hash":"e62786c2d245fece188ed8d214728eea6004bd32","modified":1633769312066},{"_id":"source/_posts/git分支上删除某次提交.md","hash":"52291f2f6c47c6805b013db0247092afce3ad1ef","modified":1633769312067},{"_id":"source/_posts/git常用指令大全.md","hash":"7741a588dc83692cd909831c43cb54f8f3ceadea","modified":1633769312067},{"_id":"source/_posts/git撤销已经push到远端的commit.md","hash":"b270bfe781de5d0e05f29c7ee52cf1b21dab21fe","modified":1633769312068},{"_id":"source/_posts/javascript-eval-函数作用.md","hash":"202d22fc6e1fcbc1d74d9111be0f0c67c6193407","modified":1633769312069},{"_id":"source/_posts/jd商品hover过光.md","hash":"8eddf2f640889e514096e97c8fda3fda749d3afc","modified":1633769312069},{"_id":"source/_posts/jenkins-docker-github-nginx前端实现自动化部署.md","hash":"d6d36fb6d34bcb8315c6581389909a875c961bc6","modified":1633769312070},{"_id":"source/_posts/js事件委托.md","hash":"989c56fe6e7a369a73874f19c72277779ee51555","modified":1633769312071},{"_id":"source/_posts/js原生方法实现react开发模式与组件化包装.md","hash":"663ef8075e3a63ae1e65f49177bc2b28639b414f","modified":1633769312072},{"_id":"source/_posts/markdown-first.md","hash":"ca9484baaabdb8686efccfa04e31d2d59eb963db","modified":1633769312073},{"_id":"source/_posts/nodejs中常见的跨域处理.md","hash":"b82278c30fbabb1d53ff59a297b84dc6d0c06945","modified":1633769312074},{"_id":"source/_posts/react-antd-mongodb-express实现增删查改.md","hash":"be4a55658346901544298e9c3969fceb5137c5d9","modified":1633769312075},{"_id":"source/_posts/vue-cli项目有关于refresh-token、access-token过期失效刷新的处理.md","hash":"aa25420abb022c150e6ee420d2851f40ffd4b2a2","modified":1633769312075},{"_id":"source/_posts/vue-element-实现支持按周切换的日历.md","hash":"7c257efec2c9f8d274fc6e24f96a3d236bc3bfd6","modified":1633769312076},{"_id":"source/_posts/vue-quill-editor富文本内容在页面中样式丢失.md","hash":"0f1d8335c780674a046633b00f3e85580b4c6768","modified":1633769312077},{"_id":"source/_posts/vue-quill-editor富文本编辑器实现图片插入七牛云上传.md","hash":"bb8a70f3a51a6f4b367c2de42967da570ab4db96","modified":1633769312078},{"_id":"source/_posts/vue中-keyup-enter-native输入法的回车与消息发送快捷键回车的冲突解决方法.md","hash":"5564c02593aca8acb34a985b44ae90bc2d971cfe","modified":1633769312079},{"_id":"source/_posts/vue中audio实现微信语音播放动画.md","hash":"cc6062452161c3303d2f8e1d33e199a36e3b33b0","modified":1633769312080},{"_id":"source/_posts/vue中audio动态绑定src不能播放.md","hash":"781f319e9c23240147c0e3a992b420a3d987c221","modified":1633769312079},{"_id":"source/_posts/datetime限制日期时间范围.md","hash":"1836c0a9958bde5126d8ccc895eea09a8bbfe232","modified":1633769312065},{"_id":"source/_posts/vue中实现图片上传添加自定义水印并下载.md","hash":"76fef8883a1351cca10e6e3f4972c8afc6e62175","modified":1633769312080},{"_id":"source/_posts/vue自定义抽屉组件.md","hash":"506930226d0083d4fc572a4086cb90692ce35312","modified":1633769312081},{"_id":"source/_posts/vue项目按需使用keep-alive.md","hash":"b1f8ad31d637defabb39ebb0d4e41050677a149e","modified":1633769312081},{"_id":"source/_posts/上传文件与文件夹进度条.md","hash":"b175b1b0e6b695bfa2ebf7b1a3a03f2b74dda3ff","modified":1633769312082},{"_id":"source/_posts/下删除一个或多个image及container.md","hash":"f0d3c4bb3463b987aa5b46c9f5dd0b6c8b95d91f","modified":1633769312083},{"_id":"source/_posts/代码注释各种图像.md","hash":"e280b70822e152f396a3149b52e070895acb164a","modified":1633769312084},{"_id":"source/_posts/使用vue中mixin制作一个公用el-table组件.md","hash":"6f220c5f00d94305b0ea305a115431afe5169679","modified":1633769312084},{"_id":"source/_posts/关于js中构造函数手写return的影响.md","hash":"eb86878ed403b4227396794d65d8bc6b2ffba98b","modified":1633769312085},{"_id":"source/_posts/前端js综合经典面试题.md","hash":"c41d9356907d9bc54c60bc4c29f8393034de5279","modified":1633769312085},{"_id":"source/_posts/前端库2018总结.md","hash":"ba0de833cb2d91539413714373652ca211b5c094","modified":1633769312086},{"_id":"themes/indigo/.git/HEAD","hash":"da237e0de55301608e7c572e119ab5c4e43c0e85","modified":1557563538079},{"_id":"themes/indigo/.git/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1557562479549},{"_id":"source/_posts/多个el-select共用一个options且一个option只能用一次.md","hash":"6c30c4d8a5e1067b3ae26c0384237dec3bfb97d7","modified":1633769312087},{"_id":"source/_posts/原生js实现redux中getState-subscribe-listener-dispatch函数.md","hash":"c339f46057874f4ff54794bfd3782720469c7531","modified":1633769312086},{"_id":"source/_posts/小程序中优雅的获取手机号.md","hash":"a9932ace5f6f15be9d0f3dbbaa71c982da768091","modified":1633769312088},{"_id":"source/_posts/常见js中易错小题介绍.md","hash":"0d135a1912e670b2bca2362d0deb8f97f0cebb06","modified":1633769312088},{"_id":"source/_posts/微信支付当前页面的URL未注册问题-单页面.md","hash":"05c7ef2b767d8985c6e35f167df98f64b82fe62b","modified":1633769312090},{"_id":"source/_posts/怎么使用docker运行nuxt项目.md","hash":"8d91f82c4456e4fb2f26dbf9b61d3ba6f5104cb2","modified":1633769312091},{"_id":"source/_posts/有关前端js中this指向的问题笔记.md","hash":"f47569378e562a555fae5a16eacd559b9d2b55af","modified":1633769312092},{"_id":"source/_posts/服务端渲染添加多个swiper.md","hash":"2cf6cf8e336fcdb57a06c8f8fe1d6c8fd680aee7","modified":1633769312093},{"_id":"source/_posts/怎么在npm官网上传自己的包.md","hash":"c48ec64764397414c3115120cd121ebcce21f6fb","modified":1633769312091},{"_id":"source/_posts/浅谈js中函数的继承方式.md","hash":"84872170a76c617c79fb8e219c2507e779aae6fb","modified":1633769312093},{"_id":"source/_posts/深入理解js中防抖跟截流的区别.md","hash":"1f368018b55d036ae9fe1103ac952d2aa0b4374e","modified":1633769312094},{"_id":"source/_posts/点击收起部分隐藏.md","hash":"a6bd11b34c2aff40ed53a6026f01293d19b98d2c","modified":1633769312094},{"_id":"source/_posts/解决iOS12及一下弹框滚动会带动body内容滑动.md","hash":"c204c799d205c2dccb4db14d655f597225137685","modified":1633769312096},{"_id":"source/_posts/解决vscode中js文件提示typescript语法报错.md","hash":"5424d6d821d22adc868be3718a11f2390b1c3156","modified":1633769312096},{"_id":"source/_posts/解决vue中移动端ios键盘收起页面不归位问题.md","hash":"098f9a2c5ded3ae460e013a69d2776b0a93a4cff","modified":1633769312097},{"_id":"source/_posts/面试题-1-2-3-map-parseInt-解析.md","hash":"3c92df99a3c08399f4c208c060ec11ae540d917a","modified":1633769312097},{"_id":"source/_posts/常见的-eslintrc-js配置及rules说明.md","hash":"da7247e2d79ea50d58c9e967f0470095055d03e4","modified":1633769312089},{"_id":"source/images/WechatIMG27.png","hash":"30a43d2bac9688daf57449f5de6f07137529069c","modified":1633769312155},{"_id":"source/images/wIQDW7wiZ8.gif","hash":"0f42d2498b7a6646964fb5d93af523cbfc1e3036","modified":1633769312155},{"_id":"source/images/zKX0PnVPvt.gif","hash":"52c64d15c810a723426a60fd2237b9a9a9e7cf55","modified":1633769312156},{"_id":"themes/indigo/.git/hooks/applypatch-msg.sample","hash":"4de88eb95a5e93fd27e78b5fb3b5231a8d8917dd","modified":1557562479550},{"_id":"themes/indigo/.git/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1557562479549},{"_id":"themes/indigo/.git/hooks/fsmonitor-watchman.sample","hash":"f7c0aa40cb0d620ff0bca3efe3521ec79e5d7156","modified":1557562479550},{"_id":"themes/indigo/.git/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1557562479551},{"_id":"themes/indigo/.git/hooks/pre-applypatch.sample","hash":"f208287c1a92525de9f5462e905a9d31de1e2d75","modified":1557562479552},{"_id":"themes/indigo/.git/hooks/pre-commit.sample","hash":"33729ad4ce51acda35094e581e4088f3167a0af8","modified":1557562479550},{"_id":"themes/indigo/.git/hooks/pre-push.sample","hash":"5c8518bfd1d1d3d2c1a7194994c0a16d8a313a41","modified":1557562479552},{"_id":"themes/indigo/.git/hooks/pre-rebase.sample","hash":"288efdc0027db4cfd8b7c47c4aeddba09b6ded12","modified":1557562479550},{"_id":"themes/indigo/.git/hooks/pre-receive.sample","hash":"705a17d259e7896f0082fe2e9f2c0c3b127be5ac","modified":1557562479551},{"_id":"themes/indigo/.git/hooks/prepare-commit-msg.sample","hash":"2584806ba147152ae005cb675aa4f01d5d068456","modified":1557562479551},{"_id":"themes/indigo/.git/hooks/update.sample","hash":"e729cd61b27c128951d139de8e7c63d1a3758dde","modified":1557562479552},{"_id":"themes/indigo/.git/logs/HEAD","hash":"9492e56c47547014c610f4414e00754d0d69104f","modified":1557563538079},{"_id":"themes/indigo/.git/info/exclude","hash":"bb5a85730dcf100facee799c05cc4f6affec0745","modified":1557562479548},{"_id":"themes/indigo/layout/_partial/after-footer.ejs","hash":"9ac30b9439fab69973cf4722dbf2945a18fd3804","modified":1557563538047},{"_id":"themes/indigo/layout/_partial/archive.ejs","hash":"55cd81ef9183426d6d99fd91550fce0a9cc92aa0","modified":1557563538048},{"_id":"themes/indigo/layout/_partial/footer.ejs","hash":"e0ae638e6271d5d41508436869c6a5e162c85ef5","modified":1557567073953},{"_id":"themes/indigo/layout/_partial/head.ejs","hash":"02a95a88774cc50dbcc32242b6c8ac7e9d9028bb","modified":1557563538048},{"_id":"themes/indigo/layout/_partial/header.ejs","hash":"6156bf20791e46fc1c5872113276c1c1f5c13773","modified":1557563538049},{"_id":"themes/indigo/layout/_partial/index-item.ejs","hash":"ec7b3ec79bbbead9c7e43e2e6c6b5c8bef509410","modified":1557563538049},{"_id":"themes/indigo/layout/_partial/loading.ejs","hash":"bc4cb19b20de55a0332647f4dca9684184383685","modified":1557562702507},{"_id":"themes/indigo/layout/_partial/menu.ejs","hash":"d39afaad6b0dd2a3ae27e6db3e9a6cd6014622fa","modified":1557563538049},{"_id":"themes/indigo/layout/_partial/paginator.ejs","hash":"dc27242927890f130a64400596b9b7ad5fca8972","modified":1557563538049},{"_id":"themes/indigo/layout/_partial/post.ejs","hash":"a87d9b0485b3bf4cdfdad890e5974c43dbaa8240","modified":1557563538052},{"_id":"themes/indigo/layout/_partial/script.ejs","hash":"7e06d1c3ecf964a0a31e811d2c4935e084c6ad5c","modified":1557563538055},{"_id":"themes/indigo/layout/_partial/search.ejs","hash":"c2091c621b5480ef1e69d72027028cec8e929892","modified":1557563538055},{"_id":"themes/indigo/layout/_partial/tags-bar.ejs","hash":"19eff4876d31080a427644f7a43fe172d0c008c6","modified":1557563538056},{"_id":"themes/indigo/source/css/style.less","hash":"f22d4146e0bdb4485d33f20080c67ba05724afea","modified":1557563538076},{"_id":"themes/indigo/source/img/.DS_Store","hash":"3e3c181295055e11790a307e930b4af65449a899","modified":1585061823324},{"_id":"themes/indigo/source/img/alipay.jpg","hash":"6054d9ed2ca7cd1f645b729e05632134467d4daa","modified":1557562702544},{"_id":"themes/indigo/source/img/avatar.jpg","hash":"62a4893b1a32e997dcdb6e467b10559df75221e2","modified":1557563538076},{"_id":"themes/indigo/source/img/brand.jpg","hash":"0e237f1b433851c156e1f1cdaeb044054b3b9879","modified":1557562702545},{"_id":"themes/indigo/source/img/cc.png","hash":"ebce75a62b40976a72d43f0bd937d859ac24d87c","modified":1557562702545},{"_id":"themes/indigo/source/img/img-err.png","hash":"23a63ea26eb3c1d5e677d9883cf36cc1a1a1228b","modified":1557562702545},{"_id":"themes/indigo/source/img/img-loading.png","hash":"a9cd5cd11866824f31e3d1c5e23badfeb3f73031","modified":1557562702545},{"_id":"themes/indigo/source/img/wechat.jpg","hash":"ef069cc9e80c7553fd60589b0727bbbf8c6de372","modified":1557562702546},{"_id":"themes/indigo/source/js/main.js","hash":"300b2e963683ced162e28afcd24ffc970fc23ac2","modified":1557563538077},{"_id":"themes/indigo/source/js/main.min.js","hash":"8acf4480f8ab859423b8926b9b790c67b5a77276","modified":1557563538077},{"_id":"themes/indigo/source/js/search.js","hash":"a1de7e7a2ef8330ebcd9f3a7a4622b3bac44e4f3","modified":1557563538077},{"_id":"themes/indigo/source/js/search.min.js","hash":"a8a450bb8b1ca9ad577052addcbd3393f1af6c6a","modified":1557563538078},{"_id":"source/_posts/原生js实现点击复制文本.md","hash":"49cec68b57ba3467b753ec8bf59aca226d3a537f","modified":1633769312087},{"_id":"source/_posts/在Linux服务器上部署vue静态项目.md","hash":"167cd1acdc72aa0ace26e2ab296f29749d052e40","modified":1633769312087},{"_id":"themes/indigo/.git/objects/pack/pack-b3df9caa2fa7400388c221d55e996c7493b79212.idx","hash":"76f592d42e91f0b9e434b91e18de6973bece426b","modified":1557562702489},{"_id":"themes/indigo/layout/_partial/plugins/baidu.ejs","hash":"e44d526029f122e9c2c74f3a647c35002c818cbe","modified":1557563538050},{"_id":"themes/indigo/layout/_partial/plugins/dynamic-title.ejs","hash":"23c101d45911eb0846533aaa2d409c43aa5e899a","modified":1557563538050},{"_id":"themes/indigo/layout/_partial/plugins/disqus.ejs","hash":"4a0c01e4195f685f9825fcd016d01249dbdd52ca","modified":1557563538050},{"_id":"themes/indigo/layout/_partial/plugins/gitalk.ejs","hash":"bcf792a5633151fd999319fd91cf477e6860ae9c","modified":1557563538050},{"_id":"themes/indigo/layout/_partial/plugins/gitment.ejs","hash":"5723d507eca4390e8e5d18c0770e7953b8c22f5a","modified":1557563538050},{"_id":"themes/indigo/layout/_partial/plugins/google-analytics.ejs","hash":"a947f4076b54b48d4df5baf2d5b3c39b632c7576","modified":1557563538051},{"_id":"themes/indigo/layout/_partial/plugins/hyper-comments.ejs","hash":"e5a83acc7c2e385b0c9abf428e86e8fdfd3a5202","modified":1557563538051},{"_id":"themes/indigo/layout/_partial/plugins/mathjax.ejs","hash":"ea603a057196de53bd6afab1fddb93d11f27eb81","modified":1557563538051},{"_id":"themes/indigo/layout/_partial/plugins/page-visit.ejs","hash":"2decb77bf3c1a064ea6ce1d4e78892c434d9c884","modified":1557563538051},{"_id":"themes/indigo/layout/_partial/plugins/tajs.ejs","hash":"97b48fe10be1c71d4ff25ccec3bd92d97466c9c5","modified":1557563538051},{"_id":"themes/indigo/layout/_partial/plugins/site-visit.ejs","hash":"8fbd0910828f1ab6eba728bdecc9811d623baae2","modified":1557563538051},{"_id":"themes/indigo/layout/_partial/plugins/uyan.ejs","hash":"e370bd04ea5cf1c83e0c20516aff7ba3ca8b2d0b","modified":1557563538052},{"_id":"themes/indigo/layout/_partial/post/category.ejs","hash":"c7476165721a3a5e34d00d8c5c07e1e5474cd800","modified":1557562702511},{"_id":"themes/indigo/layout/_partial/plugins/valine.ejs","hash":"a976ca36bd09aeb2902bf94fcc7a59975ea25148","modified":1557563538052},{"_id":"themes/indigo/layout/_partial/post/comment.ejs","hash":"21530a1bc362d286d08dbce0baf37d09d7c58c92","modified":1557563538052},{"_id":"themes/indigo/layout/_partial/post/copyright.ejs","hash":"5305ed30ee35cf50f87656737d0ffe85f5bfc16b","modified":1557563538053},{"_id":"themes/indigo/layout/_partial/post/head-meta.ejs","hash":"b0c680ce5b8aaf461a6731b1ff1287bd140c168a","modified":1557562702513},{"_id":"themes/indigo/layout/_partial/post/date.ejs","hash":"ea85b46e12d3b9c3612eef7aa76289a663fbc096","modified":1557563538053},{"_id":"themes/indigo/layout/_partial/post/nav.ejs","hash":"11e7d504f7c7a3c4c052da13cfa8ea4862c9383e","modified":1557563538053},{"_id":"themes/indigo/layout/_partial/post/reward.ejs","hash":"23719e09689b3afbb19214c6603eb02f896cb9ba","modified":1557563538054},{"_id":"themes/indigo/layout/_partial/post/reward-btn.ejs","hash":"41c242fe3159dc68cec8dd00ab6d2663f5a51179","modified":1557563538053},{"_id":"themes/indigo/layout/_partial/post/share-fab.ejs","hash":"93482ad7d1e01b966f5ee1c5d12b88564e02b349","modified":1557563538054},{"_id":"themes/indigo/layout/_partial/post/share.ejs","hash":"8df0d7bf6f8e106cdbdac2dd10a97367aa0695f8","modified":1557563538054},{"_id":"themes/indigo/layout/_partial/post/tag.ejs","hash":"b3dc38652c4a018a37418136478dcd522fc49f79","modified":1557563538054},{"_id":"themes/indigo/layout/_partial/post/toc.ejs","hash":"ad287a70724eb7cd8cd2a03a45b68032ee99973d","modified":1557563538055},{"_id":"themes/indigo/layout/_partial/post/title.ejs","hash":"062d56cb88ae2be3a6616b911d4ebeffcbfe3cff","modified":1557562702514},{"_id":"themes/indigo/layout/_partial/post/updated.ejs","hash":"5caa71745aa340ce57938a930f3b898ee7518d74","modified":1557563538055},{"_id":"themes/indigo/source/css/_partial/archives.less","hash":"ba481636256f2165933cb654d40833ab5eb47312","modified":1633946015290},{"_id":"themes/indigo/source/css/_partial/article.less","hash":"d476cd3537bcd8a02d055cc223f5c805b8638cc2","modified":1557563538060},{"_id":"themes/indigo/source/css/_partial/gotop.less","hash":"b7db31b9bc563c10b9e3cf3e6d9cfddfeb3e805a","modified":1557562702518},{"_id":"themes/indigo/source/css/_partial/header.less","hash":"b99984951494c28063d5a1904a15c8716e79f51a","modified":1567430597647},{"_id":"themes/indigo/source/css/_partial/highlight.less","hash":"58492b7cdb45fe09b026b2f34e8ae69c2ddb8228","modified":1557563538061},{"_id":"themes/indigo/source/css/_partial/layout.less","hash":"e6daa418f6c616a21ed902b5e47aff121962e2cd","modified":1567433061725},{"_id":"themes/indigo/source/css/_partial/loading.less","hash":"f9d06a1e24fb4857fd18d7a0bfbb3a0ab2d1c742","modified":1557563538062},{"_id":"themes/indigo/source/css/_partial/page.less","hash":"e92ccb53e6ac73a51498c6a9672db9d0d2bc7f1a","modified":1557563538062},{"_id":"themes/indigo/source/css/_partial/postlist.less","hash":"1c041bf91106808e5480c60d9ece45431bb503b3","modified":1557563538063},{"_id":"themes/indigo/source/css/_partial/reward.less","hash":"4857f90bb57fc22ca3f942d8934d86d5e9e82c1e","modified":1557563538063},{"_id":"themes/indigo/source/css/_partial/roboto.less","hash":"2e0469ed8161d5672d903ca1a8027cd65fe007f1","modified":1557562702520},{"_id":"themes/indigo/source/css/_partial/search.less","hash":"1d6641ae7568a0153d24beba9fd9704d2b155f6c","modified":1557563538063},{"_id":"themes/indigo/source/css/_partial/share.less","hash":"27d80bcc96a53dd1e7eaa9a7d746e4b212357302","modified":1557563538064},{"_id":"themes/indigo/source/css/_partial/tags.less","hash":"959f4373fda6e45f6a4041a995ed3ea8a05a5170","modified":1557563538064},{"_id":"themes/indigo/source/css/_partial/variable.less","hash":"d8b46855cee5dd37a5e9a3940d0a50cd4ed892a7","modified":1563239100721},{"_id":"themes/indigo/source/css/_partial/waves.less","hash":"77bfd0b373b0469eb0176167fb076ccda4edf2a7","modified":1557563538065},{"_id":"themes/indigo/source/css/_plugin/valine.less","hash":"ddbb7647d83f732f9b0d5d817d40a748006949cc","modified":1557563538065},{"_id":"themes/indigo/source/img/wechat.png","hash":"0516cba25b21f3f4ef8aec79974142d784821869","modified":1585060425479},{"_id":"themes/indigo/.git/refs/heads/card","hash":"215cf3cc5ee9a6265fb8b0259977357fe8d4fdd0","modified":1557562702499},{"_id":"themes/indigo/source/img/alipay.png","hash":"e8769b9edc4140587c92329d4548eace1cc50d85","modified":1585060329627},{"_id":"themes/indigo/source/css/_partial/lightbox.less","hash":"9b961eb1d70e7658f42cf2ca895fa5e35a6b6541","modified":1557563538062},{"_id":"themes/indigo/.git/refs/heads/master","hash":"a84af794bb0b8c69d6c32c87c06cd270f88874fb","modified":1557563498085},{"_id":"themes/indigo/.git/refs/remotes/origin/HEAD","hash":"7f141be72288af81f8e55d94df5da3f87101e8f1","modified":1557562702499},{"_id":"themes/indigo/.git/logs/refs/heads/card","hash":"62e8963da880ef52a1829ced2152d37183c0bea3","modified":1557562702500},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Bold.eot","hash":"a76cd602f5188b9fbd4ba7443dcb9c064e3dbf10","modified":1557562702532},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Bold.woff2","hash":"933b866d09c2b087707a98dab64b3888865eeb96","modified":1557562702534},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Light.eot","hash":"42fe156996197e5eb0c0264c5d1bb3b4681f4595","modified":1557562702534},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Light.woff2","hash":"bbdc28b887400fcb340b504ec2904993af42a5d7","modified":1557562702536},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Medium.eot","hash":"1517f4b6e1c5d0e5198f937557253aac8fab0416","modified":1557562702536},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Regular.eot","hash":"77ae3e980ec03863ebe2587a8ef9ddfd06941db0","modified":1557562702539},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Medium.woff2","hash":"6cc1b73571af9e827c4e7e91418f476703cd4c4b","modified":1557562702538},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Regular.woff","hash":"74734dde8d94e7268170f9b994dedfbdcb5b3a15","modified":1557562702540},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Regular.woff2","hash":"ed1558b0541f5e01ce48c7db1588371b990eec19","modified":1557562702541},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Thin.woff2","hash":"2449e3dac5ddb7c3da8bb07450493b62d052758c","modified":1557562702543},{"_id":"themes/indigo/source/css/_partial/fontawesome.less","hash":"ca30b732d2efbb0cd55a272ecdabc97f895aee78","modified":1557563538061},{"_id":"themes/indigo/.git/logs/refs/heads/master","hash":"5259d85d379ecfc5997753f8576bcb1e5a1ee838","modified":1557563498086},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Bold.woff","hash":"ee99cd87a59a9a5d4092c83232bb3eec67547425","modified":1557562702533},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Light.woff","hash":"6300f659be9e834ab263efe2fb3c581d48b1e7b2","modified":1557562702536},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Medium.woff","hash":"d45f84922131364989ad6578c7a06b6b4fc22c34","modified":1557562702538},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Thin.eot","hash":"0790a51a848dbe7292c98f9d0459218bf1a8ffdd","modified":1557562702541},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Thin.woff","hash":"fbc3e71d456c96667d8082ab910e3946ef89240b","modified":1557562702543},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1557563538076},{"_id":"themes/indigo/.git/logs/refs/remotes/origin/HEAD","hash":"62e8963da880ef52a1829ced2152d37183c0bea3","modified":1557562702498},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1557563538075},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1557563538068},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1557563538074},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Bold.ttf","hash":"47327df0f35e7cd7c8645874897a7449697544ae","modified":1557562702533},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Light.ttf","hash":"e321c183e2b75ee19813892b7bac8d7c411cb88a","modified":1557562702535},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Medium.ttf","hash":"6060ca726b9760b76f7c347dce9d2fa1fe42ec92","modified":1557562702537},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Regular.ttf","hash":"824b5480c977a8166e177e5357d13164ccc45f47","modified":1557562702540},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Thin.ttf","hash":"173ed64528b4d010a76d8d38deb1d7e7eed58eda","modified":1557562702542},{"_id":"themes/indigo/source/css/fonts/fontawesome/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1557563538066},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.svg","hash":"98a8aa5cf7d62c2eff5f07ede8d844b874ef06ed","modified":1557563538072},{"_id":"source/images/2019-01-07 20-49-30.2019-01-07 20_50_06.gif","hash":"11155ec5282485a228c8249996f24407f7d2cf13","modified":1633769312151},{"_id":"source/images/2019-01-07 20-14-33.2019-01-07 20_15_33.gif","hash":"7fe45fa4c115e9827d88d819d3fec236de37f6cc","modified":1633769312145},{"_id":"themes/indigo/.git/objects/pack/pack-b3df9caa2fa7400388c221d55e996c7493b79212.pack","hash":"436946071396f1f0ec59fdfad57ed859a917796a","modified":1557562702489},{"_id":"source/images/2018-12-28 16-39-06.2018-12-28 16_41_51.gif","hash":"d45f53297e324a74c72d229411db875c4472f831","modified":1633769312129},{"_id":"public/atom.xml","hash":"35a25c8de82e87dbb4de36ebd54d46d324ce5af1","modified":1633950569828},{"_id":"public/content.json","hash":"1b2f0b3b4cb9db2a000f18a111fc8a1a84ac9b80","modified":1633950569828},{"_id":"public/categories/index.html","hash":"87b8da933d1bed4d45298afa303e4e5094ad87ce","modified":1633950571939},{"_id":"public/2019/12/06/Engineer该有的姿态/index.html","hash":"b53568a582de962a38bcdbd83f924279d21b53eb","modified":1633950571939},{"_id":"public/2019/09/11/解决vscode中js文件提示typescript语法报错/index.html","hash":"4bd3774ed0d7519dbea96412520036d8f9746342","modified":1633950572826},{"_id":"public/2019/09/17/Linux执行history命令显示命令执行时间/index.html","hash":"4de82351a9db30596aa9537e1c957ea0b797ab6f","modified":1633950572827},{"_id":"public/2019/08/20/vue-quill-editor富文本内容在页面中样式丢失/index.html","hash":"43cea695697bcd39920a2aabb376ffdaa53c7d5f","modified":1633950572840},{"_id":"public/2019/07/16/常见js中易错小题介绍/index.html","hash":"d96db7bbb8a7efa594acb1981da1dc0d768411d4","modified":1633950572840},{"_id":"public/tags/index.html","hash":"d505a095dee47121d3a194e07a4afe9727d6cfe7","modified":1633950572840},{"_id":"public/2021/07/15/深入理解js中防抖跟截流的区别/index.html","hash":"993f8b764dae9b5d976c160b5cf2404b68d6b054","modified":1633950572840},{"_id":"public/2020/07/06/jenkins-docker-github-nginx前端实现自动化部署/index.html","hash":"1af50ae53f85737358218d5331171c9f132d8614","modified":1633950572840},{"_id":"public/2020/06/11/daterange设置上下7天选择区间/index.html","hash":"4f6f345ce915122327055dc18556bbd176f027a8","modified":1633950572840},{"_id":"public/2020/03/24/解决vue中移动端ios键盘收起页面不归位问题/index.html","hash":"69865478b836c5736647b37b3f97c85cf68d9eb1","modified":1633950572840},{"_id":"public/2020/03/11/el-time-picker自定义选择大于当前时间限制/index.html","hash":"222f876526bcf35715f9c1f3edd48d3551c1c53f","modified":1633950572840},{"_id":"public/2020/03/01/原生js实现redux中getState-subscribe-listener-dispatch函数/index.html","hash":"e5224de41a10d86a88121c7762eead97a662b1e8","modified":1633950572840},{"_id":"public/2020/02/25/js原生方法实现react开发模式与组件化包装/index.html","hash":"3e65fd975d4fdeb753fd89d127d6591193f40a7b","modified":1633950572840},{"_id":"public/2020/02/23/nodejs中常见的跨域处理/index.html","hash":"5e9595ef77adb26f0f24bbf95569b4b20bf78f58","modified":1633950572840},{"_id":"public/2020/01/08/小程序中优雅的获取手机号/index.html","hash":"e68c629fdccbfd31d29b26245da0c44f44669e48","modified":1633950572840},{"_id":"public/2020/01/07/怎么使用docker运行nuxt项目/index.html","hash":"56fba64c2b30a7a0cf0a3391d1dc0ef55a276d30","modified":1633950572841},{"_id":"public/2019/11/20/解决iOS12及一下弹框滚动会带动body内容滑动/index.html","hash":"a50db3db307177003968ed1121f0380e7f4fea76","modified":1633950572841},{"_id":"public/2019/11/20/vue中实现图片上传添加自定义水印并下载/index.html","hash":"b68095ae2955976740d6e7582cffd2b56f591bae","modified":1633950572841},{"_id":"public/2019/10/21/多个el-select共用一个options且一个option只能用一次/index.html","hash":"4b9f4acb30c3ec1ef7f1566c0a18511b5f3f5cf0","modified":1633950572841},{"_id":"public/2019/10/15/git分支上删除某次提交/index.html","hash":"560230c874083a8a64066f2442e955afbd2b89fe","modified":1633950572841},{"_id":"public/2019/09/11/在Linux服务器上部署vue静态项目/index.html","hash":"61afb25328aaa5d46bd197bddabc5b6517d48aa3","modified":1633950572841},{"_id":"public/2019/09/09/Axios无法在Safari浏览器及微信中打开/index.html","hash":"8796d06219498dd8b80036887ab3a822c8614499","modified":1633950572841},{"_id":"public/2019/09/09/vue中audio实现微信语音播放动画/index.html","hash":"40132957a0d3b88554569f65e9ec189bea5d0373","modified":1633950572841},{"_id":"public/2019/09/05/vue中audio动态绑定src不能播放/index.html","hash":"4d327e45a3a87b6e268c3874ce09038de4589be8","modified":1633950572841},{"_id":"public/2019/09/04/css常见的规范标准/index.html","hash":"f6c9ca10e3253159bff1f49467b9e6eb303c6928","modified":1633950572841},{"_id":"public/2019/08/27/服务端渲染添加多个swiper/index.html","hash":"fabcc181ec2784856e74223dc1bc23bef9954860","modified":1633950572842},{"_id":"public/2019/08/20/git常用指令大全/index.html","hash":"e5d4c3bdb2ef7d6001d35546f58211d4cf6bd417","modified":1633950572844},{"_id":"public/2019/08/15/vue-quill-editor富文本编辑器实现图片插入七牛云上传/index.html","hash":"dbce037ce465a25d8f4b41991e77abc99e7dd32d","modified":1633950572844},{"_id":"public/2019/08/13/微信支付当前页面的URL未注册问题-单页面/index.html","hash":"78ac562a1525d2bfe8cf0536481d6950d28f77ee","modified":1633950572844},{"_id":"public/2019/08/08/vue自定义抽屉组件/index.html","hash":"a9f1e1a05687751812a97ba8b723c7a7cbbccd7d","modified":1633950572844},{"_id":"public/2019/07/16/代码注释各种图像/index.html","hash":"7eeed00a76311f7f478864f9a46cf37ebd20cc1e","modified":1633950572844},{"_id":"public/2019/08/05/原生js实现点击复制文本/index.html","hash":"60453adac29ab4f316edb966314e76200ae453e9","modified":1633950572844},{"_id":"public/2019/07/16/面试题-1-2-3-map-parseInt-解析/index.html","hash":"c93de931407a3d745987f15864b7bee41cbd3cff","modified":1633950572844},{"_id":"public/2019/07/15/前端js综合经典面试题/index.html","hash":"bd66cb5960d7875c759954e04f45d6758e3b5182","modified":1633950572844},{"_id":"public/2019/07/15/关于js中构造函数手写return的影响/index.html","hash":"53be8e71a7870372b25c358a6c11304af09aa902","modified":1633950572844},{"_id":"public/2019/07/09/浅谈js中函数的继承方式/index.html","hash":"fe402e01729eb1de2648a1fe137487075eccaa99","modified":1633950572845},{"_id":"public/2019/07/09/使用vue中mixin制作一个公用el-table组件/index.html","hash":"4decef58ba47629ee9b39f64257902902aa5ea77","modified":1633950572845},{"_id":"public/2019/07/08/git中配置别名git/index.html","hash":"8a3d2d8f017706eb62562c6d92b7ed97bae104d2","modified":1633950572845},{"_id":"public/2019/07/08/有关前端js中this指向的问题笔记/index.html","hash":"c33fdb16343a8e2514991a30dd03b68aa8c1de7e","modified":1633950572845},{"_id":"public/2019/06/21/css布局两边固定中间自适应方法集/index.html","hash":"6994c52a7a07cc4c5764cc9eb898efa43990a5c2","modified":1633950572845},{"_id":"public/2019/05/23/vue项目按需使用keep-alive/index.html","hash":"e315d53aee9fdbdde2b1f9e76e65ee0a6bce9bba","modified":1633950572845},{"_id":"public/2019/05/22/vue-cli项目有关于refresh-token、access-token过期失效刷新的处理/index.html","hash":"54b0e73eab14b5631f7d039749f1aa05f9e84ad9","modified":1633950572845},{"_id":"public/2019/05/13/Mac下使用rz、sz远程上传、下载/index.html","hash":"603aaafd535c9ad645a93d0d408835f7d197150c","modified":1633950572845},{"_id":"public/2019/04/13/上传文件与文件夹进度条/index.html","hash":"4956036b3b7e8cb1bcfdf14cdd076f324ddfad59","modified":1633950572845},{"_id":"public/2019/03/25/datetime限制日期时间范围/index.html","hash":"40b22a9cdee77ef0f2c3917cea1540bd84c9fc81","modified":1633950572845},{"_id":"public/2019/03/14/javascript-eval-函数作用/index.html","hash":"66030d7fb589a59a1d8c8522a827a9b40d61db57","modified":1633950572845},{"_id":"public/2019/02/14/chart力导图node节点图片代替/index.html","hash":"66c8648213853121c9d5ccb4d3aef4acf6d7b94e","modified":1633950572845},{"_id":"public/2019/04/15/el-input在vue中优雅实现禁止输入特殊字符/index.html","hash":"61f577fafbbf623a154418458fb1b0626290e8c7","modified":1633950572845},{"_id":"public/2019/01/22/Mint-ui-infinite-scroll解决重复加载/index.html","hash":"3e85a86f8d45499fe9fc08e72dea9ce47d9036a5","modified":1633950572845},{"_id":"public/2019/01/07/vue-element-实现支持按周切换的日历/index.html","hash":"7efc7483d07e39fb88d0eca4074c6c8d2d1c9ec3","modified":1633950572845},{"_id":"public/2018/10/10/csdn-blog/index.html","hash":"121cb48d4d133f574c044067b9bfdbf1b6e02cf2","modified":1633950572916},{"_id":"public/archives/index.html","hash":"04f17f655e7a896c56da07aba5ca6d1c010f46d0","modified":1633950572916},{"_id":"public/archives/page/2/index.html","hash":"3ed630e04be18c726bdcdec97251f829cc7e9d08","modified":1633950572916},{"_id":"public/archives/page/3/index.html","hash":"ad5143c3b8966bc9200f2c8faa365a81ae499595","modified":1633950572918},{"_id":"public/archives/page/4/index.html","hash":"4ee6225513ec35ddf4ecd6992ee68b37887d4982","modified":1633950572919},{"_id":"public/archives/page/6/index.html","hash":"3e0577a09cf6cba77299389809bde0258c8c4cb1","modified":1633950572920},{"_id":"public/archives/page/7/index.html","hash":"9c46ae48feb88e484daa6da65a851b60bb3c234a","modified":1633950572920},{"_id":"public/archives/2018/index.html","hash":"c20996ed97e2d1006081a46da823f4d1982bc23b","modified":1633950572920},{"_id":"public/archives/2018/page/2/index.html","hash":"2c85d04c4e100608f83e16e0b903884fe48314c3","modified":1633950572920},{"_id":"public/archives/2018/11/index.html","hash":"ac4e2d903cb881e9cfea94067959a53d2b83bbc9","modified":1633950572920},{"_id":"public/archives/2018/12/index.html","hash":"0d21e8845cec7c516d7e27aa542a176dbaaa1746","modified":1633950572920},{"_id":"public/archives/2019/index.html","hash":"491e5189028fbaff2c13ca11460efc9bfb89f6fd","modified":1633950572920},{"_id":"public/archives/2019/page/2/index.html","hash":"8728b2fd66f50c2c8424f1364e700350aa4f2f6d","modified":1633950572920},{"_id":"public/archives/2019/page/4/index.html","hash":"7a07b15c0c029cec06cd187c23afcdc0d11afd30","modified":1633950572920},{"_id":"public/archives/2019/01/index.html","hash":"f45bc085caad0f5dd0a35701466de40e2336b9c4","modified":1633950572920},{"_id":"public/archives/2019/page/3/index.html","hash":"d90a9e29756d44a7a656b5d0b6968aaf856a199b","modified":1633950572920},{"_id":"public/archives/2019/02/index.html","hash":"0dcf316bc5ca42139b34e63a47fa3f9e2f8cab35","modified":1633950572920},{"_id":"public/archives/2019/03/index.html","hash":"d7f6d4e422b789545fbab7884e50257b9cca20aa","modified":1633950572920},{"_id":"public/archives/2019/04/index.html","hash":"503bd5eef01795aef798a372ea2062f133d50aac","modified":1633950572920},{"_id":"public/archives/2019/06/index.html","hash":"41a63db8b4661915d1e673a28f1665979fac42f6","modified":1633950572920},{"_id":"public/archives/2019/05/index.html","hash":"ead549f1c3cc88ee0661011eff9a1736e320f3a2","modified":1633950572920},{"_id":"public/archives/2019/07/index.html","hash":"ed81c35450ddf879e06dccfe650f398bfcd106d2","modified":1633950572920},{"_id":"public/archives/2019/08/index.html","hash":"1f186a0a735a1302275c6ffe63e56a22c2f1479f","modified":1633950572920},{"_id":"public/archives/2019/09/index.html","hash":"5e6dd5a8a38328edfbd1ae6ee4c3d39f5c4bd2b2","modified":1633950572920},{"_id":"public/archives/2019/10/index.html","hash":"a1045b1d8ba7a70259307b1b6c4728e3f9b34c93","modified":1633950572921},{"_id":"public/archives/2019/11/index.html","hash":"73ea4605b66ebab6cbd00693bdf267125625f22a","modified":1633950572921},{"_id":"public/archives/2019/12/index.html","hash":"85586e141160925801a24f0b08a7f85a1611cfed","modified":1633950572924},{"_id":"public/archives/2020/01/index.html","hash":"a202d1ae3c1130f0ceb6494d2f823e5197a49e02","modified":1633950572925},{"_id":"public/archives/2020/02/index.html","hash":"e70b4931e25abbf8db983c948636c401da9f2442","modified":1633950572926},{"_id":"public/archives/2020/03/index.html","hash":"81178ea4197122396ae47336d290b4013cd75035","modified":1633950572926},{"_id":"public/archives/2020/06/index.html","hash":"b3b1c2ea12f984fdd016fae63cd2d5c639fa555b","modified":1633950572926},{"_id":"public/archives/2020/07/index.html","hash":"950bf7130db097fda62354b17a39f2f31d3105fc","modified":1633950572926},{"_id":"public/archives/2021/index.html","hash":"146e1f9ae9eea75ff64ed74ab889d183bdd3fbef","modified":1633950572926},{"_id":"public/archives/2021/07/index.html","hash":"85b5a37c51719c2e4e208d117934432e1fae7584","modified":1633950572926},{"_id":"public/categories/前任Blog-CSDN/index.html","hash":"54a606d3298bc5de66dcf84f7eea4b2aaa6d5345","modified":1633950572926},{"_id":"public/categories/git使用笔记/index.html","hash":"9002deef57495a9918d889bbe04225304141e089","modified":1633950572926},{"_id":"public/categories/jd商品hover过光效果/index.html","hash":"a87ac2067e8332d6415fad3b52de7ec0c8bd9fa5","modified":1633950572926},{"_id":"public/categories/原生js事件委托/index.html","hash":"f066c2e41482708bde4369983446e89e2a4eca88","modified":1633950572926},{"_id":"public/categories/MarkDown学习笔记/index.html","hash":"80bcce5bd7683d2b588846999d9270475e9a031d","modified":1633950572926},{"_id":"public/categories/nodejs后端开发/index.html","hash":"153be3f0482a3004105f72066d4d278ca49dea35","modified":1633950572926},{"_id":"public/archives/2020/index.html","hash":"88a9576f3ef6ac0dd8fc414b0dad4708cf17c6cd","modified":1633950572926},{"_id":"public/2018/12/28/Vuejs-Element监听-window-resize-el-menu响应式显示/index.html","hash":"05d5cf78b5b3b9c1fe6e2c5c78b18067027a911c","modified":1633950572926},{"_id":"public/2018/11/15/下删除一个或多个image及container/index.html","hash":"997c68a64fc7ed23243cc84843fd2805f73fc0ed","modified":1633950572926},{"_id":"public/2018/11/08/常见的-eslintrc-js配置及rules说明/index.html","hash":"598ebacb98534556d8afc3bd412bac351277e2a2","modified":1633950572926},{"_id":"public/2018/11/06/点击收起部分隐藏/index.html","hash":"afaab8a50f4f0be348ba3cc9c6c7fb44abd9e97a","modified":1633950572926},{"_id":"public/2018/10/24/MongoDB导入与导出/index.html","hash":"46a63412f29845f2e5b36caf205c56f0f120308d","modified":1633950572926},{"_id":"public/2018/10/19/css划圆形进度条的demo/index.html","hash":"3be338e01937e655c144925343dca31f519c6b0a","modified":1633950572927},{"_id":"public/2018/10/18/VSCode快捷键Mac/index.html","hash":"757d8b6051ac7ce934e846694c5d644ae6a3cfc1","modified":1633950572927},{"_id":"public/2018/10/18/Mac终端命令大全/index.html","hash":"b0305aa80adc84db460cf90152784db0305aab98","modified":1633950572927},{"_id":"public/2018/10/14/怎么在npm官网上传自己的包/index.html","hash":"d53554a14d5faf73934e167c2f7f6d89437d90c5","modified":1633950572927},{"_id":"public/2018/12/24/vue中-keyup-enter-native输入法的回车与消息发送快捷键回车的冲突解决方法/index.html","hash":"537f2c0ce8f653a82e20db417fa4e0ae8bfc9a72","modified":1633950572927},{"_id":"public/2018/10/12/js事件委托/index.html","hash":"c81c67ab9624e2dda06fc2cf0e8811b598798ad0","modified":1633950572927},{"_id":"public/2018/10/12/jd商品hover过光/index.html","hash":"50182aa98fa9c4909d34b59e73456ccd74f217f3","modified":1633950572927},{"_id":"public/2018/10/10/markdown-first/index.html","hash":"78c4fd86bf75edf17465d54bde00d4ea4346ffcd","modified":1633950572927},{"_id":"public/archives/page/5/index.html","hash":"135ac7834304a1fcf88a930cb2770f3558127c1c","modified":1633950572927},{"_id":"public/archives/2018/10/index.html","hash":"fd743a5fa221a7ea2d319c9c7f27ff9139379c83","modified":1633950572927},{"_id":"public/2018/10/12/git撤销已经push到远端的commit/index.html","hash":"e41a49f82afc811eee160ee91d1ad6f76815671a","modified":1633950572927},{"_id":"public/index.html","hash":"f4210bb107cfb232c07ac899464795f2397f3f33","modified":1633950572927},{"_id":"public/page/2/index.html","hash":"8b266ae23c91bd2de1ae30550f5ee6e82528fc26","modified":1633950572928},{"_id":"public/page/3/index.html","hash":"9d79ec03c2e8b1f25f690c016de949e060e236a9","modified":1633950572928},{"_id":"public/page/5/index.html","hash":"4dda7d723fdb58e40bc1ad345219837fccb9e4c1","modified":1633950572928},{"_id":"public/page/4/index.html","hash":"4ef138e8b424086e536108cbc42c8b687954a7f2","modified":1633950572928},{"_id":"public/page/6/index.html","hash":"9aa6d827f40bb3ef008f512fbcff82f770cef3b1","modified":1633950572928},{"_id":"public/page/7/index.html","hash":"965b611d3914d176c2b4142123db39de87b5ee49","modified":1633950572928},{"_id":"public/tags/axios/index.html","hash":"4cbc43de4395d728314c33daefe1769570fe4488","modified":1633950572928},{"_id":"public/tags/小技巧/index.html","hash":"02f180b1df1784d1fbe4749e4deca5a2f5d90038","modified":1633950572928},{"_id":"public/tags/linux/index.html","hash":"ea83b7534ff3b82014e8d65dd0b2db681b14409f","modified":1633950572928},{"_id":"public/tags/mac/index.html","hash":"7025c474f57e0b798c3f29715a6e9fdd2f5b76ff","modified":1633950572928},{"_id":"public/tags/mongoDB/index.html","hash":"728411de88c8fb38e8abb634f50a247d061ef175","modified":1633950572928},{"_id":"public/tags/vscode/index.html","hash":"0c8ca34324a4c0b8b0d4ff74da6c77a0ab45d229","modified":1633950572928},{"_id":"public/tags/element-ui/index.html","hash":"2637c5401e167455aa795bc701a4341877468983","modified":1633950572928},{"_id":"public/tags/vue/index.html","hash":"e4b530fd01ea93e176f1b3b40ce237aa2cd59c4c","modified":1633950572928},{"_id":"public/tags/vue/page/2/index.html","hash":"61be3f916f8d40cb1c6d73555e6d47c3f0c766b7","modified":1633950572930},{"_id":"public/tags/个人/index.html","hash":"a258e27b4a01ec1b645edf954c17f6ca4ad20a13","modified":1633950572931},{"_id":"public/tags/Mint-ui/index.html","hash":"cd7e9a2b843854673a54dfb33eaa9253b9d61868","modified":1633950572931},{"_id":"public/tags/charts/index.html","hash":"de2cc0f07fdebc7fbebaacf42fc43dff676f7d83","modified":1633950572931},{"_id":"public/tags/css/index.html","hash":"cc0e1513eac1a8cc491836aee80ab40f61129482","modified":1633950572931},{"_id":"public/tags/element/index.html","hash":"2aab9db5c74e8aa88656e369bf4f7658915b7b1e","modified":1633950572931},{"_id":"public/tags/git/index.html","hash":"3958f48d53c9717a60cb39a1827ed2c745197736","modified":1633950572931},{"_id":"public/tags/JavaScript/index.html","hash":"f7ca4fb3f109ffc5dc429f3b7237c7b312dfb1b5","modified":1633950572931},{"_id":"public/tags/HTML/index.html","hash":"b1f3b347d067f165973f5d49e6d349de847f10f3","modified":1633950572931},{"_id":"public/tags/CSS3/index.html","hash":"9d55fc2edab13763871c00e7127d7e56e6ef3dcb","modified":1633950572931},{"_id":"public/tags/nginx/index.html","hash":"68f8cdea012cf1d183ddb30383e049dc5097b1b4","modified":1633950572932},{"_id":"public/tags/docker/index.html","hash":"cdcaf1e96488d46c1aa29ca727e53180381b81f0","modified":1633950572932},{"_id":"public/tags/jenkins/index.html","hash":"245111a6b6501c2285a573af37465074451e8ab1","modified":1633950572932},{"_id":"public/tags/事件/index.html","hash":"d7eec64a51ef9fd082f8eab9f886a1f3f36e27d3","modified":1633950572932},{"_id":"public/tags/Nodejs/index.html","hash":"8dac32633a315a46339ac6c50b89c2a3a6ed577c","modified":1633950572932},{"_id":"public/tags/Angular/index.html","hash":"724f150fe034c4534d48556018613ccec81338f9","modified":1633950572932},{"_id":"public/tags/Angularjs/index.html","hash":"17dd55d9c0a599018071f587f15420df3f83d8d0","modified":1633950572932},{"_id":"public/tags/React/index.html","hash":"fd19c2fb9cbd7a9f12f3106d48fa26cc93814938","modified":1633950572932},{"_id":"public/tags/dva/index.html","hash":"630e1f36737e3fc394c6231588070c85cfad3c52","modified":1633950572932},{"_id":"public/tags/Java/index.html","hash":"adeb5e91cde12c2fe1fdf64f3053326068469985","modified":1633950572932},{"_id":"public/tags/MongoDB/index.html","hash":"68f3bbbebc10bb70864b9e8f0411db1161d583a9","modified":1633950572932},{"_id":"public/tags/bash/index.html","hash":"7dac7cb09644d8f07a884535a463d9bbdecd7a3d","modified":1633950572932},{"_id":"public/tags/CSS2/index.html","hash":"46468eed0ae12872e74139e116228e34380f94a0","modified":1633950572932},{"_id":"public/tags/Git/index.html","hash":"c3e848c2f5d51d730437d459adfe97ad693060b7","modified":1633950572932},{"_id":"public/tags/ES6/index.html","hash":"40acf4af8b82d9d722589aa45d38f085e04d153d","modified":1633950572932},{"_id":"public/tags/Mac/index.html","hash":"2643b73b411491a197f157b11fe9f155c0048e5a","modified":1633950572932},{"_id":"public/tags/react/index.html","hash":"477742d1eb95e39b6c9fc14807f541d1d20ff6f5","modified":1633950572933},{"_id":"public/tags/nodejs/index.html","hash":"775faa9010709f2dc071246aead42f1222dfaee4","modified":1633950572933},{"_id":"public/tags/token/index.html","hash":"125b0597fa3445c4e6599a457e956270fc01498f","modified":1633950572933},{"_id":"public/tags/跨域/index.html","hash":"85fe07d8c05067fb9306f155702bf36e29bbd7e2","modified":1633950572933},{"_id":"public/tags/antd/index.html","hash":"f0183a6c16010aa885a31159ddead327c0287b6f","modified":1633950572933},{"_id":"public/tags/mongodb/index.html","hash":"23416edeaf27a6561b14e9256e948567e2d518ce","modified":1633950572933},{"_id":"public/tags/dvajs/index.html","hash":"1decd494477e9319c09494b239f74c625bf1a370","modified":1633950572933},{"_id":"public/tags/水印/index.html","hash":"6bde310d87d45de5a9e0a790d502982e9350d26e","modified":1633950572933},{"_id":"public/tags/富文本/index.html","hash":"7e4664a7d6bd6324abd78e3ec6d0b4d9ad0962e7","modified":1633950572934},{"_id":"public/tags/progress/index.html","hash":"0eb7d24cfe7fa75d3ddb6afa58b34df6bcb3e7cd","modified":1633950572934},{"_id":"public/tags/材料/index.html","hash":"2c0381b0c802f6ef75331e857b8b2180871ac54c","modified":1633950572934},{"_id":"public/tags/vue-router/index.html","hash":"bad0dabbc8c688b66d9d07f13507ed5c1fe226e9","modified":1633950572934},{"_id":"public/tags/面试题/index.html","hash":"53e8ac53655c881234174276cfa400e4edaea245","modified":1633950572934},{"_id":"public/tags/总结/index.html","hash":"9f8c7db34d6d40c2326938c81b2b02c0f62e46fd","modified":1633950572934},{"_id":"public/tags/小程序/index.html","hash":"2e47dc9dcee1168d3970b18c790a57ed6561764a","modified":1633950572934},{"_id":"public/tags/this/index.html","hash":"cdf0ebb32cb99b821531878c9e368ce631cbcda5","modified":1633950572934},{"_id":"public/tags/微信支付/index.html","hash":"d8c7ffab461009bac1b54c3ce62b413697303be7","modified":1633950572934},{"_id":"public/tags/SSR/index.html","hash":"9e1120c2ac953871ecaf5bc9283b84bc27d82a14","modified":1633950572934},{"_id":"public/tags/Javascript/index.html","hash":"57ed28125ef7b028ceea99f877baad41a46a6eed","modified":1633950572934},{"_id":"public/tags/npm/index.html","hash":"2e5b7a71700354e0966660c828fc7d1d901126ec","modified":1633950572934},{"_id":"public/tags/redux/index.html","hash":"9ecd5a03ea7dc8a684b7a4262a7a867472412e98","modified":1633950572934},{"_id":"public/tags/Vue/index.html","hash":"b1f4781c65ec6dfd27b2a8f9f7d336ce8cf389a5","modified":1633950572934},{"_id":"public/tags/EsLint/index.html","hash":"0ee3504796bcb4f175c1121ff0167c140cc7eb21","modified":1633950572934},{"_id":"public/tags/部署/index.html","hash":"4cf3261e8df290e18bed793b5e0e98ed2ac8cf34","modified":1633950572934},{"_id":"public/2018/12/20/前端库2018总结/index.html","hash":"51401fcbd3720de8ebc9a8d815addb5c26a35701","modified":1633950572934},{"_id":"public/2018/12/10/react-antd-mongodb-express实现增删查改/index.html","hash":"a5f5c9f7112affa5db08e74fca4458f0e2d9ceb2","modified":1633950572934},{"_id":"public/images/WX20181106-205333@2x.png","hash":"ab30d20a6e48e2fa7d3c1074af6f19659ec51ac0","modified":1633950572934},{"_id":"public/images/WX20181106-205401@2x.png","hash":"612c37fa9a23140fbf4e98379fd8c027829cd230","modified":1633950572934},{"_id":"public/img/alipay.jpg","hash":"6054d9ed2ca7cd1f645b729e05632134467d4daa","modified":1633950572935},{"_id":"public/img/avatar.jpg","hash":"62a4893b1a32e997dcdb6e467b10559df75221e2","modified":1633950572935},{"_id":"public/img/brand.jpg","hash":"0e237f1b433851c156e1f1cdaeb044054b3b9879","modified":1633950572935},{"_id":"public/img/cc.png","hash":"ebce75a62b40976a72d43f0bd937d859ac24d87c","modified":1633950572935},{"_id":"public/img/img-err.png","hash":"23a63ea26eb3c1d5e677d9883cf36cc1a1a1228b","modified":1633950572935},{"_id":"public/CNAME","hash":"5a1cd0ea6365986026b414e546a1a7d600c0765b","modified":1633950572935},{"_id":"public/img/img-loading.png","hash":"a9cd5cd11866824f31e3d1c5e23badfeb3f73031","modified":1633950572935},{"_id":"public/img/wechat.jpg","hash":"ef069cc9e80c7553fd60589b0727bbbf8c6de372","modified":1633950572935},{"_id":"public/images/logo.png","hash":"1a6ace377133f14a2b2cd7c48f10369a6bc54b2e","modified":1633950572935},{"_id":"public/css/fonts/roboto/Roboto-Bold.eot","hash":"a76cd602f5188b9fbd4ba7443dcb9c064e3dbf10","modified":1633950572935},{"_id":"public/css/fonts/roboto/Roboto-Bold.woff2","hash":"933b866d09c2b087707a98dab64b3888865eeb96","modified":1633950572935},{"_id":"public/css/fonts/roboto/Roboto-Light.eot","hash":"42fe156996197e5eb0c0264c5d1bb3b4681f4595","modified":1633950572935},{"_id":"public/css/fonts/roboto/Roboto-Light.woff2","hash":"bbdc28b887400fcb340b504ec2904993af42a5d7","modified":1633950572935},{"_id":"public/css/fonts/roboto/Roboto-Medium.eot","hash":"1517f4b6e1c5d0e5198f937557253aac8fab0416","modified":1633950572935},{"_id":"public/css/fonts/roboto/Roboto-Regular.eot","hash":"77ae3e980ec03863ebe2587a8ef9ddfd06941db0","modified":1633950572935},{"_id":"public/css/fonts/roboto/Roboto-Medium.woff2","hash":"6cc1b73571af9e827c4e7e91418f476703cd4c4b","modified":1633950572935},{"_id":"public/css/fonts/roboto/Roboto-Regular.woff","hash":"74734dde8d94e7268170f9b994dedfbdcb5b3a15","modified":1633950572935},{"_id":"public/css/fonts/roboto/Roboto-Regular.woff2","hash":"ed1558b0541f5e01ce48c7db1588371b990eec19","modified":1633950572935},{"_id":"public/css/fonts/roboto/Roboto-Thin.woff2","hash":"2449e3dac5ddb7c3da8bb07450493b62d052758c","modified":1633950572935},{"_id":"public/css/fonts/roboto/Roboto-Bold.woff","hash":"ee99cd87a59a9a5d4092c83232bb3eec67547425","modified":1633950572936},{"_id":"public/css/fonts/roboto/Roboto-Light.woff","hash":"6300f659be9e834ab263efe2fb3c581d48b1e7b2","modified":1633950572936},{"_id":"public/css/fonts/roboto/Roboto-Medium.woff","hash":"d45f84922131364989ad6578c7a06b6b4fc22c34","modified":1633950572936},{"_id":"public/css/fonts/roboto/Roboto-Thin.woff","hash":"fbc3e71d456c96667d8082ab910e3946ef89240b","modified":1633950572936},{"_id":"public/css/fonts/roboto/Roboto-Thin.eot","hash":"0790a51a848dbe7292c98f9d0459218bf1a8ffdd","modified":1633950572937},{"_id":"public/images/WX20181012-155029.png","hash":"be45d09ca473473e0f84bb6e77887fd5a9b10c1f","modified":1633950572996},{"_id":"public/images/WechatIMG27.png","hash":"30a43d2bac9688daf57449f5de6f07137529069c","modified":1633950572996},{"_id":"public/images/wIQDW7wiZ8.gif","hash":"0f42d2498b7a6646964fb5d93af523cbfc1e3036","modified":1633950572996},{"_id":"public/images/zKX0PnVPvt.gif","hash":"52c64d15c810a723426a60fd2237b9a9a9e7cf55","modified":1633950572996},{"_id":"public/css/fonts/fontawesome/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1633950572996},{"_id":"public/css/fonts/fontawesome/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1633950572996},{"_id":"public/css/fonts/roboto/Roboto-Bold.ttf","hash":"47327df0f35e7cd7c8645874897a7449697544ae","modified":1633950572996},{"_id":"public/css/fonts/roboto/Roboto-Light.ttf","hash":"e321c183e2b75ee19813892b7bac8d7c411cb88a","modified":1633950572996},{"_id":"public/css/fonts/roboto/Roboto-Medium.ttf","hash":"6060ca726b9760b76f7c347dce9d2fa1fe42ec92","modified":1633950572996},{"_id":"public/css/fonts/roboto/Roboto-Regular.ttf","hash":"824b5480c977a8166e177e5357d13164ccc45f47","modified":1633950572996},{"_id":"public/css/fonts/roboto/Roboto-Thin.ttf","hash":"173ed64528b4d010a76d8d38deb1d7e7eed58eda","modified":1633950572996},{"_id":"public/js/main.min.js","hash":"8acf4480f8ab859423b8926b9b790c67b5a77276","modified":1633950573082},{"_id":"public/js/search.js","hash":"a1de7e7a2ef8330ebcd9f3a7a4622b3bac44e4f3","modified":1633950573082},{"_id":"public/js/search.min.js","hash":"a8a450bb8b1ca9ad577052addcbd3393f1af6c6a","modified":1633950573082},{"_id":"public/js/main.js","hash":"300b2e963683ced162e28afcd24ffc970fc23ac2","modified":1633950573082},{"_id":"public/img/wechat.png","hash":"0516cba25b21f3f4ef8aec79974142d784821869","modified":1633950573082},{"_id":"public/img/alipay.png","hash":"e8769b9edc4140587c92329d4548eace1cc50d85","modified":1633950573082},{"_id":"public/css/fonts/fontawesome/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1633950573084},{"_id":"public/css/fonts/fontawesome/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1633950573187},{"_id":"public/css/fonts/fontawesome/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1633950573187},{"_id":"public/css/style.css","hash":"2eee9dd56f6fc6950474b367eb6692c6e40364bd","modified":1633950574374},{"_id":"public/css/fonts/fontawesome/fontawesome-webfont.svg","hash":"98a8aa5cf7d62c2eff5f07ede8d844b874ef06ed","modified":1633950574395},{"_id":"public/images/2019-01-07 20-14-33.2019-01-07 20_15_33.gif","hash":"7fe45fa4c115e9827d88d819d3fec236de37f6cc","modified":1633950574522},{"_id":"public/images/2019-01-07 20-49-30.2019-01-07 20_50_06.gif","hash":"11155ec5282485a228c8249996f24407f7d2cf13","modified":1633950574526},{"_id":"public/images/2018-12-28 16-39-06.2018-12-28 16_41_51.gif","hash":"d45f53297e324a74c72d229411db875c4472f831","modified":1633950574606}],"Category":[{"name":"前任Blog / CSDN","_id":"ckumjzaay000l5c541lxuv2nf"},{"name":"git使用笔记","_id":"ckumjzabf00195c54nmfj3662"},{"name":"jd商品hover过光效果","_id":"ckumjzabi001f5c54fd8bdkc9"},{"name":"原生js事件委托","_id":"ckumjzabk001l5c548wroa195"},{"name":"MarkDown学习笔记","_id":"ckumjzabn001s5c54z4zho8u1"},{"name":"nodejs后端开发","_id":"ckumjzacl003n5c54mnf1rt4l"}],"Data":[],"Page":[{"title":"文章分类","date":"2018-10-11T03:04:12.000Z","type":"categories","comments":1,"_content":"","source":"categories/index.md","raw":"---\ntitle: 文章分类\ndate: 2018-10-11 11:04:12\ntype: \"categories\"\ncomments: true\n---\n","updated":"2021-10-09T08:48:32.098Z","path":"categories/index.html","layout":"page","_id":"ckumjza9c00005c546zgfbk7y","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"标签","date":"2018-10-11T02:23:15.000Z","layout":"tags","comments":0,"_content":"","source":"tags/index.md","raw":"---\n\ntitle: 标签\ndate: 2018-10-11 10:23:15\nlayout: tags\ncomments: false\n---\n","updated":"2021-10-09T08:48:32.157Z","path":"tags/index.html","_id":"ckumjza9e00015c542n00a01p","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"Axios无法在Safari浏览器及微信中打开","date":"2019-09-09T13:31:05.000Z","_content":"\n## 前言\n\n最近在项目开发中碰到这样一个问题，刚登录完用 axios 调订单列表接口时，总是提示 token 过期失效。仔细想想，刚登录的返回的 token 都没存在 window.document.cookie 中，怎么会过期呢。经过沿路抽丝剥茧，debugger，打印出来的 token 依然是最新的返回，这使得我不禁陷入了沉思 🧕🏿👳🏿‍♂️，为啥？\n\n## 正常代码\n\n```javascript\n  // list\n  getList() {\n    this.$axios\n      .get(url, {\n        headers: {\n          token: 'xxx'\n        },\n        withCredentials: true,\n        params: {\n          page: this.page,\n          per_page: 6,\n          others: 'xxx'\n        }\n      })\n      .then(res => {\n        console.log('res: ', res);\n      })\n      .catch(err => {\n        console.log('err: ', err);\n      });\n  },\n```\n这代码看起来没啥问题啊，为啥在safari浏览器就不行了呢？\n于是。。\n## 方法\n\n### 修改后的代码[方法一]\n``` javascript\n  // list\n  getList() {\n    this.$axios\n      .get(`${url}?nocache=${new Date().getTime()}`, {\n        headers: {\n          token: 'xxx'\n        },\n        withCredentials: true,\n        params: {\n          page: this.page,\n          per_page: 6,\n          others: 'xxx'\n        }\n      })\n      .then(res => {\n        console.log('res: ', res);\n      })\n      .catch(err => {\n        console.log('err: ', err);\n      });\n  },\n```\n### 修改后的代码[方法二]\n``` javascript\n  // list\n  getList() {\n    this.$axios\n      .get(url, {\n        headers: {\n          token: 'xxx',\n          Pragma: no-cache, // 注释1\n          'Cache-control': no-cache // 注释2\n        },\n        withCredentials: true,\n        params: {\n          page: this.page,\n          per_page: 6,\n          others: 'xxx'\n        }\n      })\n      .then(res => {\n        console.log('res: ', res);\n      })\n      .catch(err => {\n        console.log('err: ', err);\n      });\n  },\n```\n这样一来的话就给接口添加了一个参数，而且这参数与上一次的又不一样，所以就不会存在缓存这一说了。\n## 问题【缘】由\n～据说是某些浏览器请求接口的时候，参数未变，浏览器不会发起新的请求，就用旧的数据去请求，而请求头headers存放在cookie里；故而没有更新cookie里的token。\n～【注释1】\nPragma 是一个在 HTTP/1.0 中规定的通用首部，这个首部的效果依赖于不同的实现，所以在“请求-响应”链中可能会有不同的效果。它用来向后兼容只支持 HTTP/1.0 协议的缓存服务器，那时候 HTTP/1.1 协议中的 Cache-Control 还没有出来。\n～【注释2】\nCache-Control 通用消息头字段，被用于在http请求和响应中，通过指定指令来实现缓存机制。缓存指令是单向的，这意味着在请求中设置的指令，不一定被包含在响应中。\n~总的来说是换的原因。相信还有别的方法可以解决这个问题\n## 相关文档\n[Headers/Pragma](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Pragma)\n[Headers/Cache-Control](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Cache-Control)\n\n\n","source":"_posts/Axios无法在Safari浏览器及微信中打开.md","raw":"---\ntitle: Axios无法在Safari浏览器及微信中打开\ndate: 2019-09-09 21:31:05\ntags: ['axios', '小技巧']\n---\n\n## 前言\n\n最近在项目开发中碰到这样一个问题，刚登录完用 axios 调订单列表接口时，总是提示 token 过期失效。仔细想想，刚登录的返回的 token 都没存在 window.document.cookie 中，怎么会过期呢。经过沿路抽丝剥茧，debugger，打印出来的 token 依然是最新的返回，这使得我不禁陷入了沉思 🧕🏿👳🏿‍♂️，为啥？\n\n## 正常代码\n\n```javascript\n  // list\n  getList() {\n    this.$axios\n      .get(url, {\n        headers: {\n          token: 'xxx'\n        },\n        withCredentials: true,\n        params: {\n          page: this.page,\n          per_page: 6,\n          others: 'xxx'\n        }\n      })\n      .then(res => {\n        console.log('res: ', res);\n      })\n      .catch(err => {\n        console.log('err: ', err);\n      });\n  },\n```\n这代码看起来没啥问题啊，为啥在safari浏览器就不行了呢？\n于是。。\n## 方法\n\n### 修改后的代码[方法一]\n``` javascript\n  // list\n  getList() {\n    this.$axios\n      .get(`${url}?nocache=${new Date().getTime()}`, {\n        headers: {\n          token: 'xxx'\n        },\n        withCredentials: true,\n        params: {\n          page: this.page,\n          per_page: 6,\n          others: 'xxx'\n        }\n      })\n      .then(res => {\n        console.log('res: ', res);\n      })\n      .catch(err => {\n        console.log('err: ', err);\n      });\n  },\n```\n### 修改后的代码[方法二]\n``` javascript\n  // list\n  getList() {\n    this.$axios\n      .get(url, {\n        headers: {\n          token: 'xxx',\n          Pragma: no-cache, // 注释1\n          'Cache-control': no-cache // 注释2\n        },\n        withCredentials: true,\n        params: {\n          page: this.page,\n          per_page: 6,\n          others: 'xxx'\n        }\n      })\n      .then(res => {\n        console.log('res: ', res);\n      })\n      .catch(err => {\n        console.log('err: ', err);\n      });\n  },\n```\n这样一来的话就给接口添加了一个参数，而且这参数与上一次的又不一样，所以就不会存在缓存这一说了。\n## 问题【缘】由\n～据说是某些浏览器请求接口的时候，参数未变，浏览器不会发起新的请求，就用旧的数据去请求，而请求头headers存放在cookie里；故而没有更新cookie里的token。\n～【注释1】\nPragma 是一个在 HTTP/1.0 中规定的通用首部，这个首部的效果依赖于不同的实现，所以在“请求-响应”链中可能会有不同的效果。它用来向后兼容只支持 HTTP/1.0 协议的缓存服务器，那时候 HTTP/1.1 协议中的 Cache-Control 还没有出来。\n～【注释2】\nCache-Control 通用消息头字段，被用于在http请求和响应中，通过指定指令来实现缓存机制。缓存指令是单向的，这意味着在请求中设置的指令，不一定被包含在响应中。\n~总的来说是换的原因。相信还有别的方法可以解决这个问题\n## 相关文档\n[Headers/Pragma](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Pragma)\n[Headers/Cache-Control](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Cache-Control)\n\n\n","slug":"Axios无法在Safari浏览器及微信中打开","published":1,"updated":"2021-10-09T08:48:32.049Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzaa800025c54rutaoi48","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>最近在项目开发中碰到这样一个问题，刚登录完用 axios 调订单列表接口时，总是提示 token 过期失效。仔细想想，刚登录的返回的 token 都没存在 window.document.cookie 中，怎么会过期呢。经过沿路抽丝剥茧，debugger，打印出来的 token 依然是最新的返回，这使得我不禁陷入了沉思 🧕🏿👳🏿‍♂️，为啥？</p>\n<h2 id=\"正常代码\"><a href=\"#正常代码\" class=\"headerlink\" title=\"正常代码\"></a>正常代码</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// list</span></span><br><span class=\"line\">getList() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.$axios</span><br><span class=\"line\">    .get(url, &#123;</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        token: <span class=\"string\">'xxx'</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      withCredentials: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      params: &#123;</span><br><span class=\"line\">        page: <span class=\"keyword\">this</span>.page,</span><br><span class=\"line\">        per_page: <span class=\"number\">6</span>,</span><br><span class=\"line\">        others: <span class=\"string\">'xxx'</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'res: '</span>, res);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'err: '</span>, err);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<p>这代码看起来没啥问题啊，为啥在safari浏览器就不行了呢？<br>于是。。</p>\n<h2 id=\"方法\"><a href=\"#方法\" class=\"headerlink\" title=\"方法\"></a>方法</h2><h3 id=\"修改后的代码-方法一\"><a href=\"#修改后的代码-方法一\" class=\"headerlink\" title=\"修改后的代码[方法一]\"></a>修改后的代码[方法一]</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// list</span></span><br><span class=\"line\">getList() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.$axios</span><br><span class=\"line\">    .get(<span class=\"string\">`<span class=\"subst\">$&#123;url&#125;</span>?nocache=<span class=\"subst\">$&#123;<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime()&#125;</span>`</span>, &#123;</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        token: <span class=\"string\">'xxx'</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      withCredentials: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      params: &#123;</span><br><span class=\"line\">        page: <span class=\"keyword\">this</span>.page,</span><br><span class=\"line\">        per_page: <span class=\"number\">6</span>,</span><br><span class=\"line\">        others: <span class=\"string\">'xxx'</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'res: '</span>, res);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'err: '</span>, err);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<h3 id=\"修改后的代码-方法二\"><a href=\"#修改后的代码-方法二\" class=\"headerlink\" title=\"修改后的代码[方法二]\"></a>修改后的代码[方法二]</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// list</span></span><br><span class=\"line\">getList() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.$axios</span><br><span class=\"line\">    .get(url, &#123;</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        token: <span class=\"string\">'xxx'</span>,</span><br><span class=\"line\">        Pragma: no-cache, <span class=\"comment\">// 注释1</span></span><br><span class=\"line\">        <span class=\"string\">'Cache-control'</span>: no-cache <span class=\"comment\">// 注释2</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      withCredentials: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      params: &#123;</span><br><span class=\"line\">        page: <span class=\"keyword\">this</span>.page,</span><br><span class=\"line\">        per_page: <span class=\"number\">6</span>,</span><br><span class=\"line\">        others: <span class=\"string\">'xxx'</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'res: '</span>, res);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'err: '</span>, err);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<p>这样一来的话就给接口添加了一个参数，而且这参数与上一次的又不一样，所以就不会存在缓存这一说了。</p>\n<h2 id=\"问题【缘】由\"><a href=\"#问题【缘】由\" class=\"headerlink\" title=\"问题【缘】由\"></a>问题【缘】由</h2><p>～据说是某些浏览器请求接口的时候，参数未变，浏览器不会发起新的请求，就用旧的数据去请求，而请求头headers存放在cookie里；故而没有更新cookie里的token。<br>～【注释1】<br>Pragma 是一个在 HTTP/1.0 中规定的通用首部，这个首部的效果依赖于不同的实现，所以在“请求-响应”链中可能会有不同的效果。它用来向后兼容只支持 HTTP/1.0 协议的缓存服务器，那时候 HTTP/1.1 协议中的 Cache-Control 还没有出来。<br>～【注释2】<br>Cache-Control 通用消息头字段，被用于在http请求和响应中，通过指定指令来实现缓存机制。缓存指令是单向的，这意味着在请求中设置的指令，不一定被包含在响应中。<br>~总的来说是换的原因。相信还有别的方法可以解决这个问题</p>\n<h2 id=\"相关文档\"><a href=\"#相关文档\" class=\"headerlink\" title=\"相关文档\"></a>相关文档</h2><p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Pragma\" target=\"_blank\" rel=\"noopener\">Headers/Pragma</a><br><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Cache-Control\" target=\"_blank\" rel=\"noopener\">Headers/Cache-Control</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>最近在项目开发中碰到这样一个问题，刚登录完用 axios 调订单列表接口时，总是提示 token 过期失效。仔细想想，刚登录的返回的 token 都没存在 window.document.cookie 中，怎么会过期呢。经过沿路抽丝剥茧，debugger，打印出来的 token 依然是最新的返回，这使得我不禁陷入了沉思 🧕🏿👳🏿‍♂️，为啥？</p>\n<h2 id=\"正常代码\"><a href=\"#正常代码\" class=\"headerlink\" title=\"正常代码\"></a>正常代码</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// list</span></span><br><span class=\"line\">getList() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.$axios</span><br><span class=\"line\">    .get(url, &#123;</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        token: <span class=\"string\">'xxx'</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      withCredentials: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      params: &#123;</span><br><span class=\"line\">        page: <span class=\"keyword\">this</span>.page,</span><br><span class=\"line\">        per_page: <span class=\"number\">6</span>,</span><br><span class=\"line\">        others: <span class=\"string\">'xxx'</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'res: '</span>, res);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'err: '</span>, err);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<p>这代码看起来没啥问题啊，为啥在safari浏览器就不行了呢？<br>于是。。</p>\n<h2 id=\"方法\"><a href=\"#方法\" class=\"headerlink\" title=\"方法\"></a>方法</h2><h3 id=\"修改后的代码-方法一\"><a href=\"#修改后的代码-方法一\" class=\"headerlink\" title=\"修改后的代码[方法一]\"></a>修改后的代码[方法一]</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// list</span></span><br><span class=\"line\">getList() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.$axios</span><br><span class=\"line\">    .get(<span class=\"string\">`<span class=\"subst\">$&#123;url&#125;</span>?nocache=<span class=\"subst\">$&#123;<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime()&#125;</span>`</span>, &#123;</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        token: <span class=\"string\">'xxx'</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      withCredentials: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      params: &#123;</span><br><span class=\"line\">        page: <span class=\"keyword\">this</span>.page,</span><br><span class=\"line\">        per_page: <span class=\"number\">6</span>,</span><br><span class=\"line\">        others: <span class=\"string\">'xxx'</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'res: '</span>, res);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'err: '</span>, err);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<h3 id=\"修改后的代码-方法二\"><a href=\"#修改后的代码-方法二\" class=\"headerlink\" title=\"修改后的代码[方法二]\"></a>修改后的代码[方法二]</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// list</span></span><br><span class=\"line\">getList() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.$axios</span><br><span class=\"line\">    .get(url, &#123;</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        token: <span class=\"string\">'xxx'</span>,</span><br><span class=\"line\">        Pragma: no-cache, <span class=\"comment\">// 注释1</span></span><br><span class=\"line\">        <span class=\"string\">'Cache-control'</span>: no-cache <span class=\"comment\">// 注释2</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      withCredentials: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      params: &#123;</span><br><span class=\"line\">        page: <span class=\"keyword\">this</span>.page,</span><br><span class=\"line\">        per_page: <span class=\"number\">6</span>,</span><br><span class=\"line\">        others: <span class=\"string\">'xxx'</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'res: '</span>, res);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'err: '</span>, err);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<p>这样一来的话就给接口添加了一个参数，而且这参数与上一次的又不一样，所以就不会存在缓存这一说了。</p>\n<h2 id=\"问题【缘】由\"><a href=\"#问题【缘】由\" class=\"headerlink\" title=\"问题【缘】由\"></a>问题【缘】由</h2><p>～据说是某些浏览器请求接口的时候，参数未变，浏览器不会发起新的请求，就用旧的数据去请求，而请求头headers存放在cookie里；故而没有更新cookie里的token。<br>～【注释1】<br>Pragma 是一个在 HTTP/1.0 中规定的通用首部，这个首部的效果依赖于不同的实现，所以在“请求-响应”链中可能会有不同的效果。它用来向后兼容只支持 HTTP/1.0 协议的缓存服务器，那时候 HTTP/1.1 协议中的 Cache-Control 还没有出来。<br>～【注释2】<br>Cache-Control 通用消息头字段，被用于在http请求和响应中，通过指定指令来实现缓存机制。缓存指令是单向的，这意味着在请求中设置的指令，不一定被包含在响应中。<br>~总的来说是换的原因。相信还有别的方法可以解决这个问题</p>\n<h2 id=\"相关文档\"><a href=\"#相关文档\" class=\"headerlink\" title=\"相关文档\"></a>相关文档</h2><p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Pragma\" target=\"_blank\" rel=\"noopener\">Headers/Pragma</a><br><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Cache-Control\" target=\"_blank\" rel=\"noopener\">Headers/Cache-Control</a></p>\n"},{"title":"一个优秀的Stack Engineer该有的姿态","date":"2019-12-06T13:40:51.000Z","_content":"\n程序员,一个在外人看来是高薪、前途无量的工作,但又有多少人清楚,有多少程序员是用自己的身心健康换来的这一看似华丽的褒赞。好吧,生活总是继续向前的,有问题就要积极地去解决,更何况是关乎自身的身心健康问题,如果一味的抱怨只会将自己推向另一个深渊。\n![](https://github.com/chengheai/review-demo-image/blob/master/17360129.jpg?raw=true)\n以下建议,大家可以参考一下:\n\n1、要学会走开\n\n一般来说程序员大多有定力、做事有条理。我们不愿意承认失败,当不顺时我们也不愿走开。但当你已在一个问题上花费了太长时间的时候,最好的选择是走开,清醒头脑。出去走两步看看风景呼吸新鲜空气,等你平静下来(不再急躁)再回到办公桌上,效率会事半功倍。\n\n2、在家少编程\n\n工作一天了,回到家,继续打开电脑开启 eclipse 进行编程,我想这是很多程序员都喜欢干的事情。但是我的建议是,既然回家了,那就把代码放一边,做做饭,做做家务 ,然后看会电视,最好阅读点书籍。至于代码,可以等到明天。\n\n3、少叫外卖,中午出去吃\n\n很多程序员中午习惯叫外卖,别人都去吃饭了,他还在那里继续编码,直至外卖送来,然后在电脑面前完成这顿仓促的午餐,这是一件多么悲催的事情。我的建议是,中午出去吃,但要吃的健康,KFC 和麦当劳就不要了,你的健康本来就比人差了,再吃这个就说不过去了。\n\n4、非技术的兴趣爱好\n\n你不能只对电脑、对代码感兴趣,我们是一个社会人,应该具备社会人所应有的社交活动。你的兴趣要广泛,看书、看电影、喝茶、唱歌等,如果能有几项自己喜欢的体育锻炼项目,那就更完美了。程序员要有健康的生活方式,代码只是你生活中很小的一面而已。\n\n5、休假\n\n当工作上的一切都变得很不顺的时候,不要担心使用你的假期——它将使你彻底远离无法承受的工作。你不必去国外度假也不必旅行,如果你愿意待在家里也没关系。休假的关键是不工作。\n\n6、学会借力\n\n在专业的平台上找你需要的 SDK 或 API,而不是直接百度,例如 devstore,测评和对比做的都是很到位的,这些东西都可以根据自己的需求运用到自己的项目里,这样会节省你很多时间。\n","source":"_posts/Engineer该有的姿态.md","raw":"---\ntitle: 一个优秀的Stack Engineer该有的姿态\ndate: 2019-12-06 21:40:51\ntags:\n---\n\n程序员,一个在外人看来是高薪、前途无量的工作,但又有多少人清楚,有多少程序员是用自己的身心健康换来的这一看似华丽的褒赞。好吧,生活总是继续向前的,有问题就要积极地去解决,更何况是关乎自身的身心健康问题,如果一味的抱怨只会将自己推向另一个深渊。\n![](https://github.com/chengheai/review-demo-image/blob/master/17360129.jpg?raw=true)\n以下建议,大家可以参考一下:\n\n1、要学会走开\n\n一般来说程序员大多有定力、做事有条理。我们不愿意承认失败,当不顺时我们也不愿走开。但当你已在一个问题上花费了太长时间的时候,最好的选择是走开,清醒头脑。出去走两步看看风景呼吸新鲜空气,等你平静下来(不再急躁)再回到办公桌上,效率会事半功倍。\n\n2、在家少编程\n\n工作一天了,回到家,继续打开电脑开启 eclipse 进行编程,我想这是很多程序员都喜欢干的事情。但是我的建议是,既然回家了,那就把代码放一边,做做饭,做做家务 ,然后看会电视,最好阅读点书籍。至于代码,可以等到明天。\n\n3、少叫外卖,中午出去吃\n\n很多程序员中午习惯叫外卖,别人都去吃饭了,他还在那里继续编码,直至外卖送来,然后在电脑面前完成这顿仓促的午餐,这是一件多么悲催的事情。我的建议是,中午出去吃,但要吃的健康,KFC 和麦当劳就不要了,你的健康本来就比人差了,再吃这个就说不过去了。\n\n4、非技术的兴趣爱好\n\n你不能只对电脑、对代码感兴趣,我们是一个社会人,应该具备社会人所应有的社交活动。你的兴趣要广泛,看书、看电影、喝茶、唱歌等,如果能有几项自己喜欢的体育锻炼项目,那就更完美了。程序员要有健康的生活方式,代码只是你生活中很小的一面而已。\n\n5、休假\n\n当工作上的一切都变得很不顺的时候,不要担心使用你的假期——它将使你彻底远离无法承受的工作。你不必去国外度假也不必旅行,如果你愿意待在家里也没关系。休假的关键是不工作。\n\n6、学会借力\n\n在专业的平台上找你需要的 SDK 或 API,而不是直接百度,例如 devstore,测评和对比做的都是很到位的,这些东西都可以根据自己的需求运用到自己的项目里,这样会节省你很多时间。\n","slug":"Engineer该有的姿态","published":1,"updated":"2021-10-09T08:48:32.056Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzaaf00035c547nneuvo0","content":"<p>程序员,一个在外人看来是高薪、前途无量的工作,但又有多少人清楚,有多少程序员是用自己的身心健康换来的这一看似华丽的褒赞。好吧,生活总是继续向前的,有问题就要积极地去解决,更何况是关乎自身的身心健康问题,如果一味的抱怨只会将自己推向另一个深渊。<br><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/17360129.jpg?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure><br>以下建议,大家可以参考一下:</p>\n<p>1、要学会走开</p>\n<p>一般来说程序员大多有定力、做事有条理。我们不愿意承认失败,当不顺时我们也不愿走开。但当你已在一个问题上花费了太长时间的时候,最好的选择是走开,清醒头脑。出去走两步看看风景呼吸新鲜空气,等你平静下来(不再急躁)再回到办公桌上,效率会事半功倍。</p>\n<p>2、在家少编程</p>\n<p>工作一天了,回到家,继续打开电脑开启 eclipse 进行编程,我想这是很多程序员都喜欢干的事情。但是我的建议是,既然回家了,那就把代码放一边,做做饭,做做家务 ,然后看会电视,最好阅读点书籍。至于代码,可以等到明天。</p>\n<p>3、少叫外卖,中午出去吃</p>\n<p>很多程序员中午习惯叫外卖,别人都去吃饭了,他还在那里继续编码,直至外卖送来,然后在电脑面前完成这顿仓促的午餐,这是一件多么悲催的事情。我的建议是,中午出去吃,但要吃的健康,KFC 和麦当劳就不要了,你的健康本来就比人差了,再吃这个就说不过去了。</p>\n<p>4、非技术的兴趣爱好</p>\n<p>你不能只对电脑、对代码感兴趣,我们是一个社会人,应该具备社会人所应有的社交活动。你的兴趣要广泛,看书、看电影、喝茶、唱歌等,如果能有几项自己喜欢的体育锻炼项目,那就更完美了。程序员要有健康的生活方式,代码只是你生活中很小的一面而已。</p>\n<p>5、休假</p>\n<p>当工作上的一切都变得很不顺的时候,不要担心使用你的假期——它将使你彻底远离无法承受的工作。你不必去国外度假也不必旅行,如果你愿意待在家里也没关系。休假的关键是不工作。</p>\n<p>6、学会借力</p>\n<p>在专业的平台上找你需要的 SDK 或 API,而不是直接百度,例如 devstore,测评和对比做的都是很到位的,这些东西都可以根据自己的需求运用到自己的项目里,这样会节省你很多时间。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>程序员,一个在外人看来是高薪、前途无量的工作,但又有多少人清楚,有多少程序员是用自己的身心健康换来的这一看似华丽的褒赞。好吧,生活总是继续向前的,有问题就要积极地去解决,更何况是关乎自身的身心健康问题,如果一味的抱怨只会将自己推向另一个深渊。<br><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/17360129.jpg?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure><br>以下建议,大家可以参考一下:</p>\n<p>1、要学会走开</p>\n<p>一般来说程序员大多有定力、做事有条理。我们不愿意承认失败,当不顺时我们也不愿走开。但当你已在一个问题上花费了太长时间的时候,最好的选择是走开,清醒头脑。出去走两步看看风景呼吸新鲜空气,等你平静下来(不再急躁)再回到办公桌上,效率会事半功倍。</p>\n<p>2、在家少编程</p>\n<p>工作一天了,回到家,继续打开电脑开启 eclipse 进行编程,我想这是很多程序员都喜欢干的事情。但是我的建议是,既然回家了,那就把代码放一边,做做饭,做做家务 ,然后看会电视,最好阅读点书籍。至于代码,可以等到明天。</p>\n<p>3、少叫外卖,中午出去吃</p>\n<p>很多程序员中午习惯叫外卖,别人都去吃饭了,他还在那里继续编码,直至外卖送来,然后在电脑面前完成这顿仓促的午餐,这是一件多么悲催的事情。我的建议是,中午出去吃,但要吃的健康,KFC 和麦当劳就不要了,你的健康本来就比人差了,再吃这个就说不过去了。</p>\n<p>4、非技术的兴趣爱好</p>\n<p>你不能只对电脑、对代码感兴趣,我们是一个社会人,应该具备社会人所应有的社交活动。你的兴趣要广泛,看书、看电影、喝茶、唱歌等,如果能有几项自己喜欢的体育锻炼项目,那就更完美了。程序员要有健康的生活方式,代码只是你生活中很小的一面而已。</p>\n<p>5、休假</p>\n<p>当工作上的一切都变得很不顺的时候,不要担心使用你的假期——它将使你彻底远离无法承受的工作。你不必去国外度假也不必旅行,如果你愿意待在家里也没关系。休假的关键是不工作。</p>\n<p>6、学会借力</p>\n<p>在专业的平台上找你需要的 SDK 或 API,而不是直接百度,例如 devstore,测评和对比做的都是很到位的,这些东西都可以根据自己的需求运用到自己的项目里,这样会节省你很多时间。</p>\n"},{"title":"Linux执行history命令显示命令执行时间","date":"2019-09-17T13:42:43.000Z","_content":"## 附录\n在线快速生成JSON对象api\n【MYJSON】(http://myjson.com/1g17dp)\n## 前言\n在实际项目开发中，往往碰到这样一种情况，我明明没有敲这个指令啊，怎么代码被覆盖了？怎么回事？👺\n用history命令查看 ：\n![](https://github.com/chengheai/review-demo-image/blob/master/WX20190917-212406@2x.png?raw=true)\n这时间也没有也不知道是谁敲的名字，这可咋办？\n## 效果\n![](https://github.com/chengheai/review-demo-image/blob/master/WX20190917-215133@2x.png?raw=true)\n## 实现过程\n在你的命令行中贱【键】入\n``` bash\necho 'export HISTTIMEFORMAT=\"%Y-%m-%d %H:%M:%S  `whoami` \"'>>/etc/profile\n```\n然后\n再输入\n``` bash\nsource /etc/profile\n```\nOK，完了！！","source":"_posts/Linux执行history命令显示命令执行时间.md","raw":"---\ntitle: Linux执行history命令显示命令执行时间\ndate: 2019-09-17 21:42:43\ntags: ['linux']\n---\n## 附录\n在线快速生成JSON对象api\n【MYJSON】(http://myjson.com/1g17dp)\n## 前言\n在实际项目开发中，往往碰到这样一种情况，我明明没有敲这个指令啊，怎么代码被覆盖了？怎么回事？👺\n用history命令查看 ：\n![](https://github.com/chengheai/review-demo-image/blob/master/WX20190917-212406@2x.png?raw=true)\n这时间也没有也不知道是谁敲的名字，这可咋办？\n## 效果\n![](https://github.com/chengheai/review-demo-image/blob/master/WX20190917-215133@2x.png?raw=true)\n## 实现过程\n在你的命令行中贱【键】入\n``` bash\necho 'export HISTTIMEFORMAT=\"%Y-%m-%d %H:%M:%S  `whoami` \"'>>/etc/profile\n```\n然后\n再输入\n``` bash\nsource /etc/profile\n```\nOK，完了！！","slug":"Linux执行history命令显示命令执行时间","published":1,"updated":"2021-10-09T08:48:32.057Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzaai00055c54zbafpn5x","content":"<h2 id=\"附录\"><a href=\"#附录\" class=\"headerlink\" title=\"附录\"></a>附录</h2><p>在线快速生成JSON对象api<br>【MYJSON】(<a href=\"http://myjson.com/1g17dp\" target=\"_blank\" rel=\"noopener\">http://myjson.com/1g17dp</a>)</p>\n<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>在实际项目开发中，往往碰到这样一种情况，我明明没有敲这个指令啊，怎么代码被覆盖了？怎么回事？👺<br>用history命令查看 ：<br><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WX20190917-212406@2x.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure><br>这时间也没有也不知道是谁敲的名字，这可咋办？</p>\n<h2 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WX20190917-215133@2x.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"实现过程\"><a href=\"#实现过程\" class=\"headerlink\" title=\"实现过程\"></a>实现过程</h2><p>在你的命令行中贱【键】入<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'export HISTTIMEFORMAT=\"%Y-%m-%d %H:%M:%S  `whoami` \"'</span>&gt;&gt;/etc/profile</span><br></pre></td></tr></table></figure></p>\n<p>然后<br>再输入<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">source</span> /etc/profile</span><br></pre></td></tr></table></figure></p>\n<p>OK，完了！！</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"附录\"><a href=\"#附录\" class=\"headerlink\" title=\"附录\"></a>附录</h2><p>在线快速生成JSON对象api<br>【MYJSON】(<a href=\"http://myjson.com/1g17dp\" target=\"_blank\" rel=\"noopener\">http://myjson.com/1g17dp</a>)</p>\n<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>在实际项目开发中，往往碰到这样一种情况，我明明没有敲这个指令啊，怎么代码被覆盖了？怎么回事？👺<br>用history命令查看 ：<br><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WX20190917-212406@2x.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure><br>这时间也没有也不知道是谁敲的名字，这可咋办？</p>\n<h2 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WX20190917-215133@2x.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"实现过程\"><a href=\"#实现过程\" class=\"headerlink\" title=\"实现过程\"></a>实现过程</h2><p>在你的命令行中贱【键】入<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'export HISTTIMEFORMAT=\"%Y-%m-%d %H:%M:%S  `whoami` \"'</span>&gt;&gt;/etc/profile</span><br></pre></td></tr></table></figure></p>\n<p>然后<br>再输入<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">source</span> /etc/profile</span><br></pre></td></tr></table></figure></p>\n<p>OK，完了！！</p>\n"},{"title":"Mac下使用rz、sz远程上传、下载","date":"2019-05-13T13:33:29.000Z","_content":"## 写在前面\n### 什么是rz/sz (lsz/lrz)\n\n简单说就是，可以很方便地用这两个sz/rz工具，实现Linux下和Windows之间的文件传输(发送和接收)，速度大概为10KB/s，适合中小文件。rz/sz 通过Zmodem协议传输数据。\n### 为什么要用rz/sz\n普通Linux和Windows之间的文件共享方法，主要有建立nfs实现文件共享，和tftp之类的方法，但是都很麻烦，而如果只是小文件（几十K，几百K），那么直接用rz/sz，就显得极其地方便了。大文件的话，还是要考虑上面说得，其他的共享方法了，毕竟，rz/sz速度只有10K左右，传大文件会累死人的。\n## Mac上如何使用\n### 步骤\n1.下载并安装iTerm2 (一般来说都安装过了)\nhttp://www.iterm2.com/#/section/downloads\n2.下载安装lrzsz\nsudo brew install lrzsz(或者 brew install lrzsz)\n3.下载并安装automatic zmoderm for iTerm2\n-1 usr/local/bin\n-2 sudo wget https://raw.github.com/mmastrac/iterm2-zmodem/master/iterm2-send-zmodem.sh\nsudo wget https://raw.github.com/mmastrac/iterm2-zmodem/master/iterm2-recv-zmodem.sh\n-3 sudo chmod 777 /usr/local/bin/iterm2-*\n4.添加iTerm2 trigger\nTerm2 --> Profiles --> Advanced --> Edit Trigger\n\n``` shell\n  Regular expression      　　Action      　　　　　　　Parameters\n\n  \\*\\*B0100　　　　　　　　Run Silent Coprocess　　/usr/local/bin/iterm2-send-zmodem.sh\n\n  \\*\\*B00000000000000　  Run Silent Coprocess　　/usr/local/bin/iterm2-recv-zmodem.sh\n```\n![](https://github.com/chengheai/review-demo-image/blob/master/WX20190513-215337@2x.png?raw=true)\n![](https://github.com/chengheai/review-demo-image/blob/master/WX20190513-215356@2x.png?raw=true)\n\n\n","source":"_posts/Mac下使用rz、sz远程上传、下载.md","raw":"---\ntitle: Mac下使用rz、sz远程上传、下载\ndate: 2019-05-13 21:33:29\ntags: ['linux']\n---\n## 写在前面\n### 什么是rz/sz (lsz/lrz)\n\n简单说就是，可以很方便地用这两个sz/rz工具，实现Linux下和Windows之间的文件传输(发送和接收)，速度大概为10KB/s，适合中小文件。rz/sz 通过Zmodem协议传输数据。\n### 为什么要用rz/sz\n普通Linux和Windows之间的文件共享方法，主要有建立nfs实现文件共享，和tftp之类的方法，但是都很麻烦，而如果只是小文件（几十K，几百K），那么直接用rz/sz，就显得极其地方便了。大文件的话，还是要考虑上面说得，其他的共享方法了，毕竟，rz/sz速度只有10K左右，传大文件会累死人的。\n## Mac上如何使用\n### 步骤\n1.下载并安装iTerm2 (一般来说都安装过了)\nhttp://www.iterm2.com/#/section/downloads\n2.下载安装lrzsz\nsudo brew install lrzsz(或者 brew install lrzsz)\n3.下载并安装automatic zmoderm for iTerm2\n-1 usr/local/bin\n-2 sudo wget https://raw.github.com/mmastrac/iterm2-zmodem/master/iterm2-send-zmodem.sh\nsudo wget https://raw.github.com/mmastrac/iterm2-zmodem/master/iterm2-recv-zmodem.sh\n-3 sudo chmod 777 /usr/local/bin/iterm2-*\n4.添加iTerm2 trigger\nTerm2 --> Profiles --> Advanced --> Edit Trigger\n\n``` shell\n  Regular expression      　　Action      　　　　　　　Parameters\n\n  \\*\\*B0100　　　　　　　　Run Silent Coprocess　　/usr/local/bin/iterm2-send-zmodem.sh\n\n  \\*\\*B00000000000000　  Run Silent Coprocess　　/usr/local/bin/iterm2-recv-zmodem.sh\n```\n![](https://github.com/chengheai/review-demo-image/blob/master/WX20190513-215337@2x.png?raw=true)\n![](https://github.com/chengheai/review-demo-image/blob/master/WX20190513-215356@2x.png?raw=true)\n\n\n","slug":"Mac下使用rz、sz远程上传、下载","published":1,"updated":"2021-10-09T08:48:32.057Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzaak00065c54taolejrn","content":"<h2 id=\"写在前面\"><a href=\"#写在前面\" class=\"headerlink\" title=\"写在前面\"></a>写在前面</h2><h3 id=\"什么是rz-sz-lsz-lrz\"><a href=\"#什么是rz-sz-lsz-lrz\" class=\"headerlink\" title=\"什么是rz/sz (lsz/lrz)\"></a>什么是rz/sz (lsz/lrz)</h3><p>简单说就是，可以很方便地用这两个sz/rz工具，实现Linux下和Windows之间的文件传输(发送和接收)，速度大概为10KB/s，适合中小文件。rz/sz 通过Zmodem协议传输数据。</p>\n<h3 id=\"为什么要用rz-sz\"><a href=\"#为什么要用rz-sz\" class=\"headerlink\" title=\"为什么要用rz/sz\"></a>为什么要用rz/sz</h3><p>普通Linux和Windows之间的文件共享方法，主要有建立nfs实现文件共享，和tftp之类的方法，但是都很麻烦，而如果只是小文件（几十K，几百K），那么直接用rz/sz，就显得极其地方便了。大文件的话，还是要考虑上面说得，其他的共享方法了，毕竟，rz/sz速度只有10K左右，传大文件会累死人的。</p>\n<h2 id=\"Mac上如何使用\"><a href=\"#Mac上如何使用\" class=\"headerlink\" title=\"Mac上如何使用\"></a>Mac上如何使用</h2><h3 id=\"步骤\"><a href=\"#步骤\" class=\"headerlink\" title=\"步骤\"></a>步骤</h3><p>1.下载并安装iTerm2 (一般来说都安装过了)<br><a href=\"http://www.iterm2.com/#/section/downloads\" target=\"_blank\" rel=\"noopener\">http://www.iterm2.com/#/section/downloads</a><br>2.下载安装lrzsz<br>sudo brew install lrzsz(或者 brew install lrzsz)<br>3.下载并安装automatic zmoderm for iTerm2<br>-1 usr/local/bin<br>-2 sudo wget <a href=\"https://raw.github.com/mmastrac/iterm2-zmodem/master/iterm2-send-zmodem.sh\" target=\"_blank\" rel=\"noopener\">https://raw.github.com/mmastrac/iterm2-zmodem/master/iterm2-send-zmodem.sh</a><br>sudo wget <a href=\"https://raw.github.com/mmastrac/iterm2-zmodem/master/iterm2-recv-zmodem.sh\" target=\"_blank\" rel=\"noopener\">https://raw.github.com/mmastrac/iterm2-zmodem/master/iterm2-recv-zmodem.sh</a><br>-3 sudo chmod 777 /usr/local/bin/iterm2-*<br>4.添加iTerm2 trigger<br>Term2 –&gt; Profiles –&gt; Advanced –&gt; Edit Trigger</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Regular expression      　　Action      　　　　　　　Parameters</span><br><span class=\"line\"></span><br><span class=\"line\">\\*\\*B0100　　　　　　　　Run Silent Coprocess　　/usr/local/bin/iterm2-send-zmodem.sh</span><br><span class=\"line\"></span><br><span class=\"line\">\\*\\*B00000000000000　  Run Silent Coprocess　　/usr/local/bin/iterm2-recv-zmodem.sh</span><br></pre></td></tr></table></figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WX20190513-215337@2x.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WX20190513-215356@2x.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"写在前面\"><a href=\"#写在前面\" class=\"headerlink\" title=\"写在前面\"></a>写在前面</h2><h3 id=\"什么是rz-sz-lsz-lrz\"><a href=\"#什么是rz-sz-lsz-lrz\" class=\"headerlink\" title=\"什么是rz/sz (lsz/lrz)\"></a>什么是rz/sz (lsz/lrz)</h3><p>简单说就是，可以很方便地用这两个sz/rz工具，实现Linux下和Windows之间的文件传输(发送和接收)，速度大概为10KB/s，适合中小文件。rz/sz 通过Zmodem协议传输数据。</p>\n<h3 id=\"为什么要用rz-sz\"><a href=\"#为什么要用rz-sz\" class=\"headerlink\" title=\"为什么要用rz/sz\"></a>为什么要用rz/sz</h3><p>普通Linux和Windows之间的文件共享方法，主要有建立nfs实现文件共享，和tftp之类的方法，但是都很麻烦，而如果只是小文件（几十K，几百K），那么直接用rz/sz，就显得极其地方便了。大文件的话，还是要考虑上面说得，其他的共享方法了，毕竟，rz/sz速度只有10K左右，传大文件会累死人的。</p>\n<h2 id=\"Mac上如何使用\"><a href=\"#Mac上如何使用\" class=\"headerlink\" title=\"Mac上如何使用\"></a>Mac上如何使用</h2><h3 id=\"步骤\"><a href=\"#步骤\" class=\"headerlink\" title=\"步骤\"></a>步骤</h3><p>1.下载并安装iTerm2 (一般来说都安装过了)<br><a href=\"http://www.iterm2.com/#/section/downloads\" target=\"_blank\" rel=\"noopener\">http://www.iterm2.com/#/section/downloads</a><br>2.下载安装lrzsz<br>sudo brew install lrzsz(或者 brew install lrzsz)<br>3.下载并安装automatic zmoderm for iTerm2<br>-1 usr/local/bin<br>-2 sudo wget <a href=\"https://raw.github.com/mmastrac/iterm2-zmodem/master/iterm2-send-zmodem.sh\" target=\"_blank\" rel=\"noopener\">https://raw.github.com/mmastrac/iterm2-zmodem/master/iterm2-send-zmodem.sh</a><br>sudo wget <a href=\"https://raw.github.com/mmastrac/iterm2-zmodem/master/iterm2-recv-zmodem.sh\" target=\"_blank\" rel=\"noopener\">https://raw.github.com/mmastrac/iterm2-zmodem/master/iterm2-recv-zmodem.sh</a><br>-3 sudo chmod 777 /usr/local/bin/iterm2-*<br>4.添加iTerm2 trigger<br>Term2 –&gt; Profiles –&gt; Advanced –&gt; Edit Trigger</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Regular expression      　　Action      　　　　　　　Parameters</span><br><span class=\"line\"></span><br><span class=\"line\">\\*\\*B0100　　　　　　　　Run Silent Coprocess　　/usr/local/bin/iterm2-send-zmodem.sh</span><br><span class=\"line\"></span><br><span class=\"line\">\\*\\*B00000000000000　  Run Silent Coprocess　　/usr/local/bin/iterm2-recv-zmodem.sh</span><br></pre></td></tr></table></figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WX20190513-215337@2x.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WX20190513-215356@2x.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n"},{"title":"Mac终端命令大全","date":"2018-10-18T05:18:18.000Z","_content":"## 目录操作\n命令名 | 功能描述  | 使用举例\n:----|:-----|:----\nmkdir | 创建一个目录 | mkdir dirname\nrmdir | 删除一个目录 | rmdir dirname\nmvdir | 移动或重命名一个目录 | mvdir dir1 dir2\ncd | 改变当前目录 | cd dirname\npwd | 显示当前目录的路径名 | pwd\nls | 显示当前目录的内容 | ls -la\ndircmp | 比较两个目录的内容 | dircmp dir1 dir2\n## 文件操作\n命令名 | 功能描述\t| 使用举例\n:----|:-----|:----\ncat | 显示或连接文件 | cat filename\npg | 分页格式化显示文件内容 | pg filename\nmore | 分屏显示文件内容 | more filename\nod | 显示非文本文件的内容 | od -c filename\ncp | 复制文件或目录 | cp file1 file2\nrm | 删除文件或目录 | rm filename\nmv | 改变文件名或所在目录 | mv file1 file2\nln | 联接文件 | ln -s file1 file2\nfind | 使用匹配表达式查找文件 | find . -name \"*.c\" -print\nfile | 显示文件类型 | file filename\nopen | 使用默认的程序打开文件 | open filename\n## 选择操作\n命令名 | 功能描述\t| 使用举例\n:----|:-----|:----\nhead\t| 显示文件的最初几行\t| head -20 filename\ntail\t| 显示文件的最后几行\t| tail -15 filename\ncut\t| 显示文件每行中的某些域\t| cut -f1,7 -d: /etc/passwd\ncolrm\t| 从标准输入中删除若干列\t| colrm 8 20 file2\npaste\t| 横向连接文件\t| paste file1 file2\ndiff\t| 比较并显示两个文件的差异\t| diff file1 file2\nsed\t| 非交互方式流编辑器\t| sed \"s/red/green/g\" filename\ngrep\t| 在文件中按模式查找\t| grep \"^[a-zA-Z]\" filename\nawk\t| 在文件中查找并处理模式\t| awk '{print $1 $1}' filename\nsort\t| 排序或归并文件\t| sort -d -f -u file1\nuniq\t| 去掉文件中的重复行\t| uniq file1 file2\ncomm\t| 显示两有序文件的公共和非公共行\t| comm file1 file2\nwc\t| 统计文件的字符数、词数和行数\t| wc filename\nnl\t| 给文件加上行号\t| nl file1 >file2\n## 安全操作\n命令名 | 功能描述\t| 使用举例\n:----|:-----|:----\npasswd | 修改用户密码 | passwd\nchmod | 改变文件或目录的权限 | chmod ug+x filename\numask | 定义创建文件的权限掩码 | umask 027\nchown | 改变文件或目录的属主 | chown newowner filename\nchgrp | 改变文件或目录的所属组 | chgrp staff filename\nxlock | 给终端上锁 | xlock -remote\n## 编程操作\n命令名 | 功能描述\t| 使用举例\n:----|:-----|:----\nmake | 维护可执行程序的最新版本 | make\ntouch | 更新文件的访问和修改时间 | touch -m 05202400 filename\ndbx | 命令行界面调试工具 | dbx a.out\nxde | 图形用户界面调试工具 | xde a.out\n## 进程操作\n命令名 | 功能描述\t| 使用举例\n:----|:-----|:----\nps | 显示进程当前状态 | ps u\nkill | 终止进程 | kill -9 30142\nnice | 改变待执行命令的优先级 | nice cc -c *.c\nrenice | 改变已运行进程的优先级 | renice +20 32768\n## 时间操作\n命令名 | 功能描述\t| 使用举例\n:----|:-----|:----\ndate | 显示系统的当前日期和时间 | date\ncal | 显示日历 | cal 8 1996\ntime | 统计程序的执行时间 | time a.out\n## 网络与通信操作\n命令名 | 功能描述\t| 使用举例\n:----|:-----|:----\ntelnet | 远程登录 | telnet hpc.sp.net.edu.cn\nrlogin | 远程登录 | rlogin hostname -l username\nrsh | 在远程主机执行指定命令 | rsh f01n03 date\nftp | 在本地主机与远程主机之间传输文件 | ftp ftp.sp.net.edu.cn\nrcp | 在本地主机与远程主机 之间复制文件 | rcp file1 host1:file2\nping | 给一个网络主机发送 回应请求 | ping hpc.sp.net.edu.cn\nmail | 阅读和发送电子邮件 | mail\nwrite | 给另一用户发送报文 | write username pts/1\nmesg | 允许或拒绝接收报文 | mesg n\n## shell 命令\n命令名 | 功能描述\t| 使用举例\n:----|:-----|:----\nhistory | 列出最近执行过的 几条命令及编号 | history\nr | 重复执行最近执行过的 某条命令 | r -2\nalias | 给某个命令定义别名 | alias del=rm -i\nunalias | 取消对某个别名的定义 | unalias del\n## 其它命令\n命令名 | 功能描述\t| 使用举例\n:----|:-----|:----\nuname | 显示操作系统的有关信息 | uname -a\nclear | 清除屏幕或窗口内容 | clear\nenv | 显示当前所有设置过的环境变量 | env\nwho | 列出当前登录的所有用户 | who\nwhoami | 显示当前正进行操作的用户名 | whoami\ntty | 显示终端或伪终端的名称 | tty\nstty | 显示或重置控制键定义 | stty -a\ndu | 查询磁盘使用情况 | du -k subdir\ndf | 显示文件系统的总空间和可用空间 | df /tmp\nw | 显示当前系统活动的总信息 | w","source":"_posts/Mac终端命令大全.md","raw":"---\ntitle: Mac终端命令大全\ndate: 2018-10-18 13:18:18\ntags: mac\n---\n## 目录操作\n命令名 | 功能描述  | 使用举例\n:----|:-----|:----\nmkdir | 创建一个目录 | mkdir dirname\nrmdir | 删除一个目录 | rmdir dirname\nmvdir | 移动或重命名一个目录 | mvdir dir1 dir2\ncd | 改变当前目录 | cd dirname\npwd | 显示当前目录的路径名 | pwd\nls | 显示当前目录的内容 | ls -la\ndircmp | 比较两个目录的内容 | dircmp dir1 dir2\n## 文件操作\n命令名 | 功能描述\t| 使用举例\n:----|:-----|:----\ncat | 显示或连接文件 | cat filename\npg | 分页格式化显示文件内容 | pg filename\nmore | 分屏显示文件内容 | more filename\nod | 显示非文本文件的内容 | od -c filename\ncp | 复制文件或目录 | cp file1 file2\nrm | 删除文件或目录 | rm filename\nmv | 改变文件名或所在目录 | mv file1 file2\nln | 联接文件 | ln -s file1 file2\nfind | 使用匹配表达式查找文件 | find . -name \"*.c\" -print\nfile | 显示文件类型 | file filename\nopen | 使用默认的程序打开文件 | open filename\n## 选择操作\n命令名 | 功能描述\t| 使用举例\n:----|:-----|:----\nhead\t| 显示文件的最初几行\t| head -20 filename\ntail\t| 显示文件的最后几行\t| tail -15 filename\ncut\t| 显示文件每行中的某些域\t| cut -f1,7 -d: /etc/passwd\ncolrm\t| 从标准输入中删除若干列\t| colrm 8 20 file2\npaste\t| 横向连接文件\t| paste file1 file2\ndiff\t| 比较并显示两个文件的差异\t| diff file1 file2\nsed\t| 非交互方式流编辑器\t| sed \"s/red/green/g\" filename\ngrep\t| 在文件中按模式查找\t| grep \"^[a-zA-Z]\" filename\nawk\t| 在文件中查找并处理模式\t| awk '{print $1 $1}' filename\nsort\t| 排序或归并文件\t| sort -d -f -u file1\nuniq\t| 去掉文件中的重复行\t| uniq file1 file2\ncomm\t| 显示两有序文件的公共和非公共行\t| comm file1 file2\nwc\t| 统计文件的字符数、词数和行数\t| wc filename\nnl\t| 给文件加上行号\t| nl file1 >file2\n## 安全操作\n命令名 | 功能描述\t| 使用举例\n:----|:-----|:----\npasswd | 修改用户密码 | passwd\nchmod | 改变文件或目录的权限 | chmod ug+x filename\numask | 定义创建文件的权限掩码 | umask 027\nchown | 改变文件或目录的属主 | chown newowner filename\nchgrp | 改变文件或目录的所属组 | chgrp staff filename\nxlock | 给终端上锁 | xlock -remote\n## 编程操作\n命令名 | 功能描述\t| 使用举例\n:----|:-----|:----\nmake | 维护可执行程序的最新版本 | make\ntouch | 更新文件的访问和修改时间 | touch -m 05202400 filename\ndbx | 命令行界面调试工具 | dbx a.out\nxde | 图形用户界面调试工具 | xde a.out\n## 进程操作\n命令名 | 功能描述\t| 使用举例\n:----|:-----|:----\nps | 显示进程当前状态 | ps u\nkill | 终止进程 | kill -9 30142\nnice | 改变待执行命令的优先级 | nice cc -c *.c\nrenice | 改变已运行进程的优先级 | renice +20 32768\n## 时间操作\n命令名 | 功能描述\t| 使用举例\n:----|:-----|:----\ndate | 显示系统的当前日期和时间 | date\ncal | 显示日历 | cal 8 1996\ntime | 统计程序的执行时间 | time a.out\n## 网络与通信操作\n命令名 | 功能描述\t| 使用举例\n:----|:-----|:----\ntelnet | 远程登录 | telnet hpc.sp.net.edu.cn\nrlogin | 远程登录 | rlogin hostname -l username\nrsh | 在远程主机执行指定命令 | rsh f01n03 date\nftp | 在本地主机与远程主机之间传输文件 | ftp ftp.sp.net.edu.cn\nrcp | 在本地主机与远程主机 之间复制文件 | rcp file1 host1:file2\nping | 给一个网络主机发送 回应请求 | ping hpc.sp.net.edu.cn\nmail | 阅读和发送电子邮件 | mail\nwrite | 给另一用户发送报文 | write username pts/1\nmesg | 允许或拒绝接收报文 | mesg n\n## shell 命令\n命令名 | 功能描述\t| 使用举例\n:----|:-----|:----\nhistory | 列出最近执行过的 几条命令及编号 | history\nr | 重复执行最近执行过的 某条命令 | r -2\nalias | 给某个命令定义别名 | alias del=rm -i\nunalias | 取消对某个别名的定义 | unalias del\n## 其它命令\n命令名 | 功能描述\t| 使用举例\n:----|:-----|:----\nuname | 显示操作系统的有关信息 | uname -a\nclear | 清除屏幕或窗口内容 | clear\nenv | 显示当前所有设置过的环境变量 | env\nwho | 列出当前登录的所有用户 | who\nwhoami | 显示当前正进行操作的用户名 | whoami\ntty | 显示终端或伪终端的名称 | tty\nstty | 显示或重置控制键定义 | stty -a\ndu | 查询磁盘使用情况 | du -k subdir\ndf | 显示文件系统的总空间和可用空间 | df /tmp\nw | 显示当前系统活动的总信息 | w","slug":"Mac终端命令大全","published":1,"updated":"2021-10-09T08:48:32.058Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzaal00075c54yyqwlaeg","content":"<h2 id=\"目录操作\"><a href=\"#目录操作\" class=\"headerlink\" title=\"目录操作\"></a>目录操作</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">命令名</th>\n<th style=\"text-align:left\">功能描述</th>\n<th style=\"text-align:left\">使用举例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">mkdir</td>\n<td style=\"text-align:left\">创建一个目录</td>\n<td style=\"text-align:left\">mkdir dirname</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">rmdir</td>\n<td style=\"text-align:left\">删除一个目录</td>\n<td style=\"text-align:left\">rmdir dirname</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">mvdir</td>\n<td style=\"text-align:left\">移动或重命名一个目录</td>\n<td style=\"text-align:left\">mvdir dir1 dir2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">cd</td>\n<td style=\"text-align:left\">改变当前目录</td>\n<td style=\"text-align:left\">cd dirname</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">pwd</td>\n<td style=\"text-align:left\">显示当前目录的路径名</td>\n<td style=\"text-align:left\">pwd</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ls</td>\n<td style=\"text-align:left\">显示当前目录的内容</td>\n<td style=\"text-align:left\">ls -la</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">dircmp</td>\n<td style=\"text-align:left\">比较两个目录的内容</td>\n<td style=\"text-align:left\">dircmp dir1 dir2</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"文件操作\"><a href=\"#文件操作\" class=\"headerlink\" title=\"文件操作\"></a>文件操作</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">命令名</th>\n<th style=\"text-align:left\">功能描述</th>\n<th style=\"text-align:left\">使用举例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">cat</td>\n<td style=\"text-align:left\">显示或连接文件</td>\n<td style=\"text-align:left\">cat filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">pg</td>\n<td style=\"text-align:left\">分页格式化显示文件内容</td>\n<td style=\"text-align:left\">pg filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">more</td>\n<td style=\"text-align:left\">分屏显示文件内容</td>\n<td style=\"text-align:left\">more filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">od</td>\n<td style=\"text-align:left\">显示非文本文件的内容</td>\n<td style=\"text-align:left\">od -c filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">cp</td>\n<td style=\"text-align:left\">复制文件或目录</td>\n<td style=\"text-align:left\">cp file1 file2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">rm</td>\n<td style=\"text-align:left\">删除文件或目录</td>\n<td style=\"text-align:left\">rm filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">mv</td>\n<td style=\"text-align:left\">改变文件名或所在目录</td>\n<td style=\"text-align:left\">mv file1 file2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ln</td>\n<td style=\"text-align:left\">联接文件</td>\n<td style=\"text-align:left\">ln -s file1 file2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">find</td>\n<td style=\"text-align:left\">使用匹配表达式查找文件</td>\n<td style=\"text-align:left\">find . -name “*.c” -print</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">file</td>\n<td style=\"text-align:left\">显示文件类型</td>\n<td style=\"text-align:left\">file filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">open</td>\n<td style=\"text-align:left\">使用默认的程序打开文件</td>\n<td style=\"text-align:left\">open filename</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"选择操作\"><a href=\"#选择操作\" class=\"headerlink\" title=\"选择操作\"></a>选择操作</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">命令名</th>\n<th style=\"text-align:left\">功能描述</th>\n<th style=\"text-align:left\">使用举例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">head</td>\n<td style=\"text-align:left\">显示文件的最初几行</td>\n<td style=\"text-align:left\">head -20 filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">tail</td>\n<td style=\"text-align:left\">显示文件的最后几行</td>\n<td style=\"text-align:left\">tail -15 filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">cut</td>\n<td style=\"text-align:left\">显示文件每行中的某些域</td>\n<td style=\"text-align:left\">cut -f1,7 -d: /etc/passwd</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">colrm</td>\n<td style=\"text-align:left\">从标准输入中删除若干列</td>\n<td style=\"text-align:left\">colrm 8 20 file2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">paste</td>\n<td style=\"text-align:left\">横向连接文件</td>\n<td style=\"text-align:left\">paste file1 file2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">diff</td>\n<td style=\"text-align:left\">比较并显示两个文件的差异</td>\n<td style=\"text-align:left\">diff file1 file2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">sed</td>\n<td style=\"text-align:left\">非交互方式流编辑器</td>\n<td style=\"text-align:left\">sed “s/red/green/g” filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">grep</td>\n<td style=\"text-align:left\">在文件中按模式查找</td>\n<td style=\"text-align:left\">grep “^[a-zA-Z]” filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">awk</td>\n<td style=\"text-align:left\">在文件中查找并处理模式</td>\n<td style=\"text-align:left\">awk ‘{print $1 $1}’ filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">sort</td>\n<td style=\"text-align:left\">排序或归并文件</td>\n<td style=\"text-align:left\">sort -d -f -u file1</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">uniq</td>\n<td style=\"text-align:left\">去掉文件中的重复行</td>\n<td style=\"text-align:left\">uniq file1 file2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">comm</td>\n<td style=\"text-align:left\">显示两有序文件的公共和非公共行</td>\n<td style=\"text-align:left\">comm file1 file2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">wc</td>\n<td style=\"text-align:left\">统计文件的字符数、词数和行数</td>\n<td style=\"text-align:left\">wc filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">nl</td>\n<td style=\"text-align:left\">给文件加上行号</td>\n<td style=\"text-align:left\">nl file1 &gt;file2</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"安全操作\"><a href=\"#安全操作\" class=\"headerlink\" title=\"安全操作\"></a>安全操作</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">命令名</th>\n<th style=\"text-align:left\">功能描述</th>\n<th style=\"text-align:left\">使用举例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">passwd</td>\n<td style=\"text-align:left\">修改用户密码</td>\n<td style=\"text-align:left\">passwd</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">chmod</td>\n<td style=\"text-align:left\">改变文件或目录的权限</td>\n<td style=\"text-align:left\">chmod ug+x filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">umask</td>\n<td style=\"text-align:left\">定义创建文件的权限掩码</td>\n<td style=\"text-align:left\">umask 027</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">chown</td>\n<td style=\"text-align:left\">改变文件或目录的属主</td>\n<td style=\"text-align:left\">chown newowner filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">chgrp</td>\n<td style=\"text-align:left\">改变文件或目录的所属组</td>\n<td style=\"text-align:left\">chgrp staff filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">xlock</td>\n<td style=\"text-align:left\">给终端上锁</td>\n<td style=\"text-align:left\">xlock -remote</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"编程操作\"><a href=\"#编程操作\" class=\"headerlink\" title=\"编程操作\"></a>编程操作</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">命令名</th>\n<th style=\"text-align:left\">功能描述</th>\n<th style=\"text-align:left\">使用举例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">make</td>\n<td style=\"text-align:left\">维护可执行程序的最新版本</td>\n<td style=\"text-align:left\">make</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">touch</td>\n<td style=\"text-align:left\">更新文件的访问和修改时间</td>\n<td style=\"text-align:left\">touch -m 05202400 filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">dbx</td>\n<td style=\"text-align:left\">命令行界面调试工具</td>\n<td style=\"text-align:left\">dbx a.out</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">xde</td>\n<td style=\"text-align:left\">图形用户界面调试工具</td>\n<td style=\"text-align:left\">xde a.out</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"进程操作\"><a href=\"#进程操作\" class=\"headerlink\" title=\"进程操作\"></a>进程操作</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">命令名</th>\n<th style=\"text-align:left\">功能描述</th>\n<th style=\"text-align:left\">使用举例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">ps</td>\n<td style=\"text-align:left\">显示进程当前状态</td>\n<td style=\"text-align:left\">ps u</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">kill</td>\n<td style=\"text-align:left\">终止进程</td>\n<td style=\"text-align:left\">kill -9 30142</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">nice</td>\n<td style=\"text-align:left\">改变待执行命令的优先级</td>\n<td style=\"text-align:left\">nice cc -c *.c</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">renice</td>\n<td style=\"text-align:left\">改变已运行进程的优先级</td>\n<td style=\"text-align:left\">renice +20 32768</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"时间操作\"><a href=\"#时间操作\" class=\"headerlink\" title=\"时间操作\"></a>时间操作</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">命令名</th>\n<th style=\"text-align:left\">功能描述</th>\n<th style=\"text-align:left\">使用举例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">date</td>\n<td style=\"text-align:left\">显示系统的当前日期和时间</td>\n<td style=\"text-align:left\">date</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">cal</td>\n<td style=\"text-align:left\">显示日历</td>\n<td style=\"text-align:left\">cal 8 1996</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">time</td>\n<td style=\"text-align:left\">统计程序的执行时间</td>\n<td style=\"text-align:left\">time a.out</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"网络与通信操作\"><a href=\"#网络与通信操作\" class=\"headerlink\" title=\"网络与通信操作\"></a>网络与通信操作</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">命令名</th>\n<th style=\"text-align:left\">功能描述</th>\n<th style=\"text-align:left\">使用举例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">telnet</td>\n<td style=\"text-align:left\">远程登录</td>\n<td style=\"text-align:left\">telnet hpc.sp.net.edu.cn</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">rlogin</td>\n<td style=\"text-align:left\">远程登录</td>\n<td style=\"text-align:left\">rlogin hostname -l username</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">rsh</td>\n<td style=\"text-align:left\">在远程主机执行指定命令</td>\n<td style=\"text-align:left\">rsh f01n03 date</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ftp</td>\n<td style=\"text-align:left\">在本地主机与远程主机之间传输文件</td>\n<td style=\"text-align:left\">ftp ftp.sp.net.edu.cn</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">rcp</td>\n<td style=\"text-align:left\">在本地主机与远程主机 之间复制文件</td>\n<td style=\"text-align:left\">rcp file1 host1:file2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ping</td>\n<td style=\"text-align:left\">给一个网络主机发送 回应请求</td>\n<td style=\"text-align:left\">ping hpc.sp.net.edu.cn</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">mail</td>\n<td style=\"text-align:left\">阅读和发送电子邮件</td>\n<td style=\"text-align:left\">mail</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">write</td>\n<td style=\"text-align:left\">给另一用户发送报文</td>\n<td style=\"text-align:left\">write username pts/1</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">mesg</td>\n<td style=\"text-align:left\">允许或拒绝接收报文</td>\n<td style=\"text-align:left\">mesg n</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"shell-命令\"><a href=\"#shell-命令\" class=\"headerlink\" title=\"shell 命令\"></a>shell 命令</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">命令名</th>\n<th style=\"text-align:left\">功能描述</th>\n<th style=\"text-align:left\">使用举例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">history</td>\n<td style=\"text-align:left\">列出最近执行过的 几条命令及编号</td>\n<td style=\"text-align:left\">history</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">r</td>\n<td style=\"text-align:left\">重复执行最近执行过的 某条命令</td>\n<td style=\"text-align:left\">r -2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">alias</td>\n<td style=\"text-align:left\">给某个命令定义别名</td>\n<td style=\"text-align:left\">alias del=rm -i</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">unalias</td>\n<td style=\"text-align:left\">取消对某个别名的定义</td>\n<td style=\"text-align:left\">unalias del</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"其它命令\"><a href=\"#其它命令\" class=\"headerlink\" title=\"其它命令\"></a>其它命令</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">命令名</th>\n<th style=\"text-align:left\">功能描述</th>\n<th style=\"text-align:left\">使用举例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">uname</td>\n<td style=\"text-align:left\">显示操作系统的有关信息</td>\n<td style=\"text-align:left\">uname -a</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">clear</td>\n<td style=\"text-align:left\">清除屏幕或窗口内容</td>\n<td style=\"text-align:left\">clear</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">env</td>\n<td style=\"text-align:left\">显示当前所有设置过的环境变量</td>\n<td style=\"text-align:left\">env</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">who</td>\n<td style=\"text-align:left\">列出当前登录的所有用户</td>\n<td style=\"text-align:left\">who</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">whoami</td>\n<td style=\"text-align:left\">显示当前正进行操作的用户名</td>\n<td style=\"text-align:left\">whoami</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">tty</td>\n<td style=\"text-align:left\">显示终端或伪终端的名称</td>\n<td style=\"text-align:left\">tty</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">stty</td>\n<td style=\"text-align:left\">显示或重置控制键定义</td>\n<td style=\"text-align:left\">stty -a</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">du</td>\n<td style=\"text-align:left\">查询磁盘使用情况</td>\n<td style=\"text-align:left\">du -k subdir</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">df</td>\n<td style=\"text-align:left\">显示文件系统的总空间和可用空间</td>\n<td style=\"text-align:left\">df /tmp</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">w</td>\n<td style=\"text-align:left\">显示当前系统活动的总信息</td>\n<td style=\"text-align:left\">w</td>\n</tr>\n</tbody>\n</table>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"目录操作\"><a href=\"#目录操作\" class=\"headerlink\" title=\"目录操作\"></a>目录操作</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">命令名</th>\n<th style=\"text-align:left\">功能描述</th>\n<th style=\"text-align:left\">使用举例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">mkdir</td>\n<td style=\"text-align:left\">创建一个目录</td>\n<td style=\"text-align:left\">mkdir dirname</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">rmdir</td>\n<td style=\"text-align:left\">删除一个目录</td>\n<td style=\"text-align:left\">rmdir dirname</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">mvdir</td>\n<td style=\"text-align:left\">移动或重命名一个目录</td>\n<td style=\"text-align:left\">mvdir dir1 dir2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">cd</td>\n<td style=\"text-align:left\">改变当前目录</td>\n<td style=\"text-align:left\">cd dirname</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">pwd</td>\n<td style=\"text-align:left\">显示当前目录的路径名</td>\n<td style=\"text-align:left\">pwd</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ls</td>\n<td style=\"text-align:left\">显示当前目录的内容</td>\n<td style=\"text-align:left\">ls -la</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">dircmp</td>\n<td style=\"text-align:left\">比较两个目录的内容</td>\n<td style=\"text-align:left\">dircmp dir1 dir2</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"文件操作\"><a href=\"#文件操作\" class=\"headerlink\" title=\"文件操作\"></a>文件操作</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">命令名</th>\n<th style=\"text-align:left\">功能描述</th>\n<th style=\"text-align:left\">使用举例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">cat</td>\n<td style=\"text-align:left\">显示或连接文件</td>\n<td style=\"text-align:left\">cat filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">pg</td>\n<td style=\"text-align:left\">分页格式化显示文件内容</td>\n<td style=\"text-align:left\">pg filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">more</td>\n<td style=\"text-align:left\">分屏显示文件内容</td>\n<td style=\"text-align:left\">more filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">od</td>\n<td style=\"text-align:left\">显示非文本文件的内容</td>\n<td style=\"text-align:left\">od -c filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">cp</td>\n<td style=\"text-align:left\">复制文件或目录</td>\n<td style=\"text-align:left\">cp file1 file2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">rm</td>\n<td style=\"text-align:left\">删除文件或目录</td>\n<td style=\"text-align:left\">rm filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">mv</td>\n<td style=\"text-align:left\">改变文件名或所在目录</td>\n<td style=\"text-align:left\">mv file1 file2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ln</td>\n<td style=\"text-align:left\">联接文件</td>\n<td style=\"text-align:left\">ln -s file1 file2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">find</td>\n<td style=\"text-align:left\">使用匹配表达式查找文件</td>\n<td style=\"text-align:left\">find . -name “*.c” -print</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">file</td>\n<td style=\"text-align:left\">显示文件类型</td>\n<td style=\"text-align:left\">file filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">open</td>\n<td style=\"text-align:left\">使用默认的程序打开文件</td>\n<td style=\"text-align:left\">open filename</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"选择操作\"><a href=\"#选择操作\" class=\"headerlink\" title=\"选择操作\"></a>选择操作</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">命令名</th>\n<th style=\"text-align:left\">功能描述</th>\n<th style=\"text-align:left\">使用举例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">head</td>\n<td style=\"text-align:left\">显示文件的最初几行</td>\n<td style=\"text-align:left\">head -20 filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">tail</td>\n<td style=\"text-align:left\">显示文件的最后几行</td>\n<td style=\"text-align:left\">tail -15 filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">cut</td>\n<td style=\"text-align:left\">显示文件每行中的某些域</td>\n<td style=\"text-align:left\">cut -f1,7 -d: /etc/passwd</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">colrm</td>\n<td style=\"text-align:left\">从标准输入中删除若干列</td>\n<td style=\"text-align:left\">colrm 8 20 file2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">paste</td>\n<td style=\"text-align:left\">横向连接文件</td>\n<td style=\"text-align:left\">paste file1 file2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">diff</td>\n<td style=\"text-align:left\">比较并显示两个文件的差异</td>\n<td style=\"text-align:left\">diff file1 file2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">sed</td>\n<td style=\"text-align:left\">非交互方式流编辑器</td>\n<td style=\"text-align:left\">sed “s/red/green/g” filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">grep</td>\n<td style=\"text-align:left\">在文件中按模式查找</td>\n<td style=\"text-align:left\">grep “^[a-zA-Z]” filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">awk</td>\n<td style=\"text-align:left\">在文件中查找并处理模式</td>\n<td style=\"text-align:left\">awk ‘{print $1 $1}’ filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">sort</td>\n<td style=\"text-align:left\">排序或归并文件</td>\n<td style=\"text-align:left\">sort -d -f -u file1</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">uniq</td>\n<td style=\"text-align:left\">去掉文件中的重复行</td>\n<td style=\"text-align:left\">uniq file1 file2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">comm</td>\n<td style=\"text-align:left\">显示两有序文件的公共和非公共行</td>\n<td style=\"text-align:left\">comm file1 file2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">wc</td>\n<td style=\"text-align:left\">统计文件的字符数、词数和行数</td>\n<td style=\"text-align:left\">wc filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">nl</td>\n<td style=\"text-align:left\">给文件加上行号</td>\n<td style=\"text-align:left\">nl file1 &gt;file2</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"安全操作\"><a href=\"#安全操作\" class=\"headerlink\" title=\"安全操作\"></a>安全操作</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">命令名</th>\n<th style=\"text-align:left\">功能描述</th>\n<th style=\"text-align:left\">使用举例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">passwd</td>\n<td style=\"text-align:left\">修改用户密码</td>\n<td style=\"text-align:left\">passwd</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">chmod</td>\n<td style=\"text-align:left\">改变文件或目录的权限</td>\n<td style=\"text-align:left\">chmod ug+x filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">umask</td>\n<td style=\"text-align:left\">定义创建文件的权限掩码</td>\n<td style=\"text-align:left\">umask 027</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">chown</td>\n<td style=\"text-align:left\">改变文件或目录的属主</td>\n<td style=\"text-align:left\">chown newowner filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">chgrp</td>\n<td style=\"text-align:left\">改变文件或目录的所属组</td>\n<td style=\"text-align:left\">chgrp staff filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">xlock</td>\n<td style=\"text-align:left\">给终端上锁</td>\n<td style=\"text-align:left\">xlock -remote</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"编程操作\"><a href=\"#编程操作\" class=\"headerlink\" title=\"编程操作\"></a>编程操作</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">命令名</th>\n<th style=\"text-align:left\">功能描述</th>\n<th style=\"text-align:left\">使用举例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">make</td>\n<td style=\"text-align:left\">维护可执行程序的最新版本</td>\n<td style=\"text-align:left\">make</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">touch</td>\n<td style=\"text-align:left\">更新文件的访问和修改时间</td>\n<td style=\"text-align:left\">touch -m 05202400 filename</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">dbx</td>\n<td style=\"text-align:left\">命令行界面调试工具</td>\n<td style=\"text-align:left\">dbx a.out</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">xde</td>\n<td style=\"text-align:left\">图形用户界面调试工具</td>\n<td style=\"text-align:left\">xde a.out</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"进程操作\"><a href=\"#进程操作\" class=\"headerlink\" title=\"进程操作\"></a>进程操作</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">命令名</th>\n<th style=\"text-align:left\">功能描述</th>\n<th style=\"text-align:left\">使用举例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">ps</td>\n<td style=\"text-align:left\">显示进程当前状态</td>\n<td style=\"text-align:left\">ps u</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">kill</td>\n<td style=\"text-align:left\">终止进程</td>\n<td style=\"text-align:left\">kill -9 30142</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">nice</td>\n<td style=\"text-align:left\">改变待执行命令的优先级</td>\n<td style=\"text-align:left\">nice cc -c *.c</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">renice</td>\n<td style=\"text-align:left\">改变已运行进程的优先级</td>\n<td style=\"text-align:left\">renice +20 32768</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"时间操作\"><a href=\"#时间操作\" class=\"headerlink\" title=\"时间操作\"></a>时间操作</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">命令名</th>\n<th style=\"text-align:left\">功能描述</th>\n<th style=\"text-align:left\">使用举例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">date</td>\n<td style=\"text-align:left\">显示系统的当前日期和时间</td>\n<td style=\"text-align:left\">date</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">cal</td>\n<td style=\"text-align:left\">显示日历</td>\n<td style=\"text-align:left\">cal 8 1996</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">time</td>\n<td style=\"text-align:left\">统计程序的执行时间</td>\n<td style=\"text-align:left\">time a.out</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"网络与通信操作\"><a href=\"#网络与通信操作\" class=\"headerlink\" title=\"网络与通信操作\"></a>网络与通信操作</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">命令名</th>\n<th style=\"text-align:left\">功能描述</th>\n<th style=\"text-align:left\">使用举例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">telnet</td>\n<td style=\"text-align:left\">远程登录</td>\n<td style=\"text-align:left\">telnet hpc.sp.net.edu.cn</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">rlogin</td>\n<td style=\"text-align:left\">远程登录</td>\n<td style=\"text-align:left\">rlogin hostname -l username</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">rsh</td>\n<td style=\"text-align:left\">在远程主机执行指定命令</td>\n<td style=\"text-align:left\">rsh f01n03 date</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ftp</td>\n<td style=\"text-align:left\">在本地主机与远程主机之间传输文件</td>\n<td style=\"text-align:left\">ftp ftp.sp.net.edu.cn</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">rcp</td>\n<td style=\"text-align:left\">在本地主机与远程主机 之间复制文件</td>\n<td style=\"text-align:left\">rcp file1 host1:file2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ping</td>\n<td style=\"text-align:left\">给一个网络主机发送 回应请求</td>\n<td style=\"text-align:left\">ping hpc.sp.net.edu.cn</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">mail</td>\n<td style=\"text-align:left\">阅读和发送电子邮件</td>\n<td style=\"text-align:left\">mail</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">write</td>\n<td style=\"text-align:left\">给另一用户发送报文</td>\n<td style=\"text-align:left\">write username pts/1</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">mesg</td>\n<td style=\"text-align:left\">允许或拒绝接收报文</td>\n<td style=\"text-align:left\">mesg n</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"shell-命令\"><a href=\"#shell-命令\" class=\"headerlink\" title=\"shell 命令\"></a>shell 命令</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">命令名</th>\n<th style=\"text-align:left\">功能描述</th>\n<th style=\"text-align:left\">使用举例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">history</td>\n<td style=\"text-align:left\">列出最近执行过的 几条命令及编号</td>\n<td style=\"text-align:left\">history</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">r</td>\n<td style=\"text-align:left\">重复执行最近执行过的 某条命令</td>\n<td style=\"text-align:left\">r -2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">alias</td>\n<td style=\"text-align:left\">给某个命令定义别名</td>\n<td style=\"text-align:left\">alias del=rm -i</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">unalias</td>\n<td style=\"text-align:left\">取消对某个别名的定义</td>\n<td style=\"text-align:left\">unalias del</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"其它命令\"><a href=\"#其它命令\" class=\"headerlink\" title=\"其它命令\"></a>其它命令</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">命令名</th>\n<th style=\"text-align:left\">功能描述</th>\n<th style=\"text-align:left\">使用举例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">uname</td>\n<td style=\"text-align:left\">显示操作系统的有关信息</td>\n<td style=\"text-align:left\">uname -a</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">clear</td>\n<td style=\"text-align:left\">清除屏幕或窗口内容</td>\n<td style=\"text-align:left\">clear</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">env</td>\n<td style=\"text-align:left\">显示当前所有设置过的环境变量</td>\n<td style=\"text-align:left\">env</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">who</td>\n<td style=\"text-align:left\">列出当前登录的所有用户</td>\n<td style=\"text-align:left\">who</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">whoami</td>\n<td style=\"text-align:left\">显示当前正进行操作的用户名</td>\n<td style=\"text-align:left\">whoami</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">tty</td>\n<td style=\"text-align:left\">显示终端或伪终端的名称</td>\n<td style=\"text-align:left\">tty</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">stty</td>\n<td style=\"text-align:left\">显示或重置控制键定义</td>\n<td style=\"text-align:left\">stty -a</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">du</td>\n<td style=\"text-align:left\">查询磁盘使用情况</td>\n<td style=\"text-align:left\">du -k subdir</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">df</td>\n<td style=\"text-align:left\">显示文件系统的总空间和可用空间</td>\n<td style=\"text-align:left\">df /tmp</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">w</td>\n<td style=\"text-align:left\">显示当前系统活动的总信息</td>\n<td style=\"text-align:left\">w</td>\n</tr>\n</tbody>\n</table>\n"},{"title":"MongoDB导入与导出","date":"2018-10-24T07:50:48.000Z","_content":"\n## 导出\n\n### 概念\n\nmongoDB 中的 mongoexport 工具可以把一个 collection 导出成 JSON 格式或 CSV 格式的文件。可以通过参数指定导出的数据项，也可以根据指定的条件导出数据。\n\n### 语法\n\n``` JSON\nmongoexport -d dbname -c collectionname -o file --type json/csv -f field\n        参数说明：\n            -d ：数据库名\n            -c ：collection名\n            -o ：输出的路径和文件名\n            --type ： 输出的格式，默认为json\n            -f ：输出的字段，如果-type为csv，则需要加上-f \"字段名\"\n```\n\n### 例子\n\n``` bash\n➜  mongodb-vue git:(master) ✗ mongoexport -d lolTest -c myhero -o /Users/chengheai/Desktop/a.json --type json\n2018-10-24T15:41:56.489+0800\tconnected to: localhost\n2018-10-24T15:41:56.496+0800\texported 12 records\n```\n\n## 导入\n\n### 语法\n\n``` JSON\n    mongoimport -d dbname -c collectionname --file filename --headerline --type json/csv -f field\n   参数说明：\n            -d ：数据库名\n            -c ：collection名\n            --type ：导入的格式默认json\n            -f ：导入的字段名\n            --headerline ：如果导入的格式是csv，则可以使用第一行的标题作为导入的字段\n            --file ：要导入的文件\n```\n\n### 例子\n\n``` bash\n➜  mongodb-vue git:(master) ✗ mongoimport -d mgDbs -c myhero --file /Users/chengheai/Desktop/a.json  --type json\n2018-10-24T15:47:09.209+0800\tconnected to: localhost\n2018-10-24T15:47:09.273+0800\timported 12 documents\n```\n## 备份\n```\nmongodump -h host -d dbname -o directory\nmongodump -h IP --port 端口 -u 用户名 -p 密码 -d 数据库 -o 文件存在路径\nEg： # mongodump -d test -o /data/\n参数说明：\n如果想导出所有数据库，可以去掉-d\n-h：MongDB所在服务器地址，如：127.0.0.1，也可以指定端口号：127.0.0.1:27017\n-d：需要备份的数据库名称，如：db_test\n-o：备份的数据存放位置，如：~\\dump，当然该目录需要提前建立，在备份完成后，系统自动在dump目录下建立一个db_test目录，这个目录里面存放该数据库实例的备份数据。\n```\n## 恢复\n### 概念\nmongorestore是Mongodb从备份中恢复数据的工具，它主要用来获取mongodump的输出结果，并将备份的数据插入到运行的Mongodb中。\n```\nmongorestore -h host -d dbname --directoryperdb dbdirectory\nEg:  # mongorestore --host=10.0.0.25 --port=27017 --db ztjy --dir=ztjy/\n参数说明：\n-h：MongoDB所在服务器地址\n-d：需要恢复的数据库名称，如：db_test，当然这个名称可以不同于备份的时候，比如new_db\n--directoryperdb：备份数据文件所在位置，如：~\\dump\\db_test（这里之所以要加db_test子目录，从mongoretore的help中的--directoryperdb，可以读出“每一个db在一个单独的目录”。）\n```\n","source":"_posts/MongoDB导入与导出.md","raw":"---\ntitle: MongoDB导入与导出\ndate: 2018-10-24 15:50:48\ntags: mongoDB\n---\n\n## 导出\n\n### 概念\n\nmongoDB 中的 mongoexport 工具可以把一个 collection 导出成 JSON 格式或 CSV 格式的文件。可以通过参数指定导出的数据项，也可以根据指定的条件导出数据。\n\n### 语法\n\n``` JSON\nmongoexport -d dbname -c collectionname -o file --type json/csv -f field\n        参数说明：\n            -d ：数据库名\n            -c ：collection名\n            -o ：输出的路径和文件名\n            --type ： 输出的格式，默认为json\n            -f ：输出的字段，如果-type为csv，则需要加上-f \"字段名\"\n```\n\n### 例子\n\n``` bash\n➜  mongodb-vue git:(master) ✗ mongoexport -d lolTest -c myhero -o /Users/chengheai/Desktop/a.json --type json\n2018-10-24T15:41:56.489+0800\tconnected to: localhost\n2018-10-24T15:41:56.496+0800\texported 12 records\n```\n\n## 导入\n\n### 语法\n\n``` JSON\n    mongoimport -d dbname -c collectionname --file filename --headerline --type json/csv -f field\n   参数说明：\n            -d ：数据库名\n            -c ：collection名\n            --type ：导入的格式默认json\n            -f ：导入的字段名\n            --headerline ：如果导入的格式是csv，则可以使用第一行的标题作为导入的字段\n            --file ：要导入的文件\n```\n\n### 例子\n\n``` bash\n➜  mongodb-vue git:(master) ✗ mongoimport -d mgDbs -c myhero --file /Users/chengheai/Desktop/a.json  --type json\n2018-10-24T15:47:09.209+0800\tconnected to: localhost\n2018-10-24T15:47:09.273+0800\timported 12 documents\n```\n## 备份\n```\nmongodump -h host -d dbname -o directory\nmongodump -h IP --port 端口 -u 用户名 -p 密码 -d 数据库 -o 文件存在路径\nEg： # mongodump -d test -o /data/\n参数说明：\n如果想导出所有数据库，可以去掉-d\n-h：MongDB所在服务器地址，如：127.0.0.1，也可以指定端口号：127.0.0.1:27017\n-d：需要备份的数据库名称，如：db_test\n-o：备份的数据存放位置，如：~\\dump，当然该目录需要提前建立，在备份完成后，系统自动在dump目录下建立一个db_test目录，这个目录里面存放该数据库实例的备份数据。\n```\n## 恢复\n### 概念\nmongorestore是Mongodb从备份中恢复数据的工具，它主要用来获取mongodump的输出结果，并将备份的数据插入到运行的Mongodb中。\n```\nmongorestore -h host -d dbname --directoryperdb dbdirectory\nEg:  # mongorestore --host=10.0.0.25 --port=27017 --db ztjy --dir=ztjy/\n参数说明：\n-h：MongoDB所在服务器地址\n-d：需要恢复的数据库名称，如：db_test，当然这个名称可以不同于备份的时候，比如new_db\n--directoryperdb：备份数据文件所在位置，如：~\\dump\\db_test（这里之所以要加db_test子目录，从mongoretore的help中的--directoryperdb，可以读出“每一个db在一个单独的目录”。）\n```\n","slug":"MongoDB导入与导出","published":1,"updated":"2021-10-09T08:48:32.059Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzaan00095c54kwgve51i","content":"<h2 id=\"导出\"><a href=\"#导出\" class=\"headerlink\" title=\"导出\"></a>导出</h2><h3 id=\"概念\"><a href=\"#概念\" class=\"headerlink\" title=\"概念\"></a>概念</h3><p>mongoDB 中的 mongoexport 工具可以把一个 collection 导出成 JSON 格式或 CSV 格式的文件。可以通过参数指定导出的数据项，也可以根据指定的条件导出数据。</p>\n<h3 id=\"语法\"><a href=\"#语法\" class=\"headerlink\" title=\"语法\"></a>语法</h3><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mongoexport -d dbname -c collectionname -o file --type json/csv -f field</span><br><span class=\"line\">        参数说明：</span><br><span class=\"line\">            -d ：数据库名</span><br><span class=\"line\">            -c ：collection名</span><br><span class=\"line\">            -o ：输出的路径和文件名</span><br><span class=\"line\">            --type ： 输出的格式，默认为json</span><br><span class=\"line\">            -f ：输出的字段，如果-type为csv，则需要加上-f \"字段名\"</span><br></pre></td></tr></table></figure>\n<h3 id=\"例子\"><a href=\"#例子\" class=\"headerlink\" title=\"例子\"></a>例子</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">➜  mongodb-vue git:(master) ✗ mongoexport -d lolTest -c myhero -o /Users/chengheai/Desktop/a.json --<span class=\"built_in\">type</span> json</span><br><span class=\"line\">2018-10-24T15:41:56.489+0800\tconnected to: localhost</span><br><span class=\"line\">2018-10-24T15:41:56.496+0800\texported 12 records</span><br></pre></td></tr></table></figure>\n<h2 id=\"导入\"><a href=\"#导入\" class=\"headerlink\" title=\"导入\"></a>导入</h2><h3 id=\"语法-1\"><a href=\"#语法-1\" class=\"headerlink\" title=\"语法\"></a>语法</h3><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    mongoimport -d dbname -c collectionname --file filename --headerline --type json/csv -f field</span><br><span class=\"line\">   参数说明：</span><br><span class=\"line\">            -d ：数据库名</span><br><span class=\"line\">            -c ：collection名</span><br><span class=\"line\">            --type ：导入的格式默认json</span><br><span class=\"line\">            -f ：导入的字段名</span><br><span class=\"line\">            --headerline ：如果导入的格式是csv，则可以使用第一行的标题作为导入的字段</span><br><span class=\"line\">            --file ：要导入的文件</span><br></pre></td></tr></table></figure>\n<h3 id=\"例子-1\"><a href=\"#例子-1\" class=\"headerlink\" title=\"例子\"></a>例子</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">➜  mongodb-vue git:(master) ✗ mongoimport -d mgDbs -c myhero --file /Users/chengheai/Desktop/a.json  --<span class=\"built_in\">type</span> json</span><br><span class=\"line\">2018-10-24T15:47:09.209+0800\tconnected to: localhost</span><br><span class=\"line\">2018-10-24T15:47:09.273+0800\timported 12 documents</span><br></pre></td></tr></table></figure>\n<h2 id=\"备份\"><a href=\"#备份\" class=\"headerlink\" title=\"备份\"></a>备份</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mongodump -h host -d dbname -o directory</span><br><span class=\"line\">mongodump -h IP --port 端口 -u 用户名 -p 密码 -d 数据库 -o 文件存在路径</span><br><span class=\"line\">Eg： # mongodump -d test -o /data/</span><br><span class=\"line\">参数说明：</span><br><span class=\"line\">如果想导出所有数据库，可以去掉-d</span><br><span class=\"line\">-h：MongDB所在服务器地址，如：127.0.0.1，也可以指定端口号：127.0.0.1:27017</span><br><span class=\"line\">-d：需要备份的数据库名称，如：db_test</span><br><span class=\"line\">-o：备份的数据存放位置，如：~\\dump，当然该目录需要提前建立，在备份完成后，系统自动在dump目录下建立一个db_test目录，这个目录里面存放该数据库实例的备份数据。</span><br></pre></td></tr></table></figure>\n<h2 id=\"恢复\"><a href=\"#恢复\" class=\"headerlink\" title=\"恢复\"></a>恢复</h2><h3 id=\"概念-1\"><a href=\"#概念-1\" class=\"headerlink\" title=\"概念\"></a>概念</h3><p>mongorestore是Mongodb从备份中恢复数据的工具，它主要用来获取mongodump的输出结果，并将备份的数据插入到运行的Mongodb中。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mongorestore -h host -d dbname --directoryperdb dbdirectory</span><br><span class=\"line\">Eg:  # mongorestore --host=10.0.0.25 --port=27017 --db ztjy --dir=ztjy/</span><br><span class=\"line\">参数说明：</span><br><span class=\"line\">-h：MongoDB所在服务器地址</span><br><span class=\"line\">-d：需要恢复的数据库名称，如：db_test，当然这个名称可以不同于备份的时候，比如new_db</span><br><span class=\"line\">--directoryperdb：备份数据文件所在位置，如：~\\dump\\db_test（这里之所以要加db_test子目录，从mongoretore的help中的--directoryperdb，可以读出“每一个db在一个单独的目录”。）</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"导出\"><a href=\"#导出\" class=\"headerlink\" title=\"导出\"></a>导出</h2><h3 id=\"概念\"><a href=\"#概念\" class=\"headerlink\" title=\"概念\"></a>概念</h3><p>mongoDB 中的 mongoexport 工具可以把一个 collection 导出成 JSON 格式或 CSV 格式的文件。可以通过参数指定导出的数据项，也可以根据指定的条件导出数据。</p>\n<h3 id=\"语法\"><a href=\"#语法\" class=\"headerlink\" title=\"语法\"></a>语法</h3><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mongoexport -d dbname -c collectionname -o file --type json/csv -f field</span><br><span class=\"line\">        参数说明：</span><br><span class=\"line\">            -d ：数据库名</span><br><span class=\"line\">            -c ：collection名</span><br><span class=\"line\">            -o ：输出的路径和文件名</span><br><span class=\"line\">            --type ： 输出的格式，默认为json</span><br><span class=\"line\">            -f ：输出的字段，如果-type为csv，则需要加上-f \"字段名\"</span><br></pre></td></tr></table></figure>\n<h3 id=\"例子\"><a href=\"#例子\" class=\"headerlink\" title=\"例子\"></a>例子</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">➜  mongodb-vue git:(master) ✗ mongoexport -d lolTest -c myhero -o /Users/chengheai/Desktop/a.json --<span class=\"built_in\">type</span> json</span><br><span class=\"line\">2018-10-24T15:41:56.489+0800\tconnected to: localhost</span><br><span class=\"line\">2018-10-24T15:41:56.496+0800\texported 12 records</span><br></pre></td></tr></table></figure>\n<h2 id=\"导入\"><a href=\"#导入\" class=\"headerlink\" title=\"导入\"></a>导入</h2><h3 id=\"语法-1\"><a href=\"#语法-1\" class=\"headerlink\" title=\"语法\"></a>语法</h3><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    mongoimport -d dbname -c collectionname --file filename --headerline --type json/csv -f field</span><br><span class=\"line\">   参数说明：</span><br><span class=\"line\">            -d ：数据库名</span><br><span class=\"line\">            -c ：collection名</span><br><span class=\"line\">            --type ：导入的格式默认json</span><br><span class=\"line\">            -f ：导入的字段名</span><br><span class=\"line\">            --headerline ：如果导入的格式是csv，则可以使用第一行的标题作为导入的字段</span><br><span class=\"line\">            --file ：要导入的文件</span><br></pre></td></tr></table></figure>\n<h3 id=\"例子-1\"><a href=\"#例子-1\" class=\"headerlink\" title=\"例子\"></a>例子</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">➜  mongodb-vue git:(master) ✗ mongoimport -d mgDbs -c myhero --file /Users/chengheai/Desktop/a.json  --<span class=\"built_in\">type</span> json</span><br><span class=\"line\">2018-10-24T15:47:09.209+0800\tconnected to: localhost</span><br><span class=\"line\">2018-10-24T15:47:09.273+0800\timported 12 documents</span><br></pre></td></tr></table></figure>\n<h2 id=\"备份\"><a href=\"#备份\" class=\"headerlink\" title=\"备份\"></a>备份</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mongodump -h host -d dbname -o directory</span><br><span class=\"line\">mongodump -h IP --port 端口 -u 用户名 -p 密码 -d 数据库 -o 文件存在路径</span><br><span class=\"line\">Eg： # mongodump -d test -o /data/</span><br><span class=\"line\">参数说明：</span><br><span class=\"line\">如果想导出所有数据库，可以去掉-d</span><br><span class=\"line\">-h：MongDB所在服务器地址，如：127.0.0.1，也可以指定端口号：127.0.0.1:27017</span><br><span class=\"line\">-d：需要备份的数据库名称，如：db_test</span><br><span class=\"line\">-o：备份的数据存放位置，如：~\\dump，当然该目录需要提前建立，在备份完成后，系统自动在dump目录下建立一个db_test目录，这个目录里面存放该数据库实例的备份数据。</span><br></pre></td></tr></table></figure>\n<h2 id=\"恢复\"><a href=\"#恢复\" class=\"headerlink\" title=\"恢复\"></a>恢复</h2><h3 id=\"概念-1\"><a href=\"#概念-1\" class=\"headerlink\" title=\"概念\"></a>概念</h3><p>mongorestore是Mongodb从备份中恢复数据的工具，它主要用来获取mongodump的输出结果，并将备份的数据插入到运行的Mongodb中。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mongorestore -h host -d dbname --directoryperdb dbdirectory</span><br><span class=\"line\">Eg:  # mongorestore --host=10.0.0.25 --port=27017 --db ztjy --dir=ztjy/</span><br><span class=\"line\">参数说明：</span><br><span class=\"line\">-h：MongoDB所在服务器地址</span><br><span class=\"line\">-d：需要恢复的数据库名称，如：db_test，当然这个名称可以不同于备份的时候，比如new_db</span><br><span class=\"line\">--directoryperdb：备份数据文件所在位置，如：~\\dump\\db_test（这里之所以要加db_test子目录，从mongoretore的help中的--directoryperdb，可以读出“每一个db在一个单独的目录”。）</span><br></pre></td></tr></table></figure></p>\n"},{"title":"VSCode快捷键Mac","date":"2018-10-18T05:45:04.000Z","_content":"## 全局\nCommand + Shift + P / F1 显示命令面板\nCommand + P 快速打开\nCommand + Shift + N 打开新窗口\nCommand + W 关闭窗口\n## 基本\nCommand + X 剪切（未选中文本的情况下，剪切光标所在行）\nCommand + C 复制（未选中文本的情况下，复制光标所在行）\nOption + Up 向上移动行\nOption + Down 向下移动行\nOption + Shift + Up 向上复制行\nOption + Shift + Down 向下复制行\nCommand + Shift + K 删除行\nCommand + Enter 下一行插入\nCommand + Shift + Enter 上一行插入\nCommand + Shift + \\ 跳转到匹配的括号\nCommand + [ 减少缩进\nCommand + ] 增加缩进\nHome 跳转至行首\nEnd 跳转到行尾\nCommand + Up 跳转至文件开头\nCommand + Down 跳转至文件结尾\nCtrl + PgUp 按行向上滚动\nCtrl + PgDown 按行向下滚动\nCommand + PgUp 按屏向上滚动\nCommand + PgDown 按屏向下滚动\nCommand + Shift + [ 折叠代码块\nCommand + Shift + ] 展开代码块\nCommand + K Command + [ 折叠全部子代码块\nCommand + K Command + ] 展开全部子代码块\nCommand + K Command + 0 折叠全部代码块\nCommand + K Command + J 展开全部代码块\nCommand + K Command + C 添加行注释\nCommand + K Command + U 移除行注释\nCommand + / 添加、移除行注释\nOption + Shift + A 添加、移除块注释\nOption + Z 自动换行、取消自动换行\n## 多光标与选择\nOption + 点击 插入多个光标\nCommand + Option + Up 向上插入光标\nCommand + Option + Down 向下插入光标\nCommand + U 撤销上一个光标操作\nOption + Shift + I 在所选行的行尾插入光标\nCommand + I 选中当前行\nCommand + Shift + L 选中所有与当前选中内容相同部分\nCommand + F2 选中所有与当前选中单词相同的单词\nCommand + Ctrl + Shift + Left 折叠选中\nCommand + Ctrl + Shift + Right 展开选中\nAlt + Shift + 拖动鼠标 选中代码块\nCommand + Shift + Option + Up 列选择 向上\nCommand + Shift + Option + Down 列选择 向下\nCommand + Shift + Option + Left 列选择 向左\nCommand + Shift + Option + Right 列选择 向右\nCommand + Shift + Option + PgUp 列选择 向上翻页\nCommand + Shift + Option + PgDown 列选择 向下翻页\n## 查找替换\nCommand + F 查找\nCommand + Option + F 替换\nCommand + G 查找下一个\nCommand + Shift + G 查找上一个\nOption + Enter 选中所有匹配项\nCommand + D 向下选中相同内容\nCommand + K Command + D 移除前一个向下选中相同内容\n## 进阶\nCtrl + Space 打开建议\nCommand + Shift + Space 参数提示\nTab Emmet插件缩写补全\nOption + Shift + F 格式化\nCommand + K Command + F 格式化选中内容\nF12 跳转到声明位置\nOption + F12 查看具体声明内容\nCommand + K F12 分屏查看具体声明内容\nCommand + . 快速修复\nShift + F12 显示引用\nF2 重命名符号\nCommand + Shift + . 替换为上一个值\nCommand + Shift + , 替换为下一个值\nCommand + K Command + X 删除行尾多余空格\nCommand + K M 更改文件语言\n## 编辑\nCommand + W 关闭编辑器\nCommand + K F 关闭文件夹\nCommand + \\ 编辑器分屏\nCommand + 1 切换到第一分组\nCommand + 2 切换到第二分组\nCommand + 3 切换到第三分组\nCommand + K Command + Left 切换到上一分组\nCommand + K Command + Right 切换到下一分组\nCommand + K Command + Shift + Left 左移编辑器\nCommand + K Command + Shift + Right 右移编辑器\nCommand + K Left 激活左侧编辑组\nCommand + K Right 激活右侧编辑组\n## 文件\nCommand + N 新建文件\nCommand + O 打开文件\nCommand + S 保存文件\nCommand + Shift + S 另存为\nCommand + Option + S 全部保存\nCommand + W 关闭\nCommand + K Command + W 全部关闭\nCommand + Shift + T 重新打开被关闭的编辑器\nCommand + K Enter 保持打开\nCtrl + Tab 打开下一个\nCtrl + Shift + Tab 打开上一个\nCommand + K P 复制当前文件路径\nCommand + K R 在资源管理器中查看当前文件\nCommand + K O 新窗口打开当前文件\n## 显示\nCommand + Ctrl + F 全屏、退出全屏\nCommand + Option + 1 切换编辑器分屏方式（横、竖）\nCommand + + 放大\nCommand + - 缩小\nCommand + B 显示、隐藏侧边栏\nCommand + Shift + E 显示资源管理器 或 切换焦点\nCommand + Shift + F 显示搜索框\nCtrl + Shift + G 显示Git面板\nCommand + Shift + D 显示调试面板\nCommand + Shift + X 显示插件面板\nCommand + Shift + H 全局搜索替换\nCommand + Shift + J 显示、隐藏高级搜索\nCommand + Shift + C 打开新终端\nCommand + Shift + U 显示输出面板\nCommand + Shift + V Markdown预览窗口\nCommand + K V 分屏显示 Markdown预览窗口\n## 集成终端\nCtrl + ` 显示终端\nCtrl + Shift + ` 新建终端\nCommand + Up 向上滚动\nCommand + Down 向下滚动\nPgUp 向上翻页\nPgDown 向下翻页\nCommand + Home 滚动到顶部\nCommand + End 滚动到底部","source":"_posts/VSCode快捷键Mac.md","raw":"---\ntitle: VSCode快捷键Mac\ndate: 2018-10-18 13:45:04\ntags: vscode\n---\n## 全局\nCommand + Shift + P / F1 显示命令面板\nCommand + P 快速打开\nCommand + Shift + N 打开新窗口\nCommand + W 关闭窗口\n## 基本\nCommand + X 剪切（未选中文本的情况下，剪切光标所在行）\nCommand + C 复制（未选中文本的情况下，复制光标所在行）\nOption + Up 向上移动行\nOption + Down 向下移动行\nOption + Shift + Up 向上复制行\nOption + Shift + Down 向下复制行\nCommand + Shift + K 删除行\nCommand + Enter 下一行插入\nCommand + Shift + Enter 上一行插入\nCommand + Shift + \\ 跳转到匹配的括号\nCommand + [ 减少缩进\nCommand + ] 增加缩进\nHome 跳转至行首\nEnd 跳转到行尾\nCommand + Up 跳转至文件开头\nCommand + Down 跳转至文件结尾\nCtrl + PgUp 按行向上滚动\nCtrl + PgDown 按行向下滚动\nCommand + PgUp 按屏向上滚动\nCommand + PgDown 按屏向下滚动\nCommand + Shift + [ 折叠代码块\nCommand + Shift + ] 展开代码块\nCommand + K Command + [ 折叠全部子代码块\nCommand + K Command + ] 展开全部子代码块\nCommand + K Command + 0 折叠全部代码块\nCommand + K Command + J 展开全部代码块\nCommand + K Command + C 添加行注释\nCommand + K Command + U 移除行注释\nCommand + / 添加、移除行注释\nOption + Shift + A 添加、移除块注释\nOption + Z 自动换行、取消自动换行\n## 多光标与选择\nOption + 点击 插入多个光标\nCommand + Option + Up 向上插入光标\nCommand + Option + Down 向下插入光标\nCommand + U 撤销上一个光标操作\nOption + Shift + I 在所选行的行尾插入光标\nCommand + I 选中当前行\nCommand + Shift + L 选中所有与当前选中内容相同部分\nCommand + F2 选中所有与当前选中单词相同的单词\nCommand + Ctrl + Shift + Left 折叠选中\nCommand + Ctrl + Shift + Right 展开选中\nAlt + Shift + 拖动鼠标 选中代码块\nCommand + Shift + Option + Up 列选择 向上\nCommand + Shift + Option + Down 列选择 向下\nCommand + Shift + Option + Left 列选择 向左\nCommand + Shift + Option + Right 列选择 向右\nCommand + Shift + Option + PgUp 列选择 向上翻页\nCommand + Shift + Option + PgDown 列选择 向下翻页\n## 查找替换\nCommand + F 查找\nCommand + Option + F 替换\nCommand + G 查找下一个\nCommand + Shift + G 查找上一个\nOption + Enter 选中所有匹配项\nCommand + D 向下选中相同内容\nCommand + K Command + D 移除前一个向下选中相同内容\n## 进阶\nCtrl + Space 打开建议\nCommand + Shift + Space 参数提示\nTab Emmet插件缩写补全\nOption + Shift + F 格式化\nCommand + K Command + F 格式化选中内容\nF12 跳转到声明位置\nOption + F12 查看具体声明内容\nCommand + K F12 分屏查看具体声明内容\nCommand + . 快速修复\nShift + F12 显示引用\nF2 重命名符号\nCommand + Shift + . 替换为上一个值\nCommand + Shift + , 替换为下一个值\nCommand + K Command + X 删除行尾多余空格\nCommand + K M 更改文件语言\n## 编辑\nCommand + W 关闭编辑器\nCommand + K F 关闭文件夹\nCommand + \\ 编辑器分屏\nCommand + 1 切换到第一分组\nCommand + 2 切换到第二分组\nCommand + 3 切换到第三分组\nCommand + K Command + Left 切换到上一分组\nCommand + K Command + Right 切换到下一分组\nCommand + K Command + Shift + Left 左移编辑器\nCommand + K Command + Shift + Right 右移编辑器\nCommand + K Left 激活左侧编辑组\nCommand + K Right 激活右侧编辑组\n## 文件\nCommand + N 新建文件\nCommand + O 打开文件\nCommand + S 保存文件\nCommand + Shift + S 另存为\nCommand + Option + S 全部保存\nCommand + W 关闭\nCommand + K Command + W 全部关闭\nCommand + Shift + T 重新打开被关闭的编辑器\nCommand + K Enter 保持打开\nCtrl + Tab 打开下一个\nCtrl + Shift + Tab 打开上一个\nCommand + K P 复制当前文件路径\nCommand + K R 在资源管理器中查看当前文件\nCommand + K O 新窗口打开当前文件\n## 显示\nCommand + Ctrl + F 全屏、退出全屏\nCommand + Option + 1 切换编辑器分屏方式（横、竖）\nCommand + + 放大\nCommand + - 缩小\nCommand + B 显示、隐藏侧边栏\nCommand + Shift + E 显示资源管理器 或 切换焦点\nCommand + Shift + F 显示搜索框\nCtrl + Shift + G 显示Git面板\nCommand + Shift + D 显示调试面板\nCommand + Shift + X 显示插件面板\nCommand + Shift + H 全局搜索替换\nCommand + Shift + J 显示、隐藏高级搜索\nCommand + Shift + C 打开新终端\nCommand + Shift + U 显示输出面板\nCommand + Shift + V Markdown预览窗口\nCommand + K V 分屏显示 Markdown预览窗口\n## 集成终端\nCtrl + ` 显示终端\nCtrl + Shift + ` 新建终端\nCommand + Up 向上滚动\nCommand + Down 向下滚动\nPgUp 向上翻页\nPgDown 向下翻页\nCommand + Home 滚动到顶部\nCommand + End 滚动到底部","slug":"VSCode快捷键Mac","published":1,"updated":"2021-10-09T08:48:32.060Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzaao000a5c54n1l7oym0","content":"<h2 id=\"全局\"><a href=\"#全局\" class=\"headerlink\" title=\"全局\"></a>全局</h2><p>Command + Shift + P / F1 显示命令面板<br>Command + P 快速打开<br>Command + Shift + N 打开新窗口<br>Command + W 关闭窗口</p>\n<h2 id=\"基本\"><a href=\"#基本\" class=\"headerlink\" title=\"基本\"></a>基本</h2><p>Command + X 剪切（未选中文本的情况下，剪切光标所在行）<br>Command + C 复制（未选中文本的情况下，复制光标所在行）<br>Option + Up 向上移动行<br>Option + Down 向下移动行<br>Option + Shift + Up 向上复制行<br>Option + Shift + Down 向下复制行<br>Command + Shift + K 删除行<br>Command + Enter 下一行插入<br>Command + Shift + Enter 上一行插入<br>Command + Shift + \\ 跳转到匹配的括号<br>Command + [ 减少缩进<br>Command + ] 增加缩进<br>Home 跳转至行首<br>End 跳转到行尾<br>Command + Up 跳转至文件开头<br>Command + Down 跳转至文件结尾<br>Ctrl + PgUp 按行向上滚动<br>Ctrl + PgDown 按行向下滚动<br>Command + PgUp 按屏向上滚动<br>Command + PgDown 按屏向下滚动<br>Command + Shift + [ 折叠代码块<br>Command + Shift + ] 展开代码块<br>Command + K Command + [ 折叠全部子代码块<br>Command + K Command + ] 展开全部子代码块<br>Command + K Command + 0 折叠全部代码块<br>Command + K Command + J 展开全部代码块<br>Command + K Command + C 添加行注释<br>Command + K Command + U 移除行注释<br>Command + / 添加、移除行注释<br>Option + Shift + A 添加、移除块注释<br>Option + Z 自动换行、取消自动换行</p>\n<h2 id=\"多光标与选择\"><a href=\"#多光标与选择\" class=\"headerlink\" title=\"多光标与选择\"></a>多光标与选择</h2><p>Option + 点击 插入多个光标<br>Command + Option + Up 向上插入光标<br>Command + Option + Down 向下插入光标<br>Command + U 撤销上一个光标操作<br>Option + Shift + I 在所选行的行尾插入光标<br>Command + I 选中当前行<br>Command + Shift + L 选中所有与当前选中内容相同部分<br>Command + F2 选中所有与当前选中单词相同的单词<br>Command + Ctrl + Shift + Left 折叠选中<br>Command + Ctrl + Shift + Right 展开选中<br>Alt + Shift + 拖动鼠标 选中代码块<br>Command + Shift + Option + Up 列选择 向上<br>Command + Shift + Option + Down 列选择 向下<br>Command + Shift + Option + Left 列选择 向左<br>Command + Shift + Option + Right 列选择 向右<br>Command + Shift + Option + PgUp 列选择 向上翻页<br>Command + Shift + Option + PgDown 列选择 向下翻页</p>\n<h2 id=\"查找替换\"><a href=\"#查找替换\" class=\"headerlink\" title=\"查找替换\"></a>查找替换</h2><p>Command + F 查找<br>Command + Option + F 替换<br>Command + G 查找下一个<br>Command + Shift + G 查找上一个<br>Option + Enter 选中所有匹配项<br>Command + D 向下选中相同内容<br>Command + K Command + D 移除前一个向下选中相同内容</p>\n<h2 id=\"进阶\"><a href=\"#进阶\" class=\"headerlink\" title=\"进阶\"></a>进阶</h2><p>Ctrl + Space 打开建议<br>Command + Shift + Space 参数提示<br>Tab Emmet插件缩写补全<br>Option + Shift + F 格式化<br>Command + K Command + F 格式化选中内容<br>F12 跳转到声明位置<br>Option + F12 查看具体声明内容<br>Command + K F12 分屏查看具体声明内容<br>Command + . 快速修复<br>Shift + F12 显示引用<br>F2 重命名符号<br>Command + Shift + . 替换为上一个值<br>Command + Shift + , 替换为下一个值<br>Command + K Command + X 删除行尾多余空格<br>Command + K M 更改文件语言</p>\n<h2 id=\"编辑\"><a href=\"#编辑\" class=\"headerlink\" title=\"编辑\"></a>编辑</h2><p>Command + W 关闭编辑器<br>Command + K F 关闭文件夹<br>Command + \\ 编辑器分屏<br>Command + 1 切换到第一分组<br>Command + 2 切换到第二分组<br>Command + 3 切换到第三分组<br>Command + K Command + Left 切换到上一分组<br>Command + K Command + Right 切换到下一分组<br>Command + K Command + Shift + Left 左移编辑器<br>Command + K Command + Shift + Right 右移编辑器<br>Command + K Left 激活左侧编辑组<br>Command + K Right 激活右侧编辑组</p>\n<h2 id=\"文件\"><a href=\"#文件\" class=\"headerlink\" title=\"文件\"></a>文件</h2><p>Command + N 新建文件<br>Command + O 打开文件<br>Command + S 保存文件<br>Command + Shift + S 另存为<br>Command + Option + S 全部保存<br>Command + W 关闭<br>Command + K Command + W 全部关闭<br>Command + Shift + T 重新打开被关闭的编辑器<br>Command + K Enter 保持打开<br>Ctrl + Tab 打开下一个<br>Ctrl + Shift + Tab 打开上一个<br>Command + K P 复制当前文件路径<br>Command + K R 在资源管理器中查看当前文件<br>Command + K O 新窗口打开当前文件</p>\n<h2 id=\"显示\"><a href=\"#显示\" class=\"headerlink\" title=\"显示\"></a>显示</h2><p>Command + Ctrl + F 全屏、退出全屏<br>Command + Option + 1 切换编辑器分屏方式（横、竖）<br>Command + + 放大<br>Command + - 缩小<br>Command + B 显示、隐藏侧边栏<br>Command + Shift + E 显示资源管理器 或 切换焦点<br>Command + Shift + F 显示搜索框<br>Ctrl + Shift + G 显示Git面板<br>Command + Shift + D 显示调试面板<br>Command + Shift + X 显示插件面板<br>Command + Shift + H 全局搜索替换<br>Command + Shift + J 显示、隐藏高级搜索<br>Command + Shift + C 打开新终端<br>Command + Shift + U 显示输出面板<br>Command + Shift + V Markdown预览窗口<br>Command + K V 分屏显示 Markdown预览窗口</p>\n<h2 id=\"集成终端\"><a href=\"#集成终端\" class=\"headerlink\" title=\"集成终端\"></a>集成终端</h2><p>Ctrl + <code>显示终端\nCtrl + Shift +</code> 新建终端<br>Command + Up 向上滚动<br>Command + Down 向下滚动<br>PgUp 向上翻页<br>PgDown 向下翻页<br>Command + Home 滚动到顶部<br>Command + End 滚动到底部</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"全局\"><a href=\"#全局\" class=\"headerlink\" title=\"全局\"></a>全局</h2><p>Command + Shift + P / F1 显示命令面板<br>Command + P 快速打开<br>Command + Shift + N 打开新窗口<br>Command + W 关闭窗口</p>\n<h2 id=\"基本\"><a href=\"#基本\" class=\"headerlink\" title=\"基本\"></a>基本</h2><p>Command + X 剪切（未选中文本的情况下，剪切光标所在行）<br>Command + C 复制（未选中文本的情况下，复制光标所在行）<br>Option + Up 向上移动行<br>Option + Down 向下移动行<br>Option + Shift + Up 向上复制行<br>Option + Shift + Down 向下复制行<br>Command + Shift + K 删除行<br>Command + Enter 下一行插入<br>Command + Shift + Enter 上一行插入<br>Command + Shift + \\ 跳转到匹配的括号<br>Command + [ 减少缩进<br>Command + ] 增加缩进<br>Home 跳转至行首<br>End 跳转到行尾<br>Command + Up 跳转至文件开头<br>Command + Down 跳转至文件结尾<br>Ctrl + PgUp 按行向上滚动<br>Ctrl + PgDown 按行向下滚动<br>Command + PgUp 按屏向上滚动<br>Command + PgDown 按屏向下滚动<br>Command + Shift + [ 折叠代码块<br>Command + Shift + ] 展开代码块<br>Command + K Command + [ 折叠全部子代码块<br>Command + K Command + ] 展开全部子代码块<br>Command + K Command + 0 折叠全部代码块<br>Command + K Command + J 展开全部代码块<br>Command + K Command + C 添加行注释<br>Command + K Command + U 移除行注释<br>Command + / 添加、移除行注释<br>Option + Shift + A 添加、移除块注释<br>Option + Z 自动换行、取消自动换行</p>\n<h2 id=\"多光标与选择\"><a href=\"#多光标与选择\" class=\"headerlink\" title=\"多光标与选择\"></a>多光标与选择</h2><p>Option + 点击 插入多个光标<br>Command + Option + Up 向上插入光标<br>Command + Option + Down 向下插入光标<br>Command + U 撤销上一个光标操作<br>Option + Shift + I 在所选行的行尾插入光标<br>Command + I 选中当前行<br>Command + Shift + L 选中所有与当前选中内容相同部分<br>Command + F2 选中所有与当前选中单词相同的单词<br>Command + Ctrl + Shift + Left 折叠选中<br>Command + Ctrl + Shift + Right 展开选中<br>Alt + Shift + 拖动鼠标 选中代码块<br>Command + Shift + Option + Up 列选择 向上<br>Command + Shift + Option + Down 列选择 向下<br>Command + Shift + Option + Left 列选择 向左<br>Command + Shift + Option + Right 列选择 向右<br>Command + Shift + Option + PgUp 列选择 向上翻页<br>Command + Shift + Option + PgDown 列选择 向下翻页</p>\n<h2 id=\"查找替换\"><a href=\"#查找替换\" class=\"headerlink\" title=\"查找替换\"></a>查找替换</h2><p>Command + F 查找<br>Command + Option + F 替换<br>Command + G 查找下一个<br>Command + Shift + G 查找上一个<br>Option + Enter 选中所有匹配项<br>Command + D 向下选中相同内容<br>Command + K Command + D 移除前一个向下选中相同内容</p>\n<h2 id=\"进阶\"><a href=\"#进阶\" class=\"headerlink\" title=\"进阶\"></a>进阶</h2><p>Ctrl + Space 打开建议<br>Command + Shift + Space 参数提示<br>Tab Emmet插件缩写补全<br>Option + Shift + F 格式化<br>Command + K Command + F 格式化选中内容<br>F12 跳转到声明位置<br>Option + F12 查看具体声明内容<br>Command + K F12 分屏查看具体声明内容<br>Command + . 快速修复<br>Shift + F12 显示引用<br>F2 重命名符号<br>Command + Shift + . 替换为上一个值<br>Command + Shift + , 替换为下一个值<br>Command + K Command + X 删除行尾多余空格<br>Command + K M 更改文件语言</p>\n<h2 id=\"编辑\"><a href=\"#编辑\" class=\"headerlink\" title=\"编辑\"></a>编辑</h2><p>Command + W 关闭编辑器<br>Command + K F 关闭文件夹<br>Command + \\ 编辑器分屏<br>Command + 1 切换到第一分组<br>Command + 2 切换到第二分组<br>Command + 3 切换到第三分组<br>Command + K Command + Left 切换到上一分组<br>Command + K Command + Right 切换到下一分组<br>Command + K Command + Shift + Left 左移编辑器<br>Command + K Command + Shift + Right 右移编辑器<br>Command + K Left 激活左侧编辑组<br>Command + K Right 激活右侧编辑组</p>\n<h2 id=\"文件\"><a href=\"#文件\" class=\"headerlink\" title=\"文件\"></a>文件</h2><p>Command + N 新建文件<br>Command + O 打开文件<br>Command + S 保存文件<br>Command + Shift + S 另存为<br>Command + Option + S 全部保存<br>Command + W 关闭<br>Command + K Command + W 全部关闭<br>Command + Shift + T 重新打开被关闭的编辑器<br>Command + K Enter 保持打开<br>Ctrl + Tab 打开下一个<br>Ctrl + Shift + Tab 打开上一个<br>Command + K P 复制当前文件路径<br>Command + K R 在资源管理器中查看当前文件<br>Command + K O 新窗口打开当前文件</p>\n<h2 id=\"显示\"><a href=\"#显示\" class=\"headerlink\" title=\"显示\"></a>显示</h2><p>Command + Ctrl + F 全屏、退出全屏<br>Command + Option + 1 切换编辑器分屏方式（横、竖）<br>Command + + 放大<br>Command + - 缩小<br>Command + B 显示、隐藏侧边栏<br>Command + Shift + E 显示资源管理器 或 切换焦点<br>Command + Shift + F 显示搜索框<br>Ctrl + Shift + G 显示Git面板<br>Command + Shift + D 显示调试面板<br>Command + Shift + X 显示插件面板<br>Command + Shift + H 全局搜索替换<br>Command + Shift + J 显示、隐藏高级搜索<br>Command + Shift + C 打开新终端<br>Command + Shift + U 显示输出面板<br>Command + Shift + V Markdown预览窗口<br>Command + K V 分屏显示 Markdown预览窗口</p>\n<h2 id=\"集成终端\"><a href=\"#集成终端\" class=\"headerlink\" title=\"集成终端\"></a>集成终端</h2><p>Ctrl + <code>显示终端\nCtrl + Shift +</code> 新建终端<br>Command + Up 向上滚动<br>Command + Down 向下滚动<br>PgUp 向上翻页<br>PgDown 向下翻页<br>Command + Home 滚动到顶部<br>Command + End 滚动到底部</p>\n"},{"title":"Vuejs+Element监听-window.resize-el-menu响应式显示","date":"2018-12-28T08:47:31.000Z","_content":"## 效果\n![](https://github.com/chengheai/review-demo-image/blob/master/2018-12-28%2016-39-06.2018-12-28%2016_41_51.gif?raw=true)\n\n## 代码\n### template\n``` html\n<template>\n  <div class=\"sidebar\">\n    <!-- 折叠按钮 -->\n    <div class=\"collapse-btn\" @click=\"collapseChage\">\n      <i class=\"el-icon-d-arrow-left\" v-show=\"!collapse\" title=\"收起\">\n        &nbsp;&nbsp;\n        <small>收缩侧边栏</small>\n      </i>\n      <i class=\"el-icon-d-arrow-right\" v-show=\"collapse\" title=\"展开\"></i>\n    </div>\n    <el-menu\n      class=\"sidebar-el-menu\"\n      :default-active=\"onRoutes\"\n      :collapse=\"collapse\"\n      text-color=\"#8d9199\"\n      active-text-color=\"#20a0ff\"\n      unique-opened\n      router\n    >\n      <template v-for=\"item in items\">\n        <template v-if=\"item.subs\">\n          <el-submenu :index=\"item.index\" :key=\"item.index\">\n            <template slot=\"title\">\n              <i :class=\"item.icon\"></i>\n              <span slot=\"title\">{{ item.title }}</span>\n            </template>\n            <template v-for=\"subItem in item.subs\">\n              <el-submenu v-if=\"subItem.subs\" :index=\"subItem.index\" :key=\"subItem.index\">\n                <template slot=\"title\">\n                  <i :class=\"subItem.icon\"></i>\n                  {{ subItem.title }}\n                </template>\n                <el-menu-item\n                  v-for=\"(threeItem,i) in subItem.subs\"\n                  :key=\"i\"\n                  :index=\"threeItem.index\"\n                >{{ threeItem.title }}</el-menu-item>\n              </el-submenu>\n              <el-menu-item v-else :index=\"subItem.index\" :key=\"subItem.index\">\n                <i :class=\"subItem.icon\"></i>\n                {{ subItem.title }}\n              </el-menu-item>\n            </template>\n          </el-submenu>\n        </template>\n        <template v-else>\n          <el-menu-item :index=\"item.index\" :key=\"item.index\">\n            <i :class=\"item.icon\"></i>\n            <span slot=\"title\">{{ item.title }}</span>\n          </el-menu-item>\n        </template>\n      </template>\n    </el-menu>\n    <div>\n      <i class=\"el-icon-d-arrow-right\" v-show=\"collapse\" title=\"展开\"></i>\n    </div>\n  </div>\n</template>\n```\n### javascript\n``` javascript\n<script>\nimport bus from \"./bus\";\nimport { menu } from \"../../data/menu\";\n\nexport default {\n  data() {\n    return {\n      collapse: false,\n      items: menu,\n      screenWidth: 1000\n    };\n  },\n  computed: {\n    onRoutes() {\n      return this.$route.path.replace(\"/\", \"\");\n    }\n  },\n  created() {\n    // 通过 Event Bus 进行组件间通信，来折叠侧边栏\n    bus.$on(\"collapse\", msg => {\n      this.collapse = msg;\n    });\n  },\n  mounted() {\n    // if (document.body.clientWidth < 1500) {\n    //   this.collapseChage();\n    // }\n    const that = this;\n    window.addEventListener(\"resize\", function() {\n      return (() => {\n        window.screenWidth = document.body.clientWidth;\n        that.screenWidth = window.screenWidth;\n      })();\n    });\n  },\n  watch: {\n    screenWidth(val) {\n      if (!this.timer) {\n        this.screenWidth = val;\n        this.timer = true;\n        let that = this;\n        setTimeout(function() {\n          // that.screenWidth = that.$store.state.canvasWidth\n          console.log(that.screenWidth);\n          that.auto();\n          that.timer = false;\n        }, 400);\n      }\n    }\n  },\n  methods: {\n    // 侧边栏折叠\n    collapseChage() {\n      this.collapse = !this.collapse;\n      bus.$emit(\"collapse\", this.collapse);\n    },\n    auto() {\n      if (this.screenWidth < 1200) {\n        console.log(\"收起来\");\n        this.collapse = true;\n        bus.$emit(\"collapse\", true);\n      } else {\n        console.log(\"展开\");\n        this.collapse = false;\n        bus.$emit(\"collapse\", false);\n      }\n    }\n  }\n};\n</script>\n```\n### css\n``` css\n<style scoped>\n.sidebar {\n  z-index: 1024;\n  display: block;\n  position: fixed;\n  left: 0;\n  top: 70px;\n  bottom: 0;\n  overflow-y: scroll;\n}\n.sidebar::-webkit-scrollbar {\n  width: 0;\n}\n.sidebar-el-menu:not(.el-menu--collapse) {\n  width: 200px;\n}\n.sidebar > ul {\n  height: 100%; /*写给不支持calc()的浏览器*/\n  height: calc(100% - 52px);\n  top: 30px;\n  background-color: rgb(235, 239, 243);\n  border-top: 1px solid #d6d6d6;\n}\n.sidebar > ul > li,\n.sidebar > ul > li div {\n  background-color: rgb(235, 239, 243);\n}\n.sidebar > ul > li > ul {\n  background-color: rgb(235, 239, 243);\n}\n.el-menu {\n  background-color: rgb(235, 239, 243);\n}\ni {\n  margin-right: 10px;\n}\n.collapse-btn {\n  height: 30px;\n  width: 100%;\n  cursor: pointer;\n  line-height: 30px;\n  position: absolute;\n  top: 0;\n  left: 0;\n  background-color: #f4f6fa;\n  color: #fff;\n  text-align: center;\n  overflow: hidden;\n  box-sizing: border-box;\n  box-shadow: 0 5px 10px #ddd;\n}\n.collapse-btn i {\n  color: #8d9199;\n  padding: 1px;\n  cursor: pointer;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n/* .collapse-btn:before{\n        content: \"\";\n        display: block;\n        height: 0;\n        border-top: 1px dotted #909399;\n        position: absolute;\n        left: 15px;\n        right: 15px;\n        top: 18px;\n    } */\n</style>\n```\n##注意⚠️\n此开发框架是github 名为 lin-xin 的 vue-manage-system\n因公司项目需要兼容iPad，故而修改\n详细代码点击这里 👇🏽👇🏽👇🏽👇🏽👇🏽👇🏽👇🏽👇🏽\n[完整代码请点我👅 🦊 🐸 🚎 ](https://github.com/chengheai/daily-vue-demo/blob/master/src/pages/Side.vue)\n\n","source":"_posts/Vuejs-Element监听-window-resize-el-menu响应式显示.md","raw":"---\ntitle: Vuejs+Element监听-window.resize-el-menu响应式显示\ndate: 2018-12-28 16:47:31\ntags: [element-ui, vue]\n---\n## 效果\n![](https://github.com/chengheai/review-demo-image/blob/master/2018-12-28%2016-39-06.2018-12-28%2016_41_51.gif?raw=true)\n\n## 代码\n### template\n``` html\n<template>\n  <div class=\"sidebar\">\n    <!-- 折叠按钮 -->\n    <div class=\"collapse-btn\" @click=\"collapseChage\">\n      <i class=\"el-icon-d-arrow-left\" v-show=\"!collapse\" title=\"收起\">\n        &nbsp;&nbsp;\n        <small>收缩侧边栏</small>\n      </i>\n      <i class=\"el-icon-d-arrow-right\" v-show=\"collapse\" title=\"展开\"></i>\n    </div>\n    <el-menu\n      class=\"sidebar-el-menu\"\n      :default-active=\"onRoutes\"\n      :collapse=\"collapse\"\n      text-color=\"#8d9199\"\n      active-text-color=\"#20a0ff\"\n      unique-opened\n      router\n    >\n      <template v-for=\"item in items\">\n        <template v-if=\"item.subs\">\n          <el-submenu :index=\"item.index\" :key=\"item.index\">\n            <template slot=\"title\">\n              <i :class=\"item.icon\"></i>\n              <span slot=\"title\">{{ item.title }}</span>\n            </template>\n            <template v-for=\"subItem in item.subs\">\n              <el-submenu v-if=\"subItem.subs\" :index=\"subItem.index\" :key=\"subItem.index\">\n                <template slot=\"title\">\n                  <i :class=\"subItem.icon\"></i>\n                  {{ subItem.title }}\n                </template>\n                <el-menu-item\n                  v-for=\"(threeItem,i) in subItem.subs\"\n                  :key=\"i\"\n                  :index=\"threeItem.index\"\n                >{{ threeItem.title }}</el-menu-item>\n              </el-submenu>\n              <el-menu-item v-else :index=\"subItem.index\" :key=\"subItem.index\">\n                <i :class=\"subItem.icon\"></i>\n                {{ subItem.title }}\n              </el-menu-item>\n            </template>\n          </el-submenu>\n        </template>\n        <template v-else>\n          <el-menu-item :index=\"item.index\" :key=\"item.index\">\n            <i :class=\"item.icon\"></i>\n            <span slot=\"title\">{{ item.title }}</span>\n          </el-menu-item>\n        </template>\n      </template>\n    </el-menu>\n    <div>\n      <i class=\"el-icon-d-arrow-right\" v-show=\"collapse\" title=\"展开\"></i>\n    </div>\n  </div>\n</template>\n```\n### javascript\n``` javascript\n<script>\nimport bus from \"./bus\";\nimport { menu } from \"../../data/menu\";\n\nexport default {\n  data() {\n    return {\n      collapse: false,\n      items: menu,\n      screenWidth: 1000\n    };\n  },\n  computed: {\n    onRoutes() {\n      return this.$route.path.replace(\"/\", \"\");\n    }\n  },\n  created() {\n    // 通过 Event Bus 进行组件间通信，来折叠侧边栏\n    bus.$on(\"collapse\", msg => {\n      this.collapse = msg;\n    });\n  },\n  mounted() {\n    // if (document.body.clientWidth < 1500) {\n    //   this.collapseChage();\n    // }\n    const that = this;\n    window.addEventListener(\"resize\", function() {\n      return (() => {\n        window.screenWidth = document.body.clientWidth;\n        that.screenWidth = window.screenWidth;\n      })();\n    });\n  },\n  watch: {\n    screenWidth(val) {\n      if (!this.timer) {\n        this.screenWidth = val;\n        this.timer = true;\n        let that = this;\n        setTimeout(function() {\n          // that.screenWidth = that.$store.state.canvasWidth\n          console.log(that.screenWidth);\n          that.auto();\n          that.timer = false;\n        }, 400);\n      }\n    }\n  },\n  methods: {\n    // 侧边栏折叠\n    collapseChage() {\n      this.collapse = !this.collapse;\n      bus.$emit(\"collapse\", this.collapse);\n    },\n    auto() {\n      if (this.screenWidth < 1200) {\n        console.log(\"收起来\");\n        this.collapse = true;\n        bus.$emit(\"collapse\", true);\n      } else {\n        console.log(\"展开\");\n        this.collapse = false;\n        bus.$emit(\"collapse\", false);\n      }\n    }\n  }\n};\n</script>\n```\n### css\n``` css\n<style scoped>\n.sidebar {\n  z-index: 1024;\n  display: block;\n  position: fixed;\n  left: 0;\n  top: 70px;\n  bottom: 0;\n  overflow-y: scroll;\n}\n.sidebar::-webkit-scrollbar {\n  width: 0;\n}\n.sidebar-el-menu:not(.el-menu--collapse) {\n  width: 200px;\n}\n.sidebar > ul {\n  height: 100%; /*写给不支持calc()的浏览器*/\n  height: calc(100% - 52px);\n  top: 30px;\n  background-color: rgb(235, 239, 243);\n  border-top: 1px solid #d6d6d6;\n}\n.sidebar > ul > li,\n.sidebar > ul > li div {\n  background-color: rgb(235, 239, 243);\n}\n.sidebar > ul > li > ul {\n  background-color: rgb(235, 239, 243);\n}\n.el-menu {\n  background-color: rgb(235, 239, 243);\n}\ni {\n  margin-right: 10px;\n}\n.collapse-btn {\n  height: 30px;\n  width: 100%;\n  cursor: pointer;\n  line-height: 30px;\n  position: absolute;\n  top: 0;\n  left: 0;\n  background-color: #f4f6fa;\n  color: #fff;\n  text-align: center;\n  overflow: hidden;\n  box-sizing: border-box;\n  box-shadow: 0 5px 10px #ddd;\n}\n.collapse-btn i {\n  color: #8d9199;\n  padding: 1px;\n  cursor: pointer;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n/* .collapse-btn:before{\n        content: \"\";\n        display: block;\n        height: 0;\n        border-top: 1px dotted #909399;\n        position: absolute;\n        left: 15px;\n        right: 15px;\n        top: 18px;\n    } */\n</style>\n```\n##注意⚠️\n此开发框架是github 名为 lin-xin 的 vue-manage-system\n因公司项目需要兼容iPad，故而修改\n详细代码点击这里 👇🏽👇🏽👇🏽👇🏽👇🏽👇🏽👇🏽👇🏽\n[完整代码请点我👅 🦊 🐸 🚎 ](https://github.com/chengheai/daily-vue-demo/blob/master/src/pages/Side.vue)\n\n","slug":"Vuejs-Element监听-window-resize-el-menu响应式显示","published":1,"updated":"2021-10-09T08:48:32.061Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzaaq000c5c54nwjijcjs","content":"<h2 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/2018-12-28%2016-39-06.2018-12-28%2016_41_51.gif?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><h3 id=\"template\"><a href=\"#template\" class=\"headerlink\" title=\"template\"></a>template</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"sidebar\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 折叠按钮 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"collapse-btn\"</span> @<span class=\"attr\">click</span>=<span class=\"string\">\"collapseChage\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">\"el-icon-d-arrow-left\"</span> <span class=\"attr\">v-show</span>=<span class=\"string\">\"!collapse\"</span> <span class=\"attr\">title</span>=<span class=\"string\">\"收起\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"symbol\">&amp;nbsp;</span><span class=\"symbol\">&amp;nbsp;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">small</span>&gt;</span>收缩侧边栏<span class=\"tag\">&lt;/<span class=\"name\">small</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">\"el-icon-d-arrow-right\"</span> <span class=\"attr\">v-show</span>=<span class=\"string\">\"collapse\"</span> <span class=\"attr\">title</span>=<span class=\"string\">\"展开\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-menu</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">class</span>=<span class=\"string\">\"sidebar-el-menu\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:default-active</span>=<span class=\"string\">\"onRoutes\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:collapse</span>=<span class=\"string\">\"collapse\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">text-color</span>=<span class=\"string\">\"#8d9199\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">active-text-color</span>=<span class=\"string\">\"#20a0ff\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">unique-opened</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">router</span></span></span><br><span class=\"line\"><span class=\"tag\">    &gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"item in items\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">v-if</span>=<span class=\"string\">\"item.subs\"</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">el-submenu</span> <span class=\"attr\">:index</span>=<span class=\"string\">\"item.index\"</span> <span class=\"attr\">:key</span>=<span class=\"string\">\"item.index\"</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">slot</span>=<span class=\"string\">\"title\"</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">:class</span>=<span class=\"string\">\"item.icon\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">slot</span>=<span class=\"string\">\"title\"</span>&gt;</span>&#123;&#123; item.title &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"subItem in item.subs\"</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">el-submenu</span> <span class=\"attr\">v-if</span>=<span class=\"string\">\"subItem.subs\"</span> <span class=\"attr\">:index</span>=<span class=\"string\">\"subItem.index\"</span> <span class=\"attr\">:key</span>=<span class=\"string\">\"subItem.index\"</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">slot</span>=<span class=\"string\">\"title\"</span>&gt;</span></span><br><span class=\"line\">                  <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">:class</span>=<span class=\"string\">\"subItem.icon\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">                  &#123;&#123; subItem.title &#125;&#125;</span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">el-menu-item</span></span></span><br><span class=\"line\"><span class=\"tag\">                  <span class=\"attr\">v-for</span>=<span class=\"string\">\"(threeItem,i) in subItem.subs\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                  <span class=\"attr\">:key</span>=<span class=\"string\">\"i\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                  <span class=\"attr\">:index</span>=<span class=\"string\">\"threeItem.index\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                &gt;</span>&#123;&#123; threeItem.title &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">el-menu-item</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;/<span class=\"name\">el-submenu</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">el-menu-item</span> <span class=\"attr\">v-else</span> <span class=\"attr\">:index</span>=<span class=\"string\">\"subItem.index\"</span> <span class=\"attr\">:key</span>=<span class=\"string\">\"subItem.index\"</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">:class</span>=<span class=\"string\">\"subItem.icon\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">                &#123;&#123; subItem.title &#125;&#125;</span><br><span class=\"line\">              <span class=\"tag\">&lt;/<span class=\"name\">el-menu-item</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;/<span class=\"name\">el-submenu</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">v-else</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">el-menu-item</span> <span class=\"attr\">:index</span>=<span class=\"string\">\"item.index\"</span> <span class=\"attr\">:key</span>=<span class=\"string\">\"item.index\"</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">:class</span>=<span class=\"string\">\"item.icon\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">slot</span>=<span class=\"string\">\"title\"</span>&gt;</span>&#123;&#123; item.title &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;/<span class=\"name\">el-menu-item</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">el-menu</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">\"el-icon-d-arrow-right\"</span> <span class=\"attr\">v-show</span>=<span class=\"string\">\"collapse\"</span> <span class=\"attr\">title</span>=<span class=\"string\">\"展开\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"javascript\"><a href=\"#javascript\" class=\"headerlink\" title=\"javascript\"></a>javascript</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\"><span class=\"keyword\">import</span> bus <span class=\"keyword\">from</span> <span class=\"string\">\"./bus\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; menu &#125; <span class=\"keyword\">from</span> <span class=\"string\">\"../../data/menu\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  data() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      collapse: <span class=\"literal\">false</span>,</span><br><span class=\"line\">      items: menu,</span><br><span class=\"line\">      screenWidth: <span class=\"number\">1000</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  computed: &#123;</span><br><span class=\"line\">    onRoutes() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.$route.path.replace(<span class=\"string\">\"/\"</span>, <span class=\"string\">\"\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  created() &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 通过 Event Bus 进行组件间通信，来折叠侧边栏</span></span><br><span class=\"line\">    bus.$on(<span class=\"string\">\"collapse\"</span>, msg =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.collapse = msg;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  mounted() &#123;</span><br><span class=\"line\">    <span class=\"comment\">// if (document.body.clientWidth &lt; 1500) &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//   this.collapseChage();</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> that = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">\"resize\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">(</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">window</span>.screenWidth = <span class=\"built_in\">document</span>.body.clientWidth;</span><br><span class=\"line\">        that.screenWidth = <span class=\"built_in\">window</span>.screenWidth;</span><br><span class=\"line\">      &#125;)();</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  watch: &#123;</span><br><span class=\"line\">    screenWidth(val) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>.timer) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.screenWidth = val;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.timer = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> that = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">        setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">          <span class=\"comment\">// that.screenWidth = that.$store.state.canvasWidth</span></span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(that.screenWidth);</span><br><span class=\"line\">          that.auto();</span><br><span class=\"line\">          that.timer = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;, <span class=\"number\">400</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 侧边栏折叠</span></span><br><span class=\"line\">    collapseChage() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.collapse = !<span class=\"keyword\">this</span>.collapse;</span><br><span class=\"line\">      bus.$emit(<span class=\"string\">\"collapse\"</span>, <span class=\"keyword\">this</span>.collapse);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    auto() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.screenWidth &lt; <span class=\"number\">1200</span>) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">\"收起来\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.collapse = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        bus.$emit(<span class=\"string\">\"collapse\"</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">\"展开\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.collapse = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        bus.$emit(<span class=\"string\">\"collapse\"</span>, <span class=\"literal\">false</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">&lt;<span class=\"regexp\">/script&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"css\"><a href=\"#css\" class=\"headerlink\" title=\"css\"></a>css</h3><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;<span class=\"selector-tag\">style</span> <span class=\"selector-tag\">scoped</span>&gt;</span><br><span class=\"line\"><span class=\"selector-class\">.sidebar</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">z-index</span>: <span class=\"number\">1024</span>;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: fixed;</span><br><span class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">70px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">bottom</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">overflow-y</span>: scroll;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.sidebar</span><span class=\"selector-pseudo\">::-webkit-scrollbar</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.sidebar-el-menu</span><span class=\"selector-pseudo\">:not(.el-menu--collapse)</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.sidebar</span> &gt; <span class=\"selector-tag\">ul</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100%</span>; <span class=\"comment\">/*写给不支持calc()的浏览器*/</span></span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"built_in\">calc</span>(<span class=\"number\">100%</span> - <span class=\"number\">52px</span>);</span><br><span class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">30px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"built_in\">rgb</span>(<span class=\"number\">235</span>, <span class=\"number\">239</span>, <span class=\"number\">243</span>);</span><br><span class=\"line\">  <span class=\"attribute\">border-top</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#d6d6d6</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.sidebar</span> &gt; <span class=\"selector-tag\">ul</span> &gt; <span class=\"selector-tag\">li</span>,</span><br><span class=\"line\"><span class=\"selector-class\">.sidebar</span> &gt; <span class=\"selector-tag\">ul</span> &gt; <span class=\"selector-tag\">li</span> <span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"built_in\">rgb</span>(<span class=\"number\">235</span>, <span class=\"number\">239</span>, <span class=\"number\">243</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.sidebar</span> &gt; <span class=\"selector-tag\">ul</span> &gt; <span class=\"selector-tag\">li</span> &gt; <span class=\"selector-tag\">ul</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"built_in\">rgb</span>(<span class=\"number\">235</span>, <span class=\"number\">239</span>, <span class=\"number\">243</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.el-menu</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"built_in\">rgb</span>(<span class=\"number\">235</span>, <span class=\"number\">239</span>, <span class=\"number\">243</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-tag\">i</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">margin-right</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.collapse-btn</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">30px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">cursor</span>: pointer;</span><br><span class=\"line\">  <span class=\"attribute\">line-height</span>: <span class=\"number\">30px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"number\">#f4f6fa</span>;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"number\">#fff</span>;</span><br><span class=\"line\">  <span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">  <span class=\"attribute\">box-sizing</span>: border-box;</span><br><span class=\"line\">  <span class=\"attribute\">box-shadow</span>: <span class=\"number\">0</span> <span class=\"number\">5px</span> <span class=\"number\">10px</span> <span class=\"number\">#ddd</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.collapse-btn</span> <span class=\"selector-tag\">i</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"number\">#8d9199</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">1px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">cursor</span>: pointer;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">  <span class=\"attribute\">text-overflow</span>: ellipsis;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* .collapse-btn:before&#123;</span></span><br><span class=\"line\"><span class=\"comment\">        content: \"\";</span></span><br><span class=\"line\"><span class=\"comment\">        display: block;</span></span><br><span class=\"line\"><span class=\"comment\">        height: 0;</span></span><br><span class=\"line\"><span class=\"comment\">        border-top: 1px dotted #909399;</span></span><br><span class=\"line\"><span class=\"comment\">        position: absolute;</span></span><br><span class=\"line\"><span class=\"comment\">        left: 15px;</span></span><br><span class=\"line\"><span class=\"comment\">        right: 15px;</span></span><br><span class=\"line\"><span class=\"comment\">        top: 18px;</span></span><br><span class=\"line\"><span class=\"comment\">    &#125; */</span></span><br><span class=\"line\">&lt;/style&gt;</span><br></pre></td></tr></table></figure>\n<p>##注意⚠️<br>此开发框架是github 名为 lin-xin 的 vue-manage-system<br>因公司项目需要兼容iPad，故而修改<br>详细代码点击这里 👇🏽👇🏽👇🏽👇🏽👇🏽👇🏽👇🏽👇🏽<br><a href=\"https://github.com/chengheai/daily-vue-demo/blob/master/src/pages/Side.vue\">完整代码请点我👅 🦊 🐸 🚎 </a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/2018-12-28%2016-39-06.2018-12-28%2016_41_51.gif?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><h3 id=\"template\"><a href=\"#template\" class=\"headerlink\" title=\"template\"></a>template</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"sidebar\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 折叠按钮 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"collapse-btn\"</span> @<span class=\"attr\">click</span>=<span class=\"string\">\"collapseChage\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">\"el-icon-d-arrow-left\"</span> <span class=\"attr\">v-show</span>=<span class=\"string\">\"!collapse\"</span> <span class=\"attr\">title</span>=<span class=\"string\">\"收起\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"symbol\">&amp;nbsp;</span><span class=\"symbol\">&amp;nbsp;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">small</span>&gt;</span>收缩侧边栏<span class=\"tag\">&lt;/<span class=\"name\">small</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">\"el-icon-d-arrow-right\"</span> <span class=\"attr\">v-show</span>=<span class=\"string\">\"collapse\"</span> <span class=\"attr\">title</span>=<span class=\"string\">\"展开\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-menu</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">class</span>=<span class=\"string\">\"sidebar-el-menu\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:default-active</span>=<span class=\"string\">\"onRoutes\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:collapse</span>=<span class=\"string\">\"collapse\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">text-color</span>=<span class=\"string\">\"#8d9199\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">active-text-color</span>=<span class=\"string\">\"#20a0ff\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">unique-opened</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">router</span></span></span><br><span class=\"line\"><span class=\"tag\">    &gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"item in items\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">v-if</span>=<span class=\"string\">\"item.subs\"</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">el-submenu</span> <span class=\"attr\">:index</span>=<span class=\"string\">\"item.index\"</span> <span class=\"attr\">:key</span>=<span class=\"string\">\"item.index\"</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">slot</span>=<span class=\"string\">\"title\"</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">:class</span>=<span class=\"string\">\"item.icon\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">slot</span>=<span class=\"string\">\"title\"</span>&gt;</span>&#123;&#123; item.title &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"subItem in item.subs\"</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">el-submenu</span> <span class=\"attr\">v-if</span>=<span class=\"string\">\"subItem.subs\"</span> <span class=\"attr\">:index</span>=<span class=\"string\">\"subItem.index\"</span> <span class=\"attr\">:key</span>=<span class=\"string\">\"subItem.index\"</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">slot</span>=<span class=\"string\">\"title\"</span>&gt;</span></span><br><span class=\"line\">                  <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">:class</span>=<span class=\"string\">\"subItem.icon\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">                  &#123;&#123; subItem.title &#125;&#125;</span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">el-menu-item</span></span></span><br><span class=\"line\"><span class=\"tag\">                  <span class=\"attr\">v-for</span>=<span class=\"string\">\"(threeItem,i) in subItem.subs\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                  <span class=\"attr\">:key</span>=<span class=\"string\">\"i\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                  <span class=\"attr\">:index</span>=<span class=\"string\">\"threeItem.index\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                &gt;</span>&#123;&#123; threeItem.title &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">el-menu-item</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;/<span class=\"name\">el-submenu</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">el-menu-item</span> <span class=\"attr\">v-else</span> <span class=\"attr\">:index</span>=<span class=\"string\">\"subItem.index\"</span> <span class=\"attr\">:key</span>=<span class=\"string\">\"subItem.index\"</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">:class</span>=<span class=\"string\">\"subItem.icon\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">                &#123;&#123; subItem.title &#125;&#125;</span><br><span class=\"line\">              <span class=\"tag\">&lt;/<span class=\"name\">el-menu-item</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;/<span class=\"name\">el-submenu</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">v-else</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">el-menu-item</span> <span class=\"attr\">:index</span>=<span class=\"string\">\"item.index\"</span> <span class=\"attr\">:key</span>=<span class=\"string\">\"item.index\"</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">:class</span>=<span class=\"string\">\"item.icon\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">slot</span>=<span class=\"string\">\"title\"</span>&gt;</span>&#123;&#123; item.title &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;/<span class=\"name\">el-menu-item</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">el-menu</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">\"el-icon-d-arrow-right\"</span> <span class=\"attr\">v-show</span>=<span class=\"string\">\"collapse\"</span> <span class=\"attr\">title</span>=<span class=\"string\">\"展开\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"javascript\"><a href=\"#javascript\" class=\"headerlink\" title=\"javascript\"></a>javascript</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\"><span class=\"keyword\">import</span> bus <span class=\"keyword\">from</span> <span class=\"string\">\"./bus\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; menu &#125; <span class=\"keyword\">from</span> <span class=\"string\">\"../../data/menu\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  data() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      collapse: <span class=\"literal\">false</span>,</span><br><span class=\"line\">      items: menu,</span><br><span class=\"line\">      screenWidth: <span class=\"number\">1000</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  computed: &#123;</span><br><span class=\"line\">    onRoutes() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.$route.path.replace(<span class=\"string\">\"/\"</span>, <span class=\"string\">\"\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  created() &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 通过 Event Bus 进行组件间通信，来折叠侧边栏</span></span><br><span class=\"line\">    bus.$on(<span class=\"string\">\"collapse\"</span>, msg =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.collapse = msg;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  mounted() &#123;</span><br><span class=\"line\">    <span class=\"comment\">// if (document.body.clientWidth &lt; 1500) &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//   this.collapseChage();</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> that = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">\"resize\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">(</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">window</span>.screenWidth = <span class=\"built_in\">document</span>.body.clientWidth;</span><br><span class=\"line\">        that.screenWidth = <span class=\"built_in\">window</span>.screenWidth;</span><br><span class=\"line\">      &#125;)();</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  watch: &#123;</span><br><span class=\"line\">    screenWidth(val) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>.timer) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.screenWidth = val;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.timer = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> that = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">        setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">          <span class=\"comment\">// that.screenWidth = that.$store.state.canvasWidth</span></span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(that.screenWidth);</span><br><span class=\"line\">          that.auto();</span><br><span class=\"line\">          that.timer = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;, <span class=\"number\">400</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 侧边栏折叠</span></span><br><span class=\"line\">    collapseChage() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.collapse = !<span class=\"keyword\">this</span>.collapse;</span><br><span class=\"line\">      bus.$emit(<span class=\"string\">\"collapse\"</span>, <span class=\"keyword\">this</span>.collapse);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    auto() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.screenWidth &lt; <span class=\"number\">1200</span>) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">\"收起来\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.collapse = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        bus.$emit(<span class=\"string\">\"collapse\"</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">\"展开\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.collapse = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        bus.$emit(<span class=\"string\">\"collapse\"</span>, <span class=\"literal\">false</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">&lt;<span class=\"regexp\">/script&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"css\"><a href=\"#css\" class=\"headerlink\" title=\"css\"></a>css</h3><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;<span class=\"selector-tag\">style</span> <span class=\"selector-tag\">scoped</span>&gt;</span><br><span class=\"line\"><span class=\"selector-class\">.sidebar</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">z-index</span>: <span class=\"number\">1024</span>;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: fixed;</span><br><span class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">70px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">bottom</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">overflow-y</span>: scroll;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.sidebar</span><span class=\"selector-pseudo\">::-webkit-scrollbar</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.sidebar-el-menu</span><span class=\"selector-pseudo\">:not(.el-menu--collapse)</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.sidebar</span> &gt; <span class=\"selector-tag\">ul</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100%</span>; <span class=\"comment\">/*写给不支持calc()的浏览器*/</span></span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"built_in\">calc</span>(<span class=\"number\">100%</span> - <span class=\"number\">52px</span>);</span><br><span class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">30px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"built_in\">rgb</span>(<span class=\"number\">235</span>, <span class=\"number\">239</span>, <span class=\"number\">243</span>);</span><br><span class=\"line\">  <span class=\"attribute\">border-top</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#d6d6d6</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.sidebar</span> &gt; <span class=\"selector-tag\">ul</span> &gt; <span class=\"selector-tag\">li</span>,</span><br><span class=\"line\"><span class=\"selector-class\">.sidebar</span> &gt; <span class=\"selector-tag\">ul</span> &gt; <span class=\"selector-tag\">li</span> <span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"built_in\">rgb</span>(<span class=\"number\">235</span>, <span class=\"number\">239</span>, <span class=\"number\">243</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.sidebar</span> &gt; <span class=\"selector-tag\">ul</span> &gt; <span class=\"selector-tag\">li</span> &gt; <span class=\"selector-tag\">ul</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"built_in\">rgb</span>(<span class=\"number\">235</span>, <span class=\"number\">239</span>, <span class=\"number\">243</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.el-menu</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"built_in\">rgb</span>(<span class=\"number\">235</span>, <span class=\"number\">239</span>, <span class=\"number\">243</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-tag\">i</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">margin-right</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.collapse-btn</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">30px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">cursor</span>: pointer;</span><br><span class=\"line\">  <span class=\"attribute\">line-height</span>: <span class=\"number\">30px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"number\">#f4f6fa</span>;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"number\">#fff</span>;</span><br><span class=\"line\">  <span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">  <span class=\"attribute\">box-sizing</span>: border-box;</span><br><span class=\"line\">  <span class=\"attribute\">box-shadow</span>: <span class=\"number\">0</span> <span class=\"number\">5px</span> <span class=\"number\">10px</span> <span class=\"number\">#ddd</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.collapse-btn</span> <span class=\"selector-tag\">i</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"number\">#8d9199</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">1px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">cursor</span>: pointer;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">  <span class=\"attribute\">text-overflow</span>: ellipsis;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* .collapse-btn:before&#123;</span></span><br><span class=\"line\"><span class=\"comment\">        content: \"\";</span></span><br><span class=\"line\"><span class=\"comment\">        display: block;</span></span><br><span class=\"line\"><span class=\"comment\">        height: 0;</span></span><br><span class=\"line\"><span class=\"comment\">        border-top: 1px dotted #909399;</span></span><br><span class=\"line\"><span class=\"comment\">        position: absolute;</span></span><br><span class=\"line\"><span class=\"comment\">        left: 15px;</span></span><br><span class=\"line\"><span class=\"comment\">        right: 15px;</span></span><br><span class=\"line\"><span class=\"comment\">        top: 18px;</span></span><br><span class=\"line\"><span class=\"comment\">    &#125; */</span></span><br><span class=\"line\">&lt;/style&gt;</span><br></pre></td></tr></table></figure>\n<p>##注意⚠️<br>此开发框架是github 名为 lin-xin 的 vue-manage-system<br>因公司项目需要兼容iPad，故而修改<br>详细代码点击这里 👇🏽👇🏽👇🏽👇🏽👇🏽👇🏽👇🏽👇🏽<br><a href=\"https://github.com/chengheai/daily-vue-demo/blob/master/src/pages/Side.vue\">完整代码请点我👅 🦊 🐸 🚎 </a></p>\n"},{"title":"Mint-ui-infinite-scroll解决重复加载","date":"2019-01-22T02:40:09.000Z","_content":"## 第一种方法（当数据不多的情况下使用【比如排行榜10条】）\n### 思路\n每次上滑的时候都调一次接口，直到没有数据就将infinite-scroll-disabled 设为true，每次截取slice(i * 3,  (i + 1) * 3）; 3是每次显示的条数\n## 代码\n``` html\n<div class=\"r-contatin\">\n  <ul\n    class=\"r-item-wrapper\"\n    v-infinite-scroll=\"loadMore\"\n    infinite-scroll-disabled=\"loading\"\n    infinite-scroll-distance=\"10\"\n  >\n    <li v-for=\"(item, key) in list\" :key=\"key\">\n      <div>{{item}}=={{key}}</div>\n    </li>\n  </ul>\n</div>\n\n<p v-if=\"!noMore\" class=\"loading-tip\">\n  <mt-spinner color=\"rgba(255, 51, 153, 1)\" type=\"fading-circle\"></mt-spinner>\n  <span style=\"margin-left: 5px;\">更多加载中...</span>\n</p>\n<p class=\"no-more\" v-else>没有更多了~</p>\n```\n``` javascript\ndata() {\n  return {\n    list: [],\n    moreList: [],\n    i: 0,\n    loading: false,\n    noMore: false,\n  };\n},\nfilters: {\n},\nmounted() {\n  this.getData(this.obj);\n},\nmethods: {\n  getData(obj) {\n    let i = 0;\n    let that = this;\n    axios.post(obj)\n      .then(res => {\n        console.log(res);\n        if (res.data.code === \"200\") {\n          that.list = res.data.result.rankingDetailList.slice(\n            i * 3,\n            (i + 1) * 3\n          );\n        } else {\n          Toast(\"载入失败\");\n        }\n      })\n      .catch(err => {\n        Toast(\"载入失败\");\n        console.log(err);\n      });\n  },\n  loadMore() {\n    let that = this;\n    that.loading = true;\n    that.noMore = false;\n    axios.post(that.obj)\n      .then(res => {\n        that.i++;\n        console.log(res);\n        that.moreList = res.data.result.rankingDetailList.slice(\n          that.i * 3,\n          (that.i + 1) * 3\n        );\n        if (that.moreList.length === 0) {\n          that.noMore = true;\n          that.loading = true;\n        } else {\n          that.loading = false;\n          that.noMore = false;\n          that.moreList.forEach(function(item) {\n            that.list.push(item);\n          });\n        }\n      })\n      .catch(function(error) {\n        console.info(error);\n      });\n  },\n}\n```\n## 第二种方法（当数据很多并有分页的情况下使用【比如点菜菜单 >= 20 条】）\n### 思路\n第一次进来传第一页，之后每次上滑page++，当返回的数据长度为0时，把上滑功能关闭\n##代码\n``` html\n<div class=\"real-content\" v-infinite-scroll=\"busy\" infinite-scroll-distance=\"10\">\n  <div class=\"item\" v-for=\"g in good\" :key=\"g.item\">\n    ...\n  </div>\n</div>\n```\n``` javascript\nloadMore(){\n\tthis.busy = true;\n\tthis.pageSize++;\n  axios({\n    //请求数据\n\t})\n  this.busy = false;\n\n```\n","source":"_posts/Mint-ui-infinite-scroll解决重复加载.md","raw":"---\ntitle: Mint-ui-infinite-scroll解决重复加载\ndate: 2019-01-22 10:40:09\ntags: [Mint-ui, vue]\n---\n## 第一种方法（当数据不多的情况下使用【比如排行榜10条】）\n### 思路\n每次上滑的时候都调一次接口，直到没有数据就将infinite-scroll-disabled 设为true，每次截取slice(i * 3,  (i + 1) * 3）; 3是每次显示的条数\n## 代码\n``` html\n<div class=\"r-contatin\">\n  <ul\n    class=\"r-item-wrapper\"\n    v-infinite-scroll=\"loadMore\"\n    infinite-scroll-disabled=\"loading\"\n    infinite-scroll-distance=\"10\"\n  >\n    <li v-for=\"(item, key) in list\" :key=\"key\">\n      <div>{{item}}=={{key}}</div>\n    </li>\n  </ul>\n</div>\n\n<p v-if=\"!noMore\" class=\"loading-tip\">\n  <mt-spinner color=\"rgba(255, 51, 153, 1)\" type=\"fading-circle\"></mt-spinner>\n  <span style=\"margin-left: 5px;\">更多加载中...</span>\n</p>\n<p class=\"no-more\" v-else>没有更多了~</p>\n```\n``` javascript\ndata() {\n  return {\n    list: [],\n    moreList: [],\n    i: 0,\n    loading: false,\n    noMore: false,\n  };\n},\nfilters: {\n},\nmounted() {\n  this.getData(this.obj);\n},\nmethods: {\n  getData(obj) {\n    let i = 0;\n    let that = this;\n    axios.post(obj)\n      .then(res => {\n        console.log(res);\n        if (res.data.code === \"200\") {\n          that.list = res.data.result.rankingDetailList.slice(\n            i * 3,\n            (i + 1) * 3\n          );\n        } else {\n          Toast(\"载入失败\");\n        }\n      })\n      .catch(err => {\n        Toast(\"载入失败\");\n        console.log(err);\n      });\n  },\n  loadMore() {\n    let that = this;\n    that.loading = true;\n    that.noMore = false;\n    axios.post(that.obj)\n      .then(res => {\n        that.i++;\n        console.log(res);\n        that.moreList = res.data.result.rankingDetailList.slice(\n          that.i * 3,\n          (that.i + 1) * 3\n        );\n        if (that.moreList.length === 0) {\n          that.noMore = true;\n          that.loading = true;\n        } else {\n          that.loading = false;\n          that.noMore = false;\n          that.moreList.forEach(function(item) {\n            that.list.push(item);\n          });\n        }\n      })\n      .catch(function(error) {\n        console.info(error);\n      });\n  },\n}\n```\n## 第二种方法（当数据很多并有分页的情况下使用【比如点菜菜单 >= 20 条】）\n### 思路\n第一次进来传第一页，之后每次上滑page++，当返回的数据长度为0时，把上滑功能关闭\n##代码\n``` html\n<div class=\"real-content\" v-infinite-scroll=\"busy\" infinite-scroll-distance=\"10\">\n  <div class=\"item\" v-for=\"g in good\" :key=\"g.item\">\n    ...\n  </div>\n</div>\n```\n``` javascript\nloadMore(){\n\tthis.busy = true;\n\tthis.pageSize++;\n  axios({\n    //请求数据\n\t})\n  this.busy = false;\n\n```\n","slug":"Mint-ui-infinite-scroll解决重复加载","published":1,"updated":"2021-10-09T08:48:32.059Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzaar000e5c54dhvj1pxi","content":"<h2 id=\"第一种方法（当数据不多的情况下使用【比如排行榜10条】）\"><a href=\"#第一种方法（当数据不多的情况下使用【比如排行榜10条】）\" class=\"headerlink\" title=\"第一种方法（当数据不多的情况下使用【比如排行榜10条】）\"></a>第一种方法（当数据不多的情况下使用【比如排行榜10条】）</h2><h3 id=\"思路\"><a href=\"#思路\" class=\"headerlink\" title=\"思路\"></a>思路</h3><p>每次上滑的时候都调一次接口，直到没有数据就将infinite-scroll-disabled 设为true，每次截取slice(i <em> 3,  (i + 1) </em> 3）; 3是每次显示的条数</p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"r-contatin\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">ul</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">class</span>=<span class=\"string\">\"r-item-wrapper\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">v-infinite-scroll</span>=<span class=\"string\">\"loadMore\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">infinite-scroll-disabled</span>=<span class=\"string\">\"loading\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">infinite-scroll-distance</span>=<span class=\"string\">\"10\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  &gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"(item, key) in list\"</span> <span class=\"attr\">:key</span>=<span class=\"string\">\"key\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>&#123;&#123;item&#125;&#125;==&#123;&#123;key&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">v-if</span>=<span class=\"string\">\"!noMore\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"loading-tip\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">mt-spinner</span> <span class=\"attr\">color</span>=<span class=\"string\">\"rgba(255, 51, 153, 1)\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"fading-circle\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">mt-spinner</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">style</span>=<span class=\"string\">\"margin-left: 5px;\"</span>&gt;</span>更多加载中...<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">\"no-more\"</span> <span class=\"attr\">v-else</span>&gt;</span>没有更多了~<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">data() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    list: [],</span><br><span class=\"line\">    moreList: [],</span><br><span class=\"line\">    i: <span class=\"number\">0</span>,</span><br><span class=\"line\">    loading: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    noMore: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">filters: &#123;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">mounted() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.getData(<span class=\"keyword\">this</span>.obj);</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">methods: &#123;</span><br><span class=\"line\">  getData(obj) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> that = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    axios.post(obj)</span><br><span class=\"line\">      .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (res.data.code === <span class=\"string\">\"200\"</span>) &#123;</span><br><span class=\"line\">          that.list = res.data.result.rankingDetailList.slice(</span><br><span class=\"line\">            i * <span class=\"number\">3</span>,</span><br><span class=\"line\">            (i + <span class=\"number\">1</span>) * <span class=\"number\">3</span></span><br><span class=\"line\">          );</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          Toast(<span class=\"string\">\"载入失败\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">        Toast(<span class=\"string\">\"载入失败\"</span>);</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  loadMore() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> that = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    that.loading = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    that.noMore = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    axios.post(that.obj)</span><br><span class=\"line\">      .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">        that.i++;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">        that.moreList = res.data.result.rankingDetailList.slice(</span><br><span class=\"line\">          that.i * <span class=\"number\">3</span>,</span><br><span class=\"line\">          (that.i + <span class=\"number\">1</span>) * <span class=\"number\">3</span></span><br><span class=\"line\">        );</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (that.moreList.length === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">          that.noMore = <span class=\"literal\">true</span>;</span><br><span class=\"line\">          that.loading = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          that.loading = <span class=\"literal\">false</span>;</span><br><span class=\"line\">          that.noMore = <span class=\"literal\">false</span>;</span><br><span class=\"line\">          that.moreList.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item</span>) </span>&#123;</span><br><span class=\"line\">            that.list.push(item);</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.info(error);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"第二种方法（当数据很多并有分页的情况下使用【比如点菜菜单-gt-20-条】）\"><a href=\"#第二种方法（当数据很多并有分页的情况下使用【比如点菜菜单-gt-20-条】）\" class=\"headerlink\" title=\"第二种方法（当数据很多并有分页的情况下使用【比如点菜菜单 &gt;= 20 条】）\"></a>第二种方法（当数据很多并有分页的情况下使用【比如点菜菜单 &gt;= 20 条】）</h2><h3 id=\"思路-1\"><a href=\"#思路-1\" class=\"headerlink\" title=\"思路\"></a>思路</h3><p>第一次进来传第一页，之后每次上滑page++，当返回的数据长度为0时，把上滑功能关闭</p>\n<p>##代码<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"real-content\"</span> <span class=\"attr\">v-infinite-scroll</span>=<span class=\"string\">\"busy\"</span> <span class=\"attr\">infinite-scroll-distance</span>=<span class=\"string\">\"10\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"item\"</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"g in good\"</span> <span class=\"attr\">:key</span>=<span class=\"string\">\"g.item\"</span>&gt;</span></span><br><span class=\"line\">    ...</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">loadMore()&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.busy = <span class=\"literal\">true</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.pageSize++;</span><br><span class=\"line\">  axios(&#123;</span><br><span class=\"line\">    <span class=\"comment\">//请求数据</span></span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.busy = <span class=\"literal\">false</span>;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"第一种方法（当数据不多的情况下使用【比如排行榜10条】）\"><a href=\"#第一种方法（当数据不多的情况下使用【比如排行榜10条】）\" class=\"headerlink\" title=\"第一种方法（当数据不多的情况下使用【比如排行榜10条】）\"></a>第一种方法（当数据不多的情况下使用【比如排行榜10条】）</h2><h3 id=\"思路\"><a href=\"#思路\" class=\"headerlink\" title=\"思路\"></a>思路</h3><p>每次上滑的时候都调一次接口，直到没有数据就将infinite-scroll-disabled 设为true，每次截取slice(i <em> 3,  (i + 1) </em> 3）; 3是每次显示的条数</p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"r-contatin\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">ul</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">class</span>=<span class=\"string\">\"r-item-wrapper\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">v-infinite-scroll</span>=<span class=\"string\">\"loadMore\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">infinite-scroll-disabled</span>=<span class=\"string\">\"loading\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">infinite-scroll-distance</span>=<span class=\"string\">\"10\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  &gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"(item, key) in list\"</span> <span class=\"attr\">:key</span>=<span class=\"string\">\"key\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>&#123;&#123;item&#125;&#125;==&#123;&#123;key&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">v-if</span>=<span class=\"string\">\"!noMore\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"loading-tip\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">mt-spinner</span> <span class=\"attr\">color</span>=<span class=\"string\">\"rgba(255, 51, 153, 1)\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"fading-circle\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">mt-spinner</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">style</span>=<span class=\"string\">\"margin-left: 5px;\"</span>&gt;</span>更多加载中...<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">\"no-more\"</span> <span class=\"attr\">v-else</span>&gt;</span>没有更多了~<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">data() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    list: [],</span><br><span class=\"line\">    moreList: [],</span><br><span class=\"line\">    i: <span class=\"number\">0</span>,</span><br><span class=\"line\">    loading: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    noMore: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">filters: &#123;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">mounted() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.getData(<span class=\"keyword\">this</span>.obj);</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">methods: &#123;</span><br><span class=\"line\">  getData(obj) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> that = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    axios.post(obj)</span><br><span class=\"line\">      .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (res.data.code === <span class=\"string\">\"200\"</span>) &#123;</span><br><span class=\"line\">          that.list = res.data.result.rankingDetailList.slice(</span><br><span class=\"line\">            i * <span class=\"number\">3</span>,</span><br><span class=\"line\">            (i + <span class=\"number\">1</span>) * <span class=\"number\">3</span></span><br><span class=\"line\">          );</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          Toast(<span class=\"string\">\"载入失败\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">        Toast(<span class=\"string\">\"载入失败\"</span>);</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  loadMore() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> that = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    that.loading = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    that.noMore = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    axios.post(that.obj)</span><br><span class=\"line\">      .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">        that.i++;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">        that.moreList = res.data.result.rankingDetailList.slice(</span><br><span class=\"line\">          that.i * <span class=\"number\">3</span>,</span><br><span class=\"line\">          (that.i + <span class=\"number\">1</span>) * <span class=\"number\">3</span></span><br><span class=\"line\">        );</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (that.moreList.length === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">          that.noMore = <span class=\"literal\">true</span>;</span><br><span class=\"line\">          that.loading = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          that.loading = <span class=\"literal\">false</span>;</span><br><span class=\"line\">          that.noMore = <span class=\"literal\">false</span>;</span><br><span class=\"line\">          that.moreList.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item</span>) </span>&#123;</span><br><span class=\"line\">            that.list.push(item);</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.info(error);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"第二种方法（当数据很多并有分页的情况下使用【比如点菜菜单-gt-20-条】）\"><a href=\"#第二种方法（当数据很多并有分页的情况下使用【比如点菜菜单-gt-20-条】）\" class=\"headerlink\" title=\"第二种方法（当数据很多并有分页的情况下使用【比如点菜菜单 &gt;= 20 条】）\"></a>第二种方法（当数据很多并有分页的情况下使用【比如点菜菜单 &gt;= 20 条】）</h2><h3 id=\"思路-1\"><a href=\"#思路-1\" class=\"headerlink\" title=\"思路\"></a>思路</h3><p>第一次进来传第一页，之后每次上滑page++，当返回的数据长度为0时，把上滑功能关闭</p>\n<p>##代码<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"real-content\"</span> <span class=\"attr\">v-infinite-scroll</span>=<span class=\"string\">\"busy\"</span> <span class=\"attr\">infinite-scroll-distance</span>=<span class=\"string\">\"10\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"item\"</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"g in good\"</span> <span class=\"attr\">:key</span>=<span class=\"string\">\"g.item\"</span>&gt;</span></span><br><span class=\"line\">    ...</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">loadMore()&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.busy = <span class=\"literal\">true</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.pageSize++;</span><br><span class=\"line\">  axios(&#123;</span><br><span class=\"line\">    <span class=\"comment\">//请求数据</span></span><br><span class=\"line\">\t&#125;)</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.busy = <span class=\"literal\">false</span>;</span><br></pre></td></tr></table></figure>\n"},{"title":"CSDN","date":"2018-10-10T09:52:03.000Z","_content":"### CSDN\nhttps://blog.csdn.net/chi1130","source":"_posts/csdn-blog.md","raw":"---\ntitle: CSDN\ndate: 2018-10-10 17:52:03\ntags:\n  - 个人\ncategories:\n - 前任Blog / CSDN\n---\n### CSDN\nhttps://blog.csdn.net/chi1130","slug":"csdn-blog","published":1,"updated":"2021-10-09T08:48:32.061Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzaav000h5c54di6iovjt","content":"<h3 id=\"CSDN\"><a href=\"#CSDN\" class=\"headerlink\" title=\"CSDN\"></a>CSDN</h3><p><a href=\"https://blog.csdn.net/chi1130\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/chi1130</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"CSDN\"><a href=\"#CSDN\" class=\"headerlink\" title=\"CSDN\"></a>CSDN</h3><p><a href=\"https://blog.csdn.net/chi1130\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/chi1130</a></p>\n"},{"title":"chart力导图node节点图片代替","date":"2019-02-14T09:14:30.000Z","_content":"\n### 效果\n\n![](https://github.com/chengheai/review-demo-image/blob/master/WX20190214-171553.png?raw=true)\n### 源码\n[在线demo](https://jsfiddle.net/BlackLabel/ezo65rv1/12/)\n### 代码\n\n```javascript\nchart: {\n      type: 'networkgraph'\n  },\n\n  plotOptions: {\n      networkgraph: {\n          layoutAlgorithm: {\n              enableSimulation: true\n          }\n      }\n  },\n\n  series: [{\n      link: {\n          width: 2\n      },\n      data: [{\n          from: 'chengheai-1',\n          to: 'chengheai-2'\n      }, {\n          from: 'chengheai-2',\n          to: 'chengheai-3'\n      }],\n      nodes: [{\n          id: 'chengheai-1',\n          marker: {\n              width: 20,\n              height: 20,\n              symbol: 'url(https://avatars3.githubusercontent.com/u/26807610?s=88&v=4)'\n          }\n      }, {\n          id: 'chengheai-2',\n          marker: {\n              width: 40,\n              height: 40,\n              symbol: 'url(https://avatars3.githubusercontent.com/u/26807610?s=88&v=4)'\n          }\n      }, {\n          id: 'chengheai-3',\n          marker: {\n              width: 40,\n              height: 40,\n              symbol: 'url(https://avatars3.githubusercontent.com/u/26807610?s=88&v=4)'\n          }\n      }]\n  }]\n```\n","source":"_posts/chart力导图node节点图片代替.md","raw":"---\ntitle: chart力导图node节点图片代替\ndate: 2019-02-14 17:14:30\ntags: ['charts']\n---\n\n### 效果\n\n![](https://github.com/chengheai/review-demo-image/blob/master/WX20190214-171553.png?raw=true)\n### 源码\n[在线demo](https://jsfiddle.net/BlackLabel/ezo65rv1/12/)\n### 代码\n\n```javascript\nchart: {\n      type: 'networkgraph'\n  },\n\n  plotOptions: {\n      networkgraph: {\n          layoutAlgorithm: {\n              enableSimulation: true\n          }\n      }\n  },\n\n  series: [{\n      link: {\n          width: 2\n      },\n      data: [{\n          from: 'chengheai-1',\n          to: 'chengheai-2'\n      }, {\n          from: 'chengheai-2',\n          to: 'chengheai-3'\n      }],\n      nodes: [{\n          id: 'chengheai-1',\n          marker: {\n              width: 20,\n              height: 20,\n              symbol: 'url(https://avatars3.githubusercontent.com/u/26807610?s=88&v=4)'\n          }\n      }, {\n          id: 'chengheai-2',\n          marker: {\n              width: 40,\n              height: 40,\n              symbol: 'url(https://avatars3.githubusercontent.com/u/26807610?s=88&v=4)'\n          }\n      }, {\n          id: 'chengheai-3',\n          marker: {\n              width: 40,\n              height: 40,\n              symbol: 'url(https://avatars3.githubusercontent.com/u/26807610?s=88&v=4)'\n          }\n      }]\n  }]\n```\n","slug":"chart力导图node节点图片代替","published":1,"updated":"2021-10-09T08:48:32.061Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzaax000j5c54xefeeall","content":"<h3 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h3><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WX20190214-171553.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h3 id=\"源码\"><a href=\"#源码\" class=\"headerlink\" title=\"源码\"></a>源码</h3><p><a href=\"https://jsfiddle.net/BlackLabel/ezo65rv1/12/\" target=\"_blank\" rel=\"noopener\">在线demo</a></p>\n<h3 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chart: &#123;</span><br><span class=\"line\">      type: <span class=\"string\">'networkgraph'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  plotOptions: &#123;</span><br><span class=\"line\">      networkgraph: &#123;</span><br><span class=\"line\">          layoutAlgorithm: &#123;</span><br><span class=\"line\">              enableSimulation: <span class=\"literal\">true</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  series: [&#123;</span><br><span class=\"line\">      link: &#123;</span><br><span class=\"line\">          width: <span class=\"number\">2</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      data: [&#123;</span><br><span class=\"line\">          <span class=\"keyword\">from</span>: <span class=\"string\">'chengheai-1'</span>,</span><br><span class=\"line\">          to: <span class=\"string\">'chengheai-2'</span></span><br><span class=\"line\">      &#125;, &#123;</span><br><span class=\"line\">          <span class=\"keyword\">from</span>: <span class=\"string\">'chengheai-2'</span>,</span><br><span class=\"line\">          to: <span class=\"string\">'chengheai-3'</span></span><br><span class=\"line\">      &#125;],</span><br><span class=\"line\">      nodes: [&#123;</span><br><span class=\"line\">          id: <span class=\"string\">'chengheai-1'</span>,</span><br><span class=\"line\">          marker: &#123;</span><br><span class=\"line\">              width: <span class=\"number\">20</span>,</span><br><span class=\"line\">              height: <span class=\"number\">20</span>,</span><br><span class=\"line\">              symbol: <span class=\"string\">'url(https://avatars3.githubusercontent.com/u/26807610?s=88&amp;v=4)'</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">      &#125;, &#123;</span><br><span class=\"line\">          id: <span class=\"string\">'chengheai-2'</span>,</span><br><span class=\"line\">          marker: &#123;</span><br><span class=\"line\">              width: <span class=\"number\">40</span>,</span><br><span class=\"line\">              height: <span class=\"number\">40</span>,</span><br><span class=\"line\">              symbol: <span class=\"string\">'url(https://avatars3.githubusercontent.com/u/26807610?s=88&amp;v=4)'</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">      &#125;, &#123;</span><br><span class=\"line\">          id: <span class=\"string\">'chengheai-3'</span>,</span><br><span class=\"line\">          marker: &#123;</span><br><span class=\"line\">              width: <span class=\"number\">40</span>,</span><br><span class=\"line\">              height: <span class=\"number\">40</span>,</span><br><span class=\"line\">              symbol: <span class=\"string\">'url(https://avatars3.githubusercontent.com/u/26807610?s=88&amp;v=4)'</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">      &#125;]</span><br><span class=\"line\">  &#125;]</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h3><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WX20190214-171553.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h3 id=\"源码\"><a href=\"#源码\" class=\"headerlink\" title=\"源码\"></a>源码</h3><p><a href=\"https://jsfiddle.net/BlackLabel/ezo65rv1/12/\" target=\"_blank\" rel=\"noopener\">在线demo</a></p>\n<h3 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chart: &#123;</span><br><span class=\"line\">      type: <span class=\"string\">'networkgraph'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  plotOptions: &#123;</span><br><span class=\"line\">      networkgraph: &#123;</span><br><span class=\"line\">          layoutAlgorithm: &#123;</span><br><span class=\"line\">              enableSimulation: <span class=\"literal\">true</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  series: [&#123;</span><br><span class=\"line\">      link: &#123;</span><br><span class=\"line\">          width: <span class=\"number\">2</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      data: [&#123;</span><br><span class=\"line\">          <span class=\"keyword\">from</span>: <span class=\"string\">'chengheai-1'</span>,</span><br><span class=\"line\">          to: <span class=\"string\">'chengheai-2'</span></span><br><span class=\"line\">      &#125;, &#123;</span><br><span class=\"line\">          <span class=\"keyword\">from</span>: <span class=\"string\">'chengheai-2'</span>,</span><br><span class=\"line\">          to: <span class=\"string\">'chengheai-3'</span></span><br><span class=\"line\">      &#125;],</span><br><span class=\"line\">      nodes: [&#123;</span><br><span class=\"line\">          id: <span class=\"string\">'chengheai-1'</span>,</span><br><span class=\"line\">          marker: &#123;</span><br><span class=\"line\">              width: <span class=\"number\">20</span>,</span><br><span class=\"line\">              height: <span class=\"number\">20</span>,</span><br><span class=\"line\">              symbol: <span class=\"string\">'url(https://avatars3.githubusercontent.com/u/26807610?s=88&amp;v=4)'</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">      &#125;, &#123;</span><br><span class=\"line\">          id: <span class=\"string\">'chengheai-2'</span>,</span><br><span class=\"line\">          marker: &#123;</span><br><span class=\"line\">              width: <span class=\"number\">40</span>,</span><br><span class=\"line\">              height: <span class=\"number\">40</span>,</span><br><span class=\"line\">              symbol: <span class=\"string\">'url(https://avatars3.githubusercontent.com/u/26807610?s=88&amp;v=4)'</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">      &#125;, &#123;</span><br><span class=\"line\">          id: <span class=\"string\">'chengheai-3'</span>,</span><br><span class=\"line\">          marker: &#123;</span><br><span class=\"line\">              width: <span class=\"number\">40</span>,</span><br><span class=\"line\">              height: <span class=\"number\">40</span>,</span><br><span class=\"line\">              symbol: <span class=\"string\">'url(https://avatars3.githubusercontent.com/u/26807610?s=88&amp;v=4)'</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">      &#125;]</span><br><span class=\"line\">  &#125;]</span><br></pre></td></tr></table></figure>\n"},{"title":"css划圆形进度条的demo","date":"2018-10-19T03:12:06.000Z","_content":"#### 效果\n![](/images/zKX0PnVPvt.gif)\n#### 代码\n``` javascript\n  <!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n    <title>Document</title>\n    <style>\n    .circle_process{\n\tposition: relative;\n\twidth: 199px;\n\theight : 200px;\n}\n.circle_process .wrapper{\n\twidth: 100px;\n\theight: 200px;\n\tposition: absolute;\n\ttop:0;\n\toverflow: hidden;\n}\n.circle_process .right{\n\tright:0;\n}\n.circle_process .left{\n\tleft:0;\n}\n.circle_process .circle{\n\twidth: 160px;\n\theight: 160px;\n\tborder:20px solid transparent;\n\tborder-radius: 50%;\n\tposition: absolute;\n\ttop:0;\n\ttransform : rotate(-135deg);\n}\n.circle_process .rightcircle{\n\tborder-top:20px solid green;\n\tborder-right:20px solid green;\n\tright:0;\n\t/* -webkit-animation: circle_right 5s linear infinite; */\n}\n.circle_process .leftcircle{\n\tborder-bottom:20px solid green;\n\tborder-left:20px solid green;\n\tleft:0;\n\t/* -webkit-animation: circle_left 5s linear infinite; */\n}\n/* @-webkit-keyframes circle_right{\n\t0%{\n\t\t-webkit-transform: rotate(-135deg);\n\t}\n\t50%,100%{\n\t\t-webkit-transform: rotate(45deg);\n\t}\n}\n@-webkit-keyframes circle_left{\n\t0%,50%{\n\t\t-webkit-transform: rotate(-135deg);\n\t}\n\t100%{\n\t\t-webkit-transform: rotate(45deg);\n\t}\n} */\n#show{\n  font-size: 60px;\n  font-weight: 600;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translateX(-50%) translateY(-50%);\n}\n</style>\n</head>\n  <body>\n    <div class=\"circle_process\">\n      <div class=\"wrapper right\">\n        <div class=\"circle rightcircle\" id=\"rightcircle\">\n        </div>\n      </div>\n      <div id=\"show\"></div>\n      <div class=\"wrapper left\">\n        <div class=\"circle leftcircle\" id=\"leftcircle\"></div>\n      </div>\n    </div>\n    <script>\n    function getTime(){\n    var date = new Date();\n    var second = date.getSeconds();\n\n    var rightcircle = document.getElementById('rightcircle');\n    var leftcircle = document.getElementById('leftcircle');\n    var show = document.getElementById('show');\n\n    show.innerHTML = second;\n\n    if(second<=30){\n        rightcircle.style.cssText = \"transform: rotate(\"+ (-135+6*second) +\"deg)\";\n        leftcircle.style.cssText = \"transform: rotate(-135deg)\";\n    }else{\n        rightcircle.style.cssText = \"transform: rotate(45deg)\";\n        leftcircle.style.cssText = \"transform: rotate(\"+ (-135+6*(second-30)) +\"deg)\";\n    }\n}\ngetTime();\nsetInterval(function(){\n    getTime();\n}, 1000)\n  </script>\n  </body>\n</html>\n```","source":"_posts/css划圆形进度条的demo.md","raw":"---\ntitle: css划圆形进度条的demo\ndate: 2018-10-19 11:12:06\ntags: css\n---\n#### 效果\n![](/images/zKX0PnVPvt.gif)\n#### 代码\n``` javascript\n  <!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n    <title>Document</title>\n    <style>\n    .circle_process{\n\tposition: relative;\n\twidth: 199px;\n\theight : 200px;\n}\n.circle_process .wrapper{\n\twidth: 100px;\n\theight: 200px;\n\tposition: absolute;\n\ttop:0;\n\toverflow: hidden;\n}\n.circle_process .right{\n\tright:0;\n}\n.circle_process .left{\n\tleft:0;\n}\n.circle_process .circle{\n\twidth: 160px;\n\theight: 160px;\n\tborder:20px solid transparent;\n\tborder-radius: 50%;\n\tposition: absolute;\n\ttop:0;\n\ttransform : rotate(-135deg);\n}\n.circle_process .rightcircle{\n\tborder-top:20px solid green;\n\tborder-right:20px solid green;\n\tright:0;\n\t/* -webkit-animation: circle_right 5s linear infinite; */\n}\n.circle_process .leftcircle{\n\tborder-bottom:20px solid green;\n\tborder-left:20px solid green;\n\tleft:0;\n\t/* -webkit-animation: circle_left 5s linear infinite; */\n}\n/* @-webkit-keyframes circle_right{\n\t0%{\n\t\t-webkit-transform: rotate(-135deg);\n\t}\n\t50%,100%{\n\t\t-webkit-transform: rotate(45deg);\n\t}\n}\n@-webkit-keyframes circle_left{\n\t0%,50%{\n\t\t-webkit-transform: rotate(-135deg);\n\t}\n\t100%{\n\t\t-webkit-transform: rotate(45deg);\n\t}\n} */\n#show{\n  font-size: 60px;\n  font-weight: 600;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translateX(-50%) translateY(-50%);\n}\n</style>\n</head>\n  <body>\n    <div class=\"circle_process\">\n      <div class=\"wrapper right\">\n        <div class=\"circle rightcircle\" id=\"rightcircle\">\n        </div>\n      </div>\n      <div id=\"show\"></div>\n      <div class=\"wrapper left\">\n        <div class=\"circle leftcircle\" id=\"leftcircle\"></div>\n      </div>\n    </div>\n    <script>\n    function getTime(){\n    var date = new Date();\n    var second = date.getSeconds();\n\n    var rightcircle = document.getElementById('rightcircle');\n    var leftcircle = document.getElementById('leftcircle');\n    var show = document.getElementById('show');\n\n    show.innerHTML = second;\n\n    if(second<=30){\n        rightcircle.style.cssText = \"transform: rotate(\"+ (-135+6*second) +\"deg)\";\n        leftcircle.style.cssText = \"transform: rotate(-135deg)\";\n    }else{\n        rightcircle.style.cssText = \"transform: rotate(45deg)\";\n        leftcircle.style.cssText = \"transform: rotate(\"+ (-135+6*(second-30)) +\"deg)\";\n    }\n}\ngetTime();\nsetInterval(function(){\n    getTime();\n}, 1000)\n  </script>\n  </body>\n</html>\n```","slug":"css划圆形进度条的demo","published":1,"updated":"2021-10-09T08:48:32.062Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzaay000m5c54nkhwas3x","content":"<h4 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h4><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/images/zKX0PnVPvt.gif\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h4 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  &lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang=<span class=\"string\">\"en\"</span>&gt;</span><br><span class=\"line\">  &lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=<span class=\"string\">\"UTF-8\"</span>&gt;</span><br><span class=\"line\">    &lt;meta name=<span class=\"string\">\"viewport\"</span> content=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span>&gt;</span><br><span class=\"line\">    &lt;meta http-equiv=<span class=\"string\">\"X-UA-Compatible\"</span> content=<span class=\"string\">\"ie=edge\"</span>&gt;</span><br><span class=\"line\">    &lt;title&gt;Document&lt;<span class=\"regexp\">/title&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;style&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    .circle_process&#123;</span></span><br><span class=\"line\"><span class=\"regexp\">\tposition: relative;</span></span><br><span class=\"line\"><span class=\"regexp\">\twidth: 199px;</span></span><br><span class=\"line\"><span class=\"regexp\">\theight : 200px;</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">.circle_process .wrapper&#123;</span></span><br><span class=\"line\"><span class=\"regexp\">\twidth: 100px;</span></span><br><span class=\"line\"><span class=\"regexp\">\theight: 200px;</span></span><br><span class=\"line\"><span class=\"regexp\">\tposition: absolute;</span></span><br><span class=\"line\"><span class=\"regexp\">\ttop:0;</span></span><br><span class=\"line\"><span class=\"regexp\">\toverflow: hidden;</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">.circle_process .right&#123;</span></span><br><span class=\"line\"><span class=\"regexp\">\tright:0;</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">.circle_process .left&#123;</span></span><br><span class=\"line\"><span class=\"regexp\">\tleft:0;</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">.circle_process .circle&#123;</span></span><br><span class=\"line\"><span class=\"regexp\">\twidth: 160px;</span></span><br><span class=\"line\"><span class=\"regexp\">\theight: 160px;</span></span><br><span class=\"line\"><span class=\"regexp\">\tborder:20px solid transparent;</span></span><br><span class=\"line\"><span class=\"regexp\">\tborder-radius: 50%;</span></span><br><span class=\"line\"><span class=\"regexp\">\tposition: absolute;</span></span><br><span class=\"line\"><span class=\"regexp\">\ttop:0;</span></span><br><span class=\"line\"><span class=\"regexp\">\ttransform : rotate(-135deg);</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">.circle_process .rightcircle&#123;</span></span><br><span class=\"line\"><span class=\"regexp\">\tborder-top:20px solid green;</span></span><br><span class=\"line\"><span class=\"regexp\">\tborder-right:20px solid green;</span></span><br><span class=\"line\"><span class=\"regexp\">\tright:0;</span></span><br><span class=\"line\"><span class=\"regexp\">\t/</span>* -webkit-animation: circle_right <span class=\"number\">5</span>s linear infinite; *<span class=\"regexp\">/</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">.circle_process .leftcircle&#123;</span></span><br><span class=\"line\"><span class=\"regexp\">\tborder-bottom:20px solid green;</span></span><br><span class=\"line\"><span class=\"regexp\">\tborder-left:20px solid green;</span></span><br><span class=\"line\"><span class=\"regexp\">\tleft:0;</span></span><br><span class=\"line\"><span class=\"regexp\">\t/</span>* -webkit-animation: circle_left <span class=\"number\">5</span>s linear infinite; *<span class=\"regexp\">/</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">/</span>* @-webkit-keyframes circle_right&#123;</span><br><span class=\"line\">\t<span class=\"number\">0</span>%&#123;</span><br><span class=\"line\">\t\t-webkit-transform: rotate(<span class=\"number\">-135</span>deg);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"number\">50</span>%,<span class=\"number\">100</span>%&#123;</span><br><span class=\"line\">\t\t-webkit-transform: rotate(<span class=\"number\">45</span>deg);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">@-webkit-keyframes circle_left&#123;</span><br><span class=\"line\">\t<span class=\"number\">0</span>%,<span class=\"number\">50</span>%&#123;</span><br><span class=\"line\">\t\t-webkit-transform: rotate(<span class=\"number\">-135</span>deg);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"number\">100</span>%&#123;</span><br><span class=\"line\">\t\t-webkit-transform: rotate(<span class=\"number\">45</span>deg);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125; *<span class=\"regexp\">/</span></span><br><span class=\"line\"><span class=\"regexp\">#show&#123;</span></span><br><span class=\"line\"><span class=\"regexp\">  font-size: 60px;</span></span><br><span class=\"line\"><span class=\"regexp\">  font-weight: 600;</span></span><br><span class=\"line\"><span class=\"regexp\">  position: absolute;</span></span><br><span class=\"line\"><span class=\"regexp\">  top: 50%;</span></span><br><span class=\"line\"><span class=\"regexp\">  left: 50%;</span></span><br><span class=\"line\"><span class=\"regexp\">  transform: translateX(-50%) translateY(-50%);</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">&lt;/</span>style&gt;</span><br><span class=\"line\">&lt;<span class=\"regexp\">/head&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  &lt;body&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;div class=\"circle_process\"&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;div class=\"wrapper right\"&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;div class=\"circle rightcircle\" id=\"rightcircle\"&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;/</span>div&gt;</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;div id=\"show\"&gt;&lt;/</span>div&gt;</span><br><span class=\"line\">      &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">\"wrapper left\"</span>&gt;</span><br><span class=\"line\">        &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">\"circle leftcircle\"</span> id=<span class=\"string\">\"leftcircle\"</span>&gt;&lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;/</span>div&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;script&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    function getTime()&#123;</span></span><br><span class=\"line\"><span class=\"regexp\">    var date = new Date();</span></span><br><span class=\"line\"><span class=\"regexp\">    var second = date.getSeconds();</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">    var rightcircle = document.getElementById('rightcircle');</span></span><br><span class=\"line\"><span class=\"regexp\">    var leftcircle = document.getElementById('leftcircle');</span></span><br><span class=\"line\"><span class=\"regexp\">    var show = document.getElementById('show');</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">    show.innerHTML = second;</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">    if(second&lt;=30)&#123;</span></span><br><span class=\"line\"><span class=\"regexp\">        rightcircle.style.cssText = \"transform: rotate(\"+ (-135+6*second) +\"deg)\";</span></span><br><span class=\"line\"><span class=\"regexp\">        leftcircle.style.cssText = \"transform: rotate(-135deg)\";</span></span><br><span class=\"line\"><span class=\"regexp\">    &#125;else&#123;</span></span><br><span class=\"line\"><span class=\"regexp\">        rightcircle.style.cssText = \"transform: rotate(45deg)\";</span></span><br><span class=\"line\"><span class=\"regexp\">        leftcircle.style.cssText = \"transform: rotate(\"+ (-135+6*(second-30)) +\"deg)\";</span></span><br><span class=\"line\"><span class=\"regexp\">    &#125;</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">getTime();</span></span><br><span class=\"line\"><span class=\"regexp\">setInterval(function()&#123;</span></span><br><span class=\"line\"><span class=\"regexp\">    getTime();</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;, 1000)</span></span><br><span class=\"line\"><span class=\"regexp\">  &lt;/</span>script&gt;</span><br><span class=\"line\">  &lt;<span class=\"regexp\">/body&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">&lt;/</span>html&gt;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h4 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h4><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/images/zKX0PnVPvt.gif\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h4 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  &lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang=<span class=\"string\">\"en\"</span>&gt;</span><br><span class=\"line\">  &lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=<span class=\"string\">\"UTF-8\"</span>&gt;</span><br><span class=\"line\">    &lt;meta name=<span class=\"string\">\"viewport\"</span> content=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span>&gt;</span><br><span class=\"line\">    &lt;meta http-equiv=<span class=\"string\">\"X-UA-Compatible\"</span> content=<span class=\"string\">\"ie=edge\"</span>&gt;</span><br><span class=\"line\">    &lt;title&gt;Document&lt;<span class=\"regexp\">/title&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;style&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    .circle_process&#123;</span></span><br><span class=\"line\"><span class=\"regexp\">\tposition: relative;</span></span><br><span class=\"line\"><span class=\"regexp\">\twidth: 199px;</span></span><br><span class=\"line\"><span class=\"regexp\">\theight : 200px;</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">.circle_process .wrapper&#123;</span></span><br><span class=\"line\"><span class=\"regexp\">\twidth: 100px;</span></span><br><span class=\"line\"><span class=\"regexp\">\theight: 200px;</span></span><br><span class=\"line\"><span class=\"regexp\">\tposition: absolute;</span></span><br><span class=\"line\"><span class=\"regexp\">\ttop:0;</span></span><br><span class=\"line\"><span class=\"regexp\">\toverflow: hidden;</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">.circle_process .right&#123;</span></span><br><span class=\"line\"><span class=\"regexp\">\tright:0;</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">.circle_process .left&#123;</span></span><br><span class=\"line\"><span class=\"regexp\">\tleft:0;</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">.circle_process .circle&#123;</span></span><br><span class=\"line\"><span class=\"regexp\">\twidth: 160px;</span></span><br><span class=\"line\"><span class=\"regexp\">\theight: 160px;</span></span><br><span class=\"line\"><span class=\"regexp\">\tborder:20px solid transparent;</span></span><br><span class=\"line\"><span class=\"regexp\">\tborder-radius: 50%;</span></span><br><span class=\"line\"><span class=\"regexp\">\tposition: absolute;</span></span><br><span class=\"line\"><span class=\"regexp\">\ttop:0;</span></span><br><span class=\"line\"><span class=\"regexp\">\ttransform : rotate(-135deg);</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">.circle_process .rightcircle&#123;</span></span><br><span class=\"line\"><span class=\"regexp\">\tborder-top:20px solid green;</span></span><br><span class=\"line\"><span class=\"regexp\">\tborder-right:20px solid green;</span></span><br><span class=\"line\"><span class=\"regexp\">\tright:0;</span></span><br><span class=\"line\"><span class=\"regexp\">\t/</span>* -webkit-animation: circle_right <span class=\"number\">5</span>s linear infinite; *<span class=\"regexp\">/</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">.circle_process .leftcircle&#123;</span></span><br><span class=\"line\"><span class=\"regexp\">\tborder-bottom:20px solid green;</span></span><br><span class=\"line\"><span class=\"regexp\">\tborder-left:20px solid green;</span></span><br><span class=\"line\"><span class=\"regexp\">\tleft:0;</span></span><br><span class=\"line\"><span class=\"regexp\">\t/</span>* -webkit-animation: circle_left <span class=\"number\">5</span>s linear infinite; *<span class=\"regexp\">/</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">/</span>* @-webkit-keyframes circle_right&#123;</span><br><span class=\"line\">\t<span class=\"number\">0</span>%&#123;</span><br><span class=\"line\">\t\t-webkit-transform: rotate(<span class=\"number\">-135</span>deg);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"number\">50</span>%,<span class=\"number\">100</span>%&#123;</span><br><span class=\"line\">\t\t-webkit-transform: rotate(<span class=\"number\">45</span>deg);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">@-webkit-keyframes circle_left&#123;</span><br><span class=\"line\">\t<span class=\"number\">0</span>%,<span class=\"number\">50</span>%&#123;</span><br><span class=\"line\">\t\t-webkit-transform: rotate(<span class=\"number\">-135</span>deg);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"number\">100</span>%&#123;</span><br><span class=\"line\">\t\t-webkit-transform: rotate(<span class=\"number\">45</span>deg);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125; *<span class=\"regexp\">/</span></span><br><span class=\"line\"><span class=\"regexp\">#show&#123;</span></span><br><span class=\"line\"><span class=\"regexp\">  font-size: 60px;</span></span><br><span class=\"line\"><span class=\"regexp\">  font-weight: 600;</span></span><br><span class=\"line\"><span class=\"regexp\">  position: absolute;</span></span><br><span class=\"line\"><span class=\"regexp\">  top: 50%;</span></span><br><span class=\"line\"><span class=\"regexp\">  left: 50%;</span></span><br><span class=\"line\"><span class=\"regexp\">  transform: translateX(-50%) translateY(-50%);</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">&lt;/</span>style&gt;</span><br><span class=\"line\">&lt;<span class=\"regexp\">/head&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  &lt;body&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;div class=\"circle_process\"&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;div class=\"wrapper right\"&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;div class=\"circle rightcircle\" id=\"rightcircle\"&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;/</span>div&gt;</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;div id=\"show\"&gt;&lt;/</span>div&gt;</span><br><span class=\"line\">      &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">\"wrapper left\"</span>&gt;</span><br><span class=\"line\">        &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">\"circle leftcircle\"</span> id=<span class=\"string\">\"leftcircle\"</span>&gt;&lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;/</span>div&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;script&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    function getTime()&#123;</span></span><br><span class=\"line\"><span class=\"regexp\">    var date = new Date();</span></span><br><span class=\"line\"><span class=\"regexp\">    var second = date.getSeconds();</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">    var rightcircle = document.getElementById('rightcircle');</span></span><br><span class=\"line\"><span class=\"regexp\">    var leftcircle = document.getElementById('leftcircle');</span></span><br><span class=\"line\"><span class=\"regexp\">    var show = document.getElementById('show');</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">    show.innerHTML = second;</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">    if(second&lt;=30)&#123;</span></span><br><span class=\"line\"><span class=\"regexp\">        rightcircle.style.cssText = \"transform: rotate(\"+ (-135+6*second) +\"deg)\";</span></span><br><span class=\"line\"><span class=\"regexp\">        leftcircle.style.cssText = \"transform: rotate(-135deg)\";</span></span><br><span class=\"line\"><span class=\"regexp\">    &#125;else&#123;</span></span><br><span class=\"line\"><span class=\"regexp\">        rightcircle.style.cssText = \"transform: rotate(45deg)\";</span></span><br><span class=\"line\"><span class=\"regexp\">        leftcircle.style.cssText = \"transform: rotate(\"+ (-135+6*(second-30)) +\"deg)\";</span></span><br><span class=\"line\"><span class=\"regexp\">    &#125;</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">getTime();</span></span><br><span class=\"line\"><span class=\"regexp\">setInterval(function()&#123;</span></span><br><span class=\"line\"><span class=\"regexp\">    getTime();</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;, 1000)</span></span><br><span class=\"line\"><span class=\"regexp\">  &lt;/</span>script&gt;</span><br><span class=\"line\">  &lt;<span class=\"regexp\">/body&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">&lt;/</span>html&gt;</span><br></pre></td></tr></table></figure>"},{"title":"css布局两边固定中间自适应方法集","date":"2019-06-21T13:56:26.000Z","_content":"## 1、90后万能flex方法\n\n``` html\n<!DOCTYPE html>\n  <html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n    <title>Document</title>\n    <style>\n      .left{\n        width: 100px;\n        background: red;\n      }\n      .right{\n        width: 100px;\n        background: blue;\n      }\n      .wrap{\n        display: flex;\n      }\n      .middle{\n        flex: 1;\n        background: rosybrown;\n      }\n    </style>\n  </head>\n  <!-- 中间响应式，两边固定 -->\n  <body>\n    <div class=\"wrap\">\n      <div class=\"left\">left</div>\n      <div class=\"middle\"></div>\n      <div class=\"right\">right</div>\n    </div>\n  </body>\n</html>\n```\n## 2、80后大佬们的table方法\n``` html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n  <title>Document</title>\n  <style>\n    .left{\n      width: 100px;\n      background: red;\n    }\n    .right{\n      width: 100px;\n      background: blue;\n    }\n    .wrap{\n      display: table;\n    }\n    .wrap > div{\n      display: table-cell;\n    }\n    .middle{\n      background: rosybrown;\n    }\n  </style>\n</head>\n<!-- 中间响应式，两边固定 -->\n<body>\n  <div class=\"wrap\">\n    <div class=\"left\">left</div>\n    <div class=\"middle\">我是中间的</div>\n    <div class=\"right\">right</div>\n  </div>\n</body>\n</html>\n```\n## 3、00后牛叉gird方法\n``` html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n  <title>Document</title>\n  <style>\n    .left{\n      background: red;\n    }\n    .right{\n      background: blue;\n    }\n    .wrap{\n      display: grid;\n      width: 100%;\n      grid-template-rows: auto;\n      grid-template-columns: 100px auto 100px;\n    }\n    .middle{\n      background: rosybrown;\n    }\n  </style>\n</head>\n<!-- 中间响应式，两边固定 -->\n<body>\n  <div class=\"wrap\">\n    <div class=\"left\">left</div>\n    <div class=\"middle\">我是中间的</div>\n    <div class=\"right\">right</div>\n  </div>\n</body>\n</html>\n```\n## 4、8090老套路position方法\n``` html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n  <title>Document</title>\n  <style>\n    .left{\n      left: 0;\n      width: 100px;\n      background: red;\n    }\n    .right{\n      right: 0;\n      width: 100px;\n      background: blue;\n    }\n    .wrap{\n      position: relative;\n    }\n    .wrap> div{\n      position: absolute;\n    }\n    .middle{\n      left: 100px;\n      right: 100px;\n      background: rosybrown;\n    }\n  </style>\n</head>\n<!-- 中间响应式，两边固定 -->\n<body>\n  <div class=\"wrap\">\n    <div class=\"left\">left</div>\n    <div class=\"middle\">我是中间的</div>\n    <div class=\"right\">right</div>\n  </div>\n</body>\n</html>\n```","source":"_posts/css布局两边固定中间自适应方法集.md","raw":"---\ntitle: css布局两边固定中间自适应方法集\ndate: 2019-06-21 21:56:26\ntags: ['css']\n---\n## 1、90后万能flex方法\n\n``` html\n<!DOCTYPE html>\n  <html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n    <title>Document</title>\n    <style>\n      .left{\n        width: 100px;\n        background: red;\n      }\n      .right{\n        width: 100px;\n        background: blue;\n      }\n      .wrap{\n        display: flex;\n      }\n      .middle{\n        flex: 1;\n        background: rosybrown;\n      }\n    </style>\n  </head>\n  <!-- 中间响应式，两边固定 -->\n  <body>\n    <div class=\"wrap\">\n      <div class=\"left\">left</div>\n      <div class=\"middle\"></div>\n      <div class=\"right\">right</div>\n    </div>\n  </body>\n</html>\n```\n## 2、80后大佬们的table方法\n``` html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n  <title>Document</title>\n  <style>\n    .left{\n      width: 100px;\n      background: red;\n    }\n    .right{\n      width: 100px;\n      background: blue;\n    }\n    .wrap{\n      display: table;\n    }\n    .wrap > div{\n      display: table-cell;\n    }\n    .middle{\n      background: rosybrown;\n    }\n  </style>\n</head>\n<!-- 中间响应式，两边固定 -->\n<body>\n  <div class=\"wrap\">\n    <div class=\"left\">left</div>\n    <div class=\"middle\">我是中间的</div>\n    <div class=\"right\">right</div>\n  </div>\n</body>\n</html>\n```\n## 3、00后牛叉gird方法\n``` html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n  <title>Document</title>\n  <style>\n    .left{\n      background: red;\n    }\n    .right{\n      background: blue;\n    }\n    .wrap{\n      display: grid;\n      width: 100%;\n      grid-template-rows: auto;\n      grid-template-columns: 100px auto 100px;\n    }\n    .middle{\n      background: rosybrown;\n    }\n  </style>\n</head>\n<!-- 中间响应式，两边固定 -->\n<body>\n  <div class=\"wrap\">\n    <div class=\"left\">left</div>\n    <div class=\"middle\">我是中间的</div>\n    <div class=\"right\">right</div>\n  </div>\n</body>\n</html>\n```\n## 4、8090老套路position方法\n``` html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n  <title>Document</title>\n  <style>\n    .left{\n      left: 0;\n      width: 100px;\n      background: red;\n    }\n    .right{\n      right: 0;\n      width: 100px;\n      background: blue;\n    }\n    .wrap{\n      position: relative;\n    }\n    .wrap> div{\n      position: absolute;\n    }\n    .middle{\n      left: 100px;\n      right: 100px;\n      background: rosybrown;\n    }\n  </style>\n</head>\n<!-- 中间响应式，两边固定 -->\n<body>\n  <div class=\"wrap\">\n    <div class=\"left\">left</div>\n    <div class=\"middle\">我是中间的</div>\n    <div class=\"right\">right</div>\n  </div>\n</body>\n</html>\n```","slug":"css布局两边固定中间自适应方法集","published":1,"updated":"2021-10-09T08:48:32.063Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzaaz000o5c54byi411pp","content":"<h2 id=\"1、90后万能flex方法\"><a href=\"#1、90后万能flex方法\" class=\"headerlink\" title=\"1、90后万能flex方法\"></a>1、90后万能flex方法</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"X-UA-Compatible\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"ie=edge\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-class\">.left</span>&#123;</span></span><br><span class=\"line\">        width: 100px;</span><br><span class=\"line\">        background: red;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-class\">.right</span>&#123;</span></span><br><span class=\"line\">        width: 100px;</span><br><span class=\"line\">        background: blue;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-class\">.wrap</span>&#123;</span></span><br><span class=\"line\">        display: flex;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-class\">.middle</span>&#123;</span></span><br><span class=\"line\">        flex: 1;</span><br><span class=\"line\">        background: rosybrown;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- 中间响应式，两边固定 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"wrap\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"left\"</span>&gt;</span>left<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"middle\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"right\"</span>&gt;</span>right<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"2、80后大佬们的table方法\"><a href=\"#2、80后大佬们的table方法\" class=\"headerlink\" title=\"2、80后大佬们的table方法\"></a>2、80后大佬们的table方法</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"X-UA-Compatible\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"ie=edge\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.left</span>&#123;</span></span><br><span class=\"line\">      width: 100px;</span><br><span class=\"line\">      background: red;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.right</span>&#123;</span></span><br><span class=\"line\">      width: 100px;</span><br><span class=\"line\">      background: blue;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.wrap</span>&#123;</span></span><br><span class=\"line\">      display: table;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.wrap</span> &gt; <span class=\"selector-tag\">div</span>&#123;</span></span><br><span class=\"line\">      display: table-cell;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.middle</span>&#123;</span></span><br><span class=\"line\">      background: rosybrown;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 中间响应式，两边固定 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"wrap\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"left\"</span>&gt;</span>left<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"middle\"</span>&gt;</span>我是中间的<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"right\"</span>&gt;</span>right<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"3、00后牛叉gird方法\"><a href=\"#3、00后牛叉gird方法\" class=\"headerlink\" title=\"3、00后牛叉gird方法\"></a>3、00后牛叉gird方法</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"X-UA-Compatible\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"ie=edge\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.left</span>&#123;</span></span><br><span class=\"line\">      background: red;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.right</span>&#123;</span></span><br><span class=\"line\">      background: blue;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.wrap</span>&#123;</span></span><br><span class=\"line\">      display: grid;</span><br><span class=\"line\">      width: 100%;</span><br><span class=\"line\">      grid-template-rows: auto;</span><br><span class=\"line\">      grid-template-columns: 100px auto 100px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.middle</span>&#123;</span></span><br><span class=\"line\">      background: rosybrown;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 中间响应式，两边固定 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"wrap\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"left\"</span>&gt;</span>left<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"middle\"</span>&gt;</span>我是中间的<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"right\"</span>&gt;</span>right<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"4、8090老套路position方法\"><a href=\"#4、8090老套路position方法\" class=\"headerlink\" title=\"4、8090老套路position方法\"></a>4、8090老套路position方法</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"X-UA-Compatible\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"ie=edge\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.left</span>&#123;</span></span><br><span class=\"line\">      left: 0;</span><br><span class=\"line\">      width: 100px;</span><br><span class=\"line\">      background: red;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.right</span>&#123;</span></span><br><span class=\"line\">      right: 0;</span><br><span class=\"line\">      width: 100px;</span><br><span class=\"line\">      background: blue;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.wrap</span>&#123;</span></span><br><span class=\"line\">      position: relative;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.wrap</span>&gt; <span class=\"selector-tag\">div</span>&#123;</span></span><br><span class=\"line\">      position: absolute;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.middle</span>&#123;</span></span><br><span class=\"line\">      left: 100px;</span><br><span class=\"line\">      right: 100px;</span><br><span class=\"line\">      background: rosybrown;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 中间响应式，两边固定 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"wrap\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"left\"</span>&gt;</span>left<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"middle\"</span>&gt;</span>我是中间的<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"right\"</span>&gt;</span>right<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1、90后万能flex方法\"><a href=\"#1、90后万能flex方法\" class=\"headerlink\" title=\"1、90后万能flex方法\"></a>1、90后万能flex方法</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"X-UA-Compatible\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"ie=edge\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-class\">.left</span>&#123;</span></span><br><span class=\"line\">        width: 100px;</span><br><span class=\"line\">        background: red;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-class\">.right</span>&#123;</span></span><br><span class=\"line\">        width: 100px;</span><br><span class=\"line\">        background: blue;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-class\">.wrap</span>&#123;</span></span><br><span class=\"line\">        display: flex;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-class\">.middle</span>&#123;</span></span><br><span class=\"line\">        flex: 1;</span><br><span class=\"line\">        background: rosybrown;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- 中间响应式，两边固定 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"wrap\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"left\"</span>&gt;</span>left<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"middle\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"right\"</span>&gt;</span>right<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"2、80后大佬们的table方法\"><a href=\"#2、80后大佬们的table方法\" class=\"headerlink\" title=\"2、80后大佬们的table方法\"></a>2、80后大佬们的table方法</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"X-UA-Compatible\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"ie=edge\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.left</span>&#123;</span></span><br><span class=\"line\">      width: 100px;</span><br><span class=\"line\">      background: red;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.right</span>&#123;</span></span><br><span class=\"line\">      width: 100px;</span><br><span class=\"line\">      background: blue;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.wrap</span>&#123;</span></span><br><span class=\"line\">      display: table;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.wrap</span> &gt; <span class=\"selector-tag\">div</span>&#123;</span></span><br><span class=\"line\">      display: table-cell;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.middle</span>&#123;</span></span><br><span class=\"line\">      background: rosybrown;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 中间响应式，两边固定 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"wrap\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"left\"</span>&gt;</span>left<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"middle\"</span>&gt;</span>我是中间的<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"right\"</span>&gt;</span>right<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"3、00后牛叉gird方法\"><a href=\"#3、00后牛叉gird方法\" class=\"headerlink\" title=\"3、00后牛叉gird方法\"></a>3、00后牛叉gird方法</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"X-UA-Compatible\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"ie=edge\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.left</span>&#123;</span></span><br><span class=\"line\">      background: red;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.right</span>&#123;</span></span><br><span class=\"line\">      background: blue;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.wrap</span>&#123;</span></span><br><span class=\"line\">      display: grid;</span><br><span class=\"line\">      width: 100%;</span><br><span class=\"line\">      grid-template-rows: auto;</span><br><span class=\"line\">      grid-template-columns: 100px auto 100px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.middle</span>&#123;</span></span><br><span class=\"line\">      background: rosybrown;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 中间响应式，两边固定 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"wrap\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"left\"</span>&gt;</span>left<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"middle\"</span>&gt;</span>我是中间的<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"right\"</span>&gt;</span>right<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"4、8090老套路position方法\"><a href=\"#4、8090老套路position方法\" class=\"headerlink\" title=\"4、8090老套路position方法\"></a>4、8090老套路position方法</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"X-UA-Compatible\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"ie=edge\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.left</span>&#123;</span></span><br><span class=\"line\">      left: 0;</span><br><span class=\"line\">      width: 100px;</span><br><span class=\"line\">      background: red;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.right</span>&#123;</span></span><br><span class=\"line\">      right: 0;</span><br><span class=\"line\">      width: 100px;</span><br><span class=\"line\">      background: blue;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.wrap</span>&#123;</span></span><br><span class=\"line\">      position: relative;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.wrap</span>&gt; <span class=\"selector-tag\">div</span>&#123;</span></span><br><span class=\"line\">      position: absolute;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.middle</span>&#123;</span></span><br><span class=\"line\">      left: 100px;</span><br><span class=\"line\">      right: 100px;</span><br><span class=\"line\">      background: rosybrown;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 中间响应式，两边固定 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"wrap\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"left\"</span>&gt;</span>left<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"middle\"</span>&gt;</span>我是中间的<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"right\"</span>&gt;</span>right<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>"},{"title":"el-date-picker daterange设置上下7天选择区间","date":"2020-06-11T06:18:25.000Z","_content":"\n## 需求\n\n时间选择区间想个不能超过 7 天\n\n## 代码\n\n```html\n<el-form-item label=\"搜索时间:\">\n\t<el-date-picker\n\t\tv-model=\"form.rangeDate\"\n\t\tvalue-format=\"yyyy-MM-dd\"\n\t\ttype=\"daterange\"\n\t\t:picker-options=\"pickerOptions\"\n\t\tclearable\n\t\t@change=\"handleFormChange\"\n\t/>\n</el-form-item>\n```\n\n```javascript\ndata(){\n  let that = this // 关键\n  return {\n    pickerOptions: {\n      disabledDate(time) {\n        let timeOptionRange = that.timeOptionRange\n        let secondNum = 60 * 60 * 24 * 7 * 1000\n        if (timeOptionRange) {\n          return time.getTime() > timeOptionRange.getTime() + secondNum || time.getTime() < timeOptionRange.getTime() - secondNum\n        }\n      }, onPick(time) {\n        // 当第一时间选中才设置禁用\n        if (time.minDate && !time.maxDate) {\n          that.timeOptionRange = time.minDate\n        }\n        if (time.maxDate) {\n          that.timeOptionRange = null\n        }\n      }\n    }\n  }\n}\n```\n","source":"_posts/daterange设置上下7天选择区间.md","raw":"---\ntitle: el-date-picker daterange设置上下7天选择区间\ndate: 2020-06-11 14:18:25\ntags: ['element-ui']\n---\n\n## 需求\n\n时间选择区间想个不能超过 7 天\n\n## 代码\n\n```html\n<el-form-item label=\"搜索时间:\">\n\t<el-date-picker\n\t\tv-model=\"form.rangeDate\"\n\t\tvalue-format=\"yyyy-MM-dd\"\n\t\ttype=\"daterange\"\n\t\t:picker-options=\"pickerOptions\"\n\t\tclearable\n\t\t@change=\"handleFormChange\"\n\t/>\n</el-form-item>\n```\n\n```javascript\ndata(){\n  let that = this // 关键\n  return {\n    pickerOptions: {\n      disabledDate(time) {\n        let timeOptionRange = that.timeOptionRange\n        let secondNum = 60 * 60 * 24 * 7 * 1000\n        if (timeOptionRange) {\n          return time.getTime() > timeOptionRange.getTime() + secondNum || time.getTime() < timeOptionRange.getTime() - secondNum\n        }\n      }, onPick(time) {\n        // 当第一时间选中才设置禁用\n        if (time.minDate && !time.maxDate) {\n          that.timeOptionRange = time.minDate\n        }\n        if (time.maxDate) {\n          that.timeOptionRange = null\n        }\n      }\n    }\n  }\n}\n```\n","slug":"daterange设置上下7天选择区间","published":1,"updated":"2021-10-09T08:48:32.064Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzab0000q5c54uds3mt3j","content":"<h2 id=\"需求\"><a href=\"#需求\" class=\"headerlink\" title=\"需求\"></a>需求</h2><p>时间选择区间想个不能超过 7 天</p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">el-form-item</span> <span class=\"attr\">label</span>=<span class=\"string\">\"搜索时间:\"</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">el-date-picker</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t<span class=\"attr\">v-model</span>=<span class=\"string\">\"form.rangeDate\"</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t<span class=\"attr\">value-format</span>=<span class=\"string\">\"yyyy-MM-dd\"</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t<span class=\"attr\">type</span>=<span class=\"string\">\"daterange\"</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t<span class=\"attr\">:picker-options</span>=<span class=\"string\">\"pickerOptions\"</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t<span class=\"attr\">clearable</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t@<span class=\"attr\">change</span>=<span class=\"string\">\"handleFormChange\"</span></span></span><br><span class=\"line\"><span class=\"tag\">\t/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">el-form-item</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">data()&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> that = <span class=\"keyword\">this</span> <span class=\"comment\">// 关键</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    pickerOptions: &#123;</span><br><span class=\"line\">      disabledDate(time) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> timeOptionRange = that.timeOptionRange</span><br><span class=\"line\">        <span class=\"keyword\">let</span> secondNum = <span class=\"number\">60</span> * <span class=\"number\">60</span> * <span class=\"number\">24</span> * <span class=\"number\">7</span> * <span class=\"number\">1000</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (timeOptionRange) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> time.getTime() &gt; timeOptionRange.getTime() + secondNum || time.getTime() &lt; timeOptionRange.getTime() - secondNum</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;, onPick(time) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 当第一时间选中才设置禁用</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (time.minDate &amp;&amp; !time.maxDate) &#123;</span><br><span class=\"line\">          that.timeOptionRange = time.minDate</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (time.maxDate) &#123;</span><br><span class=\"line\">          that.timeOptionRange = <span class=\"literal\">null</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"需求\"><a href=\"#需求\" class=\"headerlink\" title=\"需求\"></a>需求</h2><p>时间选择区间想个不能超过 7 天</p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">el-form-item</span> <span class=\"attr\">label</span>=<span class=\"string\">\"搜索时间:\"</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">el-date-picker</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t<span class=\"attr\">v-model</span>=<span class=\"string\">\"form.rangeDate\"</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t<span class=\"attr\">value-format</span>=<span class=\"string\">\"yyyy-MM-dd\"</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t<span class=\"attr\">type</span>=<span class=\"string\">\"daterange\"</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t<span class=\"attr\">:picker-options</span>=<span class=\"string\">\"pickerOptions\"</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t<span class=\"attr\">clearable</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t@<span class=\"attr\">change</span>=<span class=\"string\">\"handleFormChange\"</span></span></span><br><span class=\"line\"><span class=\"tag\">\t/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">el-form-item</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">data()&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> that = <span class=\"keyword\">this</span> <span class=\"comment\">// 关键</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    pickerOptions: &#123;</span><br><span class=\"line\">      disabledDate(time) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> timeOptionRange = that.timeOptionRange</span><br><span class=\"line\">        <span class=\"keyword\">let</span> secondNum = <span class=\"number\">60</span> * <span class=\"number\">60</span> * <span class=\"number\">24</span> * <span class=\"number\">7</span> * <span class=\"number\">1000</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (timeOptionRange) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> time.getTime() &gt; timeOptionRange.getTime() + secondNum || time.getTime() &lt; timeOptionRange.getTime() - secondNum</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;, onPick(time) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 当第一时间选中才设置禁用</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (time.minDate &amp;&amp; !time.maxDate) &#123;</span><br><span class=\"line\">          that.timeOptionRange = time.minDate</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (time.maxDate) &#123;</span><br><span class=\"line\">          that.timeOptionRange = <span class=\"literal\">null</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n"},{"title":"css常见的规范标准","date":"2019-09-04T12:44:13.000Z","_content":"\n## 前言\n\n你是否常常碰到以下问题：你总是看不懂他写的代码，或者读起来很吃力；你需要改他的代码却无从下手，或总是要去问他这里是什么改了会不会影响其他代码；你和他一起开发一个产品，你总是怕代码和他有冲突或互相影响；你的代码在多次维护任务之后变得越来越臃肿，越来越难以维护。很多时候起名字都很随意，但也想起个正常点的名字，有标准例子吗？\n#### 附带MarkDown\n[快速生成表格](https://tool.lu/tables/)\n## 统一语义理解和命名\n布局（.g-）\n\n| 语义     | 命名   | 简写   |\n| ---------- | -------- | -------- |\n| 文档     | doc      | doc      |\n| 头部     | head     | hd       |\n| 主体     | body     | bd       |\n| 尾部     | foot     | ft       |\n| 主栏     | main     | mn       |\n| 主栏子容器 | mainc    | mnc      |\n| 侧栏     | side     | sd       |\n| 侧栏子容器 | sidec    | sdc      |\n| 盒容器  | wrap/box | wrap/box |\n\n模块（.m-）、元件（.u-）\n\n| 语义 | 命名       | 简写 |\n| ------ | ------------ | ----- |\n| 导航 | nav          | nav   |\n| 子导航 | subnav       | snav  |\n| 面包屑 | crumb        | crm   |\n| 菜单 | menu         | menu  |\n| 选项卡 | tab          | tab   |\n| 标题区 | head/title   | hd/tt |\n| 内容区 | body/content | bd/ct |\n| 列表 | list         | lst   |\n| 表格 | table        | tb    |\n| 表单 | form         | fm    |\n| 热点 | hot          | hot   |\n| 排行 | top          | top   |\n| 登录 | login        | log   |\n| 标志 | logo         | logo  |\n| 广告 | advertise    | ad    |\n| 搜索 | search       | sch   |\n| 幻灯 | slide        | sld   |\n| 提示 | tips         | tips  |\n| 帮助 | help         | help  |\n| 新闻 | news         | news  |\n| 下载 | download     | dld   |\n| 注册 | regist       | reg   |\n| 投票 | vote         | vote  |\n| 版权 | copyright    | cprt  |\n| 结果 | result       | rst   |\n| 标题 | title        | tt    |\n| 按钮 | button       | btn   |\n| 输入 | input        | ipt   |\n\n\n功能（.f-）\n\n| 语义   | 命名              | 简写 |\n| -------- | ------------------- | ---- |\n| 浮动清除 | clearboth           | cb   |\n| 向左浮动 | floatleft           | fl   |\n| 向右浮动 | floatright          | fr   |\n| 内联块级 | inlineblock         | ib   |\n| 文本居中 | textaligncenter     | tac  |\n| 文本居右 | textalignright      | tar  |\n| 文本居左 | textalignleft       | tal  |\n| 垂直居中 | verticalalignmiddle | vam  |\n| 溢出隐藏 | overflowhidden      | oh   |\n| 完全消失 | displaynone         | dn   |\n| 字体大小 | fontsize            | fs   |\n| 字体粗细 | fontweight          | fw   |\n\n\n皮肤（.s-）\n\n| 语义   | 命名             | 简写 |\n| -------- | ------------------ | ---- |\n| 浮动清除 | clearboth          | cb   |\n| 向左浮动 | floatleft          | fl   |\n| 向右浮动 | floatright         | fr   |\n| 字体颜色 | fontcolor          | fc   |\n| 背景   | background         | bg   |\n| 背景颜色 | backgroundcolor    | bgc  |\n| 背景图片 | backgroundimage    | bgi  |\n| 背景定位 | backgroundposition | bgp  |\n| 边框颜色 | bordercolor        | bdc  |\n\n\n状态（.z-）\n\n| 语义   | 命名      | 简写 |\n| -------- | ---- | ----- |\n| 选中   | selected    | sel   |\n| 当前   | current     | crt   |\n| 显示   | show        | show  |\n| 隐藏   | hide        | hide  |\n| 打开   | open        | open  |\n| 关闭   | close       | close |\n| 出错   | error       | err   |\n| 不可用 | disabled    | dis   |\n| 边框颜色 | bordercolor | bdc   |\n## 规则\n\n### 使用类选择器，放弃 ID 选择器\n\nID 在一个页面中的唯一性导致了如果以 ID 为选择器来写 CSS，就无法重用。\n\n### NEC 特殊字符：\"-\"连字符\n\n\"-\"在本规范中并不表示连字符的含义。\n\n她只表示两种含义：分类前缀分隔符、扩展分隔符，详见以下具体规则。\n\n### 分类的命名方法：使用单个字母+\"-\"为前缀\n\n布局（grid）（.g-）；模块（module）（.m-）；元件（unit）（.u-）；功能（function）（.f-）；皮肤（skin）（.s-）；状态（.z-）。\n\n对以上的解释详情参见：分类方法中的“CSS 内部的分类及其顺序”。\n\n注：在你样式中的选择器总是要以上面前五类开头，然后在里面使用后代选择器。\n\n如果这五类不能满足你的需求，你可以另外定义一个或多个大类，但必须符合单个字母+\"-\"为前缀的命名规则，即 .x- 的格式。\n\n特殊：.j-将被专用于 JS 获取节点，请勿使用.j-定义样式。\n\n### 后代选择器命名\n\n约定不以单个字母+\"-\"为前缀且长度大于等于 2 的类选择器为后代选择器，如：.item 为 m-list 模块里的每一个项，.text 为 m-list 模块里的文本部分：.m-list .item{}.m-list .text{}。\n一个语义化的标签也可以是后代选择器，比如：.m-list li{}。\n不允许单个字母的类选择器出现，原因详见下面的“模块和元件的后代选择器的扩展类”。\n通过使用后代选择器的方法，你不需要考虑他的命名是否已被使用，因为他只在当前模块或元件中生效，同样的样式名可以在不同的模块或元件中重复使用，互不干扰；在多人协作或者分模块协作的时候效果尤为明显！\n\n后代选择器不需要完整表现结构树层级，尽量能短则短。\n\n注：后代选择器不要在页面布局中使用，因为污染的可能性较大；\n\n```css\n/* 这里的.itm和.cnt只在.m-list中有效 */\n.m-list {\n  margin: 0;\n  padding: 0;\n}\n.m-list .itm {\n  margin: 1px;\n  padding: 1px;\n}\n.m-list .cnt {\n  margin-left: 100px;\n}\n/* 这里的.cnt和.num只在.m-page中有效 */\n.m-page {\n  height: 20px;\n}\n.m-page .cnt {\n  text-align: center;\n}\n.m-page .num {\n  border: 1px solid #ddd;\n}\n```\n\n### 命名应简约而不失语义\n\n```css\n/* 反对：表现化的或没有语义的命名 */\n.m-abc .green2 {\n}\n.g-left2 {\n}\n/* 推荐：使用有语义的简短的命名 */\n.m-list .wrap2 {\n}\n.g-side2 {\n}\n```\n\n### 相同语义的不同类命名\n\n方法：直接加数字或字母区分即可（如：.m-list、.m-list2、.m-list3 等，都是列表模块，但是是完全不一样的模块）。\n\n其他举例：.f-fw0、.f-fw1、.s-fc0、.s-fc1、.m-logo2、.m-logo3、u-btn、u-btn2 等等。\n\n### 模块和元件的扩展类的命名方法\n\n当 A、B、C、...它们类型相同且外形相似区别不大，那么就以它们中出现率最高的做成基类，其他做成基类的扩展。\n\n方法：+“-”+数字或字母（如：.m-list 的扩展类为.m-list-1、.m-list-2 等）。\n\n补充：基类自身可以独立使用（如：class=\"m-list\"即可），扩展类必须基于基类使用（如：class=\"m-list m-list-2\"）。\n\n如果你的扩展类是表示不同状态，那么你可以这样命名：u-btn-dis，u-btn-hov，m-box-sel，m-box-hov 等等，然后像这样使用：class=\"u-btn u-btn-dis\"。\n\n如果你的网站可以不兼容 IE6 等浏览器，那么你标识状态的方法也可以采取独立状态分类（.z-）方法：.u-btn.z-dis，.m-box.z-sel，然后像这样使用：class=\"u-btn z-dis\"。\n\n### 模块和元件的后代选择器的扩展类\n\n有时候模块内会有些类似的东西，如果你没有把它们做成元件和扩展，那么也可以使用后代选择器和扩展。\n\n后代选择器：.m-login .btn{}。\n\n后代选择器扩展：.m-login .btn-1{}，.m-login .btn-dis{}。\n\n同样也可以采取独立状态分类（.z-）方法：.m-login .btn.z-dis{}，然后像这样使用：class=\"btn z-dis\"。\n\n注：此方法用于类选择器，直接使用标签做为选择器的则不需要使用此命名方法。\n\n注：为防止后代选择器的扩展类和大类命名规范冲突，后代选择器不允许使用单个字母。\n\n比如：.m-list .a{}是不允许的，因为当这个.a 需要扩展的时候就会变成.a-bb，这样就和大类的命名规范冲突。\n\n分组选择器有时可以代替扩展方法\n有时候虽然两个同类型的模块很相似，但是你希望他们之间不要有依赖关系，也就是说你不希望使用扩展的方法，那么你可以通过合并选择器来设置共性的样式。\n\n使用本方法的前提是：相同类型、功能和外观都相似，写在同一片代码区域方便维护。\n\n```css\n/* 两个元件共性的样式 */\n.u-tip1,\n.u-tip2 {\n}\n.u-tip1 .itm,\n.u-tip2 .itm {\n}\n/* 在分别是两个元件各自的样式 */\n/* tip1 */\n.u-tip1 {\n}\n.u-tip1 .itm {\n}\n/* tip2 */\n.u-tip2 {\n}\n.u-tip2 .itm {\n}\n```\n\n### 防止污染和被污染\n\n当模块或元件之间互相嵌套，且使用了相同的标签选择器或其他后代选择器，那么里面的选择器就会被外面相同的选择器所影响。\n\n所以，如果你的模块或元件可能嵌套或被嵌套于其他模块或元件，那么要慎用标签选择器，必要时采用类选择器，并注意命名方式，可以采用.m-layer .layerxxx、.m-list2 .list2xxx 的形式来降低后代选择器的污染性。\n\n## 实践\n\n### 最佳选择器写法\n\n```css\n/* 这是某个模块 */\n.m-nav {\n} /* 模块容器 */\n.m-nav li,\n.m-nav a {\n} /* 先共性  优化组合 */\n.m-nav li {\n} /* 后个性  语义化标签选择器 */\n.m-nav a {\n} /* 后个性中的共性 按结构顺序 */\n.m-nav a.a1 {\n} /* 后个性中的个性 */\n.m-nav a.a2 {\n} /* 后个性中的个性 */\n.m-nav .z-crt a {\n} /* 交互状态变化 */\n.m-nav .z-crt a.a1 {\n}\n.m-nav .z-crt a.a2 {\n}\n.m-nav .btn {\n} /* 典型后代选择器 */\n.m-nav .btn-1 {\n} /* 典型后代选择器扩展 */\n.m-nav .btn-dis {\n} /* 典型后代选择器扩展（状态） */\n.m-nav .btn.z-dis {\n} /* 作用同上，请二选一（如果可以不兼容IE6时使用） */\n.m-nav .m-sch {\n} /* 控制内部其他模块位置 */\n.m-nav .u-sel {\n} /* 控制内部其他元件位置 */\n.m-nav-1 {\n} /* 模块扩展 */\n.m-nav-1 li {\n}\n.m-nav-dis {\n} /* 模块扩展（状态） */\n.m-nav.z-dis {\n} /* 作用同上，请二选一（如果可以不兼容IE6时使用） */\n```","source":"_posts/css常见的规范标准.md","raw":"---\ntitle: css常见的规范标准\ndate: 2019-09-04 20:44:13\ntags: ['css']\n---\n\n## 前言\n\n你是否常常碰到以下问题：你总是看不懂他写的代码，或者读起来很吃力；你需要改他的代码却无从下手，或总是要去问他这里是什么改了会不会影响其他代码；你和他一起开发一个产品，你总是怕代码和他有冲突或互相影响；你的代码在多次维护任务之后变得越来越臃肿，越来越难以维护。很多时候起名字都很随意，但也想起个正常点的名字，有标准例子吗？\n#### 附带MarkDown\n[快速生成表格](https://tool.lu/tables/)\n## 统一语义理解和命名\n布局（.g-）\n\n| 语义     | 命名   | 简写   |\n| ---------- | -------- | -------- |\n| 文档     | doc      | doc      |\n| 头部     | head     | hd       |\n| 主体     | body     | bd       |\n| 尾部     | foot     | ft       |\n| 主栏     | main     | mn       |\n| 主栏子容器 | mainc    | mnc      |\n| 侧栏     | side     | sd       |\n| 侧栏子容器 | sidec    | sdc      |\n| 盒容器  | wrap/box | wrap/box |\n\n模块（.m-）、元件（.u-）\n\n| 语义 | 命名       | 简写 |\n| ------ | ------------ | ----- |\n| 导航 | nav          | nav   |\n| 子导航 | subnav       | snav  |\n| 面包屑 | crumb        | crm   |\n| 菜单 | menu         | menu  |\n| 选项卡 | tab          | tab   |\n| 标题区 | head/title   | hd/tt |\n| 内容区 | body/content | bd/ct |\n| 列表 | list         | lst   |\n| 表格 | table        | tb    |\n| 表单 | form         | fm    |\n| 热点 | hot          | hot   |\n| 排行 | top          | top   |\n| 登录 | login        | log   |\n| 标志 | logo         | logo  |\n| 广告 | advertise    | ad    |\n| 搜索 | search       | sch   |\n| 幻灯 | slide        | sld   |\n| 提示 | tips         | tips  |\n| 帮助 | help         | help  |\n| 新闻 | news         | news  |\n| 下载 | download     | dld   |\n| 注册 | regist       | reg   |\n| 投票 | vote         | vote  |\n| 版权 | copyright    | cprt  |\n| 结果 | result       | rst   |\n| 标题 | title        | tt    |\n| 按钮 | button       | btn   |\n| 输入 | input        | ipt   |\n\n\n功能（.f-）\n\n| 语义   | 命名              | 简写 |\n| -------- | ------------------- | ---- |\n| 浮动清除 | clearboth           | cb   |\n| 向左浮动 | floatleft           | fl   |\n| 向右浮动 | floatright          | fr   |\n| 内联块级 | inlineblock         | ib   |\n| 文本居中 | textaligncenter     | tac  |\n| 文本居右 | textalignright      | tar  |\n| 文本居左 | textalignleft       | tal  |\n| 垂直居中 | verticalalignmiddle | vam  |\n| 溢出隐藏 | overflowhidden      | oh   |\n| 完全消失 | displaynone         | dn   |\n| 字体大小 | fontsize            | fs   |\n| 字体粗细 | fontweight          | fw   |\n\n\n皮肤（.s-）\n\n| 语义   | 命名             | 简写 |\n| -------- | ------------------ | ---- |\n| 浮动清除 | clearboth          | cb   |\n| 向左浮动 | floatleft          | fl   |\n| 向右浮动 | floatright         | fr   |\n| 字体颜色 | fontcolor          | fc   |\n| 背景   | background         | bg   |\n| 背景颜色 | backgroundcolor    | bgc  |\n| 背景图片 | backgroundimage    | bgi  |\n| 背景定位 | backgroundposition | bgp  |\n| 边框颜色 | bordercolor        | bdc  |\n\n\n状态（.z-）\n\n| 语义   | 命名      | 简写 |\n| -------- | ---- | ----- |\n| 选中   | selected    | sel   |\n| 当前   | current     | crt   |\n| 显示   | show        | show  |\n| 隐藏   | hide        | hide  |\n| 打开   | open        | open  |\n| 关闭   | close       | close |\n| 出错   | error       | err   |\n| 不可用 | disabled    | dis   |\n| 边框颜色 | bordercolor | bdc   |\n## 规则\n\n### 使用类选择器，放弃 ID 选择器\n\nID 在一个页面中的唯一性导致了如果以 ID 为选择器来写 CSS，就无法重用。\n\n### NEC 特殊字符：\"-\"连字符\n\n\"-\"在本规范中并不表示连字符的含义。\n\n她只表示两种含义：分类前缀分隔符、扩展分隔符，详见以下具体规则。\n\n### 分类的命名方法：使用单个字母+\"-\"为前缀\n\n布局（grid）（.g-）；模块（module）（.m-）；元件（unit）（.u-）；功能（function）（.f-）；皮肤（skin）（.s-）；状态（.z-）。\n\n对以上的解释详情参见：分类方法中的“CSS 内部的分类及其顺序”。\n\n注：在你样式中的选择器总是要以上面前五类开头，然后在里面使用后代选择器。\n\n如果这五类不能满足你的需求，你可以另外定义一个或多个大类，但必须符合单个字母+\"-\"为前缀的命名规则，即 .x- 的格式。\n\n特殊：.j-将被专用于 JS 获取节点，请勿使用.j-定义样式。\n\n### 后代选择器命名\n\n约定不以单个字母+\"-\"为前缀且长度大于等于 2 的类选择器为后代选择器，如：.item 为 m-list 模块里的每一个项，.text 为 m-list 模块里的文本部分：.m-list .item{}.m-list .text{}。\n一个语义化的标签也可以是后代选择器，比如：.m-list li{}。\n不允许单个字母的类选择器出现，原因详见下面的“模块和元件的后代选择器的扩展类”。\n通过使用后代选择器的方法，你不需要考虑他的命名是否已被使用，因为他只在当前模块或元件中生效，同样的样式名可以在不同的模块或元件中重复使用，互不干扰；在多人协作或者分模块协作的时候效果尤为明显！\n\n后代选择器不需要完整表现结构树层级，尽量能短则短。\n\n注：后代选择器不要在页面布局中使用，因为污染的可能性较大；\n\n```css\n/* 这里的.itm和.cnt只在.m-list中有效 */\n.m-list {\n  margin: 0;\n  padding: 0;\n}\n.m-list .itm {\n  margin: 1px;\n  padding: 1px;\n}\n.m-list .cnt {\n  margin-left: 100px;\n}\n/* 这里的.cnt和.num只在.m-page中有效 */\n.m-page {\n  height: 20px;\n}\n.m-page .cnt {\n  text-align: center;\n}\n.m-page .num {\n  border: 1px solid #ddd;\n}\n```\n\n### 命名应简约而不失语义\n\n```css\n/* 反对：表现化的或没有语义的命名 */\n.m-abc .green2 {\n}\n.g-left2 {\n}\n/* 推荐：使用有语义的简短的命名 */\n.m-list .wrap2 {\n}\n.g-side2 {\n}\n```\n\n### 相同语义的不同类命名\n\n方法：直接加数字或字母区分即可（如：.m-list、.m-list2、.m-list3 等，都是列表模块，但是是完全不一样的模块）。\n\n其他举例：.f-fw0、.f-fw1、.s-fc0、.s-fc1、.m-logo2、.m-logo3、u-btn、u-btn2 等等。\n\n### 模块和元件的扩展类的命名方法\n\n当 A、B、C、...它们类型相同且外形相似区别不大，那么就以它们中出现率最高的做成基类，其他做成基类的扩展。\n\n方法：+“-”+数字或字母（如：.m-list 的扩展类为.m-list-1、.m-list-2 等）。\n\n补充：基类自身可以独立使用（如：class=\"m-list\"即可），扩展类必须基于基类使用（如：class=\"m-list m-list-2\"）。\n\n如果你的扩展类是表示不同状态，那么你可以这样命名：u-btn-dis，u-btn-hov，m-box-sel，m-box-hov 等等，然后像这样使用：class=\"u-btn u-btn-dis\"。\n\n如果你的网站可以不兼容 IE6 等浏览器，那么你标识状态的方法也可以采取独立状态分类（.z-）方法：.u-btn.z-dis，.m-box.z-sel，然后像这样使用：class=\"u-btn z-dis\"。\n\n### 模块和元件的后代选择器的扩展类\n\n有时候模块内会有些类似的东西，如果你没有把它们做成元件和扩展，那么也可以使用后代选择器和扩展。\n\n后代选择器：.m-login .btn{}。\n\n后代选择器扩展：.m-login .btn-1{}，.m-login .btn-dis{}。\n\n同样也可以采取独立状态分类（.z-）方法：.m-login .btn.z-dis{}，然后像这样使用：class=\"btn z-dis\"。\n\n注：此方法用于类选择器，直接使用标签做为选择器的则不需要使用此命名方法。\n\n注：为防止后代选择器的扩展类和大类命名规范冲突，后代选择器不允许使用单个字母。\n\n比如：.m-list .a{}是不允许的，因为当这个.a 需要扩展的时候就会变成.a-bb，这样就和大类的命名规范冲突。\n\n分组选择器有时可以代替扩展方法\n有时候虽然两个同类型的模块很相似，但是你希望他们之间不要有依赖关系，也就是说你不希望使用扩展的方法，那么你可以通过合并选择器来设置共性的样式。\n\n使用本方法的前提是：相同类型、功能和外观都相似，写在同一片代码区域方便维护。\n\n```css\n/* 两个元件共性的样式 */\n.u-tip1,\n.u-tip2 {\n}\n.u-tip1 .itm,\n.u-tip2 .itm {\n}\n/* 在分别是两个元件各自的样式 */\n/* tip1 */\n.u-tip1 {\n}\n.u-tip1 .itm {\n}\n/* tip2 */\n.u-tip2 {\n}\n.u-tip2 .itm {\n}\n```\n\n### 防止污染和被污染\n\n当模块或元件之间互相嵌套，且使用了相同的标签选择器或其他后代选择器，那么里面的选择器就会被外面相同的选择器所影响。\n\n所以，如果你的模块或元件可能嵌套或被嵌套于其他模块或元件，那么要慎用标签选择器，必要时采用类选择器，并注意命名方式，可以采用.m-layer .layerxxx、.m-list2 .list2xxx 的形式来降低后代选择器的污染性。\n\n## 实践\n\n### 最佳选择器写法\n\n```css\n/* 这是某个模块 */\n.m-nav {\n} /* 模块容器 */\n.m-nav li,\n.m-nav a {\n} /* 先共性  优化组合 */\n.m-nav li {\n} /* 后个性  语义化标签选择器 */\n.m-nav a {\n} /* 后个性中的共性 按结构顺序 */\n.m-nav a.a1 {\n} /* 后个性中的个性 */\n.m-nav a.a2 {\n} /* 后个性中的个性 */\n.m-nav .z-crt a {\n} /* 交互状态变化 */\n.m-nav .z-crt a.a1 {\n}\n.m-nav .z-crt a.a2 {\n}\n.m-nav .btn {\n} /* 典型后代选择器 */\n.m-nav .btn-1 {\n} /* 典型后代选择器扩展 */\n.m-nav .btn-dis {\n} /* 典型后代选择器扩展（状态） */\n.m-nav .btn.z-dis {\n} /* 作用同上，请二选一（如果可以不兼容IE6时使用） */\n.m-nav .m-sch {\n} /* 控制内部其他模块位置 */\n.m-nav .u-sel {\n} /* 控制内部其他元件位置 */\n.m-nav-1 {\n} /* 模块扩展 */\n.m-nav-1 li {\n}\n.m-nav-dis {\n} /* 模块扩展（状态） */\n.m-nav.z-dis {\n} /* 作用同上，请二选一（如果可以不兼容IE6时使用） */\n```","slug":"css常见的规范标准","published":1,"updated":"2021-10-09T08:48:32.064Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzab1000s5c54jah0v4ii","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>你是否常常碰到以下问题：你总是看不懂他写的代码，或者读起来很吃力；你需要改他的代码却无从下手，或总是要去问他这里是什么改了会不会影响其他代码；你和他一起开发一个产品，你总是怕代码和他有冲突或互相影响；你的代码在多次维护任务之后变得越来越臃肿，越来越难以维护。很多时候起名字都很随意，但也想起个正常点的名字，有标准例子吗？</p>\n<h4 id=\"附带MarkDown\"><a href=\"#附带MarkDown\" class=\"headerlink\" title=\"附带MarkDown\"></a>附带MarkDown</h4><p><a href=\"https://tool.lu/tables/\" target=\"_blank\" rel=\"noopener\">快速生成表格</a></p>\n<h2 id=\"统一语义理解和命名\"><a href=\"#统一语义理解和命名\" class=\"headerlink\" title=\"统一语义理解和命名\"></a>统一语义理解和命名</h2><p>布局（.g-）</p>\n<table>\n<thead>\n<tr>\n<th>语义</th>\n<th>命名</th>\n<th>简写</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>文档</td>\n<td>doc</td>\n<td>doc</td>\n</tr>\n<tr>\n<td>头部</td>\n<td>head</td>\n<td>hd</td>\n</tr>\n<tr>\n<td>主体</td>\n<td>body</td>\n<td>bd</td>\n</tr>\n<tr>\n<td>尾部</td>\n<td>foot</td>\n<td>ft</td>\n</tr>\n<tr>\n<td>主栏</td>\n<td>main</td>\n<td>mn</td>\n</tr>\n<tr>\n<td>主栏子容器</td>\n<td>mainc</td>\n<td>mnc</td>\n</tr>\n<tr>\n<td>侧栏</td>\n<td>side</td>\n<td>sd</td>\n</tr>\n<tr>\n<td>侧栏子容器</td>\n<td>sidec</td>\n<td>sdc</td>\n</tr>\n<tr>\n<td>盒容器</td>\n<td>wrap/box</td>\n<td>wrap/box</td>\n</tr>\n</tbody>\n</table>\n<p>模块（.m-）、元件（.u-）</p>\n<table>\n<thead>\n<tr>\n<th>语义</th>\n<th>命名</th>\n<th>简写</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>导航</td>\n<td>nav</td>\n<td>nav</td>\n</tr>\n<tr>\n<td>子导航</td>\n<td>subnav</td>\n<td>snav</td>\n</tr>\n<tr>\n<td>面包屑</td>\n<td>crumb</td>\n<td>crm</td>\n</tr>\n<tr>\n<td>菜单</td>\n<td>menu</td>\n<td>menu</td>\n</tr>\n<tr>\n<td>选项卡</td>\n<td>tab</td>\n<td>tab</td>\n</tr>\n<tr>\n<td>标题区</td>\n<td>head/title</td>\n<td>hd/tt</td>\n</tr>\n<tr>\n<td>内容区</td>\n<td>body/content</td>\n<td>bd/ct</td>\n</tr>\n<tr>\n<td>列表</td>\n<td>list</td>\n<td>lst</td>\n</tr>\n<tr>\n<td>表格</td>\n<td>table</td>\n<td>tb</td>\n</tr>\n<tr>\n<td>表单</td>\n<td>form</td>\n<td>fm</td>\n</tr>\n<tr>\n<td>热点</td>\n<td>hot</td>\n<td>hot</td>\n</tr>\n<tr>\n<td>排行</td>\n<td>top</td>\n<td>top</td>\n</tr>\n<tr>\n<td>登录</td>\n<td>login</td>\n<td>log</td>\n</tr>\n<tr>\n<td>标志</td>\n<td>logo</td>\n<td>logo</td>\n</tr>\n<tr>\n<td>广告</td>\n<td>advertise</td>\n<td>ad</td>\n</tr>\n<tr>\n<td>搜索</td>\n<td>search</td>\n<td>sch</td>\n</tr>\n<tr>\n<td>幻灯</td>\n<td>slide</td>\n<td>sld</td>\n</tr>\n<tr>\n<td>提示</td>\n<td>tips</td>\n<td>tips</td>\n</tr>\n<tr>\n<td>帮助</td>\n<td>help</td>\n<td>help</td>\n</tr>\n<tr>\n<td>新闻</td>\n<td>news</td>\n<td>news</td>\n</tr>\n<tr>\n<td>下载</td>\n<td>download</td>\n<td>dld</td>\n</tr>\n<tr>\n<td>注册</td>\n<td>regist</td>\n<td>reg</td>\n</tr>\n<tr>\n<td>投票</td>\n<td>vote</td>\n<td>vote</td>\n</tr>\n<tr>\n<td>版权</td>\n<td>copyright</td>\n<td>cprt</td>\n</tr>\n<tr>\n<td>结果</td>\n<td>result</td>\n<td>rst</td>\n</tr>\n<tr>\n<td>标题</td>\n<td>title</td>\n<td>tt</td>\n</tr>\n<tr>\n<td>按钮</td>\n<td>button</td>\n<td>btn</td>\n</tr>\n<tr>\n<td>输入</td>\n<td>input</td>\n<td>ipt</td>\n</tr>\n</tbody>\n</table>\n<p>功能（.f-）</p>\n<table>\n<thead>\n<tr>\n<th>语义</th>\n<th>命名</th>\n<th>简写</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>浮动清除</td>\n<td>clearboth</td>\n<td>cb</td>\n</tr>\n<tr>\n<td>向左浮动</td>\n<td>floatleft</td>\n<td>fl</td>\n</tr>\n<tr>\n<td>向右浮动</td>\n<td>floatright</td>\n<td>fr</td>\n</tr>\n<tr>\n<td>内联块级</td>\n<td>inlineblock</td>\n<td>ib</td>\n</tr>\n<tr>\n<td>文本居中</td>\n<td>textaligncenter</td>\n<td>tac</td>\n</tr>\n<tr>\n<td>文本居右</td>\n<td>textalignright</td>\n<td>tar</td>\n</tr>\n<tr>\n<td>文本居左</td>\n<td>textalignleft</td>\n<td>tal</td>\n</tr>\n<tr>\n<td>垂直居中</td>\n<td>verticalalignmiddle</td>\n<td>vam</td>\n</tr>\n<tr>\n<td>溢出隐藏</td>\n<td>overflowhidden</td>\n<td>oh</td>\n</tr>\n<tr>\n<td>完全消失</td>\n<td>displaynone</td>\n<td>dn</td>\n</tr>\n<tr>\n<td>字体大小</td>\n<td>fontsize</td>\n<td>fs</td>\n</tr>\n<tr>\n<td>字体粗细</td>\n<td>fontweight</td>\n<td>fw</td>\n</tr>\n</tbody>\n</table>\n<p>皮肤（.s-）</p>\n<table>\n<thead>\n<tr>\n<th>语义</th>\n<th>命名</th>\n<th>简写</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>浮动清除</td>\n<td>clearboth</td>\n<td>cb</td>\n</tr>\n<tr>\n<td>向左浮动</td>\n<td>floatleft</td>\n<td>fl</td>\n</tr>\n<tr>\n<td>向右浮动</td>\n<td>floatright</td>\n<td>fr</td>\n</tr>\n<tr>\n<td>字体颜色</td>\n<td>fontcolor</td>\n<td>fc</td>\n</tr>\n<tr>\n<td>背景</td>\n<td>background</td>\n<td>bg</td>\n</tr>\n<tr>\n<td>背景颜色</td>\n<td>backgroundcolor</td>\n<td>bgc</td>\n</tr>\n<tr>\n<td>背景图片</td>\n<td>backgroundimage</td>\n<td>bgi</td>\n</tr>\n<tr>\n<td>背景定位</td>\n<td>backgroundposition</td>\n<td>bgp</td>\n</tr>\n<tr>\n<td>边框颜色</td>\n<td>bordercolor</td>\n<td>bdc</td>\n</tr>\n</tbody>\n</table>\n<p>状态（.z-）</p>\n<table>\n<thead>\n<tr>\n<th>语义</th>\n<th>命名</th>\n<th>简写</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>选中</td>\n<td>selected</td>\n<td>sel</td>\n</tr>\n<tr>\n<td>当前</td>\n<td>current</td>\n<td>crt</td>\n</tr>\n<tr>\n<td>显示</td>\n<td>show</td>\n<td>show</td>\n</tr>\n<tr>\n<td>隐藏</td>\n<td>hide</td>\n<td>hide</td>\n</tr>\n<tr>\n<td>打开</td>\n<td>open</td>\n<td>open</td>\n</tr>\n<tr>\n<td>关闭</td>\n<td>close</td>\n<td>close</td>\n</tr>\n<tr>\n<td>出错</td>\n<td>error</td>\n<td>err</td>\n</tr>\n<tr>\n<td>不可用</td>\n<td>disabled</td>\n<td>dis</td>\n</tr>\n<tr>\n<td>边框颜色</td>\n<td>bordercolor</td>\n<td>bdc</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"规则\"><a href=\"#规则\" class=\"headerlink\" title=\"规则\"></a>规则</h2><h3 id=\"使用类选择器，放弃-ID-选择器\"><a href=\"#使用类选择器，放弃-ID-选择器\" class=\"headerlink\" title=\"使用类选择器，放弃 ID 选择器\"></a>使用类选择器，放弃 ID 选择器</h3><p>ID 在一个页面中的唯一性导致了如果以 ID 为选择器来写 CSS，就无法重用。</p>\n<h3 id=\"NEC-特殊字符：”-“连字符\"><a href=\"#NEC-特殊字符：”-“连字符\" class=\"headerlink\" title=\"NEC 特殊字符：”-“连字符\"></a>NEC 特殊字符：”-“连字符</h3><p>“-“在本规范中并不表示连字符的含义。</p>\n<p>她只表示两种含义：分类前缀分隔符、扩展分隔符，详见以下具体规则。</p>\n<h3 id=\"分类的命名方法：使用单个字母-”-“为前缀\"><a href=\"#分类的命名方法：使用单个字母-”-“为前缀\" class=\"headerlink\" title=\"分类的命名方法：使用单个字母+”-“为前缀\"></a>分类的命名方法：使用单个字母+”-“为前缀</h3><p>布局（grid）（.g-）；模块（module）（.m-）；元件（unit）（.u-）；功能（function）（.f-）；皮肤（skin）（.s-）；状态（.z-）。</p>\n<p>对以上的解释详情参见：分类方法中的“CSS 内部的分类及其顺序”。</p>\n<p>注：在你样式中的选择器总是要以上面前五类开头，然后在里面使用后代选择器。</p>\n<p>如果这五类不能满足你的需求，你可以另外定义一个或多个大类，但必须符合单个字母+”-“为前缀的命名规则，即 .x- 的格式。</p>\n<p>特殊：.j-将被专用于 JS 获取节点，请勿使用.j-定义样式。</p>\n<h3 id=\"后代选择器命名\"><a href=\"#后代选择器命名\" class=\"headerlink\" title=\"后代选择器命名\"></a>后代选择器命名</h3><p>约定不以单个字母+”-“为前缀且长度大于等于 2 的类选择器为后代选择器，如：.item 为 m-list 模块里的每一个项，.text 为 m-list 模块里的文本部分：.m-list .item{}.m-list .text{}。<br>一个语义化的标签也可以是后代选择器，比如：.m-list li{}。<br>不允许单个字母的类选择器出现，原因详见下面的“模块和元件的后代选择器的扩展类”。<br>通过使用后代选择器的方法，你不需要考虑他的命名是否已被使用，因为他只在当前模块或元件中生效，同样的样式名可以在不同的模块或元件中重复使用，互不干扰；在多人协作或者分模块协作的时候效果尤为明显！</p>\n<p>后代选择器不需要完整表现结构树层级，尽量能短则短。</p>\n<p>注：后代选择器不要在页面布局中使用，因为污染的可能性较大；</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 这里的.itm和.cnt只在.m-list中有效 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-list</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.m-list</span> <span class=\"selector-class\">.itm</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">1px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">1px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.m-list</span> <span class=\"selector-class\">.cnt</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">margin-left</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* 这里的.cnt和.num只在.m-page中有效 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-page</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.m-page</span> <span class=\"selector-class\">.cnt</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.m-page</span> <span class=\"selector-class\">.num</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#ddd</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"命名应简约而不失语义\"><a href=\"#命名应简约而不失语义\" class=\"headerlink\" title=\"命名应简约而不失语义\"></a>命名应简约而不失语义</h3><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 反对：表现化的或没有语义的命名 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-abc</span> <span class=\"selector-class\">.green2</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.g-left2</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* 推荐：使用有语义的简短的命名 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-list</span> <span class=\"selector-class\">.wrap2</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.g-side2</span> &#123;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"相同语义的不同类命名\"><a href=\"#相同语义的不同类命名\" class=\"headerlink\" title=\"相同语义的不同类命名\"></a>相同语义的不同类命名</h3><p>方法：直接加数字或字母区分即可（如：.m-list、.m-list2、.m-list3 等，都是列表模块，但是是完全不一样的模块）。</p>\n<p>其他举例：.f-fw0、.f-fw1、.s-fc0、.s-fc1、.m-logo2、.m-logo3、u-btn、u-btn2 等等。</p>\n<h3 id=\"模块和元件的扩展类的命名方法\"><a href=\"#模块和元件的扩展类的命名方法\" class=\"headerlink\" title=\"模块和元件的扩展类的命名方法\"></a>模块和元件的扩展类的命名方法</h3><p>当 A、B、C、…它们类型相同且外形相似区别不大，那么就以它们中出现率最高的做成基类，其他做成基类的扩展。</p>\n<p>方法：+“-”+数字或字母（如：.m-list 的扩展类为.m-list-1、.m-list-2 等）。</p>\n<p>补充：基类自身可以独立使用（如：class=”m-list”即可），扩展类必须基于基类使用（如：class=”m-list m-list-2”）。</p>\n<p>如果你的扩展类是表示不同状态，那么你可以这样命名：u-btn-dis，u-btn-hov，m-box-sel，m-box-hov 等等，然后像这样使用：class=”u-btn u-btn-dis”。</p>\n<p>如果你的网站可以不兼容 IE6 等浏览器，那么你标识状态的方法也可以采取独立状态分类（.z-）方法：.u-btn.z-dis，.m-box.z-sel，然后像这样使用：class=”u-btn z-dis”。</p>\n<h3 id=\"模块和元件的后代选择器的扩展类\"><a href=\"#模块和元件的后代选择器的扩展类\" class=\"headerlink\" title=\"模块和元件的后代选择器的扩展类\"></a>模块和元件的后代选择器的扩展类</h3><p>有时候模块内会有些类似的东西，如果你没有把它们做成元件和扩展，那么也可以使用后代选择器和扩展。</p>\n<p>后代选择器：.m-login .btn{}。</p>\n<p>后代选择器扩展：.m-login .btn-1{}，.m-login .btn-dis{}。</p>\n<p>同样也可以采取独立状态分类（.z-）方法：.m-login .btn.z-dis{}，然后像这样使用：class=”btn z-dis”。</p>\n<p>注：此方法用于类选择器，直接使用标签做为选择器的则不需要使用此命名方法。</p>\n<p>注：为防止后代选择器的扩展类和大类命名规范冲突，后代选择器不允许使用单个字母。</p>\n<p>比如：.m-list .a{}是不允许的，因为当这个.a 需要扩展的时候就会变成.a-bb，这样就和大类的命名规范冲突。</p>\n<p>分组选择器有时可以代替扩展方法<br>有时候虽然两个同类型的模块很相似，但是你希望他们之间不要有依赖关系，也就是说你不希望使用扩展的方法，那么你可以通过合并选择器来设置共性的样式。</p>\n<p>使用本方法的前提是：相同类型、功能和外观都相似，写在同一片代码区域方便维护。</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 两个元件共性的样式 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.u-tip1</span>,</span><br><span class=\"line\"><span class=\"selector-class\">.u-tip2</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.u-tip1</span> <span class=\"selector-class\">.itm</span>,</span><br><span class=\"line\"><span class=\"selector-class\">.u-tip2</span> <span class=\"selector-class\">.itm</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* 在分别是两个元件各自的样式 */</span></span><br><span class=\"line\"><span class=\"comment\">/* tip1 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.u-tip1</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.u-tip1</span> <span class=\"selector-class\">.itm</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* tip2 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.u-tip2</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.u-tip2</span> <span class=\"selector-class\">.itm</span> &#123;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"防止污染和被污染\"><a href=\"#防止污染和被污染\" class=\"headerlink\" title=\"防止污染和被污染\"></a>防止污染和被污染</h3><p>当模块或元件之间互相嵌套，且使用了相同的标签选择器或其他后代选择器，那么里面的选择器就会被外面相同的选择器所影响。</p>\n<p>所以，如果你的模块或元件可能嵌套或被嵌套于其他模块或元件，那么要慎用标签选择器，必要时采用类选择器，并注意命名方式，可以采用.m-layer .layerxxx、.m-list2 .list2xxx 的形式来降低后代选择器的污染性。</p>\n<h2 id=\"实践\"><a href=\"#实践\" class=\"headerlink\" title=\"实践\"></a>实践</h2><h3 id=\"最佳选择器写法\"><a href=\"#最佳选择器写法\" class=\"headerlink\" title=\"最佳选择器写法\"></a>最佳选择器写法</h3><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 这是某个模块 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 模块容器 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-tag\">li</span>,</span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-tag\">a</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 先共性  优化组合 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-tag\">li</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 后个性  语义化标签选择器 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-tag\">a</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 后个性中的共性 按结构顺序 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-tag\">a</span><span class=\"selector-class\">.a1</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 后个性中的个性 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-tag\">a</span><span class=\"selector-class\">.a2</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 后个性中的个性 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-class\">.z-crt</span> <span class=\"selector-tag\">a</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 交互状态变化 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-class\">.z-crt</span> <span class=\"selector-tag\">a</span><span class=\"selector-class\">.a1</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-class\">.z-crt</span> <span class=\"selector-tag\">a</span><span class=\"selector-class\">.a2</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-class\">.btn</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 典型后代选择器 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-class\">.btn-1</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 典型后代选择器扩展 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-class\">.btn-dis</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 典型后代选择器扩展（状态） */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-class\">.btn</span><span class=\"selector-class\">.z-dis</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 作用同上，请二选一（如果可以不兼容IE6时使用） */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-class\">.m-sch</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 控制内部其他模块位置 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-class\">.u-sel</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 控制内部其他元件位置 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav-1</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 模块扩展 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav-1</span> <span class=\"selector-tag\">li</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.m-nav-dis</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 模块扩展（状态） */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span><span class=\"selector-class\">.z-dis</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 作用同上，请二选一（如果可以不兼容IE6时使用） */</span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>你是否常常碰到以下问题：你总是看不懂他写的代码，或者读起来很吃力；你需要改他的代码却无从下手，或总是要去问他这里是什么改了会不会影响其他代码；你和他一起开发一个产品，你总是怕代码和他有冲突或互相影响；你的代码在多次维护任务之后变得越来越臃肿，越来越难以维护。很多时候起名字都很随意，但也想起个正常点的名字，有标准例子吗？</p>\n<h4 id=\"附带MarkDown\"><a href=\"#附带MarkDown\" class=\"headerlink\" title=\"附带MarkDown\"></a>附带MarkDown</h4><p><a href=\"https://tool.lu/tables/\" target=\"_blank\" rel=\"noopener\">快速生成表格</a></p>\n<h2 id=\"统一语义理解和命名\"><a href=\"#统一语义理解和命名\" class=\"headerlink\" title=\"统一语义理解和命名\"></a>统一语义理解和命名</h2><p>布局（.g-）</p>\n<table>\n<thead>\n<tr>\n<th>语义</th>\n<th>命名</th>\n<th>简写</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>文档</td>\n<td>doc</td>\n<td>doc</td>\n</tr>\n<tr>\n<td>头部</td>\n<td>head</td>\n<td>hd</td>\n</tr>\n<tr>\n<td>主体</td>\n<td>body</td>\n<td>bd</td>\n</tr>\n<tr>\n<td>尾部</td>\n<td>foot</td>\n<td>ft</td>\n</tr>\n<tr>\n<td>主栏</td>\n<td>main</td>\n<td>mn</td>\n</tr>\n<tr>\n<td>主栏子容器</td>\n<td>mainc</td>\n<td>mnc</td>\n</tr>\n<tr>\n<td>侧栏</td>\n<td>side</td>\n<td>sd</td>\n</tr>\n<tr>\n<td>侧栏子容器</td>\n<td>sidec</td>\n<td>sdc</td>\n</tr>\n<tr>\n<td>盒容器</td>\n<td>wrap/box</td>\n<td>wrap/box</td>\n</tr>\n</tbody>\n</table>\n<p>模块（.m-）、元件（.u-）</p>\n<table>\n<thead>\n<tr>\n<th>语义</th>\n<th>命名</th>\n<th>简写</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>导航</td>\n<td>nav</td>\n<td>nav</td>\n</tr>\n<tr>\n<td>子导航</td>\n<td>subnav</td>\n<td>snav</td>\n</tr>\n<tr>\n<td>面包屑</td>\n<td>crumb</td>\n<td>crm</td>\n</tr>\n<tr>\n<td>菜单</td>\n<td>menu</td>\n<td>menu</td>\n</tr>\n<tr>\n<td>选项卡</td>\n<td>tab</td>\n<td>tab</td>\n</tr>\n<tr>\n<td>标题区</td>\n<td>head/title</td>\n<td>hd/tt</td>\n</tr>\n<tr>\n<td>内容区</td>\n<td>body/content</td>\n<td>bd/ct</td>\n</tr>\n<tr>\n<td>列表</td>\n<td>list</td>\n<td>lst</td>\n</tr>\n<tr>\n<td>表格</td>\n<td>table</td>\n<td>tb</td>\n</tr>\n<tr>\n<td>表单</td>\n<td>form</td>\n<td>fm</td>\n</tr>\n<tr>\n<td>热点</td>\n<td>hot</td>\n<td>hot</td>\n</tr>\n<tr>\n<td>排行</td>\n<td>top</td>\n<td>top</td>\n</tr>\n<tr>\n<td>登录</td>\n<td>login</td>\n<td>log</td>\n</tr>\n<tr>\n<td>标志</td>\n<td>logo</td>\n<td>logo</td>\n</tr>\n<tr>\n<td>广告</td>\n<td>advertise</td>\n<td>ad</td>\n</tr>\n<tr>\n<td>搜索</td>\n<td>search</td>\n<td>sch</td>\n</tr>\n<tr>\n<td>幻灯</td>\n<td>slide</td>\n<td>sld</td>\n</tr>\n<tr>\n<td>提示</td>\n<td>tips</td>\n<td>tips</td>\n</tr>\n<tr>\n<td>帮助</td>\n<td>help</td>\n<td>help</td>\n</tr>\n<tr>\n<td>新闻</td>\n<td>news</td>\n<td>news</td>\n</tr>\n<tr>\n<td>下载</td>\n<td>download</td>\n<td>dld</td>\n</tr>\n<tr>\n<td>注册</td>\n<td>regist</td>\n<td>reg</td>\n</tr>\n<tr>\n<td>投票</td>\n<td>vote</td>\n<td>vote</td>\n</tr>\n<tr>\n<td>版权</td>\n<td>copyright</td>\n<td>cprt</td>\n</tr>\n<tr>\n<td>结果</td>\n<td>result</td>\n<td>rst</td>\n</tr>\n<tr>\n<td>标题</td>\n<td>title</td>\n<td>tt</td>\n</tr>\n<tr>\n<td>按钮</td>\n<td>button</td>\n<td>btn</td>\n</tr>\n<tr>\n<td>输入</td>\n<td>input</td>\n<td>ipt</td>\n</tr>\n</tbody>\n</table>\n<p>功能（.f-）</p>\n<table>\n<thead>\n<tr>\n<th>语义</th>\n<th>命名</th>\n<th>简写</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>浮动清除</td>\n<td>clearboth</td>\n<td>cb</td>\n</tr>\n<tr>\n<td>向左浮动</td>\n<td>floatleft</td>\n<td>fl</td>\n</tr>\n<tr>\n<td>向右浮动</td>\n<td>floatright</td>\n<td>fr</td>\n</tr>\n<tr>\n<td>内联块级</td>\n<td>inlineblock</td>\n<td>ib</td>\n</tr>\n<tr>\n<td>文本居中</td>\n<td>textaligncenter</td>\n<td>tac</td>\n</tr>\n<tr>\n<td>文本居右</td>\n<td>textalignright</td>\n<td>tar</td>\n</tr>\n<tr>\n<td>文本居左</td>\n<td>textalignleft</td>\n<td>tal</td>\n</tr>\n<tr>\n<td>垂直居中</td>\n<td>verticalalignmiddle</td>\n<td>vam</td>\n</tr>\n<tr>\n<td>溢出隐藏</td>\n<td>overflowhidden</td>\n<td>oh</td>\n</tr>\n<tr>\n<td>完全消失</td>\n<td>displaynone</td>\n<td>dn</td>\n</tr>\n<tr>\n<td>字体大小</td>\n<td>fontsize</td>\n<td>fs</td>\n</tr>\n<tr>\n<td>字体粗细</td>\n<td>fontweight</td>\n<td>fw</td>\n</tr>\n</tbody>\n</table>\n<p>皮肤（.s-）</p>\n<table>\n<thead>\n<tr>\n<th>语义</th>\n<th>命名</th>\n<th>简写</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>浮动清除</td>\n<td>clearboth</td>\n<td>cb</td>\n</tr>\n<tr>\n<td>向左浮动</td>\n<td>floatleft</td>\n<td>fl</td>\n</tr>\n<tr>\n<td>向右浮动</td>\n<td>floatright</td>\n<td>fr</td>\n</tr>\n<tr>\n<td>字体颜色</td>\n<td>fontcolor</td>\n<td>fc</td>\n</tr>\n<tr>\n<td>背景</td>\n<td>background</td>\n<td>bg</td>\n</tr>\n<tr>\n<td>背景颜色</td>\n<td>backgroundcolor</td>\n<td>bgc</td>\n</tr>\n<tr>\n<td>背景图片</td>\n<td>backgroundimage</td>\n<td>bgi</td>\n</tr>\n<tr>\n<td>背景定位</td>\n<td>backgroundposition</td>\n<td>bgp</td>\n</tr>\n<tr>\n<td>边框颜色</td>\n<td>bordercolor</td>\n<td>bdc</td>\n</tr>\n</tbody>\n</table>\n<p>状态（.z-）</p>\n<table>\n<thead>\n<tr>\n<th>语义</th>\n<th>命名</th>\n<th>简写</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>选中</td>\n<td>selected</td>\n<td>sel</td>\n</tr>\n<tr>\n<td>当前</td>\n<td>current</td>\n<td>crt</td>\n</tr>\n<tr>\n<td>显示</td>\n<td>show</td>\n<td>show</td>\n</tr>\n<tr>\n<td>隐藏</td>\n<td>hide</td>\n<td>hide</td>\n</tr>\n<tr>\n<td>打开</td>\n<td>open</td>\n<td>open</td>\n</tr>\n<tr>\n<td>关闭</td>\n<td>close</td>\n<td>close</td>\n</tr>\n<tr>\n<td>出错</td>\n<td>error</td>\n<td>err</td>\n</tr>\n<tr>\n<td>不可用</td>\n<td>disabled</td>\n<td>dis</td>\n</tr>\n<tr>\n<td>边框颜色</td>\n<td>bordercolor</td>\n<td>bdc</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"规则\"><a href=\"#规则\" class=\"headerlink\" title=\"规则\"></a>规则</h2><h3 id=\"使用类选择器，放弃-ID-选择器\"><a href=\"#使用类选择器，放弃-ID-选择器\" class=\"headerlink\" title=\"使用类选择器，放弃 ID 选择器\"></a>使用类选择器，放弃 ID 选择器</h3><p>ID 在一个页面中的唯一性导致了如果以 ID 为选择器来写 CSS，就无法重用。</p>\n<h3 id=\"NEC-特殊字符：”-“连字符\"><a href=\"#NEC-特殊字符：”-“连字符\" class=\"headerlink\" title=\"NEC 特殊字符：”-“连字符\"></a>NEC 特殊字符：”-“连字符</h3><p>“-“在本规范中并不表示连字符的含义。</p>\n<p>她只表示两种含义：分类前缀分隔符、扩展分隔符，详见以下具体规则。</p>\n<h3 id=\"分类的命名方法：使用单个字母-”-“为前缀\"><a href=\"#分类的命名方法：使用单个字母-”-“为前缀\" class=\"headerlink\" title=\"分类的命名方法：使用单个字母+”-“为前缀\"></a>分类的命名方法：使用单个字母+”-“为前缀</h3><p>布局（grid）（.g-）；模块（module）（.m-）；元件（unit）（.u-）；功能（function）（.f-）；皮肤（skin）（.s-）；状态（.z-）。</p>\n<p>对以上的解释详情参见：分类方法中的“CSS 内部的分类及其顺序”。</p>\n<p>注：在你样式中的选择器总是要以上面前五类开头，然后在里面使用后代选择器。</p>\n<p>如果这五类不能满足你的需求，你可以另外定义一个或多个大类，但必须符合单个字母+”-“为前缀的命名规则，即 .x- 的格式。</p>\n<p>特殊：.j-将被专用于 JS 获取节点，请勿使用.j-定义样式。</p>\n<h3 id=\"后代选择器命名\"><a href=\"#后代选择器命名\" class=\"headerlink\" title=\"后代选择器命名\"></a>后代选择器命名</h3><p>约定不以单个字母+”-“为前缀且长度大于等于 2 的类选择器为后代选择器，如：.item 为 m-list 模块里的每一个项，.text 为 m-list 模块里的文本部分：.m-list .item{}.m-list .text{}。<br>一个语义化的标签也可以是后代选择器，比如：.m-list li{}。<br>不允许单个字母的类选择器出现，原因详见下面的“模块和元件的后代选择器的扩展类”。<br>通过使用后代选择器的方法，你不需要考虑他的命名是否已被使用，因为他只在当前模块或元件中生效，同样的样式名可以在不同的模块或元件中重复使用，互不干扰；在多人协作或者分模块协作的时候效果尤为明显！</p>\n<p>后代选择器不需要完整表现结构树层级，尽量能短则短。</p>\n<p>注：后代选择器不要在页面布局中使用，因为污染的可能性较大；</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 这里的.itm和.cnt只在.m-list中有效 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-list</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.m-list</span> <span class=\"selector-class\">.itm</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">1px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">1px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.m-list</span> <span class=\"selector-class\">.cnt</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">margin-left</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* 这里的.cnt和.num只在.m-page中有效 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-page</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.m-page</span> <span class=\"selector-class\">.cnt</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.m-page</span> <span class=\"selector-class\">.num</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#ddd</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"命名应简约而不失语义\"><a href=\"#命名应简约而不失语义\" class=\"headerlink\" title=\"命名应简约而不失语义\"></a>命名应简约而不失语义</h3><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 反对：表现化的或没有语义的命名 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-abc</span> <span class=\"selector-class\">.green2</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.g-left2</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* 推荐：使用有语义的简短的命名 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-list</span> <span class=\"selector-class\">.wrap2</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.g-side2</span> &#123;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"相同语义的不同类命名\"><a href=\"#相同语义的不同类命名\" class=\"headerlink\" title=\"相同语义的不同类命名\"></a>相同语义的不同类命名</h3><p>方法：直接加数字或字母区分即可（如：.m-list、.m-list2、.m-list3 等，都是列表模块，但是是完全不一样的模块）。</p>\n<p>其他举例：.f-fw0、.f-fw1、.s-fc0、.s-fc1、.m-logo2、.m-logo3、u-btn、u-btn2 等等。</p>\n<h3 id=\"模块和元件的扩展类的命名方法\"><a href=\"#模块和元件的扩展类的命名方法\" class=\"headerlink\" title=\"模块和元件的扩展类的命名方法\"></a>模块和元件的扩展类的命名方法</h3><p>当 A、B、C、…它们类型相同且外形相似区别不大，那么就以它们中出现率最高的做成基类，其他做成基类的扩展。</p>\n<p>方法：+“-”+数字或字母（如：.m-list 的扩展类为.m-list-1、.m-list-2 等）。</p>\n<p>补充：基类自身可以独立使用（如：class=”m-list”即可），扩展类必须基于基类使用（如：class=”m-list m-list-2”）。</p>\n<p>如果你的扩展类是表示不同状态，那么你可以这样命名：u-btn-dis，u-btn-hov，m-box-sel，m-box-hov 等等，然后像这样使用：class=”u-btn u-btn-dis”。</p>\n<p>如果你的网站可以不兼容 IE6 等浏览器，那么你标识状态的方法也可以采取独立状态分类（.z-）方法：.u-btn.z-dis，.m-box.z-sel，然后像这样使用：class=”u-btn z-dis”。</p>\n<h3 id=\"模块和元件的后代选择器的扩展类\"><a href=\"#模块和元件的后代选择器的扩展类\" class=\"headerlink\" title=\"模块和元件的后代选择器的扩展类\"></a>模块和元件的后代选择器的扩展类</h3><p>有时候模块内会有些类似的东西，如果你没有把它们做成元件和扩展，那么也可以使用后代选择器和扩展。</p>\n<p>后代选择器：.m-login .btn{}。</p>\n<p>后代选择器扩展：.m-login .btn-1{}，.m-login .btn-dis{}。</p>\n<p>同样也可以采取独立状态分类（.z-）方法：.m-login .btn.z-dis{}，然后像这样使用：class=”btn z-dis”。</p>\n<p>注：此方法用于类选择器，直接使用标签做为选择器的则不需要使用此命名方法。</p>\n<p>注：为防止后代选择器的扩展类和大类命名规范冲突，后代选择器不允许使用单个字母。</p>\n<p>比如：.m-list .a{}是不允许的，因为当这个.a 需要扩展的时候就会变成.a-bb，这样就和大类的命名规范冲突。</p>\n<p>分组选择器有时可以代替扩展方法<br>有时候虽然两个同类型的模块很相似，但是你希望他们之间不要有依赖关系，也就是说你不希望使用扩展的方法，那么你可以通过合并选择器来设置共性的样式。</p>\n<p>使用本方法的前提是：相同类型、功能和外观都相似，写在同一片代码区域方便维护。</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 两个元件共性的样式 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.u-tip1</span>,</span><br><span class=\"line\"><span class=\"selector-class\">.u-tip2</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.u-tip1</span> <span class=\"selector-class\">.itm</span>,</span><br><span class=\"line\"><span class=\"selector-class\">.u-tip2</span> <span class=\"selector-class\">.itm</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* 在分别是两个元件各自的样式 */</span></span><br><span class=\"line\"><span class=\"comment\">/* tip1 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.u-tip1</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.u-tip1</span> <span class=\"selector-class\">.itm</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* tip2 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.u-tip2</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.u-tip2</span> <span class=\"selector-class\">.itm</span> &#123;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"防止污染和被污染\"><a href=\"#防止污染和被污染\" class=\"headerlink\" title=\"防止污染和被污染\"></a>防止污染和被污染</h3><p>当模块或元件之间互相嵌套，且使用了相同的标签选择器或其他后代选择器，那么里面的选择器就会被外面相同的选择器所影响。</p>\n<p>所以，如果你的模块或元件可能嵌套或被嵌套于其他模块或元件，那么要慎用标签选择器，必要时采用类选择器，并注意命名方式，可以采用.m-layer .layerxxx、.m-list2 .list2xxx 的形式来降低后代选择器的污染性。</p>\n<h2 id=\"实践\"><a href=\"#实践\" class=\"headerlink\" title=\"实践\"></a>实践</h2><h3 id=\"最佳选择器写法\"><a href=\"#最佳选择器写法\" class=\"headerlink\" title=\"最佳选择器写法\"></a>最佳选择器写法</h3><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 这是某个模块 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 模块容器 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-tag\">li</span>,</span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-tag\">a</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 先共性  优化组合 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-tag\">li</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 后个性  语义化标签选择器 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-tag\">a</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 后个性中的共性 按结构顺序 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-tag\">a</span><span class=\"selector-class\">.a1</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 后个性中的个性 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-tag\">a</span><span class=\"selector-class\">.a2</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 后个性中的个性 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-class\">.z-crt</span> <span class=\"selector-tag\">a</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 交互状态变化 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-class\">.z-crt</span> <span class=\"selector-tag\">a</span><span class=\"selector-class\">.a1</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-class\">.z-crt</span> <span class=\"selector-tag\">a</span><span class=\"selector-class\">.a2</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-class\">.btn</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 典型后代选择器 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-class\">.btn-1</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 典型后代选择器扩展 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-class\">.btn-dis</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 典型后代选择器扩展（状态） */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-class\">.btn</span><span class=\"selector-class\">.z-dis</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 作用同上，请二选一（如果可以不兼容IE6时使用） */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-class\">.m-sch</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 控制内部其他模块位置 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span> <span class=\"selector-class\">.u-sel</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 控制内部其他元件位置 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav-1</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 模块扩展 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav-1</span> <span class=\"selector-tag\">li</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.m-nav-dis</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 模块扩展（状态） */</span></span><br><span class=\"line\"><span class=\"selector-class\">.m-nav</span><span class=\"selector-class\">.z-dis</span> &#123;</span><br><span class=\"line\">&#125; <span class=\"comment\">/* 作用同上，请二选一（如果可以不兼容IE6时使用） */</span></span><br></pre></td></tr></table></figure>"},{"title":"el-input在vue中优雅实现禁止输入特殊字符","date":"2019-04-15T13:10:10.000Z","_content":"### 前提补充\n在vue中\n``` html\n<input v-model=\"text\" />\n```\n等价于\n``` html\n<input\n :value=\"text\"\n @input=\"e => text = e.target.value\"\n/>\n```\n### 需求\n前端提交form表单要求，不能输入 @#¥%……&*.....\n不是提示，而是 <font color=\"#660000\">禁止输入</font>\n### 效果\n![](https://github.com/chengheai/review-demo-image/blob/master/2019-04-16%2009-48-19.2019-04-16%2009_49_10.gif?raw=true)\n### 代码\n** 在mian.js中添加【vue原型上添加方法，便于全局使用】\n``` javascript\nVue.prototype.validForbid = function (value, number = 255) {\n  value = value.replace(/[`~!@#$%^&*()_\\-+=<>?:\"{}|,./;'\\\\[\\]·~！@#￥%……&*（）——\\-+={}|《》？：“”【】、；‘’，。、]/g, '').replace(/\\s/g, \"\");\n  if (value.length >= number) {\n    this.$message({\n      type: \"warning\",\n      message: `输入内容不能超过${number}个字符`\n    });\n  }\n  return value;\n}\n```\n** 在component.vue中加入\n``` html\n<el-input\n  :value=\"form.name\"\n  @input=\"e => form.name = validSe(e)\"\n  maxlength=\"10\"\n  placeholder=\"过滤特殊字符长度10\"\n></el-input>\n```\n### over\n\n#### 听说你要在线测试⁉️ [那就点我🐙吧](https://chengheai.github.io/daily-vue-demo/#/input)","source":"_posts/el-input在vue中优雅实现禁止输入特殊字符.md","raw":"---\ntitle: el-input在vue中优雅实现禁止输入特殊字符\ndate: 2019-04-15 21:10:10\ntags: ['element', 'vue']\n---\n### 前提补充\n在vue中\n``` html\n<input v-model=\"text\" />\n```\n等价于\n``` html\n<input\n :value=\"text\"\n @input=\"e => text = e.target.value\"\n/>\n```\n### 需求\n前端提交form表单要求，不能输入 @#¥%……&*.....\n不是提示，而是 <font color=\"#660000\">禁止输入</font>\n### 效果\n![](https://github.com/chengheai/review-demo-image/blob/master/2019-04-16%2009-48-19.2019-04-16%2009_49_10.gif?raw=true)\n### 代码\n** 在mian.js中添加【vue原型上添加方法，便于全局使用】\n``` javascript\nVue.prototype.validForbid = function (value, number = 255) {\n  value = value.replace(/[`~!@#$%^&*()_\\-+=<>?:\"{}|,./;'\\\\[\\]·~！@#￥%……&*（）——\\-+={}|《》？：“”【】、；‘’，。、]/g, '').replace(/\\s/g, \"\");\n  if (value.length >= number) {\n    this.$message({\n      type: \"warning\",\n      message: `输入内容不能超过${number}个字符`\n    });\n  }\n  return value;\n}\n```\n** 在component.vue中加入\n``` html\n<el-input\n  :value=\"form.name\"\n  @input=\"e => form.name = validSe(e)\"\n  maxlength=\"10\"\n  placeholder=\"过滤特殊字符长度10\"\n></el-input>\n```\n### over\n\n#### 听说你要在线测试⁉️ [那就点我🐙吧](https://chengheai.github.io/daily-vue-demo/#/input)","slug":"el-input在vue中优雅实现禁止输入特殊字符","published":1,"updated":"2021-10-09T08:48:32.065Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzab4000t5c54xq29wny8","content":"<h3 id=\"前提补充\"><a href=\"#前提补充\" class=\"headerlink\" title=\"前提补充\"></a>前提补充</h3><p>在vue中<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">v-model</span>=<span class=\"string\">\"text\"</span> /&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>等价于<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span></span></span><br><span class=\"line\"><span class=\"tag\"> <span class=\"attr\">:value</span>=<span class=\"string\">\"text\"</span></span></span><br><span class=\"line\"><span class=\"tag\"> @<span class=\"attr\">input</span>=<span class=\"string\">\"e =&gt; text = e.target.value\"</span></span></span><br><span class=\"line\"><span class=\"tag\">/&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"需求\"><a href=\"#需求\" class=\"headerlink\" title=\"需求\"></a>需求</h3><p>前端提交form表单要求，不能输入 @#¥%……&amp;*…..<br>不是提示，而是 <font color=\"#660000\">禁止输入</font></p>\n<h3 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h3><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/2019-04-16%2009-48-19.2019-04-16%2009_49_10.gif?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h3 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h3><p>** 在mian.js中添加【vue原型上添加方法，便于全局使用】<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.prototype.validForbid = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">value, number = <span class=\"number\">255</span></span>) </span>&#123;</span><br><span class=\"line\">  value = value.replace(<span class=\"regexp\">/[`~!@#$%^&amp;*()_\\-+=&lt;&gt;?:\"&#123;&#125;|,./;'\\\\[\\]·~！@#￥%……&amp;*（）——\\-+=&#123;&#125;|《》？：“”【】、；‘’，。、]/g</span>, <span class=\"string\">''</span>).replace(<span class=\"regexp\">/\\s/g</span>, <span class=\"string\">\"\"</span>);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (value.length &gt;= number) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.$message(&#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"warning\"</span>,</span><br><span class=\"line\">      message: <span class=\"string\">`输入内容不能超过<span class=\"subst\">$&#123;number&#125;</span>个字符`</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>** 在component.vue中加入<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">el-input</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">:value</span>=<span class=\"string\">\"form.name\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  @<span class=\"attr\">input</span>=<span class=\"string\">\"e =&gt; form.name = validSe(e)\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">maxlength</span>=<span class=\"string\">\"10\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">placeholder</span>=<span class=\"string\">\"过滤特殊字符长度10\"</span></span></span><br><span class=\"line\"><span class=\"tag\">&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-input</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"over\"><a href=\"#over\" class=\"headerlink\" title=\"over\"></a>over</h3><h4 id=\"听说你要在线测试⁉️-那就点我🐙吧\"><a href=\"#听说你要在线测试⁉️-那就点我🐙吧\" class=\"headerlink\" title=\"听说你要在线测试⁉️ 那就点我🐙吧\"></a>听说你要在线测试⁉️ <a href=\"https://chengheai.github.io/daily-vue-demo/#/input\" target=\"_blank\" rel=\"noopener\">那就点我🐙吧</a></h4>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"前提补充\"><a href=\"#前提补充\" class=\"headerlink\" title=\"前提补充\"></a>前提补充</h3><p>在vue中<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">v-model</span>=<span class=\"string\">\"text\"</span> /&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>等价于<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span></span></span><br><span class=\"line\"><span class=\"tag\"> <span class=\"attr\">:value</span>=<span class=\"string\">\"text\"</span></span></span><br><span class=\"line\"><span class=\"tag\"> @<span class=\"attr\">input</span>=<span class=\"string\">\"e =&gt; text = e.target.value\"</span></span></span><br><span class=\"line\"><span class=\"tag\">/&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"需求\"><a href=\"#需求\" class=\"headerlink\" title=\"需求\"></a>需求</h3><p>前端提交form表单要求，不能输入 @#¥%……&amp;*…..<br>不是提示，而是 <font color=\"#660000\">禁止输入</font></p>\n<h3 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h3><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/2019-04-16%2009-48-19.2019-04-16%2009_49_10.gif?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h3 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h3><p>** 在mian.js中添加【vue原型上添加方法，便于全局使用】<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.prototype.validForbid = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">value, number = <span class=\"number\">255</span></span>) </span>&#123;</span><br><span class=\"line\">  value = value.replace(<span class=\"regexp\">/[`~!@#$%^&amp;*()_\\-+=&lt;&gt;?:\"&#123;&#125;|,./;'\\\\[\\]·~！@#￥%……&amp;*（）——\\-+=&#123;&#125;|《》？：“”【】、；‘’，。、]/g</span>, <span class=\"string\">''</span>).replace(<span class=\"regexp\">/\\s/g</span>, <span class=\"string\">\"\"</span>);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (value.length &gt;= number) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.$message(&#123;</span><br><span class=\"line\">      type: <span class=\"string\">\"warning\"</span>,</span><br><span class=\"line\">      message: <span class=\"string\">`输入内容不能超过<span class=\"subst\">$&#123;number&#125;</span>个字符`</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>** 在component.vue中加入<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">el-input</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">:value</span>=<span class=\"string\">\"form.name\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  @<span class=\"attr\">input</span>=<span class=\"string\">\"e =&gt; form.name = validSe(e)\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">maxlength</span>=<span class=\"string\">\"10\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">placeholder</span>=<span class=\"string\">\"过滤特殊字符长度10\"</span></span></span><br><span class=\"line\"><span class=\"tag\">&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-input</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"over\"><a href=\"#over\" class=\"headerlink\" title=\"over\"></a>over</h3><h4 id=\"听说你要在线测试⁉️-那就点我🐙吧\"><a href=\"#听说你要在线测试⁉️-那就点我🐙吧\" class=\"headerlink\" title=\"听说你要在线测试⁉️ 那就点我🐙吧\"></a>听说你要在线测试⁉️ <a href=\"https://chengheai.github.io/daily-vue-demo/#/input\" target=\"_blank\" rel=\"noopener\">那就点我🐙吧</a></h4>"},{"title":"git中配置别名git config --global alias.xxx","date":"2019-07-08T12:40:19.000Z","_content":"# 前言\n有没有经常敲错命令？\n比如git status 打成 git stauts? stats...\n你有没有见过别人敲指令的时候是 git st?\n废话不多说，先呈上些实用的例子吧\n# alias\n``` shell\n$ git status\n||\n$ git config --global alias.st status\n******* br *******\n$ git checkout\n||\n$ git config --global alias.co checkout\n******* br *******\ngit commit\n||\n$ git config --global alias.ci commit\n******* br *******\n$ git branch\n||\n$ git config --global alias.br branch\n```\n以后你提交代码就可以这样输入\n```\ngit ci -m \"biling,biling..\"\n```\n```\n\n$ git reset HEAD\n||\n$ git config --global alias.unstage 'reset HEAD'\n******* br *******\n$ git last\n||\n$ git config --global alias.last 'log -1'\n\n```\n## gitk .\n``` bash\ngit config --global alias.lg \"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit\"\n```\n### 美图献上\n\n![]('https://github.com/chengheai/review-demo-image/blob/master/WX20190708-205604@2x.png?raw=true')\n\n## 撤销与查看\n```\n$ vi .gitconfig\n[alias]\n    co = checkout\n    ci = commit\n    br = branch\n    st = status\n[user]\n    name = Your Name\n    email = your@email.com\n```\n别名就在[alias]后面，要删除别名，直接把对应的行删掉即可。\n而当前用户的Git配置文件放在用户主目录下的一个隐藏文件.gitconfig中\n\n\n","source":"_posts/git中配置别名git.md","raw":"---\ntitle: git中配置别名git config --global alias.xxx\ndate: 2019-07-08 20:40:19\ntags: ['git']\n---\n# 前言\n有没有经常敲错命令？\n比如git status 打成 git stauts? stats...\n你有没有见过别人敲指令的时候是 git st?\n废话不多说，先呈上些实用的例子吧\n# alias\n``` shell\n$ git status\n||\n$ git config --global alias.st status\n******* br *******\n$ git checkout\n||\n$ git config --global alias.co checkout\n******* br *******\ngit commit\n||\n$ git config --global alias.ci commit\n******* br *******\n$ git branch\n||\n$ git config --global alias.br branch\n```\n以后你提交代码就可以这样输入\n```\ngit ci -m \"biling,biling..\"\n```\n```\n\n$ git reset HEAD\n||\n$ git config --global alias.unstage 'reset HEAD'\n******* br *******\n$ git last\n||\n$ git config --global alias.last 'log -1'\n\n```\n## gitk .\n``` bash\ngit config --global alias.lg \"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit\"\n```\n### 美图献上\n\n![]('https://github.com/chengheai/review-demo-image/blob/master/WX20190708-205604@2x.png?raw=true')\n\n## 撤销与查看\n```\n$ vi .gitconfig\n[alias]\n    co = checkout\n    ci = commit\n    br = branch\n    st = status\n[user]\n    name = Your Name\n    email = your@email.com\n```\n别名就在[alias]后面，要删除别名，直接把对应的行删掉即可。\n而当前用户的Git配置文件放在用户主目录下的一个隐藏文件.gitconfig中\n\n\n","slug":"git中配置别名git","published":1,"updated":"2021-10-09T08:48:32.066Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzab6000x5c54v3odcqiz","content":"<h1 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h1><p>有没有经常敲错命令？<br>比如git status 打成 git stauts? stats…<br>你有没有见过别人敲指令的时候是 git st?<br>废话不多说，先呈上些实用的例子吧</p>\n<h1 id=\"alias\"><a href=\"#alias\" class=\"headerlink\" title=\"alias\"></a>alias</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git status</span></span><br><span class=\"line\">||</span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git config --global alias.st status</span></span><br><span class=\"line\">******* br *******</span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git checkout</span></span><br><span class=\"line\">||</span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git config --global alias.co checkout</span></span><br><span class=\"line\">******* br *******</span><br><span class=\"line\">git commit</span><br><span class=\"line\">||</span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git config --global alias.ci commit</span></span><br><span class=\"line\">******* br *******</span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git branch</span></span><br><span class=\"line\">||</span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git config --global alias.br branch</span></span><br></pre></td></tr></table></figure>\n<p>以后你提交代码就可以这样输入<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git ci -m &quot;biling,biling..&quot;</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">$ git reset HEAD</span><br><span class=\"line\">||</span><br><span class=\"line\">$ git config --global alias.unstage &apos;reset HEAD&apos;</span><br><span class=\"line\">******* br *******</span><br><span class=\"line\">$ git last</span><br><span class=\"line\">||</span><br><span class=\"line\">$ git config --global alias.last &apos;log -1&apos;</span><br></pre></td></tr></table></figure>\n<h2 id=\"gitk\"><a href=\"#gitk\" class=\"headerlink\" title=\"gitk .\"></a>gitk .</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global alias.lg <span class=\"string\">\"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset' --abbrev-commit\"</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"美图献上\"><a href=\"#美图献上\" class=\"headerlink\" title=\"美图献上\"></a>美图献上</h3><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WX20190708-205604@2x.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"撤销与查看\"><a href=\"#撤销与查看\" class=\"headerlink\" title=\"撤销与查看\"></a>撤销与查看</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ vi .gitconfig</span><br><span class=\"line\">[alias]</span><br><span class=\"line\">    co = checkout</span><br><span class=\"line\">    ci = commit</span><br><span class=\"line\">    br = branch</span><br><span class=\"line\">    st = status</span><br><span class=\"line\">[user]</span><br><span class=\"line\">    name = Your Name</span><br><span class=\"line\">    email = your@email.com</span><br></pre></td></tr></table></figure>\n<p>别名就在[alias]后面，要删除别名，直接把对应的行删掉即可。<br>而当前用户的Git配置文件放在用户主目录下的一个隐藏文件.gitconfig中</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h1><p>有没有经常敲错命令？<br>比如git status 打成 git stauts? stats…<br>你有没有见过别人敲指令的时候是 git st?<br>废话不多说，先呈上些实用的例子吧</p>\n<h1 id=\"alias\"><a href=\"#alias\" class=\"headerlink\" title=\"alias\"></a>alias</h1><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git status</span></span><br><span class=\"line\">||</span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git config --global alias.st status</span></span><br><span class=\"line\">******* br *******</span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git checkout</span></span><br><span class=\"line\">||</span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git config --global alias.co checkout</span></span><br><span class=\"line\">******* br *******</span><br><span class=\"line\">git commit</span><br><span class=\"line\">||</span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git config --global alias.ci commit</span></span><br><span class=\"line\">******* br *******</span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git branch</span></span><br><span class=\"line\">||</span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git config --global alias.br branch</span></span><br></pre></td></tr></table></figure>\n<p>以后你提交代码就可以这样输入<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git ci -m &quot;biling,biling..&quot;</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">$ git reset HEAD</span><br><span class=\"line\">||</span><br><span class=\"line\">$ git config --global alias.unstage &apos;reset HEAD&apos;</span><br><span class=\"line\">******* br *******</span><br><span class=\"line\">$ git last</span><br><span class=\"line\">||</span><br><span class=\"line\">$ git config --global alias.last &apos;log -1&apos;</span><br></pre></td></tr></table></figure>\n<h2 id=\"gitk\"><a href=\"#gitk\" class=\"headerlink\" title=\"gitk .\"></a>gitk .</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global alias.lg <span class=\"string\">\"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset' --abbrev-commit\"</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"美图献上\"><a href=\"#美图献上\" class=\"headerlink\" title=\"美图献上\"></a>美图献上</h3><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WX20190708-205604@2x.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"撤销与查看\"><a href=\"#撤销与查看\" class=\"headerlink\" title=\"撤销与查看\"></a>撤销与查看</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ vi .gitconfig</span><br><span class=\"line\">[alias]</span><br><span class=\"line\">    co = checkout</span><br><span class=\"line\">    ci = commit</span><br><span class=\"line\">    br = branch</span><br><span class=\"line\">    st = status</span><br><span class=\"line\">[user]</span><br><span class=\"line\">    name = Your Name</span><br><span class=\"line\">    email = your@email.com</span><br></pre></td></tr></table></figure>\n<p>别名就在[alias]后面，要删除别名，直接把对应的行删掉即可。<br>而当前用户的Git配置文件放在用户主目录下的一个隐藏文件.gitconfig中</p>\n"},{"title":"el-time-picker自定义选择大于当前时间限制","date":"2020-03-11T13:02:59.000Z","_content":"\n## 问题\n\nsomething think\n\n## DEMO\n\n[在线 demo🎱🤓👀](https://chengheai.github.io/daily-vue-demo/#/date-picker)\n\n## 代码\n\n```html\n<template>\n  <el-form\n    :model=\"ruleForm\"\n    :rules=\"rules\"\n    ref=\"ruleForm\"\n    label-width=\"150px\"\n    class=\"demo-ruleForm\"\n  >\n    <el-form-item label=\"大于当前时间\" prop=\"mytime\">\n      <el-date-picker\n        type=\"datetime\"\n        placeholder=\"选择日期\"\n        value-format=\"timestamp\"\n        :picker-options=\"pickerOptions\"\n        v-model=\"ruleForm.mytime\"\n      ></el-date-picker>\n    </el-form-item>\n    <el-form-item>\n      <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">立即创建</el-button>\n      <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\n    </el-form-item>\n  </el-form>\n</template>\n```\n\n```js\n<script>\n  export default {\n    data() {\n      var validateTime = (rule, value, callback) => {\n        if (value <= Date.now()) {\n          callback(new Error('选择时间必须大于当前时间'));\n        } else {\n          callback();\n        }\n      };\n      return {\n        pickerOptions: {\n          // 限制收货时间不让选择今天以前的\n          disabledDate(time) {\n            return time.getTime() < Date.now() - 8.64e7;\n          },\n        },\n        ruleForm: {\n          mytime: '',\n        },\n        rules: {\n          mytime: [\n            { required: true, message: '请选择时间', trigger: 'change' },\n            { validator: validateTime, trigger: 'blur' },\n          ],\n        },\n      };\n    },\n    methods: {\n      submitForm(formName) {\n        this.$refs[formName].validate(valid => {\n          if (valid) {\n            alert('submit!');\n          } else {\n            console.log('error submit!!');\n            return false;\n          }\n        });\n      },\n      resetForm(formName) {\n        this.$refs[formName].resetFields();\n      },\n    },\n  };\n</script>\n```\n","source":"_posts/el-time-picker自定义选择大于当前时间限制.md","raw":"---\ntitle: el-time-picker自定义选择大于当前时间限制\ndate: 2020-03-11 21:02:59\ntags: ['element-ui']\n---\n\n## 问题\n\nsomething think\n\n## DEMO\n\n[在线 demo🎱🤓👀](https://chengheai.github.io/daily-vue-demo/#/date-picker)\n\n## 代码\n\n```html\n<template>\n  <el-form\n    :model=\"ruleForm\"\n    :rules=\"rules\"\n    ref=\"ruleForm\"\n    label-width=\"150px\"\n    class=\"demo-ruleForm\"\n  >\n    <el-form-item label=\"大于当前时间\" prop=\"mytime\">\n      <el-date-picker\n        type=\"datetime\"\n        placeholder=\"选择日期\"\n        value-format=\"timestamp\"\n        :picker-options=\"pickerOptions\"\n        v-model=\"ruleForm.mytime\"\n      ></el-date-picker>\n    </el-form-item>\n    <el-form-item>\n      <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">立即创建</el-button>\n      <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\n    </el-form-item>\n  </el-form>\n</template>\n```\n\n```js\n<script>\n  export default {\n    data() {\n      var validateTime = (rule, value, callback) => {\n        if (value <= Date.now()) {\n          callback(new Error('选择时间必须大于当前时间'));\n        } else {\n          callback();\n        }\n      };\n      return {\n        pickerOptions: {\n          // 限制收货时间不让选择今天以前的\n          disabledDate(time) {\n            return time.getTime() < Date.now() - 8.64e7;\n          },\n        },\n        ruleForm: {\n          mytime: '',\n        },\n        rules: {\n          mytime: [\n            { required: true, message: '请选择时间', trigger: 'change' },\n            { validator: validateTime, trigger: 'blur' },\n          ],\n        },\n      };\n    },\n    methods: {\n      submitForm(formName) {\n        this.$refs[formName].validate(valid => {\n          if (valid) {\n            alert('submit!');\n          } else {\n            console.log('error submit!!');\n            return false;\n          }\n        });\n      },\n      resetForm(formName) {\n        this.$refs[formName].resetFields();\n      },\n    },\n  };\n</script>\n```\n","slug":"el-time-picker自定义选择大于当前时间限制","published":1,"updated":"2021-10-09T08:48:32.066Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzab7000y5c54squpfvre","content":"<h2 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h2><p>something think</p>\n<h2 id=\"DEMO\"><a href=\"#DEMO\" class=\"headerlink\" title=\"DEMO\"></a>DEMO</h2><p><a href=\"https://chengheai.github.io/daily-vue-demo/#/date-picker\" target=\"_blank\" rel=\"noopener\">在线 demo🎱🤓👀</a></p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">el-form</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">:model</span>=<span class=\"string\">\"ruleForm\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">:rules</span>=<span class=\"string\">\"rules\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">ref</span>=<span class=\"string\">\"ruleForm\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">label-width</span>=<span class=\"string\">\"150px\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">class</span>=<span class=\"string\">\"demo-ruleForm\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  &gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-form-item</span> <span class=\"attr\">label</span>=<span class=\"string\">\"大于当前时间\"</span> <span class=\"attr\">prop</span>=<span class=\"string\">\"mytime\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">el-date-picker</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">type</span>=<span class=\"string\">\"datetime\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">placeholder</span>=<span class=\"string\">\"选择日期\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">value-format</span>=<span class=\"string\">\"timestamp\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">:picker-options</span>=<span class=\"string\">\"pickerOptions\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">v-model</span>=<span class=\"string\">\"ruleForm.mytime\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-date-picker</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">el-form-item</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-form-item</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">el-button</span> <span class=\"attr\">type</span>=<span class=\"string\">\"primary\"</span> @<span class=\"attr\">click</span>=<span class=\"string\">\"submitForm('ruleForm')\"</span>&gt;</span>立即创建<span class=\"tag\">&lt;/<span class=\"name\">el-button</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">el-button</span> @<span class=\"attr\">click</span>=<span class=\"string\">\"resetForm('ruleForm')\"</span>&gt;</span>重置<span class=\"tag\">&lt;/<span class=\"name\">el-button</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">el-form-item</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">el-form</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">    data() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> validateTime = <span class=\"function\">(<span class=\"params\">rule, value, callback</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (value &lt;= <span class=\"built_in\">Date</span>.now()) &#123;</span><br><span class=\"line\">          callback(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'选择时间必须大于当前时间'</span>));</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          callback();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        pickerOptions: &#123;</span><br><span class=\"line\">          <span class=\"comment\">// 限制收货时间不让选择今天以前的</span></span><br><span class=\"line\">          disabledDate(time) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> time.getTime() &lt; <span class=\"built_in\">Date</span>.now() - <span class=\"number\">8.64e7</span>;</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        ruleForm: &#123;</span><br><span class=\"line\">          mytime: <span class=\"string\">''</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        rules: &#123;</span><br><span class=\"line\">          mytime: [</span><br><span class=\"line\">            &#123; <span class=\"attr\">required</span>: <span class=\"literal\">true</span>, <span class=\"attr\">message</span>: <span class=\"string\">'请选择时间'</span>, <span class=\"attr\">trigger</span>: <span class=\"string\">'change'</span> &#125;,</span><br><span class=\"line\">            &#123; <span class=\"attr\">validator</span>: validateTime, <span class=\"attr\">trigger</span>: <span class=\"string\">'blur'</span> &#125;,</span><br><span class=\"line\">          ],</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    methods: &#123;</span><br><span class=\"line\">      submitForm(formName) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.$refs[formName].validate(<span class=\"function\"><span class=\"params\">valid</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (valid) &#123;</span><br><span class=\"line\">            alert(<span class=\"string\">'submit!'</span>);</span><br><span class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'error submit!!'</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      resetForm(formName) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.$refs[formName].resetFields();</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&lt;<span class=\"regexp\">/script&gt;</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h2><p>something think</p>\n<h2 id=\"DEMO\"><a href=\"#DEMO\" class=\"headerlink\" title=\"DEMO\"></a>DEMO</h2><p><a href=\"https://chengheai.github.io/daily-vue-demo/#/date-picker\" target=\"_blank\" rel=\"noopener\">在线 demo🎱🤓👀</a></p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">el-form</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">:model</span>=<span class=\"string\">\"ruleForm\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">:rules</span>=<span class=\"string\">\"rules\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">ref</span>=<span class=\"string\">\"ruleForm\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">label-width</span>=<span class=\"string\">\"150px\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">class</span>=<span class=\"string\">\"demo-ruleForm\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  &gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-form-item</span> <span class=\"attr\">label</span>=<span class=\"string\">\"大于当前时间\"</span> <span class=\"attr\">prop</span>=<span class=\"string\">\"mytime\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">el-date-picker</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">type</span>=<span class=\"string\">\"datetime\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">placeholder</span>=<span class=\"string\">\"选择日期\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">value-format</span>=<span class=\"string\">\"timestamp\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">:picker-options</span>=<span class=\"string\">\"pickerOptions\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">v-model</span>=<span class=\"string\">\"ruleForm.mytime\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-date-picker</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">el-form-item</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-form-item</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">el-button</span> <span class=\"attr\">type</span>=<span class=\"string\">\"primary\"</span> @<span class=\"attr\">click</span>=<span class=\"string\">\"submitForm('ruleForm')\"</span>&gt;</span>立即创建<span class=\"tag\">&lt;/<span class=\"name\">el-button</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">el-button</span> @<span class=\"attr\">click</span>=<span class=\"string\">\"resetForm('ruleForm')\"</span>&gt;</span>重置<span class=\"tag\">&lt;/<span class=\"name\">el-button</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">el-form-item</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">el-form</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">    data() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> validateTime = <span class=\"function\">(<span class=\"params\">rule, value, callback</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (value &lt;= <span class=\"built_in\">Date</span>.now()) &#123;</span><br><span class=\"line\">          callback(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'选择时间必须大于当前时间'</span>));</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          callback();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        pickerOptions: &#123;</span><br><span class=\"line\">          <span class=\"comment\">// 限制收货时间不让选择今天以前的</span></span><br><span class=\"line\">          disabledDate(time) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> time.getTime() &lt; <span class=\"built_in\">Date</span>.now() - <span class=\"number\">8.64e7</span>;</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        ruleForm: &#123;</span><br><span class=\"line\">          mytime: <span class=\"string\">''</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        rules: &#123;</span><br><span class=\"line\">          mytime: [</span><br><span class=\"line\">            &#123; <span class=\"attr\">required</span>: <span class=\"literal\">true</span>, <span class=\"attr\">message</span>: <span class=\"string\">'请选择时间'</span>, <span class=\"attr\">trigger</span>: <span class=\"string\">'change'</span> &#125;,</span><br><span class=\"line\">            &#123; <span class=\"attr\">validator</span>: validateTime, <span class=\"attr\">trigger</span>: <span class=\"string\">'blur'</span> &#125;,</span><br><span class=\"line\">          ],</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    methods: &#123;</span><br><span class=\"line\">      submitForm(formName) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.$refs[formName].validate(<span class=\"function\"><span class=\"params\">valid</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (valid) &#123;</span><br><span class=\"line\">            alert(<span class=\"string\">'submit!'</span>);</span><br><span class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'error submit!!'</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      resetForm(formName) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.$refs[formName].resetFields();</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&lt;<span class=\"regexp\">/script&gt;</span></span><br></pre></td></tr></table></figure>\n"},{"title":"git分支上删除某次提交与获取其他分支上某个提交","date":"2019-10-15T14:10:02.000Z","_content":"## 前言\n～在日常开发中，常常会碰到这样的问题，我们在dev分支上写好的代码，经过严格的测试确认无误没有问题，打包发不到正式环境上去了，后来产品经理说这个功能不是本期上的，但是正式服已经有了，那怎么弄呢？\n## 例子\n例如，现在当前分支上代码有三次提交，我想把其中间一次提交去掉，怎么做？\n步骤：\n ```javascript\ngit log // 查看log信息记下commitId\n```\n![](https://github.com/chengheai/review-demo-image/blob/master/WX20191015-221740@2x.png?raw=true)\n ```javascript\ngit rebase -i commitId // [上一次提交的commitId]\n```\n![](https://github.com/chengheai/review-demo-image/blob/master/WX20191015-222936@2x.png?raw=true)\n ```javascript\nvim  i[插入] // 将需要修改的commit的 pick改为drop\n```\n\n ```javascript\nesc wq // 退出插入模式，保存退出\n```\n ```javascript\ngit status // 状态查看\n```\n![](https://img-blog.csdnimg.cn/20191015225855423.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NoaTExMzA=,size_16,color_FFFFFF,t_70)\n ```javascript\ngit push origin branch -f // 提交并覆盖远程\n ```\n![](https://github.com/chengheai/review-demo-image/blob/master/WX20191015-223346@2x.png?raw=true)\n## 附加📎\n当前分支拉取其他分支某次提交代码 [git cherry-pick commitID]\n\n``` javascript\ngit cherry-pick commitID\n```\n属于复制的操作，对源分支不影响～","source":"_posts/git分支上删除某次提交.md","raw":"---\ntitle: git分支上删除某次提交与获取其他分支上某个提交\ndate: 2019-10-15 22:10:02\ntags: ['git']\n---\n## 前言\n～在日常开发中，常常会碰到这样的问题，我们在dev分支上写好的代码，经过严格的测试确认无误没有问题，打包发不到正式环境上去了，后来产品经理说这个功能不是本期上的，但是正式服已经有了，那怎么弄呢？\n## 例子\n例如，现在当前分支上代码有三次提交，我想把其中间一次提交去掉，怎么做？\n步骤：\n ```javascript\ngit log // 查看log信息记下commitId\n```\n![](https://github.com/chengheai/review-demo-image/blob/master/WX20191015-221740@2x.png?raw=true)\n ```javascript\ngit rebase -i commitId // [上一次提交的commitId]\n```\n![](https://github.com/chengheai/review-demo-image/blob/master/WX20191015-222936@2x.png?raw=true)\n ```javascript\nvim  i[插入] // 将需要修改的commit的 pick改为drop\n```\n\n ```javascript\nesc wq // 退出插入模式，保存退出\n```\n ```javascript\ngit status // 状态查看\n```\n![](https://img-blog.csdnimg.cn/20191015225855423.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NoaTExMzA=,size_16,color_FFFFFF,t_70)\n ```javascript\ngit push origin branch -f // 提交并覆盖远程\n ```\n![](https://github.com/chengheai/review-demo-image/blob/master/WX20191015-223346@2x.png?raw=true)\n## 附加📎\n当前分支拉取其他分支某次提交代码 [git cherry-pick commitID]\n\n``` javascript\ngit cherry-pick commitID\n```\n属于复制的操作，对源分支不影响～","slug":"git分支上删除某次提交","published":1,"updated":"2021-10-09T08:48:32.067Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzab900105c54lom62bml","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>～在日常开发中，常常会碰到这样的问题，我们在dev分支上写好的代码，经过严格的测试确认无误没有问题，打包发不到正式环境上去了，后来产品经理说这个功能不是本期上的，但是正式服已经有了，那怎么弄呢？</p>\n<h2 id=\"例子\"><a href=\"#例子\" class=\"headerlink\" title=\"例子\"></a>例子</h2><p>例如，现在当前分支上代码有三次提交，我想把其中间一次提交去掉，怎么做？<br>步骤：<br> <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git log <span class=\"comment\">// 查看log信息记下commitId</span></span><br></pre></td></tr></table></figure></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WX20191015-221740@2x.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git rebase -i commitId <span class=\"comment\">// [上一次提交的commitId]</span></span><br></pre></td></tr></table></figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WX20191015-222936@2x.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim  i[插入] <span class=\"comment\">// 将需要修改的commit的 pick改为drop</span></span><br></pre></td></tr></table></figure>\n <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">esc wq <span class=\"comment\">// 退出插入模式，保存退出</span></span><br></pre></td></tr></table></figure>\n <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git status <span class=\"comment\">// 状态查看</span></span><br></pre></td></tr></table></figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://img-blog.csdnimg.cn/20191015225855423.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NoaTExMzA=,size_16,color_FFFFFF,t_70\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push origin branch -f <span class=\"comment\">// 提交并覆盖远程</span></span><br></pre></td></tr></table></figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WX20191015-223346@2x.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"附加📎\"><a href=\"#附加📎\" class=\"headerlink\" title=\"附加📎\"></a>附加📎</h2><p>当前分支拉取其他分支某次提交代码 [git cherry-pick commitID]</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git cherry-pick commitID</span><br></pre></td></tr></table></figure>\n<p>属于复制的操作，对源分支不影响～</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>～在日常开发中，常常会碰到这样的问题，我们在dev分支上写好的代码，经过严格的测试确认无误没有问题，打包发不到正式环境上去了，后来产品经理说这个功能不是本期上的，但是正式服已经有了，那怎么弄呢？</p>\n<h2 id=\"例子\"><a href=\"#例子\" class=\"headerlink\" title=\"例子\"></a>例子</h2><p>例如，现在当前分支上代码有三次提交，我想把其中间一次提交去掉，怎么做？<br>步骤：<br> <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git log <span class=\"comment\">// 查看log信息记下commitId</span></span><br></pre></td></tr></table></figure></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WX20191015-221740@2x.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git rebase -i commitId <span class=\"comment\">// [上一次提交的commitId]</span></span><br></pre></td></tr></table></figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WX20191015-222936@2x.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim  i[插入] <span class=\"comment\">// 将需要修改的commit的 pick改为drop</span></span><br></pre></td></tr></table></figure>\n <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">esc wq <span class=\"comment\">// 退出插入模式，保存退出</span></span><br></pre></td></tr></table></figure>\n <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git status <span class=\"comment\">// 状态查看</span></span><br></pre></td></tr></table></figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://img-blog.csdnimg.cn/20191015225855423.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NoaTExMzA=,size_16,color_FFFFFF,t_70\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push origin branch -f <span class=\"comment\">// 提交并覆盖远程</span></span><br></pre></td></tr></table></figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WX20191015-223346@2x.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"附加📎\"><a href=\"#附加📎\" class=\"headerlink\" title=\"附加📎\"></a>附加📎</h2><p>当前分支拉取其他分支某次提交代码 [git cherry-pick commitID]</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git cherry-pick commitID</span><br></pre></td></tr></table></figure>\n<p>属于复制的操作，对源分支不影响～</p>\n"},{"title":"git常用指令大全","date":"2019-08-20T14:05:20.000Z","_content":"## 查看、添加、提交、删除、找回，重置修改文件\n``` shell\ngit help <command> # 显示command的help\ngit show # 显示某次提交的内容 git show $id\ngit co -- <file> # 抛弃工作区修改\ngit co . # 抛弃工作区修改\ngit add <file> # 将工作文件修改提交到本地暂存区\ngit add . # 将所有修改过的工作文件提交暂存区\ngit rm <file> # 从版本库中删除文件\ngit rm <file> --cached # 从版本库中删除文件，但不删除文件\ngit reset <file> # 从暂存区恢复到工作文件\ngit reset -- . # 从暂存区恢复到工作文件\ngit reset --hard # 恢复最近一次提交过的状态，即放弃上次提交后的所有本次修改\ngit ci <file> git ci . git ci -a # 将git add, git rm和git ci等操作都合并在一起做　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　git ci -am \"some comments\"\ngit ci --amend # 修改最后一次提交记录\ngit revert <$id> # 恢复某次提交的状态，恢复动作本身也创建次提交对象\ngit revert HEAD # 恢复最后一次提交的状态\ntig\nMac上可以使用tig代替diff和log，brew install tig\nGit 本地分支管理\n```\n## 查看、切换、创建和删除分支\n``` shell\ngit br -r # 查看远程分支\ngit br <new_branch> # 创建新的分支\ngit br -v # 查看各个分支最后提交信息\ngit br --merged # 查看已经被合并到当前分支的分支\ngit br --no-merged # 查看尚未被合并到当前分支的分支\ngit co <branch> # 切换到某个分支\ngit co -b <new_branch> # 创建新的分支，并且切换过去\ngit co -b <new_branch> <branch> # 基于branch创建新的new_branch\ngit co $id # 把某次历史提交记录checkout出来，但无分支信息，切换到其他分支会自动删除\ngit co $id -b <new_branch> # 把某次历史提交记录checkout出来，创建成一个分支\ngit br -d <branch> # 删除某个分支\ngit br -D <branch> # 强制删除某个分支 (未被合并的分支被删除的时候需要强制)\ngit remote -v # 查看远程服务器地址和仓库名称\ngit remote show origin # 查看远程服务器仓库状态\ngit remote add origin git@ github:robbin/robbin_site.git # 添加远程仓库地址\ngit remote set-url origin git@ github.com:robbin/robbin_site.git # 设置远程仓库地址(用于修改远程仓库地址) git remote rm <repository> # 删除远程仓库\ngit clone --bare robbin_site robbin_site.git # 用带版本的项目创建纯版本仓库\nscp -r my_project.git git@ git.csdn.net:~ # 将纯仓库上传到服务器上\nmkdir robbin_site.git && cd robbin_site.git && git --bare init # 在服务器创建纯仓库\ngit remote add origin git@ github.com:robbin/robbin_site.git # 设置远程仓库地址\ngit push -u origin master # 客户端首次提交\ngit push -u origin develop # 首次将本地develop分支提交到远程develop分支，并且track\ngit remote set-head origin master # 设置远程仓库的HEAD指向master分支\n也可以命令设置跟踪远程库和本地库\ngit branch --set-upstream master origin/master\ngit branch --set-upstream develop origin/develop\n```\n## 查看文件diff\n``` shell\ngit diff <file> # 比较当前文件和暂存区文件差异 git diff\ngit diff <id1><id1><id2> # 比较两次提交之间的差异\ngit diff <branch1>..<branch2> # 在两个分支之间比较\ngit diff --staged # 比较暂存区和版本库差异\ngit diff --cached # 比较暂存区和版本库差异\ngit diff --stat # 仅仅比较统计信息\n```\n## 查看提交记录\n``` shell\ngit log git log <file> # 查看该文件每次提交记录\ngit log -p <file> # 查看每次详细修改内容的diff\ngit log -p -2 # 查看最近两次详细修改内容的diff\ngit log --stat #查看提交统计信息\n```\n## 分支合并和rebase\n``` shell\ngit merge <branch> # 将branch分支合并到当前分支\ngit merge origin/master --no-ff # 不要Fast-Foward合并，这样可以生成merge提交\ngit rebase master <branch> # 将master rebase到branch，相当于： git co <branch> && git rebase master && git co master && git merge <branch>\n```\n## 暂存管理\n``` shell\ngit stash # 暂存\ngit stash list # 列所有stash\ngit stash apply # 恢复暂存的内容\ngit stash drop # 删除暂存区\n```\n","source":"_posts/git常用指令大全.md","raw":"---\ntitle: git常用指令大全\ndate: 2019-08-20 22:05:20\ntags: ['git']\n---\n## 查看、添加、提交、删除、找回，重置修改文件\n``` shell\ngit help <command> # 显示command的help\ngit show # 显示某次提交的内容 git show $id\ngit co -- <file> # 抛弃工作区修改\ngit co . # 抛弃工作区修改\ngit add <file> # 将工作文件修改提交到本地暂存区\ngit add . # 将所有修改过的工作文件提交暂存区\ngit rm <file> # 从版本库中删除文件\ngit rm <file> --cached # 从版本库中删除文件，但不删除文件\ngit reset <file> # 从暂存区恢复到工作文件\ngit reset -- . # 从暂存区恢复到工作文件\ngit reset --hard # 恢复最近一次提交过的状态，即放弃上次提交后的所有本次修改\ngit ci <file> git ci . git ci -a # 将git add, git rm和git ci等操作都合并在一起做　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　git ci -am \"some comments\"\ngit ci --amend # 修改最后一次提交记录\ngit revert <$id> # 恢复某次提交的状态，恢复动作本身也创建次提交对象\ngit revert HEAD # 恢复最后一次提交的状态\ntig\nMac上可以使用tig代替diff和log，brew install tig\nGit 本地分支管理\n```\n## 查看、切换、创建和删除分支\n``` shell\ngit br -r # 查看远程分支\ngit br <new_branch> # 创建新的分支\ngit br -v # 查看各个分支最后提交信息\ngit br --merged # 查看已经被合并到当前分支的分支\ngit br --no-merged # 查看尚未被合并到当前分支的分支\ngit co <branch> # 切换到某个分支\ngit co -b <new_branch> # 创建新的分支，并且切换过去\ngit co -b <new_branch> <branch> # 基于branch创建新的new_branch\ngit co $id # 把某次历史提交记录checkout出来，但无分支信息，切换到其他分支会自动删除\ngit co $id -b <new_branch> # 把某次历史提交记录checkout出来，创建成一个分支\ngit br -d <branch> # 删除某个分支\ngit br -D <branch> # 强制删除某个分支 (未被合并的分支被删除的时候需要强制)\ngit remote -v # 查看远程服务器地址和仓库名称\ngit remote show origin # 查看远程服务器仓库状态\ngit remote add origin git@ github:robbin/robbin_site.git # 添加远程仓库地址\ngit remote set-url origin git@ github.com:robbin/robbin_site.git # 设置远程仓库地址(用于修改远程仓库地址) git remote rm <repository> # 删除远程仓库\ngit clone --bare robbin_site robbin_site.git # 用带版本的项目创建纯版本仓库\nscp -r my_project.git git@ git.csdn.net:~ # 将纯仓库上传到服务器上\nmkdir robbin_site.git && cd robbin_site.git && git --bare init # 在服务器创建纯仓库\ngit remote add origin git@ github.com:robbin/robbin_site.git # 设置远程仓库地址\ngit push -u origin master # 客户端首次提交\ngit push -u origin develop # 首次将本地develop分支提交到远程develop分支，并且track\ngit remote set-head origin master # 设置远程仓库的HEAD指向master分支\n也可以命令设置跟踪远程库和本地库\ngit branch --set-upstream master origin/master\ngit branch --set-upstream develop origin/develop\n```\n## 查看文件diff\n``` shell\ngit diff <file> # 比较当前文件和暂存区文件差异 git diff\ngit diff <id1><id1><id2> # 比较两次提交之间的差异\ngit diff <branch1>..<branch2> # 在两个分支之间比较\ngit diff --staged # 比较暂存区和版本库差异\ngit diff --cached # 比较暂存区和版本库差异\ngit diff --stat # 仅仅比较统计信息\n```\n## 查看提交记录\n``` shell\ngit log git log <file> # 查看该文件每次提交记录\ngit log -p <file> # 查看每次详细修改内容的diff\ngit log -p -2 # 查看最近两次详细修改内容的diff\ngit log --stat #查看提交统计信息\n```\n## 分支合并和rebase\n``` shell\ngit merge <branch> # 将branch分支合并到当前分支\ngit merge origin/master --no-ff # 不要Fast-Foward合并，这样可以生成merge提交\ngit rebase master <branch> # 将master rebase到branch，相当于： git co <branch> && git rebase master && git co master && git merge <branch>\n```\n## 暂存管理\n``` shell\ngit stash # 暂存\ngit stash list # 列所有stash\ngit stash apply # 恢复暂存的内容\ngit stash drop # 删除暂存区\n```\n","slug":"git常用指令大全","published":1,"updated":"2021-10-09T08:48:32.067Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzabb00125c54f96wpu8c","content":"<h2 id=\"查看、添加、提交、删除、找回，重置修改文件\"><a href=\"#查看、添加、提交、删除、找回，重置修改文件\" class=\"headerlink\" title=\"查看、添加、提交、删除、找回，重置修改文件\"></a>查看、添加、提交、删除、找回，重置修改文件</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git help &lt;command&gt; # 显示command的help</span><br><span class=\"line\">git show # 显示某次提交的内容 git show $id</span><br><span class=\"line\">git co -- &lt;file&gt; # 抛弃工作区修改</span><br><span class=\"line\">git co . # 抛弃工作区修改</span><br><span class=\"line\">git add &lt;file&gt; # 将工作文件修改提交到本地暂存区</span><br><span class=\"line\">git add . # 将所有修改过的工作文件提交暂存区</span><br><span class=\"line\">git rm &lt;file&gt; # 从版本库中删除文件</span><br><span class=\"line\">git rm &lt;file&gt; --cached # 从版本库中删除文件，但不删除文件</span><br><span class=\"line\">git reset &lt;file&gt; # 从暂存区恢复到工作文件</span><br><span class=\"line\">git reset -- . # 从暂存区恢复到工作文件</span><br><span class=\"line\">git reset --hard # 恢复最近一次提交过的状态，即放弃上次提交后的所有本次修改</span><br><span class=\"line\">git ci &lt;file&gt; git ci . git ci -a # 将git add, git rm和git ci等操作都合并在一起做　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　git ci -am \"some comments\"</span><br><span class=\"line\">git ci --amend # 修改最后一次提交记录</span><br><span class=\"line\">git revert &lt;$id&gt; # 恢复某次提交的状态，恢复动作本身也创建次提交对象</span><br><span class=\"line\">git revert HEAD # 恢复最后一次提交的状态</span><br><span class=\"line\">tig</span><br><span class=\"line\">Mac上可以使用tig代替diff和log，brew install tig</span><br><span class=\"line\">Git 本地分支管理</span><br></pre></td></tr></table></figure>\n<h2 id=\"查看、切换、创建和删除分支\"><a href=\"#查看、切换、创建和删除分支\" class=\"headerlink\" title=\"查看、切换、创建和删除分支\"></a>查看、切换、创建和删除分支</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git br -r # 查看远程分支</span><br><span class=\"line\">git br &lt;new_branch&gt; # 创建新的分支</span><br><span class=\"line\">git br -v # 查看各个分支最后提交信息</span><br><span class=\"line\">git br --merged # 查看已经被合并到当前分支的分支</span><br><span class=\"line\">git br --no-merged # 查看尚未被合并到当前分支的分支</span><br><span class=\"line\">git co &lt;branch&gt; # 切换到某个分支</span><br><span class=\"line\">git co -b &lt;new_branch&gt; # 创建新的分支，并且切换过去</span><br><span class=\"line\">git co -b &lt;new_branch&gt; &lt;branch&gt; # 基于branch创建新的new_branch</span><br><span class=\"line\">git co $id # 把某次历史提交记录checkout出来，但无分支信息，切换到其他分支会自动删除</span><br><span class=\"line\">git co $id -b &lt;new_branch&gt; # 把某次历史提交记录checkout出来，创建成一个分支</span><br><span class=\"line\">git br -d &lt;branch&gt; # 删除某个分支</span><br><span class=\"line\">git br -D &lt;branch&gt; # 强制删除某个分支 (未被合并的分支被删除的时候需要强制)</span><br><span class=\"line\">git remote -v # 查看远程服务器地址和仓库名称</span><br><span class=\"line\">git remote show origin # 查看远程服务器仓库状态</span><br><span class=\"line\">git remote add origin git@ github:robbin/robbin_site.git # 添加远程仓库地址</span><br><span class=\"line\">git remote set-url origin git@ github.com:robbin/robbin_site.git # 设置远程仓库地址(用于修改远程仓库地址) git remote rm &lt;repository&gt; # 删除远程仓库</span><br><span class=\"line\">git clone --bare robbin_site robbin_site.git # 用带版本的项目创建纯版本仓库</span><br><span class=\"line\">scp -r my_project.git git@ git.csdn.net:~ # 将纯仓库上传到服务器上</span><br><span class=\"line\">mkdir robbin_site.git &amp;&amp; cd robbin_site.git &amp;&amp; git --bare init # 在服务器创建纯仓库</span><br><span class=\"line\">git remote add origin git@ github.com:robbin/robbin_site.git # 设置远程仓库地址</span><br><span class=\"line\">git push -u origin master # 客户端首次提交</span><br><span class=\"line\">git push -u origin develop # 首次将本地develop分支提交到远程develop分支，并且track</span><br><span class=\"line\">git remote set-head origin master # 设置远程仓库的HEAD指向master分支</span><br><span class=\"line\">也可以命令设置跟踪远程库和本地库</span><br><span class=\"line\">git branch --set-upstream master origin/master</span><br><span class=\"line\">git branch --set-upstream develop origin/develop</span><br></pre></td></tr></table></figure>\n<h2 id=\"查看文件diff\"><a href=\"#查看文件diff\" class=\"headerlink\" title=\"查看文件diff\"></a>查看文件diff</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git diff &lt;file&gt; # 比较当前文件和暂存区文件差异 git diff</span><br><span class=\"line\">git diff &lt;id1&gt;&lt;id1&gt;&lt;id2&gt; # 比较两次提交之间的差异</span><br><span class=\"line\">git diff &lt;branch1&gt;..&lt;branch2&gt; # 在两个分支之间比较</span><br><span class=\"line\">git diff --staged # 比较暂存区和版本库差异</span><br><span class=\"line\">git diff --cached # 比较暂存区和版本库差异</span><br><span class=\"line\">git diff --stat # 仅仅比较统计信息</span><br></pre></td></tr></table></figure>\n<h2 id=\"查看提交记录\"><a href=\"#查看提交记录\" class=\"headerlink\" title=\"查看提交记录\"></a>查看提交记录</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git log git log &lt;file&gt; # 查看该文件每次提交记录</span><br><span class=\"line\">git log -p &lt;file&gt; # 查看每次详细修改内容的diff</span><br><span class=\"line\">git log -p -2 # 查看最近两次详细修改内容的diff</span><br><span class=\"line\">git log --stat #查看提交统计信息</span><br></pre></td></tr></table></figure>\n<h2 id=\"分支合并和rebase\"><a href=\"#分支合并和rebase\" class=\"headerlink\" title=\"分支合并和rebase\"></a>分支合并和rebase</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git merge &lt;branch&gt; # 将branch分支合并到当前分支</span><br><span class=\"line\">git merge origin/master --no-ff # 不要Fast-Foward合并，这样可以生成merge提交</span><br><span class=\"line\">git rebase master &lt;branch&gt; # 将master rebase到branch，相当于： git co &lt;branch&gt; &amp;&amp; git rebase master &amp;&amp; git co master &amp;&amp; git merge &lt;branch&gt;</span><br></pre></td></tr></table></figure>\n<h2 id=\"暂存管理\"><a href=\"#暂存管理\" class=\"headerlink\" title=\"暂存管理\"></a>暂存管理</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git stash # 暂存</span><br><span class=\"line\">git stash list # 列所有stash</span><br><span class=\"line\">git stash apply # 恢复暂存的内容</span><br><span class=\"line\">git stash drop # 删除暂存区</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"查看、添加、提交、删除、找回，重置修改文件\"><a href=\"#查看、添加、提交、删除、找回，重置修改文件\" class=\"headerlink\" title=\"查看、添加、提交、删除、找回，重置修改文件\"></a>查看、添加、提交、删除、找回，重置修改文件</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git help &lt;command&gt; # 显示command的help</span><br><span class=\"line\">git show # 显示某次提交的内容 git show $id</span><br><span class=\"line\">git co -- &lt;file&gt; # 抛弃工作区修改</span><br><span class=\"line\">git co . # 抛弃工作区修改</span><br><span class=\"line\">git add &lt;file&gt; # 将工作文件修改提交到本地暂存区</span><br><span class=\"line\">git add . # 将所有修改过的工作文件提交暂存区</span><br><span class=\"line\">git rm &lt;file&gt; # 从版本库中删除文件</span><br><span class=\"line\">git rm &lt;file&gt; --cached # 从版本库中删除文件，但不删除文件</span><br><span class=\"line\">git reset &lt;file&gt; # 从暂存区恢复到工作文件</span><br><span class=\"line\">git reset -- . # 从暂存区恢复到工作文件</span><br><span class=\"line\">git reset --hard # 恢复最近一次提交过的状态，即放弃上次提交后的所有本次修改</span><br><span class=\"line\">git ci &lt;file&gt; git ci . git ci -a # 将git add, git rm和git ci等操作都合并在一起做　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　git ci -am \"some comments\"</span><br><span class=\"line\">git ci --amend # 修改最后一次提交记录</span><br><span class=\"line\">git revert &lt;$id&gt; # 恢复某次提交的状态，恢复动作本身也创建次提交对象</span><br><span class=\"line\">git revert HEAD # 恢复最后一次提交的状态</span><br><span class=\"line\">tig</span><br><span class=\"line\">Mac上可以使用tig代替diff和log，brew install tig</span><br><span class=\"line\">Git 本地分支管理</span><br></pre></td></tr></table></figure>\n<h2 id=\"查看、切换、创建和删除分支\"><a href=\"#查看、切换、创建和删除分支\" class=\"headerlink\" title=\"查看、切换、创建和删除分支\"></a>查看、切换、创建和删除分支</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git br -r # 查看远程分支</span><br><span class=\"line\">git br &lt;new_branch&gt; # 创建新的分支</span><br><span class=\"line\">git br -v # 查看各个分支最后提交信息</span><br><span class=\"line\">git br --merged # 查看已经被合并到当前分支的分支</span><br><span class=\"line\">git br --no-merged # 查看尚未被合并到当前分支的分支</span><br><span class=\"line\">git co &lt;branch&gt; # 切换到某个分支</span><br><span class=\"line\">git co -b &lt;new_branch&gt; # 创建新的分支，并且切换过去</span><br><span class=\"line\">git co -b &lt;new_branch&gt; &lt;branch&gt; # 基于branch创建新的new_branch</span><br><span class=\"line\">git co $id # 把某次历史提交记录checkout出来，但无分支信息，切换到其他分支会自动删除</span><br><span class=\"line\">git co $id -b &lt;new_branch&gt; # 把某次历史提交记录checkout出来，创建成一个分支</span><br><span class=\"line\">git br -d &lt;branch&gt; # 删除某个分支</span><br><span class=\"line\">git br -D &lt;branch&gt; # 强制删除某个分支 (未被合并的分支被删除的时候需要强制)</span><br><span class=\"line\">git remote -v # 查看远程服务器地址和仓库名称</span><br><span class=\"line\">git remote show origin # 查看远程服务器仓库状态</span><br><span class=\"line\">git remote add origin git@ github:robbin/robbin_site.git # 添加远程仓库地址</span><br><span class=\"line\">git remote set-url origin git@ github.com:robbin/robbin_site.git # 设置远程仓库地址(用于修改远程仓库地址) git remote rm &lt;repository&gt; # 删除远程仓库</span><br><span class=\"line\">git clone --bare robbin_site robbin_site.git # 用带版本的项目创建纯版本仓库</span><br><span class=\"line\">scp -r my_project.git git@ git.csdn.net:~ # 将纯仓库上传到服务器上</span><br><span class=\"line\">mkdir robbin_site.git &amp;&amp; cd robbin_site.git &amp;&amp; git --bare init # 在服务器创建纯仓库</span><br><span class=\"line\">git remote add origin git@ github.com:robbin/robbin_site.git # 设置远程仓库地址</span><br><span class=\"line\">git push -u origin master # 客户端首次提交</span><br><span class=\"line\">git push -u origin develop # 首次将本地develop分支提交到远程develop分支，并且track</span><br><span class=\"line\">git remote set-head origin master # 设置远程仓库的HEAD指向master分支</span><br><span class=\"line\">也可以命令设置跟踪远程库和本地库</span><br><span class=\"line\">git branch --set-upstream master origin/master</span><br><span class=\"line\">git branch --set-upstream develop origin/develop</span><br></pre></td></tr></table></figure>\n<h2 id=\"查看文件diff\"><a href=\"#查看文件diff\" class=\"headerlink\" title=\"查看文件diff\"></a>查看文件diff</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git diff &lt;file&gt; # 比较当前文件和暂存区文件差异 git diff</span><br><span class=\"line\">git diff &lt;id1&gt;&lt;id1&gt;&lt;id2&gt; # 比较两次提交之间的差异</span><br><span class=\"line\">git diff &lt;branch1&gt;..&lt;branch2&gt; # 在两个分支之间比较</span><br><span class=\"line\">git diff --staged # 比较暂存区和版本库差异</span><br><span class=\"line\">git diff --cached # 比较暂存区和版本库差异</span><br><span class=\"line\">git diff --stat # 仅仅比较统计信息</span><br></pre></td></tr></table></figure>\n<h2 id=\"查看提交记录\"><a href=\"#查看提交记录\" class=\"headerlink\" title=\"查看提交记录\"></a>查看提交记录</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git log git log &lt;file&gt; # 查看该文件每次提交记录</span><br><span class=\"line\">git log -p &lt;file&gt; # 查看每次详细修改内容的diff</span><br><span class=\"line\">git log -p -2 # 查看最近两次详细修改内容的diff</span><br><span class=\"line\">git log --stat #查看提交统计信息</span><br></pre></td></tr></table></figure>\n<h2 id=\"分支合并和rebase\"><a href=\"#分支合并和rebase\" class=\"headerlink\" title=\"分支合并和rebase\"></a>分支合并和rebase</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git merge &lt;branch&gt; # 将branch分支合并到当前分支</span><br><span class=\"line\">git merge origin/master --no-ff # 不要Fast-Foward合并，这样可以生成merge提交</span><br><span class=\"line\">git rebase master &lt;branch&gt; # 将master rebase到branch，相当于： git co &lt;branch&gt; &amp;&amp; git rebase master &amp;&amp; git co master &amp;&amp; git merge &lt;branch&gt;</span><br></pre></td></tr></table></figure>\n<h2 id=\"暂存管理\"><a href=\"#暂存管理\" class=\"headerlink\" title=\"暂存管理\"></a>暂存管理</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git stash # 暂存</span><br><span class=\"line\">git stash list # 列所有stash</span><br><span class=\"line\">git stash apply # 恢复暂存的内容</span><br><span class=\"line\">git stash drop # 删除暂存区</span><br></pre></td></tr></table></figure>\n"},{"title":"javascript eval()函数作用","date":"2019-03-14T13:19:38.000Z","_content":"## 定义和用法\neval() 函数可计算某个字符串，并执行其中的的 JavaScript 代码。\n### 语法\neval(string)\n\n### eval函数是强大的数码转换引擎,字符串经eval转换后得到一个javascript对象\n### 说明\n该方法只接受原始字符串作为参数，如果 string 参数不是原始字符串，那么该方法将不作任何改变地返回。因此请不要为 eval() 函数传递 String 对象来作为参数。\n\n如果试图覆盖 eval 属性或把 eval() 方法赋予另一个属性，并通过该属性调用它，则 ECMAScript 实现允许抛出一个 EvalError 异常。\n### 例子\nvar temp = eval(“3″);等效于var temp = 3;\nvar temp = eval(“’3′”);等效于var temp = ’3′;\neval(\"x=10;y=20;document.write(x*y)\")\ndocument.write(eval(\"2+2\"))\nvar x=10\ndocument.write(eval(x+17))\n### 实践\n假设后端返回一个字段，data = '[\"image1.png\", \"image2.png\", \"image3.png\"]'; 你怎么拿到里面的图片遍历出来呢🌚\n还想着字符串截取？这样？\n![](https://github.com/chengheai/review-demo-image/blob/master/WX20190314-213311@2x.png?raw=true)\n用eval() 一套搞定\n![](https://github.com/chengheai/review-demo-image/blob/master/WX20190314-213559@2x.png?raw=true)\n\n## 提示和注释\n<font color=#00ffff size=4 face=\" 华文行楷\">提示：虽然 eval() 的功能非常强大，但在实际使用中用到它的情况并不多。</font>\n<table><tr><td bgcolor=#D1EEEE><font color=#EC6E3A size=4 face=\" 华文行楷\">提示：虽然 eval() 的功能非常强大，但在实际使用中用到它的情况并不多。</font></td></tr></table>\n\n\n","source":"_posts/javascript-eval-函数作用.md","raw":"---\ntitle: javascript eval()函数作用\ndate: 2019-03-14 21:19:38\ntags: ['JavaScript']\n---\n## 定义和用法\neval() 函数可计算某个字符串，并执行其中的的 JavaScript 代码。\n### 语法\neval(string)\n\n### eval函数是强大的数码转换引擎,字符串经eval转换后得到一个javascript对象\n### 说明\n该方法只接受原始字符串作为参数，如果 string 参数不是原始字符串，那么该方法将不作任何改变地返回。因此请不要为 eval() 函数传递 String 对象来作为参数。\n\n如果试图覆盖 eval 属性或把 eval() 方法赋予另一个属性，并通过该属性调用它，则 ECMAScript 实现允许抛出一个 EvalError 异常。\n### 例子\nvar temp = eval(“3″);等效于var temp = 3;\nvar temp = eval(“’3′”);等效于var temp = ’3′;\neval(\"x=10;y=20;document.write(x*y)\")\ndocument.write(eval(\"2+2\"))\nvar x=10\ndocument.write(eval(x+17))\n### 实践\n假设后端返回一个字段，data = '[\"image1.png\", \"image2.png\", \"image3.png\"]'; 你怎么拿到里面的图片遍历出来呢🌚\n还想着字符串截取？这样？\n![](https://github.com/chengheai/review-demo-image/blob/master/WX20190314-213311@2x.png?raw=true)\n用eval() 一套搞定\n![](https://github.com/chengheai/review-demo-image/blob/master/WX20190314-213559@2x.png?raw=true)\n\n## 提示和注释\n<font color=#00ffff size=4 face=\" 华文行楷\">提示：虽然 eval() 的功能非常强大，但在实际使用中用到它的情况并不多。</font>\n<table><tr><td bgcolor=#D1EEEE><font color=#EC6E3A size=4 face=\" 华文行楷\">提示：虽然 eval() 的功能非常强大，但在实际使用中用到它的情况并不多。</font></td></tr></table>\n\n\n","slug":"javascript-eval-函数作用","published":1,"updated":"2021-10-09T08:48:32.069Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzabc00145c54bj8ches2","content":"<h2 id=\"定义和用法\"><a href=\"#定义和用法\" class=\"headerlink\" title=\"定义和用法\"></a>定义和用法</h2><p>eval() 函数可计算某个字符串，并执行其中的的 JavaScript 代码。</p>\n<h3 id=\"语法\"><a href=\"#语法\" class=\"headerlink\" title=\"语法\"></a>语法</h3><p>eval(string)</p>\n<h3 id=\"eval函数是强大的数码转换引擎-字符串经eval转换后得到一个javascript对象\"><a href=\"#eval函数是强大的数码转换引擎-字符串经eval转换后得到一个javascript对象\" class=\"headerlink\" title=\"eval函数是强大的数码转换引擎,字符串经eval转换后得到一个javascript对象\"></a>eval函数是强大的数码转换引擎,字符串经eval转换后得到一个javascript对象</h3><h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>该方法只接受原始字符串作为参数，如果 string 参数不是原始字符串，那么该方法将不作任何改变地返回。因此请不要为 eval() 函数传递 String 对象来作为参数。</p>\n<p>如果试图覆盖 eval 属性或把 eval() 方法赋予另一个属性，并通过该属性调用它，则 ECMAScript 实现允许抛出一个 EvalError 异常。</p>\n<h3 id=\"例子\"><a href=\"#例子\" class=\"headerlink\" title=\"例子\"></a>例子</h3><p>var temp = eval(“3″);等效于var temp = 3;<br>var temp = eval(“’3′”);等效于var temp = ’3′;<br>eval(“x=10;y=20;document.write(x*y)”)<br>document.write(eval(“2+2”))<br>var x=10<br>document.write(eval(x+17))</p>\n<h3 id=\"实践\"><a href=\"#实践\" class=\"headerlink\" title=\"实践\"></a>实践</h3><p>假设后端返回一个字段，data = ‘[“image1.png”, “image2.png”, “image3.png”]’; 你怎么拿到里面的图片遍历出来呢🌚<br>还想着字符串截取？这样？<br><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WX20190314-213311@2x.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure><br>用eval() 一套搞定<br><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WX20190314-213559@2x.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></p>\n<h2 id=\"提示和注释\"><a href=\"#提示和注释\" class=\"headerlink\" title=\"提示和注释\"></a>提示和注释</h2><p><font color=\"#00ffff\" size=\"4\" face=\" 华文行楷\">提示：虽然 eval() 的功能非常强大，但在实际使用中用到它的情况并不多。</font></p>\n<table><tr><td bgcolor=\"#D1EEEE\"><font color=\"#EC6E3A\" size=\"4\" face=\" 华文行楷\">提示：虽然 eval() 的功能非常强大，但在实际使用中用到它的情况并不多。</font></td></tr></table>\n\n\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"定义和用法\"><a href=\"#定义和用法\" class=\"headerlink\" title=\"定义和用法\"></a>定义和用法</h2><p>eval() 函数可计算某个字符串，并执行其中的的 JavaScript 代码。</p>\n<h3 id=\"语法\"><a href=\"#语法\" class=\"headerlink\" title=\"语法\"></a>语法</h3><p>eval(string)</p>\n<h3 id=\"eval函数是强大的数码转换引擎-字符串经eval转换后得到一个javascript对象\"><a href=\"#eval函数是强大的数码转换引擎-字符串经eval转换后得到一个javascript对象\" class=\"headerlink\" title=\"eval函数是强大的数码转换引擎,字符串经eval转换后得到一个javascript对象\"></a>eval函数是强大的数码转换引擎,字符串经eval转换后得到一个javascript对象</h3><h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>该方法只接受原始字符串作为参数，如果 string 参数不是原始字符串，那么该方法将不作任何改变地返回。因此请不要为 eval() 函数传递 String 对象来作为参数。</p>\n<p>如果试图覆盖 eval 属性或把 eval() 方法赋予另一个属性，并通过该属性调用它，则 ECMAScript 实现允许抛出一个 EvalError 异常。</p>\n<h3 id=\"例子\"><a href=\"#例子\" class=\"headerlink\" title=\"例子\"></a>例子</h3><p>var temp = eval(“3″);等效于var temp = 3;<br>var temp = eval(“’3′”);等效于var temp = ’3′;<br>eval(“x=10;y=20;document.write(x*y)”)<br>document.write(eval(“2+2”))<br>var x=10<br>document.write(eval(x+17))</p>\n<h3 id=\"实践\"><a href=\"#实践\" class=\"headerlink\" title=\"实践\"></a>实践</h3><p>假设后端返回一个字段，data = ‘[“image1.png”, “image2.png”, “image3.png”]’; 你怎么拿到里面的图片遍历出来呢🌚<br>还想着字符串截取？这样？<br><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WX20190314-213311@2x.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure><br>用eval() 一套搞定<br><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WX20190314-213559@2x.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></p>\n<h2 id=\"提示和注释\"><a href=\"#提示和注释\" class=\"headerlink\" title=\"提示和注释\"></a>提示和注释</h2><p><font color=\"#00ffff\" size=\"4\" face=\" 华文行楷\">提示：虽然 eval() 的功能非常强大，但在实际使用中用到它的情况并不多。</font></p>\n<table><tr><td bgcolor=\"#D1EEEE\"><font color=\"#EC6E3A\" size=\"4\" face=\" 华文行楷\">提示：虽然 eval() 的功能非常强大，但在实际使用中用到它的情况并不多。</font></td></tr></table>\n\n\n"},{"title":"git撤销已经push到远端的commit","date":"2018-10-12T07:39:15.000Z","_content":"#### 在使用git时，不小心把多余的文件commit了，而且还push到远程了，怎么回退到提交之前的\b版本呢？\n###### \b先在本地回退到相应的版本：\n###### **版本号就是你的commitID**\n``` bash\ngit reset --hard <版本号>\n// 注意使用 --hard 参数会抛弃当前工作区的修改\n// 使用 --soft 参数的话会回退到之前的版本，但是保留当前工作区的修改，可以重新提交\n```\n###### 如果\b此时使用\bpush命令,会提示本地的版本落后于远端的版本；:\n``` bash\ngit push origin <分支名>\n```\n![](/images/WX20181012-155029.png)\n###### 为了覆盖掉远端的版本信息，使远端的仓库也回退到相应的版本，需要加上参数--force\n```\ngit push origin <分支名> --force\n```\n","source":"_posts/git撤销已经push到远端的commit.md","raw":"---\ntitle: git撤销已经push到远端的commit\ndate: 2018-10-12 15:39:15\ntags: git\ncategories: git使用笔记\n---\n#### 在使用git时，不小心把多余的文件commit了，而且还push到远程了，怎么回退到提交之前的\b版本呢？\n###### \b先在本地回退到相应的版本：\n###### **版本号就是你的commitID**\n``` bash\ngit reset --hard <版本号>\n// 注意使用 --hard 参数会抛弃当前工作区的修改\n// 使用 --soft 参数的话会回退到之前的版本，但是保留当前工作区的修改，可以重新提交\n```\n###### 如果\b此时使用\bpush命令,会提示本地的版本落后于远端的版本；:\n``` bash\ngit push origin <分支名>\n```\n![](/images/WX20181012-155029.png)\n###### 为了覆盖掉远端的版本信息，使远端的仓库也回退到相应的版本，需要加上参数--force\n```\ngit push origin <分支名> --force\n```\n","slug":"git撤销已经push到远端的commit","published":1,"updated":"2021-10-09T08:48:32.068Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzabd00155c547vjzurij","content":"<h4 id=\"在使用git时，不小心把多余的文件commit了，而且还push到远程了，怎么回退到提交之前的版本呢？\"><a href=\"#在使用git时，不小心把多余的文件commit了，而且还push到远程了，怎么回退到提交之前的版本呢？\" class=\"headerlink\" title=\"在使用git时，不小心把多余的文件commit了，而且还push到远程了，怎么回退到提交之前的\b版本呢？\"></a>在使用git时，不小心把多余的文件commit了，而且还push到远程了，怎么回退到提交之前的\b版本呢？</h4><h6 id=\"先在本地回退到相应的版本：\"><a href=\"#先在本地回退到相应的版本：\" class=\"headerlink\" title=\"\b先在本地回退到相应的版本：\"></a>\b先在本地回退到相应的版本：</h6><h6 id=\"版本号就是你的commitID\"><a href=\"#版本号就是你的commitID\" class=\"headerlink\" title=\"版本号就是你的commitID\"></a><strong>版本号就是你的commitID</strong></h6><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git reset --hard &lt;版本号&gt;</span><br><span class=\"line\">// 注意使用 --hard 参数会抛弃当前工作区的修改</span><br><span class=\"line\">// 使用 --soft 参数的话会回退到之前的版本，但是保留当前工作区的修改，可以重新提交</span><br></pre></td></tr></table></figure>\n<h6 id=\"如果此时使用push命令-会提示本地的版本落后于远端的版本；\"><a href=\"#如果此时使用push命令-会提示本地的版本落后于远端的版本；\" class=\"headerlink\" title=\"如果\b此时使用\bpush命令,会提示本地的版本落后于远端的版本；:\"></a>如果\b此时使用\bpush命令,会提示本地的版本落后于远端的版本；:</h6><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push origin &lt;分支名&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/images/WX20181012-155029.png\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h6 id=\"为了覆盖掉远端的版本信息，使远端的仓库也回退到相应的版本，需要加上参数–force\"><a href=\"#为了覆盖掉远端的版本信息，使远端的仓库也回退到相应的版本，需要加上参数–force\" class=\"headerlink\" title=\"为了覆盖掉远端的版本信息，使远端的仓库也回退到相应的版本，需要加上参数–force\"></a>为了覆盖掉远端的版本信息，使远端的仓库也回退到相应的版本，需要加上参数–force</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push origin &lt;分支名&gt; --force</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h4 id=\"在使用git时，不小心把多余的文件commit了，而且还push到远程了，怎么回退到提交之前的版本呢？\"><a href=\"#在使用git时，不小心把多余的文件commit了，而且还push到远程了，怎么回退到提交之前的版本呢？\" class=\"headerlink\" title=\"在使用git时，不小心把多余的文件commit了，而且还push到远程了，怎么回退到提交之前的\b版本呢？\"></a>在使用git时，不小心把多余的文件commit了，而且还push到远程了，怎么回退到提交之前的\b版本呢？</h4><h6 id=\"先在本地回退到相应的版本：\"><a href=\"#先在本地回退到相应的版本：\" class=\"headerlink\" title=\"\b先在本地回退到相应的版本：\"></a>\b先在本地回退到相应的版本：</h6><h6 id=\"版本号就是你的commitID\"><a href=\"#版本号就是你的commitID\" class=\"headerlink\" title=\"版本号就是你的commitID\"></a><strong>版本号就是你的commitID</strong></h6><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git reset --hard &lt;版本号&gt;</span><br><span class=\"line\">// 注意使用 --hard 参数会抛弃当前工作区的修改</span><br><span class=\"line\">// 使用 --soft 参数的话会回退到之前的版本，但是保留当前工作区的修改，可以重新提交</span><br></pre></td></tr></table></figure>\n<h6 id=\"如果此时使用push命令-会提示本地的版本落后于远端的版本；\"><a href=\"#如果此时使用push命令-会提示本地的版本落后于远端的版本；\" class=\"headerlink\" title=\"如果\b此时使用\bpush命令,会提示本地的版本落后于远端的版本；:\"></a>如果\b此时使用\bpush命令,会提示本地的版本落后于远端的版本；:</h6><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push origin &lt;分支名&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/images/WX20181012-155029.png\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h6 id=\"为了覆盖掉远端的版本信息，使远端的仓库也回退到相应的版本，需要加上参数–force\"><a href=\"#为了覆盖掉远端的版本信息，使远端的仓库也回退到相应的版本，需要加上参数–force\" class=\"headerlink\" title=\"为了覆盖掉远端的版本信息，使远端的仓库也回退到相应的版本，需要加上参数–force\"></a>为了覆盖掉远端的版本信息，使远端的仓库也回退到相应的版本，需要加上参数–force</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push origin &lt;分支名&gt; --force</span><br></pre></td></tr></table></figure>\n"},{"title":"jd商品hover过光","date":"2018-10-12T06:27:38.000Z","_content":"#### 效果\n![](/images/wIQDW7wiZ8.gif)\n#### 代码\n``` html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n  <title>Document</title>\n  <style>\n    /*广告图片效果*/\n    div {\n      position:relative;\n      height:450px;\n      width:330px;\n      left:150px;\n      top:0;\n      overflow:hidden;\n    }\n    div a {\n      display:block;\n    }\n    a:hover::before {\n      left:400px;\n      transition:left 1s ease 0s;\n    }\n    div a::before {\n      content:\"\";\n      position:absolute;\n      width:80px;\n      height:450px;\n      top:0;\n      left:-150px;\n      overflow:hidden;\n      background:-moz-linear-gradient(left,rgba(255,255,255,0)0,rgba(255,255,255,.2)50%,rgba(255,255,255,0)100%);\n      background:-webkit-gradient(linear,left top,righttop,color-stop(0%,rgba(255,255,255,0)),color-stop(50%,rgba(255,255,255,.2)),color-stop(100%,rgba(255,255,255,0)));\n      background:-webkit-linear-gradient(left,rgba(255,255,255,0)0,rgba(255,255,255,.2)50%,rgba(255,255,255,0)100%);\n      background:-o-linear-gradient(left,rgba(255,255,255,0)0,rgba(255,255,255,.2)50%,rgba(255,255,255,0)100%);\n      -webkit-transform:skewX(-25deg);\n      -moz-transform:skewX(-25deg);\n      -o-transform:skewX(-25deg);\n    }\n  </style>\n</head>\n<body>\n  <div>\n    <a href=\"#\">\n      <img src=\"http://www.jq22.com/img/cs/500x500b.png\" width=\"330\" height=\"475\">\n    </a>\n  </div>\n</body>\n</html>\n```","source":"_posts/jd商品hover过光.md","raw":"---\ntitle: jd商品hover过光\ndate: 2018-10-12 14:27:38\ncategories: jd商品hover过光效果\ntags: [HTML, CSS3]\n---\n#### 效果\n![](/images/wIQDW7wiZ8.gif)\n#### 代码\n``` html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n  <title>Document</title>\n  <style>\n    /*广告图片效果*/\n    div {\n      position:relative;\n      height:450px;\n      width:330px;\n      left:150px;\n      top:0;\n      overflow:hidden;\n    }\n    div a {\n      display:block;\n    }\n    a:hover::before {\n      left:400px;\n      transition:left 1s ease 0s;\n    }\n    div a::before {\n      content:\"\";\n      position:absolute;\n      width:80px;\n      height:450px;\n      top:0;\n      left:-150px;\n      overflow:hidden;\n      background:-moz-linear-gradient(left,rgba(255,255,255,0)0,rgba(255,255,255,.2)50%,rgba(255,255,255,0)100%);\n      background:-webkit-gradient(linear,left top,righttop,color-stop(0%,rgba(255,255,255,0)),color-stop(50%,rgba(255,255,255,.2)),color-stop(100%,rgba(255,255,255,0)));\n      background:-webkit-linear-gradient(left,rgba(255,255,255,0)0,rgba(255,255,255,.2)50%,rgba(255,255,255,0)100%);\n      background:-o-linear-gradient(left,rgba(255,255,255,0)0,rgba(255,255,255,.2)50%,rgba(255,255,255,0)100%);\n      -webkit-transform:skewX(-25deg);\n      -moz-transform:skewX(-25deg);\n      -o-transform:skewX(-25deg);\n    }\n  </style>\n</head>\n<body>\n  <div>\n    <a href=\"#\">\n      <img src=\"http://www.jq22.com/img/cs/500x500b.png\" width=\"330\" height=\"475\">\n    </a>\n  </div>\n</body>\n</html>\n```","slug":"jd商品hover过光","published":1,"updated":"2021-10-09T08:48:32.069Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzabe00175c54blnxykbi","content":"<h4 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h4><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/images/wIQDW7wiZ8.gif\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h4 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h4><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"X-UA-Compatible\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"ie=edge\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">    <span class=\"comment\">/*广告图片效果*/</span></span></span><br><span class=\"line\">    div &#123;</span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">position</span><span class=\"selector-pseudo\">:relative</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">height</span><span class=\"selector-pseudo\">:450px</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">width</span><span class=\"selector-pseudo\">:330px</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">left</span><span class=\"selector-pseudo\">:150px</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">top</span><span class=\"selector-pseudo\">:0</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">overflow</span><span class=\"selector-pseudo\">:hidden</span>;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    div a &#123;</span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">display</span><span class=\"selector-pseudo\">:block</span>;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-tag\">a</span><span class=\"selector-pseudo\">:hover</span><span class=\"selector-pseudo\">::before</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">left</span><span class=\"selector-pseudo\">:400px</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">transition</span><span class=\"selector-pseudo\">:left</span> 1<span class=\"selector-tag\">s</span> <span class=\"selector-tag\">ease</span> 0<span class=\"selector-tag\">s</span>;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-tag\">div</span> <span class=\"selector-tag\">a</span><span class=\"selector-pseudo\">::before</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">content</span><span class=\"selector-pseudo\">:\"\"</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">position</span><span class=\"selector-pseudo\">:absolute</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">width</span><span class=\"selector-pseudo\">:80px</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">height</span><span class=\"selector-pseudo\">:450px</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">top</span><span class=\"selector-pseudo\">:0</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">left</span><span class=\"selector-pseudo\">:-150px</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">overflow</span><span class=\"selector-pseudo\">:hidden</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">background</span><span class=\"selector-pseudo\">:-moz-linear-gradient(left</span>,<span class=\"selector-tag\">rgba</span>(255,255,255,0)0,<span class=\"selector-tag\">rgba</span>(255,255,255,<span class=\"selector-class\">.2</span>)50%,<span class=\"selector-tag\">rgba</span>(255,255,255,0)100%);</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">background</span><span class=\"selector-pseudo\">:-webkit-gradient(linear</span>,<span class=\"selector-tag\">left</span> <span class=\"selector-tag\">top</span>,<span class=\"selector-tag\">righttop</span>,<span class=\"selector-tag\">color-stop</span>(0%,<span class=\"selector-tag\">rgba</span>(255,255,255,0)),<span class=\"selector-tag\">color-stop</span>(50%,<span class=\"selector-tag\">rgba</span>(255,255,255,<span class=\"selector-class\">.2</span>)),<span class=\"selector-tag\">color-stop</span>(100%,<span class=\"selector-tag\">rgba</span>(255,255,255,0)));</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">background</span><span class=\"selector-pseudo\">:-webkit-linear-gradient(left</span>,<span class=\"selector-tag\">rgba</span>(255,255,255,0)0,<span class=\"selector-tag\">rgba</span>(255,255,255,<span class=\"selector-class\">.2</span>)50%,<span class=\"selector-tag\">rgba</span>(255,255,255,0)100%);</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">background</span><span class=\"selector-pseudo\">:-o-linear-gradient(left</span>,<span class=\"selector-tag\">rgba</span>(255,255,255,0)0,<span class=\"selector-tag\">rgba</span>(255,255,255,<span class=\"selector-class\">.2</span>)50%,<span class=\"selector-tag\">rgba</span>(255,255,255,0)100%);</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">-webkit-transform</span><span class=\"selector-pseudo\">:skewX(-25deg)</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">-moz-transform</span><span class=\"selector-pseudo\">:skewX(-25deg)</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">-o-transform</span><span class=\"selector-pseudo\">:skewX(-25deg)</span>;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"#\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://www.jq22.com/img/cs/500x500b.png\"</span> <span class=\"attr\">width</span>=<span class=\"string\">\"330\"</span> <span class=\"attr\">height</span>=<span class=\"string\">\"475\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h4 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h4><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/images/wIQDW7wiZ8.gif\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h4 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h4><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"X-UA-Compatible\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"ie=edge\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">    <span class=\"comment\">/*广告图片效果*/</span></span></span><br><span class=\"line\">    div &#123;</span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">position</span><span class=\"selector-pseudo\">:relative</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">height</span><span class=\"selector-pseudo\">:450px</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">width</span><span class=\"selector-pseudo\">:330px</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">left</span><span class=\"selector-pseudo\">:150px</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">top</span><span class=\"selector-pseudo\">:0</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">overflow</span><span class=\"selector-pseudo\">:hidden</span>;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    div a &#123;</span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">display</span><span class=\"selector-pseudo\">:block</span>;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-tag\">a</span><span class=\"selector-pseudo\">:hover</span><span class=\"selector-pseudo\">::before</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">left</span><span class=\"selector-pseudo\">:400px</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">transition</span><span class=\"selector-pseudo\">:left</span> 1<span class=\"selector-tag\">s</span> <span class=\"selector-tag\">ease</span> 0<span class=\"selector-tag\">s</span>;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-tag\">div</span> <span class=\"selector-tag\">a</span><span class=\"selector-pseudo\">::before</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">content</span><span class=\"selector-pseudo\">:\"\"</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">position</span><span class=\"selector-pseudo\">:absolute</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">width</span><span class=\"selector-pseudo\">:80px</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">height</span><span class=\"selector-pseudo\">:450px</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">top</span><span class=\"selector-pseudo\">:0</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">left</span><span class=\"selector-pseudo\">:-150px</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">overflow</span><span class=\"selector-pseudo\">:hidden</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">background</span><span class=\"selector-pseudo\">:-moz-linear-gradient(left</span>,<span class=\"selector-tag\">rgba</span>(255,255,255,0)0,<span class=\"selector-tag\">rgba</span>(255,255,255,<span class=\"selector-class\">.2</span>)50%,<span class=\"selector-tag\">rgba</span>(255,255,255,0)100%);</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">background</span><span class=\"selector-pseudo\">:-webkit-gradient(linear</span>,<span class=\"selector-tag\">left</span> <span class=\"selector-tag\">top</span>,<span class=\"selector-tag\">righttop</span>,<span class=\"selector-tag\">color-stop</span>(0%,<span class=\"selector-tag\">rgba</span>(255,255,255,0)),<span class=\"selector-tag\">color-stop</span>(50%,<span class=\"selector-tag\">rgba</span>(255,255,255,<span class=\"selector-class\">.2</span>)),<span class=\"selector-tag\">color-stop</span>(100%,<span class=\"selector-tag\">rgba</span>(255,255,255,0)));</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">background</span><span class=\"selector-pseudo\">:-webkit-linear-gradient(left</span>,<span class=\"selector-tag\">rgba</span>(255,255,255,0)0,<span class=\"selector-tag\">rgba</span>(255,255,255,<span class=\"selector-class\">.2</span>)50%,<span class=\"selector-tag\">rgba</span>(255,255,255,0)100%);</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">background</span><span class=\"selector-pseudo\">:-o-linear-gradient(left</span>,<span class=\"selector-tag\">rgba</span>(255,255,255,0)0,<span class=\"selector-tag\">rgba</span>(255,255,255,<span class=\"selector-class\">.2</span>)50%,<span class=\"selector-tag\">rgba</span>(255,255,255,0)100%);</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">-webkit-transform</span><span class=\"selector-pseudo\">:skewX(-25deg)</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">-moz-transform</span><span class=\"selector-pseudo\">:skewX(-25deg)</span>;</span></span><br><span class=\"line\"><span class=\"css\">      <span class=\"selector-tag\">-o-transform</span><span class=\"selector-pseudo\">:skewX(-25deg)</span>;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"#\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://www.jq22.com/img/cs/500x500b.png\"</span> <span class=\"attr\">width</span>=<span class=\"string\">\"330\"</span> <span class=\"attr\">height</span>=<span class=\"string\">\"475\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>"},{"title":"jenkins+docker+github+nginx前端实现自动化部署","date":"2020-07-06T14:08:22.000Z","_content":"## 前言\n由于之前写过react+nodejs+mongodb的项目，只是在本地开发完成，想尝试正常开发部署上线流出走一波，然而在网上搜索一番，大部分都是写的基础东西，标题大内容小，有的甚至写到关键位置就没了，当然也有些是好文章，下面是我总结一些问题，踩过坑之后的流程\n## 准备\n* 虚拟机一台，市面上的有VirtualBox【mac】，VMware【windows】系统为linux，笔者为linux CentOS7.6\n## Docker安装\n\n``` javascript\n// 看你当前的内核版本\nuname -r\n\n// yum 包更新到最新\nyum update -y\n\n// 安装 docker\nyum install docker\n\n// 启动并加入开机启动\nsystemctl start docker\nsystemctl enable docker\n\n// 下载docker-compose\ncurl -L https://github.com/docker/compose/releases/download/1.23.2/docker-compose-`uname -s`-`uname -m` > /usr/local/bin/docker-compose\n\n// 添加可执行权限(这里不懂可以看一下菜鸟教程-linux教程-文件权限)\nchmod +x /usr/local/bin/docker-compose\n// 查看docker-compose版本\ndocker-compose --version\n\n```\n## Jenkins 安装与配置\n``` javascript\ndocker search jenkins\n```\n\n选择第二个或者第三个，第一个有坑\n### 安装jenkins\n``` js\ndocker run -d -u 0 --privileged --name jenkins -p 8888:8080 -v /root/jenkins_home:/var/jenkins_home jenkins/jenkins\n```\n注意⚠️：本机需要在/root下创建一个jenkins_home文件夹【没有就加，有就要加】\n其中:\n-d 指的是在后台运行；\n-u 0 指的是传入 root 账号 ID，覆盖容器中内置的账号；\n-v /root/jenkins_home:/var/jenkins_home 指的是将 docker 容器内的目录 /var/jenkins_home 映射到宿主机 /root/jenkins_home 目录上；\n--name jenkins 指的是将 docker 容器内的目录 /var/jenkins_home 映射到宿主机 /root/jenkins_home 目录上；\n-p 49003:8080 指的是将容器的 8080 端口映射到宿主机的 8888 端口；\n--privileged 指的是赋予最高权限。\n\n整条命令的意思就是：\n运行一个镜像为 jenkins/jenkins:latest 的容器，命名为 jenkins_home，使用 root 账号覆盖容器中的账号，赋予最高权限，将容器的 /var/jenkins_home 映射到宿主机的 /root/jenkins_home 目录下，映射容器中 8080 端口到宿主机 49003 端口\n\n执行完成后，等待几十秒，等待 Jenkins 容器启动初始化。到浏览器中输入 http://your ip:49003 查看 Jenkins 是否启动成功\n\n看到如下界面说明启动成功：\n\n通过如下命令获取密码，复制到上图输入框中\n\n进入到下个页面，选择【安装推荐的插件】。\n\n由于墙的问题，需要修改 Jenkins 的默认下载地址。可以在浏览器另起一个 tab 页面，进入 http://your ip:49003/pluginManager/advanced，修改最下面的升级站点 URL 为 http://mirror.esuni.jp/jenkins/updates/update-center.json\n\n然后重启容器，再次进入初始化页面，通常下载速度会加快。\n\n然后就是创建管理员账号。\n\n进入首页后，因为自动化部署中需要通过 ssh 登陆服务器执行命令以及 node 环境，所以需要下载 Publish Over SSH 和 NodeJS 插件，可通过系统管理 -> 管理插件 -> 可选插件进入，搜索选中并直接安装。如下图所示：\n\n需要注意的是，Publish Over SSH 需要配置相关 ssh 服务器，通过系统管理 -> 系统设置 进入并拉到最下面，输入 Name、Hostname、Username、Passphrase / Password 等参数。如下图所示：\n\n然后点击 Test Configuration 校验能否登陆。\n\n至此 Jenkins 已经完成了全局配置。\n\n\n关联 Jenkins 和 Github\n在 GitHub 创建一个项目，以本项目为例，在项目根目录下创建 nginx.conf 和 docker-compose.yml 文件\n\n\nnginx.conf\n``` bash\n#user  nobody;\nworker_processes 1;\n\n#error_log  logs/error.log;\n#error_log  logs/error.log  notice;\n#error_log  logs/error.log  info;\n\n#pid        logs/nginx.pid;\n\n\nevents {\n  worker_connections 1024;\n}\n\n\nhttp {\n  include mime.types;\n  default_type application/octet-stream;\n\n  #log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n  #                  '$status $body_bytes_sent \"$http_referer\" '\n  #                  '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n  #access_log  logs/access.log  main;\n\n  sendfile on;\n  #tcp_nopush     on;\n\n  #keepalive_timeout  0;\n  keepalive_timeout 65;\n\n  #gzip  on;\n\n  server {\n    listen 10000;\n    server_name 192.168.56.101;\n\n    #charset koi8-r;\n\n    #access_log  logs/host.access.log  main;\n\n    location / {\n      index index.html index.htm;\n      root /usr/share/nginx/html;\n      # 所有静态资源均指向 /index.html\n      try_files $uri $uri/ /index.html;\n    }\n\n    #error_page  404              /404.html;\n\n    # redirect server error pages to the static page /50x.html\n    #\n    error_page 500 502 503 504 /50x.html;\n    location = /50x.html {\n      root  /usr/share/nginx/html;\n    }\n    # location /api {\n    #   proxy_pass http://server:port;\n    # }\n\n\n    # proxy the PHP scripts to Apache listening on 127.0.0.1:80\n    #\n    #location ~ \\.php$ {\n    #    proxy_pass   http://127.0.0.1;\n    #}\n\n    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000\n    #\n    #location ~ \\.php$ {\n    #    root           html;\n    #    fastcgi_pass   127.0.0.1:9000;\n    #    fastcgi_index  index.php;\n    #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;\n    #    include        fastcgi_params;\n    #}\n\n    # deny access to .htaccess files, if Apache's document root\n    # concurs with nginx's one\n    #\n    #location ~ /\\.ht {\n    #    deny  all;\n    #}\n  }\n}\n```\n\ndocker-compose.yml\n\n```bash\nversion: '3'\nservices:\n  ad-tpl-vue: #项目name\n    container_name: 'webhtml' #容器名称\n    image: nginx\n    restart: always\n    ports:\n      - 10000:10000\n    volumes:\n      - ./nginx.conf:/etc/nginx/nginx.conf #挂载nginx配置\n      - ./dist:/usr/share/nginx/html/ #挂载项目\n    privileged: true\n```\n\n\n这里需要解释下 volumes 参数，在打包 Docker 镜像时，如果将 nginx.conf 和 dist 直接拷贝到镜像中，那么每次修改相关文件时，都需要重新打包新的镜像。通过 volumes 可以将宿主机的某个文件映射到容器的某个文件，那么改动相关文件，就不要重新打包镜像了，只需修改宿主机上的文件即可。\n\n然后在 Jenkins 创建一个新的任务，选择【构建一个自由风格的软件项目】，并设置相关配置，如下图所示。\n\n其中第三张图两部分命令含义如下：\n\n第一部分 shell 命令是 build 前端项目，会在项目根目录下生成 dist 目录\n\n``` bash\necho $PATH\nnode -v\nnpm -v\nnpm install\nnpm run build\n```\n\n第二部分 shell 命令就是通过 ssh 登陆服务器，通过 docker-compose 进行构建 docker 镜像并运行容器。相较于直接使用 docker ，当更新代码时无需执行停止删除容器，重新构建新的镜像等操作。\ncd /root/jenkins_home/workspace/ad-tpl-vue \\\n&& docker-compose stop && docker-compose up -d\n\n最后可以回到该任务页，点击【立即构建】来构建我们的项目了。\n实现自动触发打包\n不过仍有个问题，那就是当向 GitHub 远程仓库 push 代码时，需要能够自动触发构建，相关操作如下。\n1.修改 Jenkins 安全策略\n\n通过系统管理 -> 全局安全配置 进入，并如下图操作\n\n\n2.生成 Jenkins API Token\n\n通过用户列表 -> 点击管理员用户 -> 设置，点击添加新 token，然后复制身份验证令牌 token\n\n3.在 Jenkins 项目对应任务的设置中配置【构建触发器】，将刚复制的 token 粘贴进去，如下图所示：\n\n4.在 Github 相关项目中打开 Setting -> Webhooks -> Add webhooks，输入格式如下的 URL :\n``` js\n// 前面是 Jenkins 服务地址，ad-tpl-vue 指在 Jenkins 的任务名称，Token指上面获取的令牌\nhttp://12x.xxx.xxx.xxx:xxxx/job/ad-tpl-vue/build?token=Token\n```\n\n这样，我们就实现了在 push 新的代码后，自动触发 Jenkins 打包项目代码，并打包 docker 镜像然后运行。","source":"_posts/jenkins-docker-github-nginx前端实现自动化部署.md","raw":"---\ntitle: jenkins+docker+github+nginx前端实现自动化部署\ndate: 2020-07-06 22:08:22\ntags: ['nginx','docker','jenkins']\n---\n## 前言\n由于之前写过react+nodejs+mongodb的项目，只是在本地开发完成，想尝试正常开发部署上线流出走一波，然而在网上搜索一番，大部分都是写的基础东西，标题大内容小，有的甚至写到关键位置就没了，当然也有些是好文章，下面是我总结一些问题，踩过坑之后的流程\n## 准备\n* 虚拟机一台，市面上的有VirtualBox【mac】，VMware【windows】系统为linux，笔者为linux CentOS7.6\n## Docker安装\n\n``` javascript\n// 看你当前的内核版本\nuname -r\n\n// yum 包更新到最新\nyum update -y\n\n// 安装 docker\nyum install docker\n\n// 启动并加入开机启动\nsystemctl start docker\nsystemctl enable docker\n\n// 下载docker-compose\ncurl -L https://github.com/docker/compose/releases/download/1.23.2/docker-compose-`uname -s`-`uname -m` > /usr/local/bin/docker-compose\n\n// 添加可执行权限(这里不懂可以看一下菜鸟教程-linux教程-文件权限)\nchmod +x /usr/local/bin/docker-compose\n// 查看docker-compose版本\ndocker-compose --version\n\n```\n## Jenkins 安装与配置\n``` javascript\ndocker search jenkins\n```\n\n选择第二个或者第三个，第一个有坑\n### 安装jenkins\n``` js\ndocker run -d -u 0 --privileged --name jenkins -p 8888:8080 -v /root/jenkins_home:/var/jenkins_home jenkins/jenkins\n```\n注意⚠️：本机需要在/root下创建一个jenkins_home文件夹【没有就加，有就要加】\n其中:\n-d 指的是在后台运行；\n-u 0 指的是传入 root 账号 ID，覆盖容器中内置的账号；\n-v /root/jenkins_home:/var/jenkins_home 指的是将 docker 容器内的目录 /var/jenkins_home 映射到宿主机 /root/jenkins_home 目录上；\n--name jenkins 指的是将 docker 容器内的目录 /var/jenkins_home 映射到宿主机 /root/jenkins_home 目录上；\n-p 49003:8080 指的是将容器的 8080 端口映射到宿主机的 8888 端口；\n--privileged 指的是赋予最高权限。\n\n整条命令的意思就是：\n运行一个镜像为 jenkins/jenkins:latest 的容器，命名为 jenkins_home，使用 root 账号覆盖容器中的账号，赋予最高权限，将容器的 /var/jenkins_home 映射到宿主机的 /root/jenkins_home 目录下，映射容器中 8080 端口到宿主机 49003 端口\n\n执行完成后，等待几十秒，等待 Jenkins 容器启动初始化。到浏览器中输入 http://your ip:49003 查看 Jenkins 是否启动成功\n\n看到如下界面说明启动成功：\n\n通过如下命令获取密码，复制到上图输入框中\n\n进入到下个页面，选择【安装推荐的插件】。\n\n由于墙的问题，需要修改 Jenkins 的默认下载地址。可以在浏览器另起一个 tab 页面，进入 http://your ip:49003/pluginManager/advanced，修改最下面的升级站点 URL 为 http://mirror.esuni.jp/jenkins/updates/update-center.json\n\n然后重启容器，再次进入初始化页面，通常下载速度会加快。\n\n然后就是创建管理员账号。\n\n进入首页后，因为自动化部署中需要通过 ssh 登陆服务器执行命令以及 node 环境，所以需要下载 Publish Over SSH 和 NodeJS 插件，可通过系统管理 -> 管理插件 -> 可选插件进入，搜索选中并直接安装。如下图所示：\n\n需要注意的是，Publish Over SSH 需要配置相关 ssh 服务器，通过系统管理 -> 系统设置 进入并拉到最下面，输入 Name、Hostname、Username、Passphrase / Password 等参数。如下图所示：\n\n然后点击 Test Configuration 校验能否登陆。\n\n至此 Jenkins 已经完成了全局配置。\n\n\n关联 Jenkins 和 Github\n在 GitHub 创建一个项目，以本项目为例，在项目根目录下创建 nginx.conf 和 docker-compose.yml 文件\n\n\nnginx.conf\n``` bash\n#user  nobody;\nworker_processes 1;\n\n#error_log  logs/error.log;\n#error_log  logs/error.log  notice;\n#error_log  logs/error.log  info;\n\n#pid        logs/nginx.pid;\n\n\nevents {\n  worker_connections 1024;\n}\n\n\nhttp {\n  include mime.types;\n  default_type application/octet-stream;\n\n  #log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n  #                  '$status $body_bytes_sent \"$http_referer\" '\n  #                  '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n  #access_log  logs/access.log  main;\n\n  sendfile on;\n  #tcp_nopush     on;\n\n  #keepalive_timeout  0;\n  keepalive_timeout 65;\n\n  #gzip  on;\n\n  server {\n    listen 10000;\n    server_name 192.168.56.101;\n\n    #charset koi8-r;\n\n    #access_log  logs/host.access.log  main;\n\n    location / {\n      index index.html index.htm;\n      root /usr/share/nginx/html;\n      # 所有静态资源均指向 /index.html\n      try_files $uri $uri/ /index.html;\n    }\n\n    #error_page  404              /404.html;\n\n    # redirect server error pages to the static page /50x.html\n    #\n    error_page 500 502 503 504 /50x.html;\n    location = /50x.html {\n      root  /usr/share/nginx/html;\n    }\n    # location /api {\n    #   proxy_pass http://server:port;\n    # }\n\n\n    # proxy the PHP scripts to Apache listening on 127.0.0.1:80\n    #\n    #location ~ \\.php$ {\n    #    proxy_pass   http://127.0.0.1;\n    #}\n\n    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000\n    #\n    #location ~ \\.php$ {\n    #    root           html;\n    #    fastcgi_pass   127.0.0.1:9000;\n    #    fastcgi_index  index.php;\n    #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;\n    #    include        fastcgi_params;\n    #}\n\n    # deny access to .htaccess files, if Apache's document root\n    # concurs with nginx's one\n    #\n    #location ~ /\\.ht {\n    #    deny  all;\n    #}\n  }\n}\n```\n\ndocker-compose.yml\n\n```bash\nversion: '3'\nservices:\n  ad-tpl-vue: #项目name\n    container_name: 'webhtml' #容器名称\n    image: nginx\n    restart: always\n    ports:\n      - 10000:10000\n    volumes:\n      - ./nginx.conf:/etc/nginx/nginx.conf #挂载nginx配置\n      - ./dist:/usr/share/nginx/html/ #挂载项目\n    privileged: true\n```\n\n\n这里需要解释下 volumes 参数，在打包 Docker 镜像时，如果将 nginx.conf 和 dist 直接拷贝到镜像中，那么每次修改相关文件时，都需要重新打包新的镜像。通过 volumes 可以将宿主机的某个文件映射到容器的某个文件，那么改动相关文件，就不要重新打包镜像了，只需修改宿主机上的文件即可。\n\n然后在 Jenkins 创建一个新的任务，选择【构建一个自由风格的软件项目】，并设置相关配置，如下图所示。\n\n其中第三张图两部分命令含义如下：\n\n第一部分 shell 命令是 build 前端项目，会在项目根目录下生成 dist 目录\n\n``` bash\necho $PATH\nnode -v\nnpm -v\nnpm install\nnpm run build\n```\n\n第二部分 shell 命令就是通过 ssh 登陆服务器，通过 docker-compose 进行构建 docker 镜像并运行容器。相较于直接使用 docker ，当更新代码时无需执行停止删除容器，重新构建新的镜像等操作。\ncd /root/jenkins_home/workspace/ad-tpl-vue \\\n&& docker-compose stop && docker-compose up -d\n\n最后可以回到该任务页，点击【立即构建】来构建我们的项目了。\n实现自动触发打包\n不过仍有个问题，那就是当向 GitHub 远程仓库 push 代码时，需要能够自动触发构建，相关操作如下。\n1.修改 Jenkins 安全策略\n\n通过系统管理 -> 全局安全配置 进入，并如下图操作\n\n\n2.生成 Jenkins API Token\n\n通过用户列表 -> 点击管理员用户 -> 设置，点击添加新 token，然后复制身份验证令牌 token\n\n3.在 Jenkins 项目对应任务的设置中配置【构建触发器】，将刚复制的 token 粘贴进去，如下图所示：\n\n4.在 Github 相关项目中打开 Setting -> Webhooks -> Add webhooks，输入格式如下的 URL :\n``` js\n// 前面是 Jenkins 服务地址，ad-tpl-vue 指在 Jenkins 的任务名称，Token指上面获取的令牌\nhttp://12x.xxx.xxx.xxx:xxxx/job/ad-tpl-vue/build?token=Token\n```\n\n这样，我们就实现了在 push 新的代码后，自动触发 Jenkins 打包项目代码，并打包 docker 镜像然后运行。","slug":"jenkins-docker-github-nginx前端实现自动化部署","published":1,"updated":"2021-10-09T08:48:32.070Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzabf001a5c54idj32buc","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>由于之前写过react+nodejs+mongodb的项目，只是在本地开发完成，想尝试正常开发部署上线流出走一波，然而在网上搜索一番，大部分都是写的基础东西，标题大内容小，有的甚至写到关键位置就没了，当然也有些是好文章，下面是我总结一些问题，踩过坑之后的流程</p>\n<h2 id=\"准备\"><a href=\"#准备\" class=\"headerlink\" title=\"准备\"></a>准备</h2><ul>\n<li>虚拟机一台，市面上的有VirtualBox【mac】，VMware【windows】系统为linux，笔者为linux CentOS7.6<h2 id=\"Docker安装\"><a href=\"#Docker安装\" class=\"headerlink\" title=\"Docker安装\"></a>Docker安装</h2></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 看你当前的内核版本</span></span><br><span class=\"line\">uname -r</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// yum 包更新到最新</span></span><br><span class=\"line\">yum update -y</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 安装 docker</span></span><br><span class=\"line\">yum install docker</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 启动并加入开机启动</span></span><br><span class=\"line\">systemctl start docker</span><br><span class=\"line\">systemctl enable docker</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 下载docker-compose</span></span><br><span class=\"line\">curl -L https:<span class=\"comment\">//github.com/docker/compose/releases/download/1.23.2/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 添加可执行权限(这里不懂可以看一下菜鸟教程-linux教程-文件权限)</span></span><br><span class=\"line\">chmod +x /usr/local/bin/docker-compose</span><br><span class=\"line\"><span class=\"comment\">// 查看docker-compose版本</span></span><br><span class=\"line\">docker-compose --version</span><br></pre></td></tr></table></figure>\n<h2 id=\"Jenkins-安装与配置\"><a href=\"#Jenkins-安装与配置\" class=\"headerlink\" title=\"Jenkins 安装与配置\"></a>Jenkins 安装与配置</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker search jenkins</span><br></pre></td></tr></table></figure>\n<p>选择第二个或者第三个，第一个有坑</p>\n<h3 id=\"安装jenkins\"><a href=\"#安装jenkins\" class=\"headerlink\" title=\"安装jenkins\"></a>安装jenkins</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -d -u <span class=\"number\">0</span> --privileged --name jenkins -p <span class=\"number\">8888</span>:<span class=\"number\">8080</span> -v /root/jenkins_home:<span class=\"regexp\">/var/</span>jenkins_home jenkins/jenkins</span><br></pre></td></tr></table></figure>\n<p>注意⚠️：本机需要在/root下创建一个jenkins_home文件夹【没有就加，有就要加】<br>其中:<br>-d 指的是在后台运行；<br>-u 0 指的是传入 root 账号 ID，覆盖容器中内置的账号；<br>-v /root/jenkins_home:/var/jenkins_home 指的是将 docker 容器内的目录 /var/jenkins_home 映射到宿主机 /root/jenkins_home 目录上；<br>–name jenkins 指的是将 docker 容器内的目录 /var/jenkins_home 映射到宿主机 /root/jenkins_home 目录上；<br>-p 49003:8080 指的是将容器的 8080 端口映射到宿主机的 8888 端口；<br>–privileged 指的是赋予最高权限。</p>\n<p>整条命令的意思就是：<br>运行一个镜像为 jenkins/jenkins:latest 的容器，命名为 jenkins_home，使用 root 账号覆盖容器中的账号，赋予最高权限，将容器的 /var/jenkins_home 映射到宿主机的 /root/jenkins_home 目录下，映射容器中 8080 端口到宿主机 49003 端口</p>\n<p>执行完成后，等待几十秒，等待 Jenkins 容器启动初始化。到浏览器中输入 <a href=\"http://your\" target=\"_blank\" rel=\"noopener\">http://your</a> ip:49003 查看 Jenkins 是否启动成功</p>\n<p>看到如下界面说明启动成功：</p>\n<p>通过如下命令获取密码，复制到上图输入框中</p>\n<p>进入到下个页面，选择【安装推荐的插件】。</p>\n<p>由于墙的问题，需要修改 Jenkins 的默认下载地址。可以在浏览器另起一个 tab 页面，进入 <a href=\"http://your\" target=\"_blank\" rel=\"noopener\">http://your</a> ip:49003/pluginManager/advanced，修改最下面的升级站点 URL 为 <a href=\"http://mirror.esuni.jp/jenkins/updates/update-center.json\" target=\"_blank\" rel=\"noopener\">http://mirror.esuni.jp/jenkins/updates/update-center.json</a></p>\n<p>然后重启容器，再次进入初始化页面，通常下载速度会加快。</p>\n<p>然后就是创建管理员账号。</p>\n<p>进入首页后，因为自动化部署中需要通过 ssh 登陆服务器执行命令以及 node 环境，所以需要下载 Publish Over SSH 和 NodeJS 插件，可通过系统管理 -&gt; 管理插件 -&gt; 可选插件进入，搜索选中并直接安装。如下图所示：</p>\n<p>需要注意的是，Publish Over SSH 需要配置相关 ssh 服务器，通过系统管理 -&gt; 系统设置 进入并拉到最下面，输入 Name、Hostname、Username、Passphrase / Password 等参数。如下图所示：</p>\n<p>然后点击 Test Configuration 校验能否登陆。</p>\n<p>至此 Jenkins 已经完成了全局配置。</p>\n<p>关联 Jenkins 和 Github<br>在 GitHub 创建一个项目，以本项目为例，在项目根目录下创建 nginx.conf 和 docker-compose.yml 文件</p>\n<p>nginx.conf<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#user  nobody;</span></span><br><span class=\"line\">worker_processes 1;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#error_log  logs/error.log;</span></span><br><span class=\"line\"><span class=\"comment\">#error_log  logs/error.log  notice;</span></span><br><span class=\"line\"><span class=\"comment\">#error_log  logs/error.log  info;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#pid        logs/nginx.pid;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">events &#123;</span><br><span class=\"line\">  worker_connections 1024;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">http &#123;</span><br><span class=\"line\">  include mime.types;</span><br><span class=\"line\">  default_type application/octet-stream;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">#log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '</span></span><br><span class=\"line\">  <span class=\"comment\">#                  '$status $body_bytes_sent \"$http_referer\" '</span></span><br><span class=\"line\">  <span class=\"comment\">#                  '\"$http_user_agent\" \"$http_x_forwarded_for\"';</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">#access_log  logs/access.log  main;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  sendfile on;</span><br><span class=\"line\">  <span class=\"comment\">#tcp_nopush     on;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">#keepalive_timeout  0;</span></span><br><span class=\"line\">  keepalive_timeout 65;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">#gzip  on;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  server &#123;</span><br><span class=\"line\">    listen 10000;</span><br><span class=\"line\">    server_name 192.168.56.101;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">#charset koi8-r;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">#access_log  logs/host.access.log  main;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">      index index.html index.htm;</span><br><span class=\"line\">      root /usr/share/nginx/html;</span><br><span class=\"line\">      <span class=\"comment\"># 所有静态资源均指向 /index.html</span></span><br><span class=\"line\">      try_files <span class=\"variable\">$uri</span> <span class=\"variable\">$uri</span>/ /index.html;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">#error_page  404              /404.html;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># redirect server error pages to the static page /50x.html</span></span><br><span class=\"line\">    <span class=\"comment\">#</span></span><br><span class=\"line\">    error_page 500 502 503 504 /50x.html;</span><br><span class=\"line\">    location = /50x.html &#123;</span><br><span class=\"line\">      root  /usr/share/nginx/html;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\"># location /api &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">#   proxy_pass http://server:port;</span></span><br><span class=\"line\">    <span class=\"comment\"># &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># proxy the PHP scripts to Apache listening on 127.0.0.1:80</span></span><br><span class=\"line\">    <span class=\"comment\">#</span></span><br><span class=\"line\">    <span class=\"comment\">#location ~ \\.php$ &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">#    proxy_pass   http://127.0.0.1;</span></span><br><span class=\"line\">    <span class=\"comment\">#&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span></span><br><span class=\"line\">    <span class=\"comment\">#</span></span><br><span class=\"line\">    <span class=\"comment\">#location ~ \\.php$ &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">#    root           html;</span></span><br><span class=\"line\">    <span class=\"comment\">#    fastcgi_pass   127.0.0.1:9000;</span></span><br><span class=\"line\">    <span class=\"comment\">#    fastcgi_index  index.php;</span></span><br><span class=\"line\">    <span class=\"comment\">#    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span></span><br><span class=\"line\">    <span class=\"comment\">#    include        fastcgi_params;</span></span><br><span class=\"line\">    <span class=\"comment\">#&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># deny access to .htaccess files, if Apache's document root</span></span><br><span class=\"line\">    <span class=\"comment\"># concurs with nginx's one</span></span><br><span class=\"line\">    <span class=\"comment\">#</span></span><br><span class=\"line\">    <span class=\"comment\">#location ~ /\\.ht &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">#    deny  all;</span></span><br><span class=\"line\">    <span class=\"comment\">#&#125;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>docker-compose.yml</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">version: <span class=\"string\">'3'</span></span><br><span class=\"line\">services:</span><br><span class=\"line\">  ad-tpl-vue: <span class=\"comment\">#项目name</span></span><br><span class=\"line\">    container_name: <span class=\"string\">'webhtml'</span> <span class=\"comment\">#容器名称</span></span><br><span class=\"line\">    image: nginx</span><br><span class=\"line\">    restart: always</span><br><span class=\"line\">    ports:</span><br><span class=\"line\">      - 10000:10000</span><br><span class=\"line\">    volumes:</span><br><span class=\"line\">      - ./nginx.conf:/etc/nginx/nginx.conf <span class=\"comment\">#挂载nginx配置</span></span><br><span class=\"line\">      - ./dist:/usr/share/nginx/html/ <span class=\"comment\">#挂载项目</span></span><br><span class=\"line\">    privileged: <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<p>这里需要解释下 volumes 参数，在打包 Docker 镜像时，如果将 nginx.conf 和 dist 直接拷贝到镜像中，那么每次修改相关文件时，都需要重新打包新的镜像。通过 volumes 可以将宿主机的某个文件映射到容器的某个文件，那么改动相关文件，就不要重新打包镜像了，只需修改宿主机上的文件即可。</p>\n<p>然后在 Jenkins 创建一个新的任务，选择【构建一个自由风格的软件项目】，并设置相关配置，如下图所示。</p>\n<p>其中第三张图两部分命令含义如下：</p>\n<p>第一部分 shell 命令是 build 前端项目，会在项目根目录下生成 dist 目录</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">$PATH</span></span><br><span class=\"line\">node -v</span><br><span class=\"line\">npm -v</span><br><span class=\"line\">npm install</span><br><span class=\"line\">npm run build</span><br></pre></td></tr></table></figure>\n<p>第二部分 shell 命令就是通过 ssh 登陆服务器，通过 docker-compose 进行构建 docker 镜像并运行容器。相较于直接使用 docker ，当更新代码时无需执行停止删除容器，重新构建新的镜像等操作。<br>cd /root/jenkins_home/workspace/ad-tpl-vue \\<br>&amp;&amp; docker-compose stop &amp;&amp; docker-compose up -d</p>\n<p>最后可以回到该任务页，点击【立即构建】来构建我们的项目了。<br>实现自动触发打包<br>不过仍有个问题，那就是当向 GitHub 远程仓库 push 代码时，需要能够自动触发构建，相关操作如下。<br>1.修改 Jenkins 安全策略</p>\n<p>通过系统管理 -&gt; 全局安全配置 进入，并如下图操作</p>\n<p>2.生成 Jenkins API Token</p>\n<p>通过用户列表 -&gt; 点击管理员用户 -&gt; 设置，点击添加新 token，然后复制身份验证令牌 token</p>\n<p>3.在 Jenkins 项目对应任务的设置中配置【构建触发器】，将刚复制的 token 粘贴进去，如下图所示：</p>\n<p>4.在 Github 相关项目中打开 Setting -&gt; Webhooks -&gt; Add webhooks，输入格式如下的 URL :<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 前面是 Jenkins 服务地址，ad-tpl-vue 指在 Jenkins 的任务名称，Token指上面获取的令牌</span></span><br><span class=\"line\">http:<span class=\"comment\">//12x.xxx.xxx.xxx:xxxx/job/ad-tpl-vue/build?token=Token</span></span><br></pre></td></tr></table></figure></p>\n<p>这样，我们就实现了在 push 新的代码后，自动触发 Jenkins 打包项目代码，并打包 docker 镜像然后运行。</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>由于之前写过react+nodejs+mongodb的项目，只是在本地开发完成，想尝试正常开发部署上线流出走一波，然而在网上搜索一番，大部分都是写的基础东西，标题大内容小，有的甚至写到关键位置就没了，当然也有些是好文章，下面是我总结一些问题，踩过坑之后的流程</p>\n<h2 id=\"准备\"><a href=\"#准备\" class=\"headerlink\" title=\"准备\"></a>准备</h2><ul>\n<li>虚拟机一台，市面上的有VirtualBox【mac】，VMware【windows】系统为linux，笔者为linux CentOS7.6<h2 id=\"Docker安装\"><a href=\"#Docker安装\" class=\"headerlink\" title=\"Docker安装\"></a>Docker安装</h2></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 看你当前的内核版本</span></span><br><span class=\"line\">uname -r</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// yum 包更新到最新</span></span><br><span class=\"line\">yum update -y</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 安装 docker</span></span><br><span class=\"line\">yum install docker</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 启动并加入开机启动</span></span><br><span class=\"line\">systemctl start docker</span><br><span class=\"line\">systemctl enable docker</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 下载docker-compose</span></span><br><span class=\"line\">curl -L https:<span class=\"comment\">//github.com/docker/compose/releases/download/1.23.2/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 添加可执行权限(这里不懂可以看一下菜鸟教程-linux教程-文件权限)</span></span><br><span class=\"line\">chmod +x /usr/local/bin/docker-compose</span><br><span class=\"line\"><span class=\"comment\">// 查看docker-compose版本</span></span><br><span class=\"line\">docker-compose --version</span><br></pre></td></tr></table></figure>\n<h2 id=\"Jenkins-安装与配置\"><a href=\"#Jenkins-安装与配置\" class=\"headerlink\" title=\"Jenkins 安装与配置\"></a>Jenkins 安装与配置</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker search jenkins</span><br></pre></td></tr></table></figure>\n<p>选择第二个或者第三个，第一个有坑</p>\n<h3 id=\"安装jenkins\"><a href=\"#安装jenkins\" class=\"headerlink\" title=\"安装jenkins\"></a>安装jenkins</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -d -u <span class=\"number\">0</span> --privileged --name jenkins -p <span class=\"number\">8888</span>:<span class=\"number\">8080</span> -v /root/jenkins_home:<span class=\"regexp\">/var/</span>jenkins_home jenkins/jenkins</span><br></pre></td></tr></table></figure>\n<p>注意⚠️：本机需要在/root下创建一个jenkins_home文件夹【没有就加，有就要加】<br>其中:<br>-d 指的是在后台运行；<br>-u 0 指的是传入 root 账号 ID，覆盖容器中内置的账号；<br>-v /root/jenkins_home:/var/jenkins_home 指的是将 docker 容器内的目录 /var/jenkins_home 映射到宿主机 /root/jenkins_home 目录上；<br>–name jenkins 指的是将 docker 容器内的目录 /var/jenkins_home 映射到宿主机 /root/jenkins_home 目录上；<br>-p 49003:8080 指的是将容器的 8080 端口映射到宿主机的 8888 端口；<br>–privileged 指的是赋予最高权限。</p>\n<p>整条命令的意思就是：<br>运行一个镜像为 jenkins/jenkins:latest 的容器，命名为 jenkins_home，使用 root 账号覆盖容器中的账号，赋予最高权限，将容器的 /var/jenkins_home 映射到宿主机的 /root/jenkins_home 目录下，映射容器中 8080 端口到宿主机 49003 端口</p>\n<p>执行完成后，等待几十秒，等待 Jenkins 容器启动初始化。到浏览器中输入 <a href=\"http://your\" target=\"_blank\" rel=\"noopener\">http://your</a> ip:49003 查看 Jenkins 是否启动成功</p>\n<p>看到如下界面说明启动成功：</p>\n<p>通过如下命令获取密码，复制到上图输入框中</p>\n<p>进入到下个页面，选择【安装推荐的插件】。</p>\n<p>由于墙的问题，需要修改 Jenkins 的默认下载地址。可以在浏览器另起一个 tab 页面，进入 <a href=\"http://your\" target=\"_blank\" rel=\"noopener\">http://your</a> ip:49003/pluginManager/advanced，修改最下面的升级站点 URL 为 <a href=\"http://mirror.esuni.jp/jenkins/updates/update-center.json\" target=\"_blank\" rel=\"noopener\">http://mirror.esuni.jp/jenkins/updates/update-center.json</a></p>\n<p>然后重启容器，再次进入初始化页面，通常下载速度会加快。</p>\n<p>然后就是创建管理员账号。</p>\n<p>进入首页后，因为自动化部署中需要通过 ssh 登陆服务器执行命令以及 node 环境，所以需要下载 Publish Over SSH 和 NodeJS 插件，可通过系统管理 -&gt; 管理插件 -&gt; 可选插件进入，搜索选中并直接安装。如下图所示：</p>\n<p>需要注意的是，Publish Over SSH 需要配置相关 ssh 服务器，通过系统管理 -&gt; 系统设置 进入并拉到最下面，输入 Name、Hostname、Username、Passphrase / Password 等参数。如下图所示：</p>\n<p>然后点击 Test Configuration 校验能否登陆。</p>\n<p>至此 Jenkins 已经完成了全局配置。</p>\n<p>关联 Jenkins 和 Github<br>在 GitHub 创建一个项目，以本项目为例，在项目根目录下创建 nginx.conf 和 docker-compose.yml 文件</p>\n<p>nginx.conf<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#user  nobody;</span></span><br><span class=\"line\">worker_processes 1;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#error_log  logs/error.log;</span></span><br><span class=\"line\"><span class=\"comment\">#error_log  logs/error.log  notice;</span></span><br><span class=\"line\"><span class=\"comment\">#error_log  logs/error.log  info;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#pid        logs/nginx.pid;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">events &#123;</span><br><span class=\"line\">  worker_connections 1024;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">http &#123;</span><br><span class=\"line\">  include mime.types;</span><br><span class=\"line\">  default_type application/octet-stream;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">#log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '</span></span><br><span class=\"line\">  <span class=\"comment\">#                  '$status $body_bytes_sent \"$http_referer\" '</span></span><br><span class=\"line\">  <span class=\"comment\">#                  '\"$http_user_agent\" \"$http_x_forwarded_for\"';</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">#access_log  logs/access.log  main;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  sendfile on;</span><br><span class=\"line\">  <span class=\"comment\">#tcp_nopush     on;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">#keepalive_timeout  0;</span></span><br><span class=\"line\">  keepalive_timeout 65;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">#gzip  on;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  server &#123;</span><br><span class=\"line\">    listen 10000;</span><br><span class=\"line\">    server_name 192.168.56.101;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">#charset koi8-r;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">#access_log  logs/host.access.log  main;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">      index index.html index.htm;</span><br><span class=\"line\">      root /usr/share/nginx/html;</span><br><span class=\"line\">      <span class=\"comment\"># 所有静态资源均指向 /index.html</span></span><br><span class=\"line\">      try_files <span class=\"variable\">$uri</span> <span class=\"variable\">$uri</span>/ /index.html;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">#error_page  404              /404.html;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># redirect server error pages to the static page /50x.html</span></span><br><span class=\"line\">    <span class=\"comment\">#</span></span><br><span class=\"line\">    error_page 500 502 503 504 /50x.html;</span><br><span class=\"line\">    location = /50x.html &#123;</span><br><span class=\"line\">      root  /usr/share/nginx/html;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\"># location /api &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">#   proxy_pass http://server:port;</span></span><br><span class=\"line\">    <span class=\"comment\"># &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># proxy the PHP scripts to Apache listening on 127.0.0.1:80</span></span><br><span class=\"line\">    <span class=\"comment\">#</span></span><br><span class=\"line\">    <span class=\"comment\">#location ~ \\.php$ &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">#    proxy_pass   http://127.0.0.1;</span></span><br><span class=\"line\">    <span class=\"comment\">#&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span></span><br><span class=\"line\">    <span class=\"comment\">#</span></span><br><span class=\"line\">    <span class=\"comment\">#location ~ \\.php$ &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">#    root           html;</span></span><br><span class=\"line\">    <span class=\"comment\">#    fastcgi_pass   127.0.0.1:9000;</span></span><br><span class=\"line\">    <span class=\"comment\">#    fastcgi_index  index.php;</span></span><br><span class=\"line\">    <span class=\"comment\">#    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span></span><br><span class=\"line\">    <span class=\"comment\">#    include        fastcgi_params;</span></span><br><span class=\"line\">    <span class=\"comment\">#&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># deny access to .htaccess files, if Apache's document root</span></span><br><span class=\"line\">    <span class=\"comment\"># concurs with nginx's one</span></span><br><span class=\"line\">    <span class=\"comment\">#</span></span><br><span class=\"line\">    <span class=\"comment\">#location ~ /\\.ht &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">#    deny  all;</span></span><br><span class=\"line\">    <span class=\"comment\">#&#125;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>docker-compose.yml</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">version: <span class=\"string\">'3'</span></span><br><span class=\"line\">services:</span><br><span class=\"line\">  ad-tpl-vue: <span class=\"comment\">#项目name</span></span><br><span class=\"line\">    container_name: <span class=\"string\">'webhtml'</span> <span class=\"comment\">#容器名称</span></span><br><span class=\"line\">    image: nginx</span><br><span class=\"line\">    restart: always</span><br><span class=\"line\">    ports:</span><br><span class=\"line\">      - 10000:10000</span><br><span class=\"line\">    volumes:</span><br><span class=\"line\">      - ./nginx.conf:/etc/nginx/nginx.conf <span class=\"comment\">#挂载nginx配置</span></span><br><span class=\"line\">      - ./dist:/usr/share/nginx/html/ <span class=\"comment\">#挂载项目</span></span><br><span class=\"line\">    privileged: <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<p>这里需要解释下 volumes 参数，在打包 Docker 镜像时，如果将 nginx.conf 和 dist 直接拷贝到镜像中，那么每次修改相关文件时，都需要重新打包新的镜像。通过 volumes 可以将宿主机的某个文件映射到容器的某个文件，那么改动相关文件，就不要重新打包镜像了，只需修改宿主机上的文件即可。</p>\n<p>然后在 Jenkins 创建一个新的任务，选择【构建一个自由风格的软件项目】，并设置相关配置，如下图所示。</p>\n<p>其中第三张图两部分命令含义如下：</p>\n<p>第一部分 shell 命令是 build 前端项目，会在项目根目录下生成 dist 目录</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">$PATH</span></span><br><span class=\"line\">node -v</span><br><span class=\"line\">npm -v</span><br><span class=\"line\">npm install</span><br><span class=\"line\">npm run build</span><br></pre></td></tr></table></figure>\n<p>第二部分 shell 命令就是通过 ssh 登陆服务器，通过 docker-compose 进行构建 docker 镜像并运行容器。相较于直接使用 docker ，当更新代码时无需执行停止删除容器，重新构建新的镜像等操作。<br>cd /root/jenkins_home/workspace/ad-tpl-vue \\<br>&amp;&amp; docker-compose stop &amp;&amp; docker-compose up -d</p>\n<p>最后可以回到该任务页，点击【立即构建】来构建我们的项目了。<br>实现自动触发打包<br>不过仍有个问题，那就是当向 GitHub 远程仓库 push 代码时，需要能够自动触发构建，相关操作如下。<br>1.修改 Jenkins 安全策略</p>\n<p>通过系统管理 -&gt; 全局安全配置 进入，并如下图操作</p>\n<p>2.生成 Jenkins API Token</p>\n<p>通过用户列表 -&gt; 点击管理员用户 -&gt; 设置，点击添加新 token，然后复制身份验证令牌 token</p>\n<p>3.在 Jenkins 项目对应任务的设置中配置【构建触发器】，将刚复制的 token 粘贴进去，如下图所示：</p>\n<p>4.在 Github 相关项目中打开 Setting -&gt; Webhooks -&gt; Add webhooks，输入格式如下的 URL :<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 前面是 Jenkins 服务地址，ad-tpl-vue 指在 Jenkins 的任务名称，Token指上面获取的令牌</span></span><br><span class=\"line\">http:<span class=\"comment\">//12x.xxx.xxx.xxx:xxxx/job/ad-tpl-vue/build?token=Token</span></span><br></pre></td></tr></table></figure></p>\n<p>这样，我们就实现了在 push 新的代码后，自动触发 Jenkins 打包项目代码，并打包 docker 镜像然后运行。</p>\n"},{"title":"js事件委托","date":"2018-10-12T06:56:58.000Z","_content":"####  事件委托\n#####  利用冒泡的原理，把事件加到父级上，触发执行效果\n####  好处\n##### 提高性能  新添加的元素，還會有之前的事件\n\n#### 代码\n``` html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n  <title>Document</title>\n  <script>\n    ///提高性能  新添加的元素，還會有之前的事件\n    // 事件委托：利用冒泡的原理，把事件加到父级上，触发执行效果\n    window.onload = function(){\n      var oUl = document.querySelector('ul');\n      var oInput = document.querySelector('input');\n      var aLi = oUl.querySelectorAll('li');\n      var now = 4;\n      console.log(aLi)\n      // for(var i=0;i<aLi.length;i++){\n      //   aLi[i].onmouseover = function(){\n      //     this.style.background = 'red'\n      //   }\n      //   aLi[i].onmouseout = function(){\n      //     this.style.background = ''\n      //   }\n      // }\n      oInput.onclick = function(){\n        now++;\n        var oli = document.createElement('li');\n        oli.innerHTML = now*111\n        oUl.appendChild(oli)\n      }\n      oUl.onmouseover = function(ev){\n       var ev = ev || window.ev;\n       var target = ev.target || ev.srcElement;\n      //  alert(target.innerHTML)\n      if(target.nodeName.toLowerCase() == 'li'){\n        target.style.background = 'red'; \n      }\n      \n      }\n      oUl.onmouseout = function(ev){\n       var ev = ev || window.ev;\n       var target = ev.target || ev.srcElement;\n      //  alert(target.innerHTML)\n      target.style.background = ''; \n      }\n    }\n  </script>\n</head>\n<body>\n<input type=\"button\" value=\"添加\">\n  <ul>\n    <li>111</li>\n    <li>222</li>\n    <li>333</li>\n    <li>444</li>\n  </ul>\n</body>\n</html>\n```\n\n","source":"_posts/js事件委托.md","raw":"---\ntitle: js事件委托\ndate: 2018-10-12 14:56:58\ntags: [JavaScript,HTML,事件]\ncategories: 原生js事件委托\n---\n####  事件委托\n#####  利用冒泡的原理，把事件加到父级上，触发执行效果\n####  好处\n##### 提高性能  新添加的元素，還會有之前的事件\n\n#### 代码\n``` html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n  <title>Document</title>\n  <script>\n    ///提高性能  新添加的元素，還會有之前的事件\n    // 事件委托：利用冒泡的原理，把事件加到父级上，触发执行效果\n    window.onload = function(){\n      var oUl = document.querySelector('ul');\n      var oInput = document.querySelector('input');\n      var aLi = oUl.querySelectorAll('li');\n      var now = 4;\n      console.log(aLi)\n      // for(var i=0;i<aLi.length;i++){\n      //   aLi[i].onmouseover = function(){\n      //     this.style.background = 'red'\n      //   }\n      //   aLi[i].onmouseout = function(){\n      //     this.style.background = ''\n      //   }\n      // }\n      oInput.onclick = function(){\n        now++;\n        var oli = document.createElement('li');\n        oli.innerHTML = now*111\n        oUl.appendChild(oli)\n      }\n      oUl.onmouseover = function(ev){\n       var ev = ev || window.ev;\n       var target = ev.target || ev.srcElement;\n      //  alert(target.innerHTML)\n      if(target.nodeName.toLowerCase() == 'li'){\n        target.style.background = 'red'; \n      }\n      \n      }\n      oUl.onmouseout = function(ev){\n       var ev = ev || window.ev;\n       var target = ev.target || ev.srcElement;\n      //  alert(target.innerHTML)\n      target.style.background = ''; \n      }\n    }\n  </script>\n</head>\n<body>\n<input type=\"button\" value=\"添加\">\n  <ul>\n    <li>111</li>\n    <li>222</li>\n    <li>333</li>\n    <li>444</li>\n  </ul>\n</body>\n</html>\n```\n\n","slug":"js事件委托","published":1,"updated":"2021-10-09T08:48:32.071Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzabg001c5c54djqf6lmf","content":"<h4 id=\"事件委托\"><a href=\"#事件委托\" class=\"headerlink\" title=\"事件委托\"></a>事件委托</h4><h5 id=\"利用冒泡的原理，把事件加到父级上，触发执行效果\"><a href=\"#利用冒泡的原理，把事件加到父级上，触发执行效果\" class=\"headerlink\" title=\"利用冒泡的原理，把事件加到父级上，触发执行效果\"></a>利用冒泡的原理，把事件加到父级上，触发执行效果</h5><h4 id=\"好处\"><a href=\"#好处\" class=\"headerlink\" title=\"好处\"></a>好处</h4><h5 id=\"提高性能-新添加的元素，還會有之前的事件\"><a href=\"#提高性能-新添加的元素，還會有之前的事件\" class=\"headerlink\" title=\"提高性能  新添加的元素，還會有之前的事件\"></a>提高性能  新添加的元素，還會有之前的事件</h5><h4 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h4><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"X-UA-Compatible\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"ie=edge\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">///提高性能  新添加的元素，還會有之前的事件</span></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 事件委托：利用冒泡的原理，把事件加到父级上，触发执行效果</span></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"built_in\">window</span>.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> oUl = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'ul'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> oInput = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'input'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> aLi = oUl.querySelectorAll(<span class=\"string\">'li'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> now = <span class=\"number\">4</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"built_in\">console</span>.log(aLi)</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">// for(var i=0;i&lt;aLi.length;i++)&#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">//   aLi[i].onmouseover = function()&#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">//     this.style.background = 'red'</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">//   &#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">//   aLi[i].onmouseout = function()&#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">//     this.style.background = ''</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">//   &#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">// &#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\">      oInput.onclick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\">        now++;</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> oli = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'li'</span>);</span></span><br><span class=\"line\">        oli.innerHTML = now*111</span><br><span class=\"line\">        oUl.appendChild(oli)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"><span class=\"javascript\">      oUl.onmouseover = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">ev</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">       <span class=\"keyword\">var</span> ev = ev || <span class=\"built_in\">window</span>.ev;</span></span><br><span class=\"line\"><span class=\"javascript\">       <span class=\"keyword\">var</span> target = ev.target || ev.srcElement;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">//  alert(target.innerHTML)</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">if</span>(target.nodeName.toLowerCase() == <span class=\"string\">'li'</span>)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        target.style.background = <span class=\"string\">'red'</span>; </span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      </span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"><span class=\"javascript\">      oUl.onmouseout = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">ev</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">       <span class=\"keyword\">var</span> ev = ev || <span class=\"built_in\">window</span>.ev;</span></span><br><span class=\"line\"><span class=\"javascript\">       <span class=\"keyword\">var</span> target = ev.target || ev.srcElement;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">//  alert(target.innerHTML)</span></span></span><br><span class=\"line\"><span class=\"javascript\">      target.style.background = <span class=\"string\">''</span>; </span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"button\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"添加\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>111<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>222<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>333<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>444<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h4 id=\"事件委托\"><a href=\"#事件委托\" class=\"headerlink\" title=\"事件委托\"></a>事件委托</h4><h5 id=\"利用冒泡的原理，把事件加到父级上，触发执行效果\"><a href=\"#利用冒泡的原理，把事件加到父级上，触发执行效果\" class=\"headerlink\" title=\"利用冒泡的原理，把事件加到父级上，触发执行效果\"></a>利用冒泡的原理，把事件加到父级上，触发执行效果</h5><h4 id=\"好处\"><a href=\"#好处\" class=\"headerlink\" title=\"好处\"></a>好处</h4><h5 id=\"提高性能-新添加的元素，還會有之前的事件\"><a href=\"#提高性能-新添加的元素，還會有之前的事件\" class=\"headerlink\" title=\"提高性能  新添加的元素，還會有之前的事件\"></a>提高性能  新添加的元素，還會有之前的事件</h5><h4 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h4><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"X-UA-Compatible\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"ie=edge\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">///提高性能  新添加的元素，還會有之前的事件</span></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 事件委托：利用冒泡的原理，把事件加到父级上，触发执行效果</span></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"built_in\">window</span>.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> oUl = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'ul'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> oInput = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'input'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> aLi = oUl.querySelectorAll(<span class=\"string\">'li'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> now = <span class=\"number\">4</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"built_in\">console</span>.log(aLi)</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">// for(var i=0;i&lt;aLi.length;i++)&#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">//   aLi[i].onmouseover = function()&#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">//     this.style.background = 'red'</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">//   &#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">//   aLi[i].onmouseout = function()&#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">//     this.style.background = ''</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">//   &#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">// &#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\">      oInput.onclick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\">        now++;</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> oli = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'li'</span>);</span></span><br><span class=\"line\">        oli.innerHTML = now*111</span><br><span class=\"line\">        oUl.appendChild(oli)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"><span class=\"javascript\">      oUl.onmouseover = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">ev</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">       <span class=\"keyword\">var</span> ev = ev || <span class=\"built_in\">window</span>.ev;</span></span><br><span class=\"line\"><span class=\"javascript\">       <span class=\"keyword\">var</span> target = ev.target || ev.srcElement;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">//  alert(target.innerHTML)</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">if</span>(target.nodeName.toLowerCase() == <span class=\"string\">'li'</span>)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        target.style.background = <span class=\"string\">'red'</span>; </span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      </span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"><span class=\"javascript\">      oUl.onmouseout = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">ev</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">       <span class=\"keyword\">var</span> ev = ev || <span class=\"built_in\">window</span>.ev;</span></span><br><span class=\"line\"><span class=\"javascript\">       <span class=\"keyword\">var</span> target = ev.target || ev.srcElement;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">//  alert(target.innerHTML)</span></span></span><br><span class=\"line\"><span class=\"javascript\">      target.style.background = <span class=\"string\">''</span>; </span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"button\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"添加\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>111<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>222<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>333<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>444<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n"},{"title":"MarkDown","date":"2018-10-10T08:09:34.000Z","_content":"## MarkDown 常用\n### 1、标题 `格式：# 标题`\n\n# 一级标题(# 一级标题)\n## 二级标题(## 二级标题)\n### 三级标题(### 三级标题)\n#### 四级标题(#### 四级标题)\n##### 五级标题(##### 五级标题)\n###### 六级标题(###### 六级标题)\n\n### 2、列表 \n\n#### 2.1 有序列表 `格式：1.列表项`\n1.列表项1（1.列表项1）\n2.列表项2（2.列表项2）\n3.列表项3（3.列表项3）\n#### 2.2 无序列表 `格式：-列表项、*列表项、+列表项`\n- 列表项1（- 列表项1）\n+ 列表项2（+ 列表项2）\n* 列表项3（* 列表项3）\n\n### 3、链接与图片\n\n#### 3.1 链接 `格式：\\[文本](链接)`\n\\[百度](http://www.baidu.com)\n#### 3.2 图片 `格式：\\![文本]\\(图片链接)`\n![logo](/images/logo.png)\n### 4、表格\n###### 语法：`第二行中“—-|：–：|—”冒号用于设置表格的对齐方式，左边表示左对齐，右边表示右对齐，放两边表示居中，不放冒号（默认状态）表示表头居中内容居左。`\n| Tables        | Are           | Cool  |\n| ------------- |:-------------:| -----:|\n| col 3 is      | right-aligned | $1600 |\n| col 2 is      | centered      |   $12 |\n| zebra stripes | are neat      |    $1 |\n###### 简写模式，省略了两边的“|”。\n``` bash\ndog | bird  | cat\n-----|-----|-----\nbar  | bear | box\nbar  | bear | box\n\n```\ndog | bird  | cat\n-----|-----|-----\nbar  | bear | box\nbar  | bear | box\n### 5、粗体和斜体\n**我是粗体**`(**我是粗体**)`\n*我是斜体* `(*我是斜体*)`\n### 6、代码编写\n``` javascript\n(function (window, document) {\n      var getRem = function () {\n        if (document) {\n          var html = document.documentElement;\n          var hWidth = (html.getBoundingClientRect().width) * (750 / 352);\n          console.log(hWidth)\n          html.style.fontSize = hWidth / 16 + \"px\";\n          console.log(html.style.fontSize)\n        }\n      };\n      getRem();\n      window.onresize = function () {\n        getRem();\n      }\n})(window, document)\n\n```\n\n","source":"_posts/markdown-first.md","raw":"---\ntitle: MarkDown\ndate: 2018-10-10 16:09:34\ncategories:\n  - MarkDown学习笔记\ntags: \n  - Nodejs\n  - Angularjs\n  - Angular\n  - React\n  - dva\n  - JavaScript\n  - Java\n  - bash\n  - MongoDB\n  - HTML\n  - CSS2\n  - ES6\n  - Git\n  - Mac\n---\n## MarkDown 常用\n### 1、标题 `格式：# 标题`\n\n# 一级标题(# 一级标题)\n## 二级标题(## 二级标题)\n### 三级标题(### 三级标题)\n#### 四级标题(#### 四级标题)\n##### 五级标题(##### 五级标题)\n###### 六级标题(###### 六级标题)\n\n### 2、列表 \n\n#### 2.1 有序列表 `格式：1.列表项`\n1.列表项1（1.列表项1）\n2.列表项2（2.列表项2）\n3.列表项3（3.列表项3）\n#### 2.2 无序列表 `格式：-列表项、*列表项、+列表项`\n- 列表项1（- 列表项1）\n+ 列表项2（+ 列表项2）\n* 列表项3（* 列表项3）\n\n### 3、链接与图片\n\n#### 3.1 链接 `格式：\\[文本](链接)`\n\\[百度](http://www.baidu.com)\n#### 3.2 图片 `格式：\\![文本]\\(图片链接)`\n![logo](/images/logo.png)\n### 4、表格\n###### 语法：`第二行中“—-|：–：|—”冒号用于设置表格的对齐方式，左边表示左对齐，右边表示右对齐，放两边表示居中，不放冒号（默认状态）表示表头居中内容居左。`\n| Tables        | Are           | Cool  |\n| ------------- |:-------------:| -----:|\n| col 3 is      | right-aligned | $1600 |\n| col 2 is      | centered      |   $12 |\n| zebra stripes | are neat      |    $1 |\n###### 简写模式，省略了两边的“|”。\n``` bash\ndog | bird  | cat\n-----|-----|-----\nbar  | bear | box\nbar  | bear | box\n\n```\ndog | bird  | cat\n-----|-----|-----\nbar  | bear | box\nbar  | bear | box\n### 5、粗体和斜体\n**我是粗体**`(**我是粗体**)`\n*我是斜体* `(*我是斜体*)`\n### 6、代码编写\n``` javascript\n(function (window, document) {\n      var getRem = function () {\n        if (document) {\n          var html = document.documentElement;\n          var hWidth = (html.getBoundingClientRect().width) * (750 / 352);\n          console.log(hWidth)\n          html.style.fontSize = hWidth / 16 + \"px\";\n          console.log(html.style.fontSize)\n        }\n      };\n      getRem();\n      window.onresize = function () {\n        getRem();\n      }\n})(window, document)\n\n```\n\n","slug":"markdown-first","published":1,"updated":"2021-10-09T08:48:32.073Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzabh001e5c54bzuzzzqe","content":"<h2 id=\"MarkDown-常用\"><a href=\"#MarkDown-常用\" class=\"headerlink\" title=\"MarkDown 常用\"></a>MarkDown 常用</h2><h3 id=\"1、标题-格式：-标题\"><a href=\"#1、标题-格式：-标题\" class=\"headerlink\" title=\"1、标题 格式：# 标题\"></a>1、标题 <code>格式：# 标题</code></h3><h1 id=\"一级标题-一级标题\"><a href=\"#一级标题-一级标题\" class=\"headerlink\" title=\"一级标题(# 一级标题)\"></a>一级标题(# 一级标题)</h1><h2 id=\"二级标题-二级标题\"><a href=\"#二级标题-二级标题\" class=\"headerlink\" title=\"二级标题(## 二级标题)\"></a>二级标题(## 二级标题)</h2><h3 id=\"三级标题-三级标题\"><a href=\"#三级标题-三级标题\" class=\"headerlink\" title=\"三级标题(### 三级标题)\"></a>三级标题(### 三级标题)</h3><h4 id=\"四级标题-四级标题\"><a href=\"#四级标题-四级标题\" class=\"headerlink\" title=\"四级标题(#### 四级标题)\"></a>四级标题(#### 四级标题)</h4><h5 id=\"五级标题-五级标题\"><a href=\"#五级标题-五级标题\" class=\"headerlink\" title=\"五级标题(##### 五级标题)\"></a>五级标题(##### 五级标题)</h5><h6 id=\"六级标题-六级标题\"><a href=\"#六级标题-六级标题\" class=\"headerlink\" title=\"六级标题(###### 六级标题)\"></a>六级标题(###### 六级标题)</h6><h3 id=\"2、列表\"><a href=\"#2、列表\" class=\"headerlink\" title=\"2、列表\"></a>2、列表</h3><h4 id=\"2-1-有序列表-格式：1-列表项\"><a href=\"#2-1-有序列表-格式：1-列表项\" class=\"headerlink\" title=\"2.1 有序列表 格式：1.列表项\"></a>2.1 有序列表 <code>格式：1.列表项</code></h4><p>1.列表项1（1.列表项1）<br>2.列表项2（2.列表项2）<br>3.列表项3（3.列表项3）</p>\n<h4 id=\"2-2-无序列表-格式：-列表项、-列表项、-列表项\"><a href=\"#2-2-无序列表-格式：-列表项、-列表项、-列表项\" class=\"headerlink\" title=\"2.2 无序列表 格式：-列表项、*列表项、+列表项\"></a>2.2 无序列表 <code>格式：-列表项、*列表项、+列表项</code></h4><ul>\n<li>列表项1（- 列表项1）</li>\n</ul>\n<ul>\n<li>列表项2（+ 列表项2）</li>\n</ul>\n<ul>\n<li>列表项3（* 列表项3）</li>\n</ul>\n<h3 id=\"3、链接与图片\"><a href=\"#3、链接与图片\" class=\"headerlink\" title=\"3、链接与图片\"></a>3、链接与图片</h3><h4 id=\"3-1-链接-格式：-文本-链接\"><a href=\"#3-1-链接-格式：-文本-链接\" class=\"headerlink\" title=\"3.1 链接 格式：\\[文本](链接)\"></a>3.1 链接 <code>格式：\\[文本](链接)</code></h4><p>[百度](<a href=\"http://www.baidu.com\" target=\"_blank\" rel=\"noopener\">http://www.baidu.com</a>)</p>\n<h4 id=\"3-2-图片-格式：-文本-图片链接\"><a href=\"#3-2-图片-格式：-文本-图片链接\" class=\"headerlink\" title=\"3.2 图片 格式：\\![文本]\\(图片链接)\"></a>3.2 图片 <code>格式：\\![文本]\\(图片链接)</code></h4><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/images/logo.png\" alt=\"logo\" title>\n                </div>\n                <div class=\"image-caption\">logo</div>\n            </figure>\n<h3 id=\"4、表格\"><a href=\"#4、表格\" class=\"headerlink\" title=\"4、表格\"></a>4、表格</h3><h6 id=\"语法：第二行中“—-：–：-—”冒号用于设置表格的对齐方式，左边表示左对齐，右边表示右对齐，放两边表示居中，不放冒号（默认状态）表示表头居中内容居左。\"><a href=\"#语法：第二行中“—-：–：-—”冒号用于设置表格的对齐方式，左边表示左对齐，右边表示右对齐，放两边表示居中，不放冒号（默认状态）表示表头居中内容居左。\" class=\"headerlink\" title=\"语法：第二行中“—-|：–：|—”冒号用于设置表格的对齐方式，左边表示左对齐，右边表示右对齐，放两边表示居中，不放冒号（默认状态）表示表头居中内容居左。\"></a>语法：<code>第二行中“—-|：–：|—”冒号用于设置表格的对齐方式，左边表示左对齐，右边表示右对齐，放两边表示居中，不放冒号（默认状态）表示表头居中内容居左。</code></h6><table>\n<thead>\n<tr>\n<th>Tables</th>\n<th style=\"text-align:center\">Are</th>\n<th style=\"text-align:right\">Cool</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>col 3 is</td>\n<td style=\"text-align:center\">right-aligned</td>\n<td style=\"text-align:right\">$1600</td>\n</tr>\n<tr>\n<td>col 2 is</td>\n<td style=\"text-align:center\">centered</td>\n<td style=\"text-align:right\">$12</td>\n</tr>\n<tr>\n<td>zebra stripes</td>\n<td style=\"text-align:center\">are neat</td>\n<td style=\"text-align:right\">$1</td>\n</tr>\n</tbody>\n</table>\n<h6 id=\"简写模式，省略了两边的“-”。\"><a href=\"#简写模式，省略了两边的“-”。\" class=\"headerlink\" title=\"简写模式，省略了两边的“|”。\"></a>简写模式，省略了两边的“|”。</h6><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dog | bird  | cat</span><br><span class=\"line\">-----|-----|-----</span><br><span class=\"line\">bar  | bear | box</span><br><span class=\"line\">bar  | bear | box</span><br></pre></td></tr></table></figure>\n<table>\n<thead>\n<tr>\n<th>dog</th>\n<th>bird</th>\n<th>cat</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>bar</td>\n<td>bear</td>\n<td>box</td>\n</tr>\n<tr>\n<td>bar</td>\n<td>bear</td>\n<td>box</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"5、粗体和斜体\"><a href=\"#5、粗体和斜体\" class=\"headerlink\" title=\"5、粗体和斜体\"></a>5、粗体和斜体</h3><p><strong>我是粗体</strong><code>(**我是粗体**)</code><br><em>我是斜体</em> <code>(*我是斜体*)</code></p>\n<h3 id=\"6、代码编写\"><a href=\"#6、代码编写\" class=\"headerlink\" title=\"6、代码编写\"></a>6、代码编写</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">window, document</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> getRem = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">document</span>) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">var</span> html = <span class=\"built_in\">document</span>.documentElement;</span><br><span class=\"line\">          <span class=\"keyword\">var</span> hWidth = (html.getBoundingClientRect().width) * (<span class=\"number\">750</span> / <span class=\"number\">352</span>);</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(hWidth)</span><br><span class=\"line\">          html.style.fontSize = hWidth / <span class=\"number\">16</span> + <span class=\"string\">\"px\"</span>;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(html.style.fontSize)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      getRem();</span><br><span class=\"line\">      <span class=\"built_in\">window</span>.onresize = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        getRem();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">&#125;)(<span class=\"built_in\">window</span>, <span class=\"built_in\">document</span>)</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"MarkDown-常用\"><a href=\"#MarkDown-常用\" class=\"headerlink\" title=\"MarkDown 常用\"></a>MarkDown 常用</h2><h3 id=\"1、标题-格式：-标题\"><a href=\"#1、标题-格式：-标题\" class=\"headerlink\" title=\"1、标题 格式：# 标题\"></a>1、标题 <code>格式：# 标题</code></h3><h1 id=\"一级标题-一级标题\"><a href=\"#一级标题-一级标题\" class=\"headerlink\" title=\"一级标题(# 一级标题)\"></a>一级标题(# 一级标题)</h1><h2 id=\"二级标题-二级标题\"><a href=\"#二级标题-二级标题\" class=\"headerlink\" title=\"二级标题(## 二级标题)\"></a>二级标题(## 二级标题)</h2><h3 id=\"三级标题-三级标题\"><a href=\"#三级标题-三级标题\" class=\"headerlink\" title=\"三级标题(### 三级标题)\"></a>三级标题(### 三级标题)</h3><h4 id=\"四级标题-四级标题\"><a href=\"#四级标题-四级标题\" class=\"headerlink\" title=\"四级标题(#### 四级标题)\"></a>四级标题(#### 四级标题)</h4><h5 id=\"五级标题-五级标题\"><a href=\"#五级标题-五级标题\" class=\"headerlink\" title=\"五级标题(##### 五级标题)\"></a>五级标题(##### 五级标题)</h5><h6 id=\"六级标题-六级标题\"><a href=\"#六级标题-六级标题\" class=\"headerlink\" title=\"六级标题(###### 六级标题)\"></a>六级标题(###### 六级标题)</h6><h3 id=\"2、列表\"><a href=\"#2、列表\" class=\"headerlink\" title=\"2、列表\"></a>2、列表</h3><h4 id=\"2-1-有序列表-格式：1-列表项\"><a href=\"#2-1-有序列表-格式：1-列表项\" class=\"headerlink\" title=\"2.1 有序列表 格式：1.列表项\"></a>2.1 有序列表 <code>格式：1.列表项</code></h4><p>1.列表项1（1.列表项1）<br>2.列表项2（2.列表项2）<br>3.列表项3（3.列表项3）</p>\n<h4 id=\"2-2-无序列表-格式：-列表项、-列表项、-列表项\"><a href=\"#2-2-无序列表-格式：-列表项、-列表项、-列表项\" class=\"headerlink\" title=\"2.2 无序列表 格式：-列表项、*列表项、+列表项\"></a>2.2 无序列表 <code>格式：-列表项、*列表项、+列表项</code></h4><ul>\n<li>列表项1（- 列表项1）</li>\n</ul>\n<ul>\n<li>列表项2（+ 列表项2）</li>\n</ul>\n<ul>\n<li>列表项3（* 列表项3）</li>\n</ul>\n<h3 id=\"3、链接与图片\"><a href=\"#3、链接与图片\" class=\"headerlink\" title=\"3、链接与图片\"></a>3、链接与图片</h3><h4 id=\"3-1-链接-格式：-文本-链接\"><a href=\"#3-1-链接-格式：-文本-链接\" class=\"headerlink\" title=\"3.1 链接 格式：\\[文本](链接)\"></a>3.1 链接 <code>格式：\\[文本](链接)</code></h4><p>[百度](<a href=\"http://www.baidu.com\" target=\"_blank\" rel=\"noopener\">http://www.baidu.com</a>)</p>\n<h4 id=\"3-2-图片-格式：-文本-图片链接\"><a href=\"#3-2-图片-格式：-文本-图片链接\" class=\"headerlink\" title=\"3.2 图片 格式：\\![文本]\\(图片链接)\"></a>3.2 图片 <code>格式：\\![文本]\\(图片链接)</code></h4><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/images/logo.png\" alt=\"logo\" title>\n                </div>\n                <div class=\"image-caption\">logo</div>\n            </figure>\n<h3 id=\"4、表格\"><a href=\"#4、表格\" class=\"headerlink\" title=\"4、表格\"></a>4、表格</h3><h6 id=\"语法：第二行中“—-：–：-—”冒号用于设置表格的对齐方式，左边表示左对齐，右边表示右对齐，放两边表示居中，不放冒号（默认状态）表示表头居中内容居左。\"><a href=\"#语法：第二行中“—-：–：-—”冒号用于设置表格的对齐方式，左边表示左对齐，右边表示右对齐，放两边表示居中，不放冒号（默认状态）表示表头居中内容居左。\" class=\"headerlink\" title=\"语法：第二行中“—-|：–：|—”冒号用于设置表格的对齐方式，左边表示左对齐，右边表示右对齐，放两边表示居中，不放冒号（默认状态）表示表头居中内容居左。\"></a>语法：<code>第二行中“—-|：–：|—”冒号用于设置表格的对齐方式，左边表示左对齐，右边表示右对齐，放两边表示居中，不放冒号（默认状态）表示表头居中内容居左。</code></h6><table>\n<thead>\n<tr>\n<th>Tables</th>\n<th style=\"text-align:center\">Are</th>\n<th style=\"text-align:right\">Cool</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>col 3 is</td>\n<td style=\"text-align:center\">right-aligned</td>\n<td style=\"text-align:right\">$1600</td>\n</tr>\n<tr>\n<td>col 2 is</td>\n<td style=\"text-align:center\">centered</td>\n<td style=\"text-align:right\">$12</td>\n</tr>\n<tr>\n<td>zebra stripes</td>\n<td style=\"text-align:center\">are neat</td>\n<td style=\"text-align:right\">$1</td>\n</tr>\n</tbody>\n</table>\n<h6 id=\"简写模式，省略了两边的“-”。\"><a href=\"#简写模式，省略了两边的“-”。\" class=\"headerlink\" title=\"简写模式，省略了两边的“|”。\"></a>简写模式，省略了两边的“|”。</h6><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dog | bird  | cat</span><br><span class=\"line\">-----|-----|-----</span><br><span class=\"line\">bar  | bear | box</span><br><span class=\"line\">bar  | bear | box</span><br></pre></td></tr></table></figure>\n<table>\n<thead>\n<tr>\n<th>dog</th>\n<th>bird</th>\n<th>cat</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>bar</td>\n<td>bear</td>\n<td>box</td>\n</tr>\n<tr>\n<td>bar</td>\n<td>bear</td>\n<td>box</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"5、粗体和斜体\"><a href=\"#5、粗体和斜体\" class=\"headerlink\" title=\"5、粗体和斜体\"></a>5、粗体和斜体</h3><p><strong>我是粗体</strong><code>(**我是粗体**)</code><br><em>我是斜体</em> <code>(*我是斜体*)</code></p>\n<h3 id=\"6、代码编写\"><a href=\"#6、代码编写\" class=\"headerlink\" title=\"6、代码编写\"></a>6、代码编写</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">window, document</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> getRem = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">document</span>) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">var</span> html = <span class=\"built_in\">document</span>.documentElement;</span><br><span class=\"line\">          <span class=\"keyword\">var</span> hWidth = (html.getBoundingClientRect().width) * (<span class=\"number\">750</span> / <span class=\"number\">352</span>);</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(hWidth)</span><br><span class=\"line\">          html.style.fontSize = hWidth / <span class=\"number\">16</span> + <span class=\"string\">\"px\"</span>;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(html.style.fontSize)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      getRem();</span><br><span class=\"line\">      <span class=\"built_in\">window</span>.onresize = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        getRem();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">&#125;)(<span class=\"built_in\">window</span>, <span class=\"built_in\">document</span>)</span><br></pre></td></tr></table></figure>\n"},{"title":"js原生方法实现react开发模式与组件化包装","date":"2020-02-25T14:04:02.000Z","_content":"\n## react 原生开发模式\n\n```html\n<!-- 更加接近react的开发模式 -->\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Document</title>\n  </head>\n\n  <body>\n    <div id=\"root\"></div>\n    <script>\n      var root = document.getElementById('root');\n      // 状态\n      var state = {\n        like: false,\n      };\n      var setState = function(newState) {\n        state = {\n          ...state,\n          ...newState,\n        };\n        render();\n      };\n      // 渲染\n      var render = function() {\n        root.innerHTML = `\n      <button type='button' style='color:${state.like ? 'red' : 'black'}' onclick='handleClick()'>\n      ${state.like ? '已赞' : '喜欢'}\n      </button>\n      `;\n      };\n      var handleClick = function() {\n        setState({\n          like: !state.like,\n        });\n      };\n      render();\n    </script>\n  </body>\n</html>\n```\n\n## 组件化包装\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Document</title>\n  </head>\n  <!-- 组件化包装 -->\n\n  <body>\n    <div id=\"root\"></div>\n    <script>\n      var root = document.getElementById('root');\n      // 提取setState方法\n      class Component {\n        setState(newState) {\n          this.state = {\n            ...this.state,\n            ...newState,\n          };\n        }\n      }\n      // extends 继承组件Component的setState方法 + super()\n      class Button extends Component {\n        constructor() {\n          super();\n          this.state = {\n            like: true,\n          };\n          this.render();\n        }\n        // setState(newState) {\n        //   this.state = {\n        //     ...this.state,\n        //     newState\n        //   }\n        //   this.render()\n        // }\n        render() {\n          const state = this.state;\n          return `\n           <button type='button' style='color:${state.like ? 'red' : 'black'}'>\n      ${state.like ? '已赞' : '喜欢'}\n      </button>\n        `;\n        }\n      }\n      // extends 继承组件Component的setState方法 + super()\n      class Title extends Component {\n        constructor() {\n          super();\n          this.state = {\n            text: '这是一个标题',\n          };\n        }\n        // setState(newState) {\n        //   this.state = {\n        //     ...this.state,\n        //     newState\n        //   }\n        // }\n        render() {\n          return `<h1>${this.state.text}</h1>`;\n        }\n      }\n      // 组件复用\n      class Wrap {\n        constructor() {}\n        render() {\n          return `Wrap ${new Title().render()} ${new Button().render()}`;\n        }\n      }\n      root.innerHTML = new Wrap().render();\n    </script>\n  </body>\n</html>\n```\n","source":"_posts/js原生方法实现react开发模式与组件化包装.md","raw":"---\ntitle: js原生方法实现react开发模式与组件化包装\ndate: 2020-02-25 22:04:02\ntags: ['react']\n---\n\n## react 原生开发模式\n\n```html\n<!-- 更加接近react的开发模式 -->\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Document</title>\n  </head>\n\n  <body>\n    <div id=\"root\"></div>\n    <script>\n      var root = document.getElementById('root');\n      // 状态\n      var state = {\n        like: false,\n      };\n      var setState = function(newState) {\n        state = {\n          ...state,\n          ...newState,\n        };\n        render();\n      };\n      // 渲染\n      var render = function() {\n        root.innerHTML = `\n      <button type='button' style='color:${state.like ? 'red' : 'black'}' onclick='handleClick()'>\n      ${state.like ? '已赞' : '喜欢'}\n      </button>\n      `;\n      };\n      var handleClick = function() {\n        setState({\n          like: !state.like,\n        });\n      };\n      render();\n    </script>\n  </body>\n</html>\n```\n\n## 组件化包装\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Document</title>\n  </head>\n  <!-- 组件化包装 -->\n\n  <body>\n    <div id=\"root\"></div>\n    <script>\n      var root = document.getElementById('root');\n      // 提取setState方法\n      class Component {\n        setState(newState) {\n          this.state = {\n            ...this.state,\n            ...newState,\n          };\n        }\n      }\n      // extends 继承组件Component的setState方法 + super()\n      class Button extends Component {\n        constructor() {\n          super();\n          this.state = {\n            like: true,\n          };\n          this.render();\n        }\n        // setState(newState) {\n        //   this.state = {\n        //     ...this.state,\n        //     newState\n        //   }\n        //   this.render()\n        // }\n        render() {\n          const state = this.state;\n          return `\n           <button type='button' style='color:${state.like ? 'red' : 'black'}'>\n      ${state.like ? '已赞' : '喜欢'}\n      </button>\n        `;\n        }\n      }\n      // extends 继承组件Component的setState方法 + super()\n      class Title extends Component {\n        constructor() {\n          super();\n          this.state = {\n            text: '这是一个标题',\n          };\n        }\n        // setState(newState) {\n        //   this.state = {\n        //     ...this.state,\n        //     newState\n        //   }\n        // }\n        render() {\n          return `<h1>${this.state.text}</h1>`;\n        }\n      }\n      // 组件复用\n      class Wrap {\n        constructor() {}\n        render() {\n          return `Wrap ${new Title().render()} ${new Button().render()}`;\n        }\n      }\n      root.innerHTML = new Wrap().render();\n    </script>\n  </body>\n</html>\n```\n","slug":"js原生方法实现react开发模式与组件化包装","published":1,"updated":"2021-10-09T08:48:32.072Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzabi001g5c549ibuw4gd","content":"<h2 id=\"react-原生开发模式\"><a href=\"#react-原生开发模式\" class=\"headerlink\" title=\"react 原生开发模式\"></a>react 原生开发模式</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 更加接近react的开发模式 --&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"root\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> root = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'root'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">// 状态</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> state = &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        like: <span class=\"literal\">false</span>,</span></span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> setState = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">newState</span>) </span>&#123;</span></span><br><span class=\"line\">        state = &#123;</span><br><span class=\"line\">          ...state,</span><br><span class=\"line\">          ...newState,</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        render();</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">// 渲染</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> render = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\">        root.innerHTML = `</span><br><span class=\"line\"><span class=\"javascript\">      &lt;button type=<span class=\"string\">'button'</span> style=<span class=\"string\">'color:$&#123;state.like ? '</span>red<span class=\"string\">' : '</span>black<span class=\"string\">'&#125;'</span> onclick=<span class=\"string\">'handleClick()'</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">      $&#123;state.like ? <span class=\"string\">'已赞'</span> : <span class=\"string\">'喜欢'</span>&#125;</span></span><br><span class=\"line\"><span class=\"xml\">      <span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\">      `;</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> handleClick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\">        setState(&#123;</span><br><span class=\"line\">          like: !state.like,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      render();</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"组件化包装\"><a href=\"#组件化包装\" class=\"headerlink\" title=\"组件化包装\"></a>组件化包装</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- 组件化包装 --&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"root\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> root = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'root'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">// 提取setState方法</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Component</span> </span>&#123;</span></span><br><span class=\"line\">        setState(newState) &#123;</span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">this</span>.state = &#123;</span></span><br><span class=\"line\">            ...this.state,</span><br><span class=\"line\">            ...newState,</span><br><span class=\"line\">          &#125;;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">// extends 继承组件Component的setState方法 + super()</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Button</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">constructor</span>() &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">super</span>();</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">this</span>.state = &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            like: <span class=\"literal\">true</span>,</span></span><br><span class=\"line\">          &#125;;</span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">this</span>.render();</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// setState(newState) &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//   this.state = &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//     ...this.state,</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//     newState</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//   &#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//   this.render()</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// &#125;</span></span></span><br><span class=\"line\">        render() &#123;</span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">const</span> state = <span class=\"keyword\">this</span>.state;</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">return</span> <span class=\"string\">`</span></span></span><br><span class=\"line\"><span class=\"javascript\">           &lt;button type=<span class=\"string\">'button'</span> style=<span class=\"string\">'color:$&#123;state.like ? '</span>red<span class=\"string\">' : '</span>black<span class=\"string\">'&#125;'</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">      $&#123;state.like ? <span class=\"string\">'已赞'</span> : <span class=\"string\">'喜欢'</span>&#125;</span></span><br><span class=\"line\"><span class=\"xml\">      <span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\">        `;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">// extends 继承组件Component的setState方法 + super()</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Title</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">constructor</span>() &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">super</span>();</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">this</span>.state = &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            text: <span class=\"string\">'这是一个标题'</span>,</span></span><br><span class=\"line\">          &#125;;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// setState(newState) &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//   this.state = &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//     ...this.state,</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//     newState</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//   &#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// &#125;</span></span></span><br><span class=\"line\">        render() &#123;</span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">return</span> <span class=\"string\">`&lt;h1&gt;<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.state.text&#125;</span>&lt;/h1&gt;`</span>;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">// 组件复用</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Wrap</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">constructor</span>() &#123;&#125;</span></span><br><span class=\"line\">        render() &#123;</span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">return</span> <span class=\"string\">`Wrap <span class=\"subst\">$&#123;<span class=\"keyword\">new</span> Title().render()&#125;</span> <span class=\"subst\">$&#123;<span class=\"keyword\">new</span> Button().render()&#125;</span>`</span>;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"><span class=\"javascript\">      root.innerHTML = <span class=\"keyword\">new</span> Wrap().render();</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"react-原生开发模式\"><a href=\"#react-原生开发模式\" class=\"headerlink\" title=\"react 原生开发模式\"></a>react 原生开发模式</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 更加接近react的开发模式 --&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"root\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> root = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'root'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">// 状态</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> state = &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        like: <span class=\"literal\">false</span>,</span></span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> setState = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">newState</span>) </span>&#123;</span></span><br><span class=\"line\">        state = &#123;</span><br><span class=\"line\">          ...state,</span><br><span class=\"line\">          ...newState,</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        render();</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">// 渲染</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> render = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\">        root.innerHTML = `</span><br><span class=\"line\"><span class=\"javascript\">      &lt;button type=<span class=\"string\">'button'</span> style=<span class=\"string\">'color:$&#123;state.like ? '</span>red<span class=\"string\">' : '</span>black<span class=\"string\">'&#125;'</span> onclick=<span class=\"string\">'handleClick()'</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">      $&#123;state.like ? <span class=\"string\">'已赞'</span> : <span class=\"string\">'喜欢'</span>&#125;</span></span><br><span class=\"line\"><span class=\"xml\">      <span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\">      `;</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> handleClick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\">        setState(&#123;</span><br><span class=\"line\">          like: !state.like,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      render();</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"组件化包装\"><a href=\"#组件化包装\" class=\"headerlink\" title=\"组件化包装\"></a>组件化包装</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- 组件化包装 --&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"root\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> root = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'root'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">// 提取setState方法</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Component</span> </span>&#123;</span></span><br><span class=\"line\">        setState(newState) &#123;</span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">this</span>.state = &#123;</span></span><br><span class=\"line\">            ...this.state,</span><br><span class=\"line\">            ...newState,</span><br><span class=\"line\">          &#125;;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">// extends 继承组件Component的setState方法 + super()</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Button</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">constructor</span>() &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">super</span>();</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">this</span>.state = &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            like: <span class=\"literal\">true</span>,</span></span><br><span class=\"line\">          &#125;;</span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">this</span>.render();</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// setState(newState) &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//   this.state = &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//     ...this.state,</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//     newState</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//   &#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//   this.render()</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// &#125;</span></span></span><br><span class=\"line\">        render() &#123;</span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">const</span> state = <span class=\"keyword\">this</span>.state;</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">return</span> <span class=\"string\">`</span></span></span><br><span class=\"line\"><span class=\"javascript\">           &lt;button type=<span class=\"string\">'button'</span> style=<span class=\"string\">'color:$&#123;state.like ? '</span>red<span class=\"string\">' : '</span>black<span class=\"string\">'&#125;'</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">      $&#123;state.like ? <span class=\"string\">'已赞'</span> : <span class=\"string\">'喜欢'</span>&#125;</span></span><br><span class=\"line\"><span class=\"xml\">      <span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\">        `;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">// extends 继承组件Component的setState方法 + super()</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Title</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">constructor</span>() &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">super</span>();</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">this</span>.state = &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            text: <span class=\"string\">'这是一个标题'</span>,</span></span><br><span class=\"line\">          &#125;;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// setState(newState) &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//   this.state = &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//     ...this.state,</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//     newState</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//   &#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// &#125;</span></span></span><br><span class=\"line\">        render() &#123;</span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">return</span> <span class=\"string\">`&lt;h1&gt;<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.state.text&#125;</span>&lt;/h1&gt;`</span>;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">// 组件复用</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Wrap</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">constructor</span>() &#123;&#125;</span></span><br><span class=\"line\">        render() &#123;</span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">return</span> <span class=\"string\">`Wrap <span class=\"subst\">$&#123;<span class=\"keyword\">new</span> Title().render()&#125;</span> <span class=\"subst\">$&#123;<span class=\"keyword\">new</span> Button().render()&#125;</span>`</span>;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"><span class=\"javascript\">      root.innerHTML = <span class=\"keyword\">new</span> Wrap().render();</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n"},{"title":"nodejs中常见的跨域处理","date":"2020-02-23T13:29:53.000Z","_content":"\n## 跨域问题\n\najax 同源策略 协议 主机(ip,域名) 端口号\n\n1. 协议，端口\n2. cors\n3. header 头文件信息\n4. jsonp\n5. 服务器\n\n## 解决 🧍‍♀️\n\n> 协议，端口\n\n将跨域的文件放入与服务器一样的文件下\n\n> cors\n\n以 express 为例\n\n```js\nconst express = require('express');\nconst cors = require('cors');\n...\nyour codes...\n...\napp.use(cors());\n```\n\n> header 头文件信息\n\n以 express 为例\n\n```js\nconst express = require('express');\n...\nyour codes...\n...\napp.all('*', function(req, res, next) {\n    res.header(\"Access-Control-Allow-Origin\", \"*\");\n    res.header(\"Access-Control-Allow-Headers\", \"X-Requested-With,Content-Type\");\n    res.header(\"Access-Control-Allow-Methods\",\"PUT,POST,GET,DELETE,OPTIONS\");\n    next();\n});\n```\n\n> jsonp\n\n```js\nJSONP.getJSON('http://api.com', data, function(data) {\n  console.log(data);\n});\n```\n\n> 服务器\n\n```js\nconst express = require('express');\nconst request = require('request');\n...\nyour codes...\n...\n// 本地api接口\napp.get('/cors', (req, res) => {\n  // 发送一个服务器请求\n  console.log('cors.html的ajax');\n  // 目标服务器，你想请求的服务器api\n  request('http://www.google.com/xx/api/v1', (err, response, body) => {\n    console.log(body);\n    if (!err) {\n      res.send(body);\n    } else {\n      console.log(err);\n    }\n  });\n});\n```\n","source":"_posts/nodejs中常见的跨域处理.md","raw":"---\ntitle: nodejs中常见的跨域处理\ndate: 2020-02-23 21:29:53\ntags: ['nodejs', '跨域']\n---\n\n## 跨域问题\n\najax 同源策略 协议 主机(ip,域名) 端口号\n\n1. 协议，端口\n2. cors\n3. header 头文件信息\n4. jsonp\n5. 服务器\n\n## 解决 🧍‍♀️\n\n> 协议，端口\n\n将跨域的文件放入与服务器一样的文件下\n\n> cors\n\n以 express 为例\n\n```js\nconst express = require('express');\nconst cors = require('cors');\n...\nyour codes...\n...\napp.use(cors());\n```\n\n> header 头文件信息\n\n以 express 为例\n\n```js\nconst express = require('express');\n...\nyour codes...\n...\napp.all('*', function(req, res, next) {\n    res.header(\"Access-Control-Allow-Origin\", \"*\");\n    res.header(\"Access-Control-Allow-Headers\", \"X-Requested-With,Content-Type\");\n    res.header(\"Access-Control-Allow-Methods\",\"PUT,POST,GET,DELETE,OPTIONS\");\n    next();\n});\n```\n\n> jsonp\n\n```js\nJSONP.getJSON('http://api.com', data, function(data) {\n  console.log(data);\n});\n```\n\n> 服务器\n\n```js\nconst express = require('express');\nconst request = require('request');\n...\nyour codes...\n...\n// 本地api接口\napp.get('/cors', (req, res) => {\n  // 发送一个服务器请求\n  console.log('cors.html的ajax');\n  // 目标服务器，你想请求的服务器api\n  request('http://www.google.com/xx/api/v1', (err, response, body) => {\n    console.log(body);\n    if (!err) {\n      res.send(body);\n    } else {\n      console.log(err);\n    }\n  });\n});\n```\n","slug":"nodejs中常见的跨域处理","published":1,"updated":"2021-10-09T08:48:32.074Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzabj001j5c543spchu1w","content":"<h2 id=\"跨域问题\"><a href=\"#跨域问题\" class=\"headerlink\" title=\"跨域问题\"></a>跨域问题</h2><p>ajax 同源策略 协议 主机(ip,域名) 端口号</p>\n<ol>\n<li>协议，端口</li>\n<li>cors</li>\n<li>header 头文件信息</li>\n<li>jsonp</li>\n<li>服务器</li>\n</ol>\n<h2 id=\"解决-🧍‍♀️\"><a href=\"#解决-🧍‍♀️\" class=\"headerlink\" title=\"解决 🧍‍♀️\"></a>解决 🧍‍♀️</h2><blockquote>\n<p>协议，端口</p>\n</blockquote>\n<p>将跨域的文件放入与服务器一样的文件下</p>\n<blockquote>\n<p>cors</p>\n</blockquote>\n<p>以 express 为例</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> cors = <span class=\"built_in\">require</span>(<span class=\"string\">'cors'</span>);</span><br><span class=\"line\">...</span><br><span class=\"line\">your codes...</span><br><span class=\"line\">...</span><br><span class=\"line\">app.use(cors());</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>header 头文件信息</p>\n</blockquote>\n<p>以 express 为例</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>);</span><br><span class=\"line\">...</span><br><span class=\"line\">your codes...</span><br><span class=\"line\">...</span><br><span class=\"line\">app.all(<span class=\"string\">'*'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res, next</span>) </span>&#123;</span><br><span class=\"line\">    res.header(<span class=\"string\">\"Access-Control-Allow-Origin\"</span>, <span class=\"string\">\"*\"</span>);</span><br><span class=\"line\">    res.header(<span class=\"string\">\"Access-Control-Allow-Headers\"</span>, <span class=\"string\">\"X-Requested-With,Content-Type\"</span>);</span><br><span class=\"line\">    res.header(<span class=\"string\">\"Access-Control-Allow-Methods\"</span>,<span class=\"string\">\"PUT,POST,GET,DELETE,OPTIONS\"</span>);</span><br><span class=\"line\">    next();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>jsonp</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">JSONP.getJSON(<span class=\"string\">'http://api.com'</span>, data, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>服务器</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> request = <span class=\"built_in\">require</span>(<span class=\"string\">'request'</span>);</span><br><span class=\"line\">...</span><br><span class=\"line\">your codes...</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"comment\">// 本地api接口</span></span><br><span class=\"line\">app.get(<span class=\"string\">'/cors'</span>, (req, res) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 发送一个服务器请求</span></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'cors.html的ajax'</span>);</span><br><span class=\"line\">  <span class=\"comment\">// 目标服务器，你想请求的服务器api</span></span><br><span class=\"line\">  request(<span class=\"string\">'http://www.google.com/xx/api/v1'</span>, (err, response, body) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(body);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!err) &#123;</span><br><span class=\"line\">      res.send(body);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"跨域问题\"><a href=\"#跨域问题\" class=\"headerlink\" title=\"跨域问题\"></a>跨域问题</h2><p>ajax 同源策略 协议 主机(ip,域名) 端口号</p>\n<ol>\n<li>协议，端口</li>\n<li>cors</li>\n<li>header 头文件信息</li>\n<li>jsonp</li>\n<li>服务器</li>\n</ol>\n<h2 id=\"解决-🧍‍♀️\"><a href=\"#解决-🧍‍♀️\" class=\"headerlink\" title=\"解决 🧍‍♀️\"></a>解决 🧍‍♀️</h2><blockquote>\n<p>协议，端口</p>\n</blockquote>\n<p>将跨域的文件放入与服务器一样的文件下</p>\n<blockquote>\n<p>cors</p>\n</blockquote>\n<p>以 express 为例</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> cors = <span class=\"built_in\">require</span>(<span class=\"string\">'cors'</span>);</span><br><span class=\"line\">...</span><br><span class=\"line\">your codes...</span><br><span class=\"line\">...</span><br><span class=\"line\">app.use(cors());</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>header 头文件信息</p>\n</blockquote>\n<p>以 express 为例</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>);</span><br><span class=\"line\">...</span><br><span class=\"line\">your codes...</span><br><span class=\"line\">...</span><br><span class=\"line\">app.all(<span class=\"string\">'*'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res, next</span>) </span>&#123;</span><br><span class=\"line\">    res.header(<span class=\"string\">\"Access-Control-Allow-Origin\"</span>, <span class=\"string\">\"*\"</span>);</span><br><span class=\"line\">    res.header(<span class=\"string\">\"Access-Control-Allow-Headers\"</span>, <span class=\"string\">\"X-Requested-With,Content-Type\"</span>);</span><br><span class=\"line\">    res.header(<span class=\"string\">\"Access-Control-Allow-Methods\"</span>,<span class=\"string\">\"PUT,POST,GET,DELETE,OPTIONS\"</span>);</span><br><span class=\"line\">    next();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>jsonp</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">JSONP.getJSON(<span class=\"string\">'http://api.com'</span>, data, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>服务器</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> request = <span class=\"built_in\">require</span>(<span class=\"string\">'request'</span>);</span><br><span class=\"line\">...</span><br><span class=\"line\">your codes...</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"comment\">// 本地api接口</span></span><br><span class=\"line\">app.get(<span class=\"string\">'/cors'</span>, (req, res) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 发送一个服务器请求</span></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'cors.html的ajax'</span>);</span><br><span class=\"line\">  <span class=\"comment\">// 目标服务器，你想请求的服务器api</span></span><br><span class=\"line\">  request(<span class=\"string\">'http://www.google.com/xx/api/v1'</span>, (err, response, body) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(body);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!err) &#123;</span><br><span class=\"line\">      res.send(body);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n"},{"title":"vue-cli axios 项目有关于refresh_token、access_token过期失效刷新的处理","date":"2019-05-22T14:24:19.000Z","_content":"## 需求\n用户登录之后，返回access_token, refresh_token 还有返回失效时间20秒.\n1,假如用户一直在数据交互。当access_token 失效了就用refresh_token 来更新一下 access_token.\n2,假如用户登录之后啥也不干，那么access_token 失效了就跳到login页面.\n3,假如用户在失效前30分钟存在数据交互，则用refresh_token 刷新 access_token。\n## 前言\n于在网上搜索了一大半。都是说的是在接口401状态去用refresh_token 去调取新 access_token，这样那还不是存在一直登录不退出的状态？不现实。。这里又涉及到axios的二次封装。刚好项目中用到element-ui， 索性把错误状态提示也做了一下。思路则是在请求拦截，响应拦截做文章。废话不多说。下面是代码。\n[源代码](https://chengheai.github.io/daily-vue-demo/#/axios)\n## 代码\n``` javascript\n  import axios from 'axios';\n  import Cookies from 'js-cookie';\n  import { Message } from 'element-ui';\n  import router from './../router/index';\n  axios.defaults.timeout = 10000;\n\n  var init = {                                              ❤️ 没画好？重画 [更多...]\n    // 记录时间戳\n    timer: null,\n    // 是否调过refresh_token函数\n    isRefresh: false,\n    // 公用提示                                                  🥕🥕🥕         🥕🥕🥕🥕\n    openMessage: function(msg) {                             🥕🥕🥕🥕       🥕🥕🥕🥕🥕\n      Message({                                            🥕🥕🥕🥕🥕     🥕🥕🥕🥕🥕\n        message: msg,                                      🥕🥕🥕🥕🥕  🥕🥕🥕🥕🥕🥕\n        type: 'error',                                      🥕 🥕🥕🥕🥕🥕🥕🥕🥕🥕\n        showClose: true,                                     🥕 🥕🥕🥕🥕🥕🥕🥕🥕🥕🥕\n      });                                                      🥕🥕🥕🥕🥕🥕🥕🥕🥕\n    },                                                           🥕🥕🥕🥕🥕🥕🥕\n    getRefreshToken: function() {                                  🥕🥕🥕🥕🥕🥕\n      let params = {                                                 🥕🥕🥕🥕🥕、\n        refresh_token: Cookies.get('refresh_token'),                   🥕🥕🥕🥕\n      };                                                                 🥕🥕🥕\n      let that = this;                                                     🥕🥕\n      axios({\n        method: 'post',\n        url: `api/v1/refresh_token${params}`,\n      })\n        .then(function(res) {\n          if (res.data.access_token) {\n            // 防止重复调refresh_token接口\n            that.isRefresh = false;\n            let result = res.data;\n            let millisecond = new Date().getTime();\n            let expiresTime = result.expires_in * 1000;\n            let utilTime = millisecond + expiresTime;\n            Cookies.set('access_token', result.access_token, { expires: expiresTime });\n            Cookies.set('utilTime', utilTime);\n            Cookies.set('refresh_token', result.refresh_token);\n            Cookies.set('expires_in', result.expires_in);\n          } else {\n            //刷新token失败只能跳转到登录页重新登录\n            localStorage.clear();\n            Cookies.remove('access_token');\n            Cookies.remove('utilTime');\n            Cookies.remove('expires_in');\n            Cookies.remove('refresh_token');\n            router.replace({\n              path: '/login',\n              query: { redirect: router.currentRoute.fullPath },\n            });\n          }\n        })\n        .catch(function(err) {\n          //刷新token失败只能跳转到登录页重新登录\n          get_sys_logout();\n          localStorage.clear();\n          Cookies.remove('access_token');\n          Cookies.remove('utilTime');\n          Cookies.remove('expires_in');\n          Cookies.remove('refresh_token');\n          console.log(err);\n          that.openMessage('登录失效');\n          router.replace({\n            path: '/login',\n            query: { redirect: router.currentRoute.fullPath },\n          });\n        });\n    },\n  };\n\n  //http request 拦截器\n  axios.interceptors.request.use(\n    config => {\n      config.data = JSON.stringify(config.data);\n      init.timer = new Date().getTime();\n      if (Cookies.get('access_token')) {\n        if ((parseInt(Cookies.get('utilTime')) - init.timer) / (1000 * 60 * 60) < 0) {\n          Cookies.remove('access_token');\n          Cookies.remove('utilTime');\n          Cookies.remove('expires_in');\n          Cookies.remove('refresh_token');\n          get_sys_logout();\n          localStorage.clear();\n          router.replace({\n            path: '/login',\n            query: { redirect: router.currentRoute.fullPath },\n          });\n        }\n        config.headers = {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${Cookies.get('access_token')}`,\n        };\n      } else {\n        config.headers = {\n          'Content-Type': 'application/json',\n        };\n      }\n      return config;\n    },\n    error => {\n      Message.error({\n        message: '加载超时',\n      });\n      return Promise.reject(error);\n    }\n  );\n\n  //响应拦截器即异常处理\n  axios.interceptors.response.use(\n    response => {\n      if (Cookies.get('utilTime')) {\n        if (!init.isRefresh) {\n          // 是否是到期前30分钟\n          if ((parseInt(Cookies.get('utilTime')) - init.timer) / (1000 * 60 * 60) < 0.5) {\n            init.isRefresh = true;\n            init.getRefreshToken();\n          }\n        }\n      }\n      return response;\n    },\n    err => {\n      // debugger\n      if (err && err.response) {\n        switch (err.response.status) {\n          case 400:\n            console.log('错误请求');\n            break;\n          case 401:\n            //刷新token失败只能跳转到登录页重新登录\n            get_sys_logout();\n            localStorage.clear();\n            Cookies.remove('access_token');\n            Cookies.remove('expires_in');\n            Cookies.remove('utilTime');\n            Cookies.remove('refresh_token');\n            init.openMessage('登录失效');\n            router.replace({\n              path: '/login',\n              query: { redirect: router.currentRoute.fullPath },\n            });\n            break;\n          case 403:\n            init.openMessage('拒绝访问');\n            break;\n          case 404:\n            init.openMessage('请求错误,未找到该资源');\n            break;\n          case 405:\n            init.openMessage('请求方法未允许');\n            break;\n          case 408:\n            init.openMessage('请求超时');\n            break;\n          case 500:\n            init.openMessage('服务器端出错');\n            break;\n          case 501:\n            init.openMessage('网络未实现');\n            break;\n          case 502:\n            init.openMessage('网络错误');\n            break;\n          case 503:\n            init.openMessage('服务不可用');\n            break;\n          case 504:\n            init.openMessage('网络超时');\n            break;\n          case 505:\n            init.openMessage('http版本不支持该请求');\n            break;\n          default:\n            init.openMessage(`连接错误${err.response.status}`);\n        }\n      } else {\n        init.openMessage('连接服务器失败');\n      }\n      return Promise.reject(err.response);\n    }\n  );\n  export default axios;\n\n```\n","source":"_posts/vue-cli项目有关于refresh-token、access-token过期失效刷新的处理.md","raw":"---\ntitle: vue-cli axios 项目有关于refresh_token、access_token过期失效刷新的处理\ndate: 2019-05-22 22:24:19\ntags: ['vue', 'token', 'axios']\n---\n## 需求\n用户登录之后，返回access_token, refresh_token 还有返回失效时间20秒.\n1,假如用户一直在数据交互。当access_token 失效了就用refresh_token 来更新一下 access_token.\n2,假如用户登录之后啥也不干，那么access_token 失效了就跳到login页面.\n3,假如用户在失效前30分钟存在数据交互，则用refresh_token 刷新 access_token。\n## 前言\n于在网上搜索了一大半。都是说的是在接口401状态去用refresh_token 去调取新 access_token，这样那还不是存在一直登录不退出的状态？不现实。。这里又涉及到axios的二次封装。刚好项目中用到element-ui， 索性把错误状态提示也做了一下。思路则是在请求拦截，响应拦截做文章。废话不多说。下面是代码。\n[源代码](https://chengheai.github.io/daily-vue-demo/#/axios)\n## 代码\n``` javascript\n  import axios from 'axios';\n  import Cookies from 'js-cookie';\n  import { Message } from 'element-ui';\n  import router from './../router/index';\n  axios.defaults.timeout = 10000;\n\n  var init = {                                              ❤️ 没画好？重画 [更多...]\n    // 记录时间戳\n    timer: null,\n    // 是否调过refresh_token函数\n    isRefresh: false,\n    // 公用提示                                                  🥕🥕🥕         🥕🥕🥕🥕\n    openMessage: function(msg) {                             🥕🥕🥕🥕       🥕🥕🥕🥕🥕\n      Message({                                            🥕🥕🥕🥕🥕     🥕🥕🥕🥕🥕\n        message: msg,                                      🥕🥕🥕🥕🥕  🥕🥕🥕🥕🥕🥕\n        type: 'error',                                      🥕 🥕🥕🥕🥕🥕🥕🥕🥕🥕\n        showClose: true,                                     🥕 🥕🥕🥕🥕🥕🥕🥕🥕🥕🥕\n      });                                                      🥕🥕🥕🥕🥕🥕🥕🥕🥕\n    },                                                           🥕🥕🥕🥕🥕🥕🥕\n    getRefreshToken: function() {                                  🥕🥕🥕🥕🥕🥕\n      let params = {                                                 🥕🥕🥕🥕🥕、\n        refresh_token: Cookies.get('refresh_token'),                   🥕🥕🥕🥕\n      };                                                                 🥕🥕🥕\n      let that = this;                                                     🥕🥕\n      axios({\n        method: 'post',\n        url: `api/v1/refresh_token${params}`,\n      })\n        .then(function(res) {\n          if (res.data.access_token) {\n            // 防止重复调refresh_token接口\n            that.isRefresh = false;\n            let result = res.data;\n            let millisecond = new Date().getTime();\n            let expiresTime = result.expires_in * 1000;\n            let utilTime = millisecond + expiresTime;\n            Cookies.set('access_token', result.access_token, { expires: expiresTime });\n            Cookies.set('utilTime', utilTime);\n            Cookies.set('refresh_token', result.refresh_token);\n            Cookies.set('expires_in', result.expires_in);\n          } else {\n            //刷新token失败只能跳转到登录页重新登录\n            localStorage.clear();\n            Cookies.remove('access_token');\n            Cookies.remove('utilTime');\n            Cookies.remove('expires_in');\n            Cookies.remove('refresh_token');\n            router.replace({\n              path: '/login',\n              query: { redirect: router.currentRoute.fullPath },\n            });\n          }\n        })\n        .catch(function(err) {\n          //刷新token失败只能跳转到登录页重新登录\n          get_sys_logout();\n          localStorage.clear();\n          Cookies.remove('access_token');\n          Cookies.remove('utilTime');\n          Cookies.remove('expires_in');\n          Cookies.remove('refresh_token');\n          console.log(err);\n          that.openMessage('登录失效');\n          router.replace({\n            path: '/login',\n            query: { redirect: router.currentRoute.fullPath },\n          });\n        });\n    },\n  };\n\n  //http request 拦截器\n  axios.interceptors.request.use(\n    config => {\n      config.data = JSON.stringify(config.data);\n      init.timer = new Date().getTime();\n      if (Cookies.get('access_token')) {\n        if ((parseInt(Cookies.get('utilTime')) - init.timer) / (1000 * 60 * 60) < 0) {\n          Cookies.remove('access_token');\n          Cookies.remove('utilTime');\n          Cookies.remove('expires_in');\n          Cookies.remove('refresh_token');\n          get_sys_logout();\n          localStorage.clear();\n          router.replace({\n            path: '/login',\n            query: { redirect: router.currentRoute.fullPath },\n          });\n        }\n        config.headers = {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${Cookies.get('access_token')}`,\n        };\n      } else {\n        config.headers = {\n          'Content-Type': 'application/json',\n        };\n      }\n      return config;\n    },\n    error => {\n      Message.error({\n        message: '加载超时',\n      });\n      return Promise.reject(error);\n    }\n  );\n\n  //响应拦截器即异常处理\n  axios.interceptors.response.use(\n    response => {\n      if (Cookies.get('utilTime')) {\n        if (!init.isRefresh) {\n          // 是否是到期前30分钟\n          if ((parseInt(Cookies.get('utilTime')) - init.timer) / (1000 * 60 * 60) < 0.5) {\n            init.isRefresh = true;\n            init.getRefreshToken();\n          }\n        }\n      }\n      return response;\n    },\n    err => {\n      // debugger\n      if (err && err.response) {\n        switch (err.response.status) {\n          case 400:\n            console.log('错误请求');\n            break;\n          case 401:\n            //刷新token失败只能跳转到登录页重新登录\n            get_sys_logout();\n            localStorage.clear();\n            Cookies.remove('access_token');\n            Cookies.remove('expires_in');\n            Cookies.remove('utilTime');\n            Cookies.remove('refresh_token');\n            init.openMessage('登录失效');\n            router.replace({\n              path: '/login',\n              query: { redirect: router.currentRoute.fullPath },\n            });\n            break;\n          case 403:\n            init.openMessage('拒绝访问');\n            break;\n          case 404:\n            init.openMessage('请求错误,未找到该资源');\n            break;\n          case 405:\n            init.openMessage('请求方法未允许');\n            break;\n          case 408:\n            init.openMessage('请求超时');\n            break;\n          case 500:\n            init.openMessage('服务器端出错');\n            break;\n          case 501:\n            init.openMessage('网络未实现');\n            break;\n          case 502:\n            init.openMessage('网络错误');\n            break;\n          case 503:\n            init.openMessage('服务不可用');\n            break;\n          case 504:\n            init.openMessage('网络超时');\n            break;\n          case 505:\n            init.openMessage('http版本不支持该请求');\n            break;\n          default:\n            init.openMessage(`连接错误${err.response.status}`);\n        }\n      } else {\n        init.openMessage('连接服务器失败');\n      }\n      return Promise.reject(err.response);\n    }\n  );\n  export default axios;\n\n```\n","slug":"vue-cli项目有关于refresh-token、access-token过期失效刷新的处理","published":1,"updated":"2021-10-09T08:48:32.075Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzabl001n5c547a26o891","content":"<h2 id=\"需求\"><a href=\"#需求\" class=\"headerlink\" title=\"需求\"></a>需求</h2><p>用户登录之后，返回access_token, refresh_token 还有返回失效时间20秒.<br>1,假如用户一直在数据交互。当access_token 失效了就用refresh_token 来更新一下 access_token.<br>2,假如用户登录之后啥也不干，那么access_token 失效了就跳到login页面.<br>3,假如用户在失效前30分钟存在数据交互，则用refresh_token 刷新 access_token。</p>\n<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>于在网上搜索了一大半。都是说的是在接口401状态去用refresh_token 去调取新 access_token，这样那还不是存在一直登录不退出的状态？不现实。。这里又涉及到axios的二次封装。刚好项目中用到element-ui， 索性把错误状态提示也做了一下。思路则是在请求拦截，响应拦截做文章。废话不多说。下面是代码。<br><a href=\"https://chengheai.github.io/daily-vue-demo/#/axios\" target=\"_blank\" rel=\"noopener\">源代码</a></p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">'axios'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Cookies <span class=\"keyword\">from</span> <span class=\"string\">'js-cookie'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Message &#125; <span class=\"keyword\">from</span> <span class=\"string\">'element-ui'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> router <span class=\"keyword\">from</span> <span class=\"string\">'./../router/index'</span>;</span><br><span class=\"line\">axios.defaults.timeout = <span class=\"number\">10000</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> init = &#123;                                              ❤️ 没画好？重画 [更多...]</span><br><span class=\"line\">  <span class=\"comment\">// 记录时间戳</span></span><br><span class=\"line\">  timer: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"comment\">// 是否调过refresh_token函数</span></span><br><span class=\"line\">  isRefresh: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  <span class=\"comment\">// 公用提示                                                  🥕🥕🥕         🥕🥕🥕🥕</span></span><br><span class=\"line\">  openMessage: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">msg</span>) </span>&#123;                             🥕🥕🥕🥕       🥕🥕🥕🥕🥕</span><br><span class=\"line\">    Message(&#123;                                            🥕🥕🥕🥕🥕     🥕🥕🥕🥕🥕</span><br><span class=\"line\">      message: msg,                                      🥕🥕🥕🥕🥕  🥕🥕🥕🥕🥕🥕</span><br><span class=\"line\">      type: <span class=\"string\">'error'</span>,                                      🥕 🥕🥕🥕🥕🥕🥕🥕🥕🥕</span><br><span class=\"line\">      showClose: <span class=\"literal\">true</span>,                                     🥕 🥕🥕🥕🥕🥕🥕🥕🥕🥕🥕</span><br><span class=\"line\">    &#125;);                                                      🥕🥕🥕🥕🥕🥕🥕🥕🥕</span><br><span class=\"line\">  &#125;,                                                           🥕🥕🥕🥕🥕🥕🥕</span><br><span class=\"line\">  getRefreshToken: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;                                  🥕🥕🥕🥕🥕🥕</span><br><span class=\"line\">    <span class=\"keyword\">let</span> params = &#123;                                                 🥕🥕🥕🥕🥕、</span><br><span class=\"line\">      refresh_token: Cookies.get(<span class=\"string\">'refresh_token'</span>),                   🥕🥕🥕🥕</span><br><span class=\"line\">    &#125;;                                                                 🥕🥕🥕</span><br><span class=\"line\">    <span class=\"keyword\">let</span> that = <span class=\"keyword\">this</span>;                                                     🥕🥕</span><br><span class=\"line\">    axios(&#123;</span><br><span class=\"line\">      method: <span class=\"string\">'post'</span>,</span><br><span class=\"line\">      url: <span class=\"string\">`api/v1/refresh_token<span class=\"subst\">$&#123;params&#125;</span>`</span>,</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">      .then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (res.data.access_token) &#123;</span><br><span class=\"line\">          <span class=\"comment\">// 防止重复调refresh_token接口</span></span><br><span class=\"line\">          that.isRefresh = <span class=\"literal\">false</span>;</span><br><span class=\"line\">          <span class=\"keyword\">let</span> result = res.data;</span><br><span class=\"line\">          <span class=\"keyword\">let</span> millisecond = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</span><br><span class=\"line\">          <span class=\"keyword\">let</span> expiresTime = result.expires_in * <span class=\"number\">1000</span>;</span><br><span class=\"line\">          <span class=\"keyword\">let</span> utilTime = millisecond + expiresTime;</span><br><span class=\"line\">          Cookies.set(<span class=\"string\">'access_token'</span>, result.access_token, &#123; <span class=\"attr\">expires</span>: expiresTime &#125;);</span><br><span class=\"line\">          Cookies.set(<span class=\"string\">'utilTime'</span>, utilTime);</span><br><span class=\"line\">          Cookies.set(<span class=\"string\">'refresh_token'</span>, result.refresh_token);</span><br><span class=\"line\">          Cookies.set(<span class=\"string\">'expires_in'</span>, result.expires_in);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          <span class=\"comment\">//刷新token失败只能跳转到登录页重新登录</span></span><br><span class=\"line\">          localStorage.clear();</span><br><span class=\"line\">          Cookies.remove(<span class=\"string\">'access_token'</span>);</span><br><span class=\"line\">          Cookies.remove(<span class=\"string\">'utilTime'</span>);</span><br><span class=\"line\">          Cookies.remove(<span class=\"string\">'expires_in'</span>);</span><br><span class=\"line\">          Cookies.remove(<span class=\"string\">'refresh_token'</span>);</span><br><span class=\"line\">          router.replace(&#123;</span><br><span class=\"line\">            path: <span class=\"string\">'/login'</span>,</span><br><span class=\"line\">            query: &#123; <span class=\"attr\">redirect</span>: router.currentRoute.fullPath &#125;,</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//刷新token失败只能跳转到登录页重新登录</span></span><br><span class=\"line\">        get_sys_logout();</span><br><span class=\"line\">        localStorage.clear();</span><br><span class=\"line\">        Cookies.remove(<span class=\"string\">'access_token'</span>);</span><br><span class=\"line\">        Cookies.remove(<span class=\"string\">'utilTime'</span>);</span><br><span class=\"line\">        Cookies.remove(<span class=\"string\">'expires_in'</span>);</span><br><span class=\"line\">        Cookies.remove(<span class=\"string\">'refresh_token'</span>);</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">        that.openMessage(<span class=\"string\">'登录失效'</span>);</span><br><span class=\"line\">        router.replace(&#123;</span><br><span class=\"line\">          path: <span class=\"string\">'/login'</span>,</span><br><span class=\"line\">          query: &#123; <span class=\"attr\">redirect</span>: router.currentRoute.fullPath &#125;,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//http request 拦截器</span></span><br><span class=\"line\">axios.interceptors.request.use(</span><br><span class=\"line\">  config =&gt; &#123;</span><br><span class=\"line\">    config.data = <span class=\"built_in\">JSON</span>.stringify(config.data);</span><br><span class=\"line\">    init.timer = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Cookies.get(<span class=\"string\">'access_token'</span>)) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> ((<span class=\"built_in\">parseInt</span>(Cookies.get(<span class=\"string\">'utilTime'</span>)) - init.timer) / (<span class=\"number\">1000</span> * <span class=\"number\">60</span> * <span class=\"number\">60</span>) &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        Cookies.remove(<span class=\"string\">'access_token'</span>);</span><br><span class=\"line\">        Cookies.remove(<span class=\"string\">'utilTime'</span>);</span><br><span class=\"line\">        Cookies.remove(<span class=\"string\">'expires_in'</span>);</span><br><span class=\"line\">        Cookies.remove(<span class=\"string\">'refresh_token'</span>);</span><br><span class=\"line\">        get_sys_logout();</span><br><span class=\"line\">        localStorage.clear();</span><br><span class=\"line\">        router.replace(&#123;</span><br><span class=\"line\">          path: <span class=\"string\">'/login'</span>,</span><br><span class=\"line\">          query: &#123; <span class=\"attr\">redirect</span>: router.currentRoute.fullPath &#125;,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      config.headers = &#123;</span><br><span class=\"line\">        <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'application/json'</span>,</span><br><span class=\"line\">        Authorization: <span class=\"string\">`Bearer <span class=\"subst\">$&#123;Cookies.get(<span class=\"string\">'access_token'</span>)&#125;</span>`</span>,</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      config.headers = &#123;</span><br><span class=\"line\">        <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'application/json'</span>,</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> config;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  error =&gt; &#123;</span><br><span class=\"line\">    Message.error(&#123;</span><br><span class=\"line\">      message: <span class=\"string\">'加载超时'</span>,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.reject(error);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//响应拦截器即异常处理</span></span><br><span class=\"line\">axios.interceptors.response.use(</span><br><span class=\"line\">  response =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Cookies.get(<span class=\"string\">'utilTime'</span>)) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!init.isRefresh) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 是否是到期前30分钟</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> ((<span class=\"built_in\">parseInt</span>(Cookies.get(<span class=\"string\">'utilTime'</span>)) - init.timer) / (<span class=\"number\">1000</span> * <span class=\"number\">60</span> * <span class=\"number\">60</span>) &lt; <span class=\"number\">0.5</span>) &#123;</span><br><span class=\"line\">          init.isRefresh = <span class=\"literal\">true</span>;</span><br><span class=\"line\">          init.getRefreshToken();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> response;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  err =&gt; &#123;</span><br><span class=\"line\">    <span class=\"comment\">// debugger</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err &amp;&amp; err.response) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">switch</span> (err.response.status) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">400</span>:</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">'错误请求'</span>);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">401</span>:</span><br><span class=\"line\">          <span class=\"comment\">//刷新token失败只能跳转到登录页重新登录</span></span><br><span class=\"line\">          get_sys_logout();</span><br><span class=\"line\">          localStorage.clear();</span><br><span class=\"line\">          Cookies.remove(<span class=\"string\">'access_token'</span>);</span><br><span class=\"line\">          Cookies.remove(<span class=\"string\">'expires_in'</span>);</span><br><span class=\"line\">          Cookies.remove(<span class=\"string\">'utilTime'</span>);</span><br><span class=\"line\">          Cookies.remove(<span class=\"string\">'refresh_token'</span>);</span><br><span class=\"line\">          init.openMessage(<span class=\"string\">'登录失效'</span>);</span><br><span class=\"line\">          router.replace(&#123;</span><br><span class=\"line\">            path: <span class=\"string\">'/login'</span>,</span><br><span class=\"line\">            query: &#123; <span class=\"attr\">redirect</span>: router.currentRoute.fullPath &#125;,</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">403</span>:</span><br><span class=\"line\">          init.openMessage(<span class=\"string\">'拒绝访问'</span>);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">404</span>:</span><br><span class=\"line\">          init.openMessage(<span class=\"string\">'请求错误,未找到该资源'</span>);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">405</span>:</span><br><span class=\"line\">          init.openMessage(<span class=\"string\">'请求方法未允许'</span>);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">408</span>:</span><br><span class=\"line\">          init.openMessage(<span class=\"string\">'请求超时'</span>);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">500</span>:</span><br><span class=\"line\">          init.openMessage(<span class=\"string\">'服务器端出错'</span>);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">501</span>:</span><br><span class=\"line\">          init.openMessage(<span class=\"string\">'网络未实现'</span>);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">502</span>:</span><br><span class=\"line\">          init.openMessage(<span class=\"string\">'网络错误'</span>);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">503</span>:</span><br><span class=\"line\">          init.openMessage(<span class=\"string\">'服务不可用'</span>);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">504</span>:</span><br><span class=\"line\">          init.openMessage(<span class=\"string\">'网络超时'</span>);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">505</span>:</span><br><span class=\"line\">          init.openMessage(<span class=\"string\">'http版本不支持该请求'</span>);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">default</span>:</span><br><span class=\"line\">          init.openMessage(<span class=\"string\">`连接错误<span class=\"subst\">$&#123;err.response.status&#125;</span>`</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      init.openMessage(<span class=\"string\">'连接服务器失败'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.reject(err.response);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> axios;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"需求\"><a href=\"#需求\" class=\"headerlink\" title=\"需求\"></a>需求</h2><p>用户登录之后，返回access_token, refresh_token 还有返回失效时间20秒.<br>1,假如用户一直在数据交互。当access_token 失效了就用refresh_token 来更新一下 access_token.<br>2,假如用户登录之后啥也不干，那么access_token 失效了就跳到login页面.<br>3,假如用户在失效前30分钟存在数据交互，则用refresh_token 刷新 access_token。</p>\n<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>于在网上搜索了一大半。都是说的是在接口401状态去用refresh_token 去调取新 access_token，这样那还不是存在一直登录不退出的状态？不现实。。这里又涉及到axios的二次封装。刚好项目中用到element-ui， 索性把错误状态提示也做了一下。思路则是在请求拦截，响应拦截做文章。废话不多说。下面是代码。<br><a href=\"https://chengheai.github.io/daily-vue-demo/#/axios\" target=\"_blank\" rel=\"noopener\">源代码</a></p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">'axios'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Cookies <span class=\"keyword\">from</span> <span class=\"string\">'js-cookie'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Message &#125; <span class=\"keyword\">from</span> <span class=\"string\">'element-ui'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> router <span class=\"keyword\">from</span> <span class=\"string\">'./../router/index'</span>;</span><br><span class=\"line\">axios.defaults.timeout = <span class=\"number\">10000</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> init = &#123;                                              ❤️ 没画好？重画 [更多...]</span><br><span class=\"line\">  <span class=\"comment\">// 记录时间戳</span></span><br><span class=\"line\">  timer: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"comment\">// 是否调过refresh_token函数</span></span><br><span class=\"line\">  isRefresh: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  <span class=\"comment\">// 公用提示                                                  🥕🥕🥕         🥕🥕🥕🥕</span></span><br><span class=\"line\">  openMessage: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">msg</span>) </span>&#123;                             🥕🥕🥕🥕       🥕🥕🥕🥕🥕</span><br><span class=\"line\">    Message(&#123;                                            🥕🥕🥕🥕🥕     🥕🥕🥕🥕🥕</span><br><span class=\"line\">      message: msg,                                      🥕🥕🥕🥕🥕  🥕🥕🥕🥕🥕🥕</span><br><span class=\"line\">      type: <span class=\"string\">'error'</span>,                                      🥕 🥕🥕🥕🥕🥕🥕🥕🥕🥕</span><br><span class=\"line\">      showClose: <span class=\"literal\">true</span>,                                     🥕 🥕🥕🥕🥕🥕🥕🥕🥕🥕🥕</span><br><span class=\"line\">    &#125;);                                                      🥕🥕🥕🥕🥕🥕🥕🥕🥕</span><br><span class=\"line\">  &#125;,                                                           🥕🥕🥕🥕🥕🥕🥕</span><br><span class=\"line\">  getRefreshToken: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;                                  🥕🥕🥕🥕🥕🥕</span><br><span class=\"line\">    <span class=\"keyword\">let</span> params = &#123;                                                 🥕🥕🥕🥕🥕、</span><br><span class=\"line\">      refresh_token: Cookies.get(<span class=\"string\">'refresh_token'</span>),                   🥕🥕🥕🥕</span><br><span class=\"line\">    &#125;;                                                                 🥕🥕🥕</span><br><span class=\"line\">    <span class=\"keyword\">let</span> that = <span class=\"keyword\">this</span>;                                                     🥕🥕</span><br><span class=\"line\">    axios(&#123;</span><br><span class=\"line\">      method: <span class=\"string\">'post'</span>,</span><br><span class=\"line\">      url: <span class=\"string\">`api/v1/refresh_token<span class=\"subst\">$&#123;params&#125;</span>`</span>,</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">      .then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (res.data.access_token) &#123;</span><br><span class=\"line\">          <span class=\"comment\">// 防止重复调refresh_token接口</span></span><br><span class=\"line\">          that.isRefresh = <span class=\"literal\">false</span>;</span><br><span class=\"line\">          <span class=\"keyword\">let</span> result = res.data;</span><br><span class=\"line\">          <span class=\"keyword\">let</span> millisecond = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</span><br><span class=\"line\">          <span class=\"keyword\">let</span> expiresTime = result.expires_in * <span class=\"number\">1000</span>;</span><br><span class=\"line\">          <span class=\"keyword\">let</span> utilTime = millisecond + expiresTime;</span><br><span class=\"line\">          Cookies.set(<span class=\"string\">'access_token'</span>, result.access_token, &#123; <span class=\"attr\">expires</span>: expiresTime &#125;);</span><br><span class=\"line\">          Cookies.set(<span class=\"string\">'utilTime'</span>, utilTime);</span><br><span class=\"line\">          Cookies.set(<span class=\"string\">'refresh_token'</span>, result.refresh_token);</span><br><span class=\"line\">          Cookies.set(<span class=\"string\">'expires_in'</span>, result.expires_in);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          <span class=\"comment\">//刷新token失败只能跳转到登录页重新登录</span></span><br><span class=\"line\">          localStorage.clear();</span><br><span class=\"line\">          Cookies.remove(<span class=\"string\">'access_token'</span>);</span><br><span class=\"line\">          Cookies.remove(<span class=\"string\">'utilTime'</span>);</span><br><span class=\"line\">          Cookies.remove(<span class=\"string\">'expires_in'</span>);</span><br><span class=\"line\">          Cookies.remove(<span class=\"string\">'refresh_token'</span>);</span><br><span class=\"line\">          router.replace(&#123;</span><br><span class=\"line\">            path: <span class=\"string\">'/login'</span>,</span><br><span class=\"line\">            query: &#123; <span class=\"attr\">redirect</span>: router.currentRoute.fullPath &#125;,</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//刷新token失败只能跳转到登录页重新登录</span></span><br><span class=\"line\">        get_sys_logout();</span><br><span class=\"line\">        localStorage.clear();</span><br><span class=\"line\">        Cookies.remove(<span class=\"string\">'access_token'</span>);</span><br><span class=\"line\">        Cookies.remove(<span class=\"string\">'utilTime'</span>);</span><br><span class=\"line\">        Cookies.remove(<span class=\"string\">'expires_in'</span>);</span><br><span class=\"line\">        Cookies.remove(<span class=\"string\">'refresh_token'</span>);</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">        that.openMessage(<span class=\"string\">'登录失效'</span>);</span><br><span class=\"line\">        router.replace(&#123;</span><br><span class=\"line\">          path: <span class=\"string\">'/login'</span>,</span><br><span class=\"line\">          query: &#123; <span class=\"attr\">redirect</span>: router.currentRoute.fullPath &#125;,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//http request 拦截器</span></span><br><span class=\"line\">axios.interceptors.request.use(</span><br><span class=\"line\">  config =&gt; &#123;</span><br><span class=\"line\">    config.data = <span class=\"built_in\">JSON</span>.stringify(config.data);</span><br><span class=\"line\">    init.timer = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Cookies.get(<span class=\"string\">'access_token'</span>)) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> ((<span class=\"built_in\">parseInt</span>(Cookies.get(<span class=\"string\">'utilTime'</span>)) - init.timer) / (<span class=\"number\">1000</span> * <span class=\"number\">60</span> * <span class=\"number\">60</span>) &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        Cookies.remove(<span class=\"string\">'access_token'</span>);</span><br><span class=\"line\">        Cookies.remove(<span class=\"string\">'utilTime'</span>);</span><br><span class=\"line\">        Cookies.remove(<span class=\"string\">'expires_in'</span>);</span><br><span class=\"line\">        Cookies.remove(<span class=\"string\">'refresh_token'</span>);</span><br><span class=\"line\">        get_sys_logout();</span><br><span class=\"line\">        localStorage.clear();</span><br><span class=\"line\">        router.replace(&#123;</span><br><span class=\"line\">          path: <span class=\"string\">'/login'</span>,</span><br><span class=\"line\">          query: &#123; <span class=\"attr\">redirect</span>: router.currentRoute.fullPath &#125;,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      config.headers = &#123;</span><br><span class=\"line\">        <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'application/json'</span>,</span><br><span class=\"line\">        Authorization: <span class=\"string\">`Bearer <span class=\"subst\">$&#123;Cookies.get(<span class=\"string\">'access_token'</span>)&#125;</span>`</span>,</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      config.headers = &#123;</span><br><span class=\"line\">        <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'application/json'</span>,</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> config;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  error =&gt; &#123;</span><br><span class=\"line\">    Message.error(&#123;</span><br><span class=\"line\">      message: <span class=\"string\">'加载超时'</span>,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.reject(error);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//响应拦截器即异常处理</span></span><br><span class=\"line\">axios.interceptors.response.use(</span><br><span class=\"line\">  response =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (Cookies.get(<span class=\"string\">'utilTime'</span>)) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!init.isRefresh) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 是否是到期前30分钟</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> ((<span class=\"built_in\">parseInt</span>(Cookies.get(<span class=\"string\">'utilTime'</span>)) - init.timer) / (<span class=\"number\">1000</span> * <span class=\"number\">60</span> * <span class=\"number\">60</span>) &lt; <span class=\"number\">0.5</span>) &#123;</span><br><span class=\"line\">          init.isRefresh = <span class=\"literal\">true</span>;</span><br><span class=\"line\">          init.getRefreshToken();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> response;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  err =&gt; &#123;</span><br><span class=\"line\">    <span class=\"comment\">// debugger</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err &amp;&amp; err.response) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">switch</span> (err.response.status) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">400</span>:</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">'错误请求'</span>);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">401</span>:</span><br><span class=\"line\">          <span class=\"comment\">//刷新token失败只能跳转到登录页重新登录</span></span><br><span class=\"line\">          get_sys_logout();</span><br><span class=\"line\">          localStorage.clear();</span><br><span class=\"line\">          Cookies.remove(<span class=\"string\">'access_token'</span>);</span><br><span class=\"line\">          Cookies.remove(<span class=\"string\">'expires_in'</span>);</span><br><span class=\"line\">          Cookies.remove(<span class=\"string\">'utilTime'</span>);</span><br><span class=\"line\">          Cookies.remove(<span class=\"string\">'refresh_token'</span>);</span><br><span class=\"line\">          init.openMessage(<span class=\"string\">'登录失效'</span>);</span><br><span class=\"line\">          router.replace(&#123;</span><br><span class=\"line\">            path: <span class=\"string\">'/login'</span>,</span><br><span class=\"line\">            query: &#123; <span class=\"attr\">redirect</span>: router.currentRoute.fullPath &#125;,</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">403</span>:</span><br><span class=\"line\">          init.openMessage(<span class=\"string\">'拒绝访问'</span>);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">404</span>:</span><br><span class=\"line\">          init.openMessage(<span class=\"string\">'请求错误,未找到该资源'</span>);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">405</span>:</span><br><span class=\"line\">          init.openMessage(<span class=\"string\">'请求方法未允许'</span>);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">408</span>:</span><br><span class=\"line\">          init.openMessage(<span class=\"string\">'请求超时'</span>);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">500</span>:</span><br><span class=\"line\">          init.openMessage(<span class=\"string\">'服务器端出错'</span>);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">501</span>:</span><br><span class=\"line\">          init.openMessage(<span class=\"string\">'网络未实现'</span>);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">502</span>:</span><br><span class=\"line\">          init.openMessage(<span class=\"string\">'网络错误'</span>);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">503</span>:</span><br><span class=\"line\">          init.openMessage(<span class=\"string\">'服务不可用'</span>);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">504</span>:</span><br><span class=\"line\">          init.openMessage(<span class=\"string\">'网络超时'</span>);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">505</span>:</span><br><span class=\"line\">          init.openMessage(<span class=\"string\">'http版本不支持该请求'</span>);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">default</span>:</span><br><span class=\"line\">          init.openMessage(<span class=\"string\">`连接错误<span class=\"subst\">$&#123;err.response.status&#125;</span>`</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      init.openMessage(<span class=\"string\">'连接服务器失败'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.reject(err.response);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> axios;</span><br></pre></td></tr></table></figure>\n"},{"title":"react+antd+mongodb+express实现增删查改","date":"2018-12-10T05:17:07.000Z","_content":"## 前言：\n之前有一段时间做过react + antd的项目，还挺熟，但是现在在公司一直用的是vue，随着时间的推移，记忆也慢慢消失，所有趁工作之余的休息时间来写了这个小例子，实现本地起服务，调本地mongo数据，当然，你也可以放线上或者VPS上预览。\\[demo](http://144.34.148.126:10000/) ;\n另外也有一个vue+ element 的项目 \\[GitHub](https://github.com/chengheai/mongodb-vue)\n<font color=#EC6E3A size=4 face=\" 华文行楷\">\n\\[完整代码](https://github.com/chengheai/mongo-react) ;欢迎👏 star follow\n</font>\n<font color=#3421B3 size=4 face=\" 华文行楷\">\n如有问题请在GitHub上留言，谢谢！\n</font>\n### 效果图\n![](https://github.com/chengheai/review-demo-image/blob/master/2018-12-10%2014-30-31.2018-12-10%2014_31_55.gif?raw=true)\n## 登录\n* 使用sessionStorage在登录的时候setItem用户名，然后在components下Header.jsx去getItem用户名\n## 主要代码\n``` javascript\n  handleSubmit = (e) => {\n    const { dispatch } = this.props;\n    e.preventDefault();\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        dispatch(routerRedux.replace('/list'));\n        console.log('Received values of form: ', values);\n        sessionStorage.setItem('guest', values.userName)\n      }\n    });\n  }\n```\n## 添加与编辑，添加图片\n![](https://github.com/chengheai/review-demo-image/blob/master/2018-12-10%2014-41-32.2018-12-10%2014_49_11.gif?raw=true)\n![](https://github.com/chengheai/review-demo-image/blob/master/2018-12-10%2014-51-07.2018-12-10%2014_59_38.gif?raw=true)\n\n* 编辑与添加共用一个抽屉，加一个types用来区别是编辑还是添加\n## 主要代码\n``` javascript\n  handleSubmit = (e) => {\n    let that = this;\n    const { dispatch } = this.props;\n    const { types, editForm } = this.state;\n    e.preventDefault();\n    if(types === 2){\n      this.props.form.validateFields((err, values) => {\n        values = Object.assign(editForm, values);\n      if (!err) {\n        // message.loading('正在添加...');\n        dispatch({\n          type: 'heroModel/put_heros',\n          payload: values,\n          callback: (res) => {\n            message.success('修改成功');\n            this.setState({\n              visible: false,\n              editId: ''\n            });\n            this.props.form.resetFields();\n            that.getData();\n          }\n        })\n      }\n    });\n    } else {\n      this.props.form.validateFields((err, values) => {\n        if (!err) {\n          // message.loading('正在添加...');\n          dispatch({\n            type: 'heroModel/post_hero',\n            payload: values,\n            callback: (res) => {\n              message.success('添加成功');\n              this.setState({\n                visible: false,\n              });\n              this.props.form.resetFields();\n              that.getData();\n            }\n          })\n        }\n      });\n    }\n  }\n```\n## 分页与删除\n![](https://github.com/chengheai/review-demo-image/blob/master/2018-12-10%2015-08-45.2018-12-10%2015_14_15.gif?raw=true)\n## 主要代码\nserver.js\n``` javascript\n  router.get(\"/hero\", (req, res) => {\n  // console.log('========',req.query.pageSize)\n  // console.log('+++++++++++++',Hero.count())\n  var total = 0;\n  Hero.count({}, function(err, count){\n    if(err) return;\n    total = count;\n    res.set('x-header', total)\n  })\n\n  Hero.find({})\n    .limit(Math.min(parseInt(req.query.pageSize) || 10, 100))\n    .skip(parseInt(req.query.currentPage -1) * req.query.pageSize || 0)\n    .sort({ updatedAt: -1 })\n    .then(heros => {\n      res.json(heros);\n    })\n    .catch(err => {\n      res.json(err);\n    })\n\n});\n```\nlist.js\n``` javascript\n  handleTableChange = (pagination, filters, sorter) => {\n    console.log(pagination);\n    // let that = this;\n    const { pageSize, current } = pagination;\n    const { dispatch } = this.props;\n    const { payload } = this.state;\n    this.setState({\n      pagination: {\n        currentPage: current,\n        pageSize,\n      },\n    });\n    const query = {\n      ...payload,\n      pageSize,\n      currentPage: current\n    };\n    dispatch({\n      type: 'heroModel/get_heros',\n      payload: query,\n      callback: res => {\n        this.setState({\n          tableData: res.data,\n          // eslint-disable-next-line\n          total: parseInt(res.headers['x-header'])\n        })\n      }\n    });\n  }\n```\n","source":"_posts/react-antd-mongodb-express实现增删查改.md","raw":"---\ntitle: react+antd+mongodb+express实现增删查改\ndate: 2018-12-10 13:17:07\ntags: [antd, mongodb, dvajs, nodejs, react]\n---\n## 前言：\n之前有一段时间做过react + antd的项目，还挺熟，但是现在在公司一直用的是vue，随着时间的推移，记忆也慢慢消失，所有趁工作之余的休息时间来写了这个小例子，实现本地起服务，调本地mongo数据，当然，你也可以放线上或者VPS上预览。\\[demo](http://144.34.148.126:10000/) ;\n另外也有一个vue+ element 的项目 \\[GitHub](https://github.com/chengheai/mongodb-vue)\n<font color=#EC6E3A size=4 face=\" 华文行楷\">\n\\[完整代码](https://github.com/chengheai/mongo-react) ;欢迎👏 star follow\n</font>\n<font color=#3421B3 size=4 face=\" 华文行楷\">\n如有问题请在GitHub上留言，谢谢！\n</font>\n### 效果图\n![](https://github.com/chengheai/review-demo-image/blob/master/2018-12-10%2014-30-31.2018-12-10%2014_31_55.gif?raw=true)\n## 登录\n* 使用sessionStorage在登录的时候setItem用户名，然后在components下Header.jsx去getItem用户名\n## 主要代码\n``` javascript\n  handleSubmit = (e) => {\n    const { dispatch } = this.props;\n    e.preventDefault();\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        dispatch(routerRedux.replace('/list'));\n        console.log('Received values of form: ', values);\n        sessionStorage.setItem('guest', values.userName)\n      }\n    });\n  }\n```\n## 添加与编辑，添加图片\n![](https://github.com/chengheai/review-demo-image/blob/master/2018-12-10%2014-41-32.2018-12-10%2014_49_11.gif?raw=true)\n![](https://github.com/chengheai/review-demo-image/blob/master/2018-12-10%2014-51-07.2018-12-10%2014_59_38.gif?raw=true)\n\n* 编辑与添加共用一个抽屉，加一个types用来区别是编辑还是添加\n## 主要代码\n``` javascript\n  handleSubmit = (e) => {\n    let that = this;\n    const { dispatch } = this.props;\n    const { types, editForm } = this.state;\n    e.preventDefault();\n    if(types === 2){\n      this.props.form.validateFields((err, values) => {\n        values = Object.assign(editForm, values);\n      if (!err) {\n        // message.loading('正在添加...');\n        dispatch({\n          type: 'heroModel/put_heros',\n          payload: values,\n          callback: (res) => {\n            message.success('修改成功');\n            this.setState({\n              visible: false,\n              editId: ''\n            });\n            this.props.form.resetFields();\n            that.getData();\n          }\n        })\n      }\n    });\n    } else {\n      this.props.form.validateFields((err, values) => {\n        if (!err) {\n          // message.loading('正在添加...');\n          dispatch({\n            type: 'heroModel/post_hero',\n            payload: values,\n            callback: (res) => {\n              message.success('添加成功');\n              this.setState({\n                visible: false,\n              });\n              this.props.form.resetFields();\n              that.getData();\n            }\n          })\n        }\n      });\n    }\n  }\n```\n## 分页与删除\n![](https://github.com/chengheai/review-demo-image/blob/master/2018-12-10%2015-08-45.2018-12-10%2015_14_15.gif?raw=true)\n## 主要代码\nserver.js\n``` javascript\n  router.get(\"/hero\", (req, res) => {\n  // console.log('========',req.query.pageSize)\n  // console.log('+++++++++++++',Hero.count())\n  var total = 0;\n  Hero.count({}, function(err, count){\n    if(err) return;\n    total = count;\n    res.set('x-header', total)\n  })\n\n  Hero.find({})\n    .limit(Math.min(parseInt(req.query.pageSize) || 10, 100))\n    .skip(parseInt(req.query.currentPage -1) * req.query.pageSize || 0)\n    .sort({ updatedAt: -1 })\n    .then(heros => {\n      res.json(heros);\n    })\n    .catch(err => {\n      res.json(err);\n    })\n\n});\n```\nlist.js\n``` javascript\n  handleTableChange = (pagination, filters, sorter) => {\n    console.log(pagination);\n    // let that = this;\n    const { pageSize, current } = pagination;\n    const { dispatch } = this.props;\n    const { payload } = this.state;\n    this.setState({\n      pagination: {\n        currentPage: current,\n        pageSize,\n      },\n    });\n    const query = {\n      ...payload,\n      pageSize,\n      currentPage: current\n    };\n    dispatch({\n      type: 'heroModel/get_heros',\n      payload: query,\n      callback: res => {\n        this.setState({\n          tableData: res.data,\n          // eslint-disable-next-line\n          total: parseInt(res.headers['x-header'])\n        })\n      }\n    });\n  }\n```\n","slug":"react-antd-mongodb-express实现增删查改","published":1,"updated":"2021-10-09T08:48:32.075Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzabm001p5c54qnlrj8gw","content":"<h2 id=\"前言：\"><a href=\"#前言：\" class=\"headerlink\" title=\"前言：\"></a>前言：</h2><p>之前有一段时间做过react + antd的项目，还挺熟，但是现在在公司一直用的是vue，随着时间的推移，记忆也慢慢消失，所有趁工作之余的休息时间来写了这个小例子，实现本地起服务，调本地mongo数据，当然，你也可以放线上或者VPS上预览。[demo](<a href=\"http://144.34.148.126:10000/\" target=\"_blank\" rel=\"noopener\">http://144.34.148.126:10000/</a>) ;<br>另外也有一个vue+ element 的项目 [GitHub](<a href=\"https://github.com/chengheai/mongodb-vue\">https://github.com/chengheai/mongodb-vue</a>)</p>\n<p><font color=\"#EC6E3A\" size=\"4\" face=\" 华文行楷\"><br>[完整代码](<a href=\"https://github.com/chengheai/mongo-react\">https://github.com/chengheai/mongo-react</a>) ;欢迎👏 star follow<br></font></p>\n<p><font color=\"#3421B3\" size=\"4\" face=\" 华文行楷\"><br>如有问题请在GitHub上留言，谢谢！<br></font></p>\n<h3 id=\"效果图\"><a href=\"#效果图\" class=\"headerlink\" title=\"效果图\"></a>效果图</h3><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/2018-12-10%2014-30-31.2018-12-10%2014_31_55.gif?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"登录\"><a href=\"#登录\" class=\"headerlink\" title=\"登录\"></a>登录</h2><ul>\n<li>使用sessionStorage在登录的时候setItem用户名，然后在components下Header.jsx去getItem用户名<h2 id=\"主要代码\"><a href=\"#主要代码\" class=\"headerlink\" title=\"主要代码\"></a>主要代码</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">handleSubmit = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; dispatch &#125; = <span class=\"keyword\">this</span>.props;</span><br><span class=\"line\">  e.preventDefault();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.props.form.validateFields(<span class=\"function\">(<span class=\"params\">err, values</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!err) &#123;</span><br><span class=\"line\">      dispatch(routerRedux.replace(<span class=\"string\">'/list'</span>));</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'Received values of form: '</span>, values);</span><br><span class=\"line\">      sessionStorage.setItem(<span class=\"string\">'guest'</span>, values.userName)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"添加与编辑，添加图片\"><a href=\"#添加与编辑，添加图片\" class=\"headerlink\" title=\"添加与编辑，添加图片\"></a>添加与编辑，添加图片</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/2018-12-10%2014-41-32.2018-12-10%2014_49_11.gif?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/2018-12-10%2014-51-07.2018-12-10%2014_59_38.gif?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<ul>\n<li>编辑与添加共用一个抽屉，加一个types用来区别是编辑还是添加<h2 id=\"主要代码-1\"><a href=\"#主要代码-1\" class=\"headerlink\" title=\"主要代码\"></a>主要代码</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">handleSubmit = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> that = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; dispatch &#125; = <span class=\"keyword\">this</span>.props;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; types, editForm &#125; = <span class=\"keyword\">this</span>.state;</span><br><span class=\"line\">  e.preventDefault();</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(types === <span class=\"number\">2</span>)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.props.form.validateFields(<span class=\"function\">(<span class=\"params\">err, values</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      values = <span class=\"built_in\">Object</span>.assign(editForm, values);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!err) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// message.loading('正在添加...');</span></span><br><span class=\"line\">      dispatch(&#123;</span><br><span class=\"line\">        type: <span class=\"string\">'heroModel/put_heros'</span>,</span><br><span class=\"line\">        payload: values,</span><br><span class=\"line\">        callback: <span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          message.success(<span class=\"string\">'修改成功'</span>);</span><br><span class=\"line\">          <span class=\"keyword\">this</span>.setState(&#123;</span><br><span class=\"line\">            visible: <span class=\"literal\">false</span>,</span><br><span class=\"line\">            editId: <span class=\"string\">''</span></span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">          <span class=\"keyword\">this</span>.props.form.resetFields();</span><br><span class=\"line\">          that.getData();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.props.form.validateFields(<span class=\"function\">(<span class=\"params\">err, values</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!err) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// message.loading('正在添加...');</span></span><br><span class=\"line\">        dispatch(&#123;</span><br><span class=\"line\">          type: <span class=\"string\">'heroModel/post_hero'</span>,</span><br><span class=\"line\">          payload: values,</span><br><span class=\"line\">          callback: <span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            message.success(<span class=\"string\">'添加成功'</span>);</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.setState(&#123;</span><br><span class=\"line\">              visible: <span class=\"literal\">false</span>,</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.props.form.resetFields();</span><br><span class=\"line\">            that.getData();</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"分页与删除\"><a href=\"#分页与删除\" class=\"headerlink\" title=\"分页与删除\"></a>分页与删除</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/2018-12-10%2015-08-45.2018-12-10%2015_14_15.gif?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"主要代码-2\"><a href=\"#主要代码-2\" class=\"headerlink\" title=\"主要代码\"></a>主要代码</h2><p>server.js<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  router.get(<span class=\"string\">\"/hero\"</span>, (req, res) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"comment\">// console.log('========',req.query.pageSize)</span></span><br><span class=\"line\">  <span class=\"comment\">// console.log('+++++++++++++',Hero.count())</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> total = <span class=\"number\">0</span>;</span><br><span class=\"line\">  Hero.count(&#123;&#125;, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, count</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(err) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    total = count;</span><br><span class=\"line\">    res.set(<span class=\"string\">'x-header'</span>, total)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">  Hero.find(&#123;&#125;)</span><br><span class=\"line\">    .limit(<span class=\"built_in\">Math</span>.min(<span class=\"built_in\">parseInt</span>(req.query.pageSize) || <span class=\"number\">10</span>, <span class=\"number\">100</span>))</span><br><span class=\"line\">    .skip(<span class=\"built_in\">parseInt</span>(req.query.currentPage <span class=\"number\">-1</span>) * req.query.pageSize || <span class=\"number\">0</span>)</span><br><span class=\"line\">    .sort(&#123; <span class=\"attr\">updatedAt</span>: <span class=\"number\">-1</span> &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">heros</span> =&gt;</span> &#123;</span><br><span class=\"line\">      res.json(heros);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">      res.json(err);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>list.js<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">handleTableChange = <span class=\"function\">(<span class=\"params\">pagination, filters, sorter</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(pagination);</span><br><span class=\"line\">  <span class=\"comment\">// let that = this;</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; pageSize, current &#125; = pagination;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; dispatch &#125; = <span class=\"keyword\">this</span>.props;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; payload &#125; = <span class=\"keyword\">this</span>.state;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.setState(&#123;</span><br><span class=\"line\">    pagination: &#123;</span><br><span class=\"line\">      currentPage: current,</span><br><span class=\"line\">      pageSize,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> query = &#123;</span><br><span class=\"line\">    ...payload,</span><br><span class=\"line\">    pageSize,</span><br><span class=\"line\">    currentPage: current</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  dispatch(&#123;</span><br><span class=\"line\">    type: <span class=\"string\">'heroModel/get_heros'</span>,</span><br><span class=\"line\">    payload: query,</span><br><span class=\"line\">    callback: <span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.setState(&#123;</span><br><span class=\"line\">        tableData: res.data,</span><br><span class=\"line\">        <span class=\"comment\">// eslint-disable-next-line</span></span><br><span class=\"line\">        total: <span class=\"built_in\">parseInt</span>(res.headers[<span class=\"string\">'x-header'</span>])</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"前言：\"><a href=\"#前言：\" class=\"headerlink\" title=\"前言：\"></a>前言：</h2><p>之前有一段时间做过react + antd的项目，还挺熟，但是现在在公司一直用的是vue，随着时间的推移，记忆也慢慢消失，所有趁工作之余的休息时间来写了这个小例子，实现本地起服务，调本地mongo数据，当然，你也可以放线上或者VPS上预览。[demo](<a href=\"http://144.34.148.126:10000/\" target=\"_blank\" rel=\"noopener\">http://144.34.148.126:10000/</a>) ;<br>另外也有一个vue+ element 的项目 [GitHub](<a href=\"https://github.com/chengheai/mongodb-vue\">https://github.com/chengheai/mongodb-vue</a>)</p>\n<p><font color=\"#EC6E3A\" size=\"4\" face=\" 华文行楷\"><br>[完整代码](<a href=\"https://github.com/chengheai/mongo-react\">https://github.com/chengheai/mongo-react</a>) ;欢迎👏 star follow<br></font></p>\n<p><font color=\"#3421B3\" size=\"4\" face=\" 华文行楷\"><br>如有问题请在GitHub上留言，谢谢！<br></font></p>\n<h3 id=\"效果图\"><a href=\"#效果图\" class=\"headerlink\" title=\"效果图\"></a>效果图</h3><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/2018-12-10%2014-30-31.2018-12-10%2014_31_55.gif?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"登录\"><a href=\"#登录\" class=\"headerlink\" title=\"登录\"></a>登录</h2><ul>\n<li>使用sessionStorage在登录的时候setItem用户名，然后在components下Header.jsx去getItem用户名<h2 id=\"主要代码\"><a href=\"#主要代码\" class=\"headerlink\" title=\"主要代码\"></a>主要代码</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">handleSubmit = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; dispatch &#125; = <span class=\"keyword\">this</span>.props;</span><br><span class=\"line\">  e.preventDefault();</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.props.form.validateFields(<span class=\"function\">(<span class=\"params\">err, values</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!err) &#123;</span><br><span class=\"line\">      dispatch(routerRedux.replace(<span class=\"string\">'/list'</span>));</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'Received values of form: '</span>, values);</span><br><span class=\"line\">      sessionStorage.setItem(<span class=\"string\">'guest'</span>, values.userName)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"添加与编辑，添加图片\"><a href=\"#添加与编辑，添加图片\" class=\"headerlink\" title=\"添加与编辑，添加图片\"></a>添加与编辑，添加图片</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/2018-12-10%2014-41-32.2018-12-10%2014_49_11.gif?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/2018-12-10%2014-51-07.2018-12-10%2014_59_38.gif?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<ul>\n<li>编辑与添加共用一个抽屉，加一个types用来区别是编辑还是添加<h2 id=\"主要代码-1\"><a href=\"#主要代码-1\" class=\"headerlink\" title=\"主要代码\"></a>主要代码</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">handleSubmit = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> that = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; dispatch &#125; = <span class=\"keyword\">this</span>.props;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; types, editForm &#125; = <span class=\"keyword\">this</span>.state;</span><br><span class=\"line\">  e.preventDefault();</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(types === <span class=\"number\">2</span>)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.props.form.validateFields(<span class=\"function\">(<span class=\"params\">err, values</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      values = <span class=\"built_in\">Object</span>.assign(editForm, values);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!err) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// message.loading('正在添加...');</span></span><br><span class=\"line\">      dispatch(&#123;</span><br><span class=\"line\">        type: <span class=\"string\">'heroModel/put_heros'</span>,</span><br><span class=\"line\">        payload: values,</span><br><span class=\"line\">        callback: <span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          message.success(<span class=\"string\">'修改成功'</span>);</span><br><span class=\"line\">          <span class=\"keyword\">this</span>.setState(&#123;</span><br><span class=\"line\">            visible: <span class=\"literal\">false</span>,</span><br><span class=\"line\">            editId: <span class=\"string\">''</span></span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">          <span class=\"keyword\">this</span>.props.form.resetFields();</span><br><span class=\"line\">          that.getData();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.props.form.validateFields(<span class=\"function\">(<span class=\"params\">err, values</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!err) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// message.loading('正在添加...');</span></span><br><span class=\"line\">        dispatch(&#123;</span><br><span class=\"line\">          type: <span class=\"string\">'heroModel/post_hero'</span>,</span><br><span class=\"line\">          payload: values,</span><br><span class=\"line\">          callback: <span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            message.success(<span class=\"string\">'添加成功'</span>);</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.setState(&#123;</span><br><span class=\"line\">              visible: <span class=\"literal\">false</span>,</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.props.form.resetFields();</span><br><span class=\"line\">            that.getData();</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"分页与删除\"><a href=\"#分页与删除\" class=\"headerlink\" title=\"分页与删除\"></a>分页与删除</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/2018-12-10%2015-08-45.2018-12-10%2015_14_15.gif?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"主要代码-2\"><a href=\"#主要代码-2\" class=\"headerlink\" title=\"主要代码\"></a>主要代码</h2><p>server.js<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  router.get(<span class=\"string\">\"/hero\"</span>, (req, res) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"comment\">// console.log('========',req.query.pageSize)</span></span><br><span class=\"line\">  <span class=\"comment\">// console.log('+++++++++++++',Hero.count())</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> total = <span class=\"number\">0</span>;</span><br><span class=\"line\">  Hero.count(&#123;&#125;, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, count</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(err) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    total = count;</span><br><span class=\"line\">    res.set(<span class=\"string\">'x-header'</span>, total)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">  Hero.find(&#123;&#125;)</span><br><span class=\"line\">    .limit(<span class=\"built_in\">Math</span>.min(<span class=\"built_in\">parseInt</span>(req.query.pageSize) || <span class=\"number\">10</span>, <span class=\"number\">100</span>))</span><br><span class=\"line\">    .skip(<span class=\"built_in\">parseInt</span>(req.query.currentPage <span class=\"number\">-1</span>) * req.query.pageSize || <span class=\"number\">0</span>)</span><br><span class=\"line\">    .sort(&#123; <span class=\"attr\">updatedAt</span>: <span class=\"number\">-1</span> &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">heros</span> =&gt;</span> &#123;</span><br><span class=\"line\">      res.json(heros);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">      res.json(err);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>list.js<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">handleTableChange = <span class=\"function\">(<span class=\"params\">pagination, filters, sorter</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(pagination);</span><br><span class=\"line\">  <span class=\"comment\">// let that = this;</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; pageSize, current &#125; = pagination;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; dispatch &#125; = <span class=\"keyword\">this</span>.props;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; payload &#125; = <span class=\"keyword\">this</span>.state;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.setState(&#123;</span><br><span class=\"line\">    pagination: &#123;</span><br><span class=\"line\">      currentPage: current,</span><br><span class=\"line\">      pageSize,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> query = &#123;</span><br><span class=\"line\">    ...payload,</span><br><span class=\"line\">    pageSize,</span><br><span class=\"line\">    currentPage: current</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  dispatch(&#123;</span><br><span class=\"line\">    type: <span class=\"string\">'heroModel/get_heros'</span>,</span><br><span class=\"line\">    payload: query,</span><br><span class=\"line\">    callback: <span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.setState(&#123;</span><br><span class=\"line\">        tableData: res.data,</span><br><span class=\"line\">        <span class=\"comment\">// eslint-disable-next-line</span></span><br><span class=\"line\">        total: <span class=\"built_in\">parseInt</span>(res.headers[<span class=\"string\">'x-header'</span>])</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n"},{"title":"vue-element 实现支持按周切换的日历","date":"2019-01-07T12:20:43.000Z","_content":"# vue-week-picker\n\n> vue-week-picker\n## 安装\n ``` bash\n  npm install vue-week-picker --save-dev\n ```\n## DEMO\n* 原生\n[线上DEMO👅 🦊 🐸 🚎 ](https://chengheai.github.io/daily-vue-demo/#/calendar1)\n* 与element-ui结合使用\n[线上DEMO👅 🦊 🐸 🚎 ](https://chengheai.github.io/daily-vue-demo/#/calendar)\n## 功能\n* 自适应式按周切换\n* 与DatePicker日期选择器使用\n## 结合Element-ui使用\n## 效果\n![](https://github.com/chengheai/review-demo-image/blob/master/2019-01-15%2014-03-05.2019-01-15%2014_03_49.gif?raw=true)\n与vue-element结合组件，[请转到🌈](https://github.com/chengheai/daily-vue-demo/blob/master/src/components/Calendar.vue)\n\n![](https://github.com/chengheai/review-demo-image/blob/master/2019-01-15%2014-00-09.2019-01-15%2014_01_04.gif?raw=true)\n\n## 使用\n``` javascript\n<VueWeekPicker @dateValue=\"dateValue\" />\n\nOr\n\n<vue-week-picker @dateValue=\"dateValue\" />\n\nimport VueWeekPicker from 'vue-week-picker';\n\nexport default {\n  components: {\n    VueWeekPicker\n  }\n}\n\nOr\n\nexport default {\n  components: {\n    'vue-week-picker': VueWeekPicker\n  }\n}\n\n```\n\n\n## 代码\n``` html\n<template>\n  <div class=\"date\">\n    <el-row>\n      <el-col :span=\"24\">\n        <div class=\"weeks\">\n          <!-- 日期 -->\n          <ul class=\"days\">\n            <li @click=\"weekPre\" class=\"prev-btn\">\n              <i class=\"fa fa-angle-left fa-icon\" aria-hidden=\"true\"></i>\n              <span class=\"hidden-sm-and-down\" style=\"margin-left: 5px;\">上一周</span>\n            </li>\n            <li\n              @click=\"pick(day, index)\"\n              v-for=\"(day, index) in days\"\n              :key=\"index\"\n              :class=\"{selected:index == tabIndex}\"\n            >\n              <!--本月-->\n              <span v-if=\"day.getMonth()+1 != currentMonth\" class=\"other-month item-wrapper\">\n                <p>{{day | getWeekFormat}}</p>\n                <span class=\"hidden-sm-and-down\">{{ day | dateFormat }}</span>\n              </span>\n              <span v-else>\n                <!--今天-->\n                <span\n                  v-if=\"day.getFullYear() == new Date().getFullYear() && day.getMonth() == new Date().getMonth() && day.getDate() == new Date().getDate()\"\n                  class=\"today-item\"\n                >今天</span>\n                <span class=\"item-wrapper\" v-else>\n                  <p>{{day | getWeekFormat}}</p>\n                  <span class=\"hidden-sm-and-down\">{{ day | dateFormat }}</span>\n                </span>\n              </span>\n            </li>\n            <li @click=\"weekNext\" class=\"next-btn\">\n              <span class=\"hidden-sm-and-down\" style=\"margin-right: 5px;\">下一周</span>\n              <i class=\"fa fa-angle-right fa-icon\" aria-hidden=\"true\"></i>\n            </li>\n            <li>\n              <span>\n                <el-date-picker\n                  class=\"right-pick-btn\"\n                  style=\"width: 100%\"\n                  @change=\"pickDate\"\n                  v-model=\"value1\"\n                  type=\"date\"\n                  placeholder=\"按日期查询\"\n                ></el-date-picker>\n              </span>\n            </li>\n          </ul>\n        </div>\n      </el-col>\n    </el-row>\n    <el-row>\n      <el-col :span=\"20\" :offset=\"2\" class=\"time-range\">\n        <span\n          @click=\"pickTime(time, index)\"\n          v-for=\"(time, index) in times\"\n          :key=\"index\"\n          :class=\"{active:index == tabTimeIndex}\"\n        >{{time}}</span>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n```\n``` javascript\n<script>\n/* eslint-disable */\nimport moment from \"moment\";\nexport default {\n  props: {\n    dateValue: {\n      type: String,\n      default: moment(new Date()).format(\"YYYY-MM-DD\")\n    },\n    timeValue: {\n      type: String,\n      default: \"00:00\"\n    }\n  },\n  data() {\n    return {\n      currentYear: 1970, // 年份\n      currentMonth: 1, // 月份\n      currentDay: 1, // 日期\n      currentWeek: 1, // 星期\n      days: [],\n      value1: \"\",\n      tabIndex: null,\n      tabTimeIndex: 0,\n      times: [\n        \"00:00~06:00\",\n        \"06:00~12:00\",\n        \"12:00~18:00\",\n        \"18:00~24:00\",\n        \"今日节目\"\n      ]\n    };\n  },\n  filters: {\n    dateFormat(date) {\n      return moment(date).format(\"YYYY-MM-DD\");\n    },\n    getWeekFormat(date) {\n      const weeksObj = {\n        1: \"周一\",\n        2: \"周二\",\n        3: \"周三\",\n        4: \"周四\",\n        5: \"周五\",\n        6: \"周六\",\n        7: \"周日\"\n      };\n      let weekNumber = moment(date).isoWeekday();\n      return weeksObj[weekNumber];\n    }\n  },\n\n  mounted() {\n    const index = _.findIndex(this.days, function(o) {\n      // console.log('o: ', o.getDate());\n      // console.log('new Date().getDate(): ', new Date().getDate());\n      return o.getDate() === new Date().getDate();\n    });\n    console.log(\"index: \", index);\n    this.tabIndex = index;\n  },\n\n  created() {\n    this.initData(null);\n  },\n\n  methods: {\n    formatDate(year, month, day) {\n      const y = year;\n      let m = month;\n      if (m < 10) m = `0${m}`;\n      let d = day;\n      if (d < 10) d = `0${d}`;\n      return `${y}-${m}-${d}`;\n    },\n    pickDate(date) {\n      let newDate = moment(date).format(\"YYYY-MM-DD\");\n      this.$emit(\"dateValue\", newDate);\n    },\n    initData(cur) {\n      let date = \"\";\n      if (cur) {\n        date = new Date(cur);\n      } else {\n        date = new Date();\n      }\n      this.currentDay = date.getDate(); // 今日日期 几号\n      this.currentYear = date.getFullYear(); // 当前年份\n      this.currentMonth = date.getMonth() + 1; // 当前月份\n      this.currentWeek = date.getDay(); // 1...6,0  // 星期几\n      if (this.currentWeek === 0) {\n        this.currentWeek = 7;\n      }\n      const str = this.formatDate(\n        this.currentYear,\n        this.currentMonth,\n        this.currentDay\n      ); // 今日日期 年-月-日\n      this.days.length = 0;\n      // 今天是周日，放在第一行第7个位置，前面6个 这里默认显示一周，如果需要显示一个月，则第二个循环为 i<= 35- this.currentWeek\n      /* eslint-disabled */\n      for (let i = this.currentWeek - 1; i >= 0; i -= 1) {\n        const d = new Date(str);\n        d.setDate(d.getDate() - i);\n        // console.log(y:\" + d.getDate())\n        this.days.push(d);\n      }\n      for (let i = 1; i <= 7 - this.currentWeek; i += 1) {\n        const d = new Date(str);\n        d.setDate(d.getDate() + i);\n        this.days.push(d);\n      }\n    },\n\n    // 上个星期\n    weekPre() {\n      const d = this.days[0]; // 如果当期日期是7号或者小于7号\n      d.setDate(d.getDate() - 7);\n      this.initData(d);\n    },\n\n    // 下个星期\n    weekNext() {\n      const d = this.days[6]; // 如果当期日期是7号或者小于7号\n      d.setDate(d.getDate() + 7);\n      this.initData(d);\n    },\n\n    // 上一個月  传入当前年份和月份\n    pickPre(year, month) {\n      const d = new Date(this.formatDate(year, month, 1));\n      d.setDate(0);\n      this.initData(this.formatDate(d.getFullYear(), d.getMonth() + 1, 1));\n    },\n\n    // 下一個月  传入当前年份和月份\n    pickNext(year, month) {\n      const d = new Date(this.formatDate(year, month, 1));\n      d.setDate(35);\n      this.initData(this.formatDate(d.getFullYear(), d.getMonth() + 1, 1));\n    },\n\n    // 当前选择日期\n    pick(date, index) {\n      let newDate = moment(date).format(\"YYYY-MM-DD\");\n      this.$emit(\"dateValue\", newDate);\n      // console.log(\"index: \", index);\n      this.tabIndex = index;\n      // alert(\n      //   this.formatDate(date.getFullYear(), date.getMonth() + 1, date.getDate())\n      // );\n    },\n    pickTime(time, index) {\n      // console.log('time: ', time);\n      let timeArr = [];\n      timeArr.push(_.head(_.split(time, \"~\")));\n      console.log(\"timeArr: \", timeArr);\n      this.$emit(\"timeValue\", _.join(timeArr), \"\");\n      // console.log(\"index: \", index);\n      this.tabTimeIndex = index;\n      // alert(\n      //   this.formatDate(date.getFullYear(), date.getMonth() + 1, date.getDate())\n      // );\n    }\n  }\n};\n</script>\n```\n\n","source":"_posts/vue-element-实现支持按周切换的日历.md","raw":"---\ntitle: vue-element 实现支持按周切换的日历\ndate: 2019-01-07 20:20:43\ntags: ['vue', 'element']\n---\n# vue-week-picker\n\n> vue-week-picker\n## 安装\n ``` bash\n  npm install vue-week-picker --save-dev\n ```\n## DEMO\n* 原生\n[线上DEMO👅 🦊 🐸 🚎 ](https://chengheai.github.io/daily-vue-demo/#/calendar1)\n* 与element-ui结合使用\n[线上DEMO👅 🦊 🐸 🚎 ](https://chengheai.github.io/daily-vue-demo/#/calendar)\n## 功能\n* 自适应式按周切换\n* 与DatePicker日期选择器使用\n## 结合Element-ui使用\n## 效果\n![](https://github.com/chengheai/review-demo-image/blob/master/2019-01-15%2014-03-05.2019-01-15%2014_03_49.gif?raw=true)\n与vue-element结合组件，[请转到🌈](https://github.com/chengheai/daily-vue-demo/blob/master/src/components/Calendar.vue)\n\n![](https://github.com/chengheai/review-demo-image/blob/master/2019-01-15%2014-00-09.2019-01-15%2014_01_04.gif?raw=true)\n\n## 使用\n``` javascript\n<VueWeekPicker @dateValue=\"dateValue\" />\n\nOr\n\n<vue-week-picker @dateValue=\"dateValue\" />\n\nimport VueWeekPicker from 'vue-week-picker';\n\nexport default {\n  components: {\n    VueWeekPicker\n  }\n}\n\nOr\n\nexport default {\n  components: {\n    'vue-week-picker': VueWeekPicker\n  }\n}\n\n```\n\n\n## 代码\n``` html\n<template>\n  <div class=\"date\">\n    <el-row>\n      <el-col :span=\"24\">\n        <div class=\"weeks\">\n          <!-- 日期 -->\n          <ul class=\"days\">\n            <li @click=\"weekPre\" class=\"prev-btn\">\n              <i class=\"fa fa-angle-left fa-icon\" aria-hidden=\"true\"></i>\n              <span class=\"hidden-sm-and-down\" style=\"margin-left: 5px;\">上一周</span>\n            </li>\n            <li\n              @click=\"pick(day, index)\"\n              v-for=\"(day, index) in days\"\n              :key=\"index\"\n              :class=\"{selected:index == tabIndex}\"\n            >\n              <!--本月-->\n              <span v-if=\"day.getMonth()+1 != currentMonth\" class=\"other-month item-wrapper\">\n                <p>{{day | getWeekFormat}}</p>\n                <span class=\"hidden-sm-and-down\">{{ day | dateFormat }}</span>\n              </span>\n              <span v-else>\n                <!--今天-->\n                <span\n                  v-if=\"day.getFullYear() == new Date().getFullYear() && day.getMonth() == new Date().getMonth() && day.getDate() == new Date().getDate()\"\n                  class=\"today-item\"\n                >今天</span>\n                <span class=\"item-wrapper\" v-else>\n                  <p>{{day | getWeekFormat}}</p>\n                  <span class=\"hidden-sm-and-down\">{{ day | dateFormat }}</span>\n                </span>\n              </span>\n            </li>\n            <li @click=\"weekNext\" class=\"next-btn\">\n              <span class=\"hidden-sm-and-down\" style=\"margin-right: 5px;\">下一周</span>\n              <i class=\"fa fa-angle-right fa-icon\" aria-hidden=\"true\"></i>\n            </li>\n            <li>\n              <span>\n                <el-date-picker\n                  class=\"right-pick-btn\"\n                  style=\"width: 100%\"\n                  @change=\"pickDate\"\n                  v-model=\"value1\"\n                  type=\"date\"\n                  placeholder=\"按日期查询\"\n                ></el-date-picker>\n              </span>\n            </li>\n          </ul>\n        </div>\n      </el-col>\n    </el-row>\n    <el-row>\n      <el-col :span=\"20\" :offset=\"2\" class=\"time-range\">\n        <span\n          @click=\"pickTime(time, index)\"\n          v-for=\"(time, index) in times\"\n          :key=\"index\"\n          :class=\"{active:index == tabTimeIndex}\"\n        >{{time}}</span>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n```\n``` javascript\n<script>\n/* eslint-disable */\nimport moment from \"moment\";\nexport default {\n  props: {\n    dateValue: {\n      type: String,\n      default: moment(new Date()).format(\"YYYY-MM-DD\")\n    },\n    timeValue: {\n      type: String,\n      default: \"00:00\"\n    }\n  },\n  data() {\n    return {\n      currentYear: 1970, // 年份\n      currentMonth: 1, // 月份\n      currentDay: 1, // 日期\n      currentWeek: 1, // 星期\n      days: [],\n      value1: \"\",\n      tabIndex: null,\n      tabTimeIndex: 0,\n      times: [\n        \"00:00~06:00\",\n        \"06:00~12:00\",\n        \"12:00~18:00\",\n        \"18:00~24:00\",\n        \"今日节目\"\n      ]\n    };\n  },\n  filters: {\n    dateFormat(date) {\n      return moment(date).format(\"YYYY-MM-DD\");\n    },\n    getWeekFormat(date) {\n      const weeksObj = {\n        1: \"周一\",\n        2: \"周二\",\n        3: \"周三\",\n        4: \"周四\",\n        5: \"周五\",\n        6: \"周六\",\n        7: \"周日\"\n      };\n      let weekNumber = moment(date).isoWeekday();\n      return weeksObj[weekNumber];\n    }\n  },\n\n  mounted() {\n    const index = _.findIndex(this.days, function(o) {\n      // console.log('o: ', o.getDate());\n      // console.log('new Date().getDate(): ', new Date().getDate());\n      return o.getDate() === new Date().getDate();\n    });\n    console.log(\"index: \", index);\n    this.tabIndex = index;\n  },\n\n  created() {\n    this.initData(null);\n  },\n\n  methods: {\n    formatDate(year, month, day) {\n      const y = year;\n      let m = month;\n      if (m < 10) m = `0${m}`;\n      let d = day;\n      if (d < 10) d = `0${d}`;\n      return `${y}-${m}-${d}`;\n    },\n    pickDate(date) {\n      let newDate = moment(date).format(\"YYYY-MM-DD\");\n      this.$emit(\"dateValue\", newDate);\n    },\n    initData(cur) {\n      let date = \"\";\n      if (cur) {\n        date = new Date(cur);\n      } else {\n        date = new Date();\n      }\n      this.currentDay = date.getDate(); // 今日日期 几号\n      this.currentYear = date.getFullYear(); // 当前年份\n      this.currentMonth = date.getMonth() + 1; // 当前月份\n      this.currentWeek = date.getDay(); // 1...6,0  // 星期几\n      if (this.currentWeek === 0) {\n        this.currentWeek = 7;\n      }\n      const str = this.formatDate(\n        this.currentYear,\n        this.currentMonth,\n        this.currentDay\n      ); // 今日日期 年-月-日\n      this.days.length = 0;\n      // 今天是周日，放在第一行第7个位置，前面6个 这里默认显示一周，如果需要显示一个月，则第二个循环为 i<= 35- this.currentWeek\n      /* eslint-disabled */\n      for (let i = this.currentWeek - 1; i >= 0; i -= 1) {\n        const d = new Date(str);\n        d.setDate(d.getDate() - i);\n        // console.log(y:\" + d.getDate())\n        this.days.push(d);\n      }\n      for (let i = 1; i <= 7 - this.currentWeek; i += 1) {\n        const d = new Date(str);\n        d.setDate(d.getDate() + i);\n        this.days.push(d);\n      }\n    },\n\n    // 上个星期\n    weekPre() {\n      const d = this.days[0]; // 如果当期日期是7号或者小于7号\n      d.setDate(d.getDate() - 7);\n      this.initData(d);\n    },\n\n    // 下个星期\n    weekNext() {\n      const d = this.days[6]; // 如果当期日期是7号或者小于7号\n      d.setDate(d.getDate() + 7);\n      this.initData(d);\n    },\n\n    // 上一個月  传入当前年份和月份\n    pickPre(year, month) {\n      const d = new Date(this.formatDate(year, month, 1));\n      d.setDate(0);\n      this.initData(this.formatDate(d.getFullYear(), d.getMonth() + 1, 1));\n    },\n\n    // 下一個月  传入当前年份和月份\n    pickNext(year, month) {\n      const d = new Date(this.formatDate(year, month, 1));\n      d.setDate(35);\n      this.initData(this.formatDate(d.getFullYear(), d.getMonth() + 1, 1));\n    },\n\n    // 当前选择日期\n    pick(date, index) {\n      let newDate = moment(date).format(\"YYYY-MM-DD\");\n      this.$emit(\"dateValue\", newDate);\n      // console.log(\"index: \", index);\n      this.tabIndex = index;\n      // alert(\n      //   this.formatDate(date.getFullYear(), date.getMonth() + 1, date.getDate())\n      // );\n    },\n    pickTime(time, index) {\n      // console.log('time: ', time);\n      let timeArr = [];\n      timeArr.push(_.head(_.split(time, \"~\")));\n      console.log(\"timeArr: \", timeArr);\n      this.$emit(\"timeValue\", _.join(timeArr), \"\");\n      // console.log(\"index: \", index);\n      this.tabTimeIndex = index;\n      // alert(\n      //   this.formatDate(date.getFullYear(), date.getMonth() + 1, date.getDate())\n      // );\n    }\n  }\n};\n</script>\n```\n\n","slug":"vue-element-实现支持按周切换的日历","published":1,"updated":"2021-10-09T08:48:32.076Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzabn001t5c54g8qsavzl","content":"<h1 id=\"vue-week-picker\"><a href=\"#vue-week-picker\" class=\"headerlink\" title=\"vue-week-picker\"></a>vue-week-picker</h1><blockquote>\n<p>vue-week-picker</p>\n</blockquote>\n<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2> <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install vue-week-picker --save-dev</span><br></pre></td></tr></table></figure>\n<h2 id=\"DEMO\"><a href=\"#DEMO\" class=\"headerlink\" title=\"DEMO\"></a>DEMO</h2><ul>\n<li>原生<br><a href=\"https://chengheai.github.io/daily-vue-demo/#/calendar1\" target=\"_blank\" rel=\"noopener\">线上DEMO👅 🦊 🐸 🚎 </a></li>\n<li>与element-ui结合使用<br><a href=\"https://chengheai.github.io/daily-vue-demo/#/calendar\" target=\"_blank\" rel=\"noopener\">线上DEMO👅 🦊 🐸 🚎 </a><h2 id=\"功能\"><a href=\"#功能\" class=\"headerlink\" title=\"功能\"></a>功能</h2></li>\n<li>自适应式按周切换</li>\n<li>与DatePicker日期选择器使用<h2 id=\"结合Element-ui使用\"><a href=\"#结合Element-ui使用\" class=\"headerlink\" title=\"结合Element-ui使用\"></a>结合Element-ui使用</h2><h2 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/2019-01-15%2014-03-05.2019-01-15%2014_03_49.gif?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n与vue-element结合组件，<a href=\"https://github.com/chengheai/daily-vue-demo/blob/master/src/components/Calendar.vue\">请转到🌈</a></li>\n</ul>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/2019-01-15%2014-00-09.2019-01-15%2014_01_04.gif?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;VueWeekPicker @dateValue=<span class=\"string\">\"dateValue\"</span> /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">Or</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;vue-week-picker @dateValue=<span class=\"string\">\"dateValue\"</span> /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> VueWeekPicker <span class=\"keyword\">from</span> <span class=\"string\">'vue-week-picker'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  components: &#123;</span><br><span class=\"line\">    VueWeekPicker</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Or</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  components: &#123;</span><br><span class=\"line\">    <span class=\"string\">'vue-week-picker'</span>: VueWeekPicker</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"date\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-row</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">el-col</span> <span class=\"attr\">:span</span>=<span class=\"string\">\"24\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"weeks\"</span>&gt;</span></span><br><span class=\"line\">          <span class=\"comment\">&lt;!-- 日期 --&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">class</span>=<span class=\"string\">\"days\"</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">li</span> @<span class=\"attr\">click</span>=<span class=\"string\">\"weekPre\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"prev-btn\"</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">\"fa fa-angle-left fa-icon\"</span> <span class=\"attr\">aria-hidden</span>=<span class=\"string\">\"true\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"hidden-sm-and-down\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"margin-left: 5px;\"</span>&gt;</span>上一周<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">li</span></span></span><br><span class=\"line\"><span class=\"tag\">              @<span class=\"attr\">click</span>=<span class=\"string\">\"pick(day, index)\"</span></span></span><br><span class=\"line\"><span class=\"tag\">              <span class=\"attr\">v-for</span>=<span class=\"string\">\"(day, index) in days\"</span></span></span><br><span class=\"line\"><span class=\"tag\">              <span class=\"attr\">:key</span>=<span class=\"string\">\"index\"</span></span></span><br><span class=\"line\"><span class=\"tag\">              <span class=\"attr\">:class</span>=<span class=\"string\">\"&#123;selected:index == tabIndex&#125;\"</span></span></span><br><span class=\"line\"><span class=\"tag\">            &gt;</span></span><br><span class=\"line\">              <span class=\"comment\">&lt;!--本月--&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">v-if</span>=<span class=\"string\">\"day.getMonth()+1 != currentMonth\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"other-month item-wrapper\"</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123;day | getWeekFormat&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"hidden-sm-and-down\"</span>&gt;</span>&#123;&#123; day | dateFormat &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">v-else</span>&gt;</span></span><br><span class=\"line\">                <span class=\"comment\">&lt;!--今天--&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">span</span></span></span><br><span class=\"line\"><span class=\"tag\">                  <span class=\"attr\">v-if</span>=<span class=\"string\">\"day.getFullYear() == new Date().getFullYear() &amp;&amp; day.getMonth() == new Date().getMonth() &amp;&amp; day.getDate() == new Date().getDate()\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                  <span class=\"attr\">class</span>=<span class=\"string\">\"today-item\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                &gt;</span>今天<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"item-wrapper\"</span> <span class=\"attr\">v-else</span>&gt;</span></span><br><span class=\"line\">                  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123;day | getWeekFormat&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">                  <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"hidden-sm-and-down\"</span>&gt;</span>&#123;&#123; day | dateFormat &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">li</span> @<span class=\"attr\">click</span>=<span class=\"string\">\"weekNext\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"next-btn\"</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"hidden-sm-and-down\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"margin-right: 5px;\"</span>&gt;</span>下一周<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">\"fa fa-angle-right fa-icon\"</span> <span class=\"attr\">aria-hidden</span>=<span class=\"string\">\"true\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">el-date-picker</span></span></span><br><span class=\"line\"><span class=\"tag\">                  <span class=\"attr\">class</span>=<span class=\"string\">\"right-pick-btn\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                  <span class=\"attr\">style</span>=<span class=\"string\">\"width: 100%\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                  @<span class=\"attr\">change</span>=<span class=\"string\">\"pickDate\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                  <span class=\"attr\">v-model</span>=<span class=\"string\">\"value1\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                  <span class=\"attr\">type</span>=<span class=\"string\">\"date\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                  <span class=\"attr\">placeholder</span>=<span class=\"string\">\"按日期查询\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-date-picker</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">el-col</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">el-row</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-row</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">el-col</span> <span class=\"attr\">:span</span>=<span class=\"string\">\"20\"</span> <span class=\"attr\">:offset</span>=<span class=\"string\">\"2\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"time-range\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">span</span></span></span><br><span class=\"line\"><span class=\"tag\">          @<span class=\"attr\">click</span>=<span class=\"string\">\"pickTime(time, index)\"</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">v-for</span>=<span class=\"string\">\"(time, index) in times\"</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">:key</span>=<span class=\"string\">\"index\"</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">:class</span>=<span class=\"string\">\"&#123;active:index == tabTimeIndex&#125;\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        &gt;</span>&#123;&#123;time&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">el-col</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">el-row</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\"><span class=\"comment\">/* eslint-disable */</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> moment <span class=\"keyword\">from</span> <span class=\"string\">\"moment\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  props: &#123;</span><br><span class=\"line\">    dateValue: &#123;</span><br><span class=\"line\">      type: <span class=\"built_in\">String</span>,</span><br><span class=\"line\">      <span class=\"keyword\">default</span>: moment(<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>()).format(<span class=\"string\">\"YYYY-MM-DD\"</span>)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    timeValue: &#123;</span><br><span class=\"line\">      type: <span class=\"built_in\">String</span>,</span><br><span class=\"line\">      <span class=\"keyword\">default</span>: <span class=\"string\">\"00:00\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  data() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      currentYear: <span class=\"number\">1970</span>, <span class=\"comment\">// 年份</span></span><br><span class=\"line\">      currentMonth: <span class=\"number\">1</span>, <span class=\"comment\">// 月份</span></span><br><span class=\"line\">      currentDay: <span class=\"number\">1</span>, <span class=\"comment\">// 日期</span></span><br><span class=\"line\">      currentWeek: <span class=\"number\">1</span>, <span class=\"comment\">// 星期</span></span><br><span class=\"line\">      days: [],</span><br><span class=\"line\">      value1: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">      tabIndex: <span class=\"literal\">null</span>,</span><br><span class=\"line\">      tabTimeIndex: <span class=\"number\">0</span>,</span><br><span class=\"line\">      times: [</span><br><span class=\"line\">        <span class=\"string\">\"00:00~06:00\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"06:00~12:00\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"12:00~18:00\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"18:00~24:00\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"今日节目\"</span></span><br><span class=\"line\">      ]</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  filters: &#123;</span><br><span class=\"line\">    dateFormat(date) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> moment(date).format(<span class=\"string\">\"YYYY-MM-DD\"</span>);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    getWeekFormat(date) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> weeksObj = &#123;</span><br><span class=\"line\">        <span class=\"number\">1</span>: <span class=\"string\">\"周一\"</span>,</span><br><span class=\"line\">        <span class=\"number\">2</span>: <span class=\"string\">\"周二\"</span>,</span><br><span class=\"line\">        <span class=\"number\">3</span>: <span class=\"string\">\"周三\"</span>,</span><br><span class=\"line\">        <span class=\"number\">4</span>: <span class=\"string\">\"周四\"</span>,</span><br><span class=\"line\">        <span class=\"number\">5</span>: <span class=\"string\">\"周五\"</span>,</span><br><span class=\"line\">        <span class=\"number\">6</span>: <span class=\"string\">\"周六\"</span>,</span><br><span class=\"line\">        <span class=\"number\">7</span>: <span class=\"string\">\"周日\"</span></span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> weekNumber = moment(date).isoWeekday();</span><br><span class=\"line\">      <span class=\"keyword\">return</span> weeksObj[weekNumber];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  mounted() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> index = _.findIndex(<span class=\"keyword\">this</span>.days, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">o</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"comment\">// console.log('o: ', o.getDate());</span></span><br><span class=\"line\">      <span class=\"comment\">// console.log('new Date().getDate(): ', new Date().getDate());</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> o.getDate() === <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getDate();</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"index: \"</span>, index);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.tabIndex = index;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  created() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.initData(<span class=\"literal\">null</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    formatDate(year, month, day) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> y = year;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> m = month;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (m &lt; <span class=\"number\">10</span>) m = <span class=\"string\">`0<span class=\"subst\">$&#123;m&#125;</span>`</span>;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> d = day;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (d &lt; <span class=\"number\">10</span>) d = <span class=\"string\">`0<span class=\"subst\">$&#123;d&#125;</span>`</span>;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">`<span class=\"subst\">$&#123;y&#125;</span>-<span class=\"subst\">$&#123;m&#125;</span>-<span class=\"subst\">$&#123;d&#125;</span>`</span>;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    pickDate(date) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> newDate = moment(date).format(<span class=\"string\">\"YYYY-MM-DD\"</span>);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.$emit(<span class=\"string\">\"dateValue\"</span>, newDate);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    initData(cur) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> date = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (cur) &#123;</span><br><span class=\"line\">        date = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(cur);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        date = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.currentDay = date.getDate(); <span class=\"comment\">// 今日日期 几号</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.currentYear = date.getFullYear(); <span class=\"comment\">// 当前年份</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.currentMonth = date.getMonth() + <span class=\"number\">1</span>; <span class=\"comment\">// 当前月份</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.currentWeek = date.getDay(); <span class=\"comment\">// 1...6,0  // 星期几</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.currentWeek === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.currentWeek = <span class=\"number\">7</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> str = <span class=\"keyword\">this</span>.formatDate(</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.currentYear,</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.currentMonth,</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.currentDay</span><br><span class=\"line\">      ); <span class=\"comment\">// 今日日期 年-月-日</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.days.length = <span class=\"number\">0</span>;</span><br><span class=\"line\">      <span class=\"comment\">// 今天是周日，放在第一行第7个位置，前面6个 这里默认显示一周，如果需要显示一个月，则第二个循环为 i&lt;= 35- this.currentWeek</span></span><br><span class=\"line\">      <span class=\"comment\">/* eslint-disabled */</span></span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"keyword\">this</span>.currentWeek - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -= <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> d = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(str);</span><br><span class=\"line\">        d.setDate(d.getDate() - i);</span><br><span class=\"line\">        <span class=\"comment\">// console.log(y:\" + d.getDate())</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.days.push(d);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">1</span>; i &lt;= <span class=\"number\">7</span> - <span class=\"keyword\">this</span>.currentWeek; i += <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> d = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(str);</span><br><span class=\"line\">        d.setDate(d.getDate() + i);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.days.push(d);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 上个星期</span></span><br><span class=\"line\">    weekPre() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> d = <span class=\"keyword\">this</span>.days[<span class=\"number\">0</span>]; <span class=\"comment\">// 如果当期日期是7号或者小于7号</span></span><br><span class=\"line\">      d.setDate(d.getDate() - <span class=\"number\">7</span>);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.initData(d);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 下个星期</span></span><br><span class=\"line\">    weekNext() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> d = <span class=\"keyword\">this</span>.days[<span class=\"number\">6</span>]; <span class=\"comment\">// 如果当期日期是7号或者小于7号</span></span><br><span class=\"line\">      d.setDate(d.getDate() + <span class=\"number\">7</span>);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.initData(d);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 上一個月  传入当前年份和月份</span></span><br><span class=\"line\">    pickPre(year, month) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> d = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(<span class=\"keyword\">this</span>.formatDate(year, month, <span class=\"number\">1</span>));</span><br><span class=\"line\">      d.setDate(<span class=\"number\">0</span>);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.initData(<span class=\"keyword\">this</span>.formatDate(d.getFullYear(), d.getMonth() + <span class=\"number\">1</span>, <span class=\"number\">1</span>));</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 下一個月  传入当前年份和月份</span></span><br><span class=\"line\">    pickNext(year, month) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> d = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(<span class=\"keyword\">this</span>.formatDate(year, month, <span class=\"number\">1</span>));</span><br><span class=\"line\">      d.setDate(<span class=\"number\">35</span>);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.initData(<span class=\"keyword\">this</span>.formatDate(d.getFullYear(), d.getMonth() + <span class=\"number\">1</span>, <span class=\"number\">1</span>));</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 当前选择日期</span></span><br><span class=\"line\">    pick(date, index) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> newDate = moment(date).format(<span class=\"string\">\"YYYY-MM-DD\"</span>);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.$emit(<span class=\"string\">\"dateValue\"</span>, newDate);</span><br><span class=\"line\">      <span class=\"comment\">// console.log(\"index: \", index);</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.tabIndex = index;</span><br><span class=\"line\">      <span class=\"comment\">// alert(</span></span><br><span class=\"line\">      <span class=\"comment\">//   this.formatDate(date.getFullYear(), date.getMonth() + 1, date.getDate())</span></span><br><span class=\"line\">      <span class=\"comment\">// );</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    pickTime(time, index) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// console.log('time: ', time);</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> timeArr = [];</span><br><span class=\"line\">      timeArr.push(_.head(_.split(time, <span class=\"string\">\"~\"</span>)));</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">\"timeArr: \"</span>, timeArr);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.$emit(<span class=\"string\">\"timeValue\"</span>, _.join(timeArr), <span class=\"string\">\"\"</span>);</span><br><span class=\"line\">      <span class=\"comment\">// console.log(\"index: \", index);</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.tabTimeIndex = index;</span><br><span class=\"line\">      <span class=\"comment\">// alert(</span></span><br><span class=\"line\">      <span class=\"comment\">//   this.formatDate(date.getFullYear(), date.getMonth() + 1, date.getDate())</span></span><br><span class=\"line\">      <span class=\"comment\">// );</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">&lt;<span class=\"regexp\">/script&gt;</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"vue-week-picker\"><a href=\"#vue-week-picker\" class=\"headerlink\" title=\"vue-week-picker\"></a>vue-week-picker</h1><blockquote>\n<p>vue-week-picker</p>\n</blockquote>\n<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2> <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install vue-week-picker --save-dev</span><br></pre></td></tr></table></figure>\n<h2 id=\"DEMO\"><a href=\"#DEMO\" class=\"headerlink\" title=\"DEMO\"></a>DEMO</h2><ul>\n<li>原生<br><a href=\"https://chengheai.github.io/daily-vue-demo/#/calendar1\" target=\"_blank\" rel=\"noopener\">线上DEMO👅 🦊 🐸 🚎 </a></li>\n<li>与element-ui结合使用<br><a href=\"https://chengheai.github.io/daily-vue-demo/#/calendar\" target=\"_blank\" rel=\"noopener\">线上DEMO👅 🦊 🐸 🚎 </a><h2 id=\"功能\"><a href=\"#功能\" class=\"headerlink\" title=\"功能\"></a>功能</h2></li>\n<li>自适应式按周切换</li>\n<li>与DatePicker日期选择器使用<h2 id=\"结合Element-ui使用\"><a href=\"#结合Element-ui使用\" class=\"headerlink\" title=\"结合Element-ui使用\"></a>结合Element-ui使用</h2><h2 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/2019-01-15%2014-03-05.2019-01-15%2014_03_49.gif?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n与vue-element结合组件，<a href=\"https://github.com/chengheai/daily-vue-demo/blob/master/src/components/Calendar.vue\">请转到🌈</a></li>\n</ul>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/2019-01-15%2014-00-09.2019-01-15%2014_01_04.gif?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;VueWeekPicker @dateValue=<span class=\"string\">\"dateValue\"</span> /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">Or</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;vue-week-picker @dateValue=<span class=\"string\">\"dateValue\"</span> /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> VueWeekPicker <span class=\"keyword\">from</span> <span class=\"string\">'vue-week-picker'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  components: &#123;</span><br><span class=\"line\">    VueWeekPicker</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Or</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  components: &#123;</span><br><span class=\"line\">    <span class=\"string\">'vue-week-picker'</span>: VueWeekPicker</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"date\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-row</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">el-col</span> <span class=\"attr\">:span</span>=<span class=\"string\">\"24\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"weeks\"</span>&gt;</span></span><br><span class=\"line\">          <span class=\"comment\">&lt;!-- 日期 --&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">class</span>=<span class=\"string\">\"days\"</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">li</span> @<span class=\"attr\">click</span>=<span class=\"string\">\"weekPre\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"prev-btn\"</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">\"fa fa-angle-left fa-icon\"</span> <span class=\"attr\">aria-hidden</span>=<span class=\"string\">\"true\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"hidden-sm-and-down\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"margin-left: 5px;\"</span>&gt;</span>上一周<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">li</span></span></span><br><span class=\"line\"><span class=\"tag\">              @<span class=\"attr\">click</span>=<span class=\"string\">\"pick(day, index)\"</span></span></span><br><span class=\"line\"><span class=\"tag\">              <span class=\"attr\">v-for</span>=<span class=\"string\">\"(day, index) in days\"</span></span></span><br><span class=\"line\"><span class=\"tag\">              <span class=\"attr\">:key</span>=<span class=\"string\">\"index\"</span></span></span><br><span class=\"line\"><span class=\"tag\">              <span class=\"attr\">:class</span>=<span class=\"string\">\"&#123;selected:index == tabIndex&#125;\"</span></span></span><br><span class=\"line\"><span class=\"tag\">            &gt;</span></span><br><span class=\"line\">              <span class=\"comment\">&lt;!--本月--&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">v-if</span>=<span class=\"string\">\"day.getMonth()+1 != currentMonth\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"other-month item-wrapper\"</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123;day | getWeekFormat&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"hidden-sm-and-down\"</span>&gt;</span>&#123;&#123; day | dateFormat &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">v-else</span>&gt;</span></span><br><span class=\"line\">                <span class=\"comment\">&lt;!--今天--&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">span</span></span></span><br><span class=\"line\"><span class=\"tag\">                  <span class=\"attr\">v-if</span>=<span class=\"string\">\"day.getFullYear() == new Date().getFullYear() &amp;&amp; day.getMonth() == new Date().getMonth() &amp;&amp; day.getDate() == new Date().getDate()\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                  <span class=\"attr\">class</span>=<span class=\"string\">\"today-item\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                &gt;</span>今天<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"item-wrapper\"</span> <span class=\"attr\">v-else</span>&gt;</span></span><br><span class=\"line\">                  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123;day | getWeekFormat&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">                  <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"hidden-sm-and-down\"</span>&gt;</span>&#123;&#123; day | dateFormat &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">li</span> @<span class=\"attr\">click</span>=<span class=\"string\">\"weekNext\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"next-btn\"</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"hidden-sm-and-down\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"margin-right: 5px;\"</span>&gt;</span>下一周<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">\"fa fa-angle-right fa-icon\"</span> <span class=\"attr\">aria-hidden</span>=<span class=\"string\">\"true\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">el-date-picker</span></span></span><br><span class=\"line\"><span class=\"tag\">                  <span class=\"attr\">class</span>=<span class=\"string\">\"right-pick-btn\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                  <span class=\"attr\">style</span>=<span class=\"string\">\"width: 100%\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                  @<span class=\"attr\">change</span>=<span class=\"string\">\"pickDate\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                  <span class=\"attr\">v-model</span>=<span class=\"string\">\"value1\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                  <span class=\"attr\">type</span>=<span class=\"string\">\"date\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                  <span class=\"attr\">placeholder</span>=<span class=\"string\">\"按日期查询\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-date-picker</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">el-col</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">el-row</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-row</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">el-col</span> <span class=\"attr\">:span</span>=<span class=\"string\">\"20\"</span> <span class=\"attr\">:offset</span>=<span class=\"string\">\"2\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"time-range\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">span</span></span></span><br><span class=\"line\"><span class=\"tag\">          @<span class=\"attr\">click</span>=<span class=\"string\">\"pickTime(time, index)\"</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">v-for</span>=<span class=\"string\">\"(time, index) in times\"</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">:key</span>=<span class=\"string\">\"index\"</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">:class</span>=<span class=\"string\">\"&#123;active:index == tabTimeIndex&#125;\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        &gt;</span>&#123;&#123;time&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">el-col</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">el-row</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\"><span class=\"comment\">/* eslint-disable */</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> moment <span class=\"keyword\">from</span> <span class=\"string\">\"moment\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  props: &#123;</span><br><span class=\"line\">    dateValue: &#123;</span><br><span class=\"line\">      type: <span class=\"built_in\">String</span>,</span><br><span class=\"line\">      <span class=\"keyword\">default</span>: moment(<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>()).format(<span class=\"string\">\"YYYY-MM-DD\"</span>)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    timeValue: &#123;</span><br><span class=\"line\">      type: <span class=\"built_in\">String</span>,</span><br><span class=\"line\">      <span class=\"keyword\">default</span>: <span class=\"string\">\"00:00\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  data() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      currentYear: <span class=\"number\">1970</span>, <span class=\"comment\">// 年份</span></span><br><span class=\"line\">      currentMonth: <span class=\"number\">1</span>, <span class=\"comment\">// 月份</span></span><br><span class=\"line\">      currentDay: <span class=\"number\">1</span>, <span class=\"comment\">// 日期</span></span><br><span class=\"line\">      currentWeek: <span class=\"number\">1</span>, <span class=\"comment\">// 星期</span></span><br><span class=\"line\">      days: [],</span><br><span class=\"line\">      value1: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">      tabIndex: <span class=\"literal\">null</span>,</span><br><span class=\"line\">      tabTimeIndex: <span class=\"number\">0</span>,</span><br><span class=\"line\">      times: [</span><br><span class=\"line\">        <span class=\"string\">\"00:00~06:00\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"06:00~12:00\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"12:00~18:00\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"18:00~24:00\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"今日节目\"</span></span><br><span class=\"line\">      ]</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  filters: &#123;</span><br><span class=\"line\">    dateFormat(date) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> moment(date).format(<span class=\"string\">\"YYYY-MM-DD\"</span>);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    getWeekFormat(date) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> weeksObj = &#123;</span><br><span class=\"line\">        <span class=\"number\">1</span>: <span class=\"string\">\"周一\"</span>,</span><br><span class=\"line\">        <span class=\"number\">2</span>: <span class=\"string\">\"周二\"</span>,</span><br><span class=\"line\">        <span class=\"number\">3</span>: <span class=\"string\">\"周三\"</span>,</span><br><span class=\"line\">        <span class=\"number\">4</span>: <span class=\"string\">\"周四\"</span>,</span><br><span class=\"line\">        <span class=\"number\">5</span>: <span class=\"string\">\"周五\"</span>,</span><br><span class=\"line\">        <span class=\"number\">6</span>: <span class=\"string\">\"周六\"</span>,</span><br><span class=\"line\">        <span class=\"number\">7</span>: <span class=\"string\">\"周日\"</span></span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> weekNumber = moment(date).isoWeekday();</span><br><span class=\"line\">      <span class=\"keyword\">return</span> weeksObj[weekNumber];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  mounted() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> index = _.findIndex(<span class=\"keyword\">this</span>.days, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">o</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"comment\">// console.log('o: ', o.getDate());</span></span><br><span class=\"line\">      <span class=\"comment\">// console.log('new Date().getDate(): ', new Date().getDate());</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> o.getDate() === <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getDate();</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"index: \"</span>, index);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.tabIndex = index;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  created() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.initData(<span class=\"literal\">null</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    formatDate(year, month, day) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> y = year;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> m = month;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (m &lt; <span class=\"number\">10</span>) m = <span class=\"string\">`0<span class=\"subst\">$&#123;m&#125;</span>`</span>;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> d = day;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (d &lt; <span class=\"number\">10</span>) d = <span class=\"string\">`0<span class=\"subst\">$&#123;d&#125;</span>`</span>;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">`<span class=\"subst\">$&#123;y&#125;</span>-<span class=\"subst\">$&#123;m&#125;</span>-<span class=\"subst\">$&#123;d&#125;</span>`</span>;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    pickDate(date) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> newDate = moment(date).format(<span class=\"string\">\"YYYY-MM-DD\"</span>);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.$emit(<span class=\"string\">\"dateValue\"</span>, newDate);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    initData(cur) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> date = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (cur) &#123;</span><br><span class=\"line\">        date = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(cur);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        date = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.currentDay = date.getDate(); <span class=\"comment\">// 今日日期 几号</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.currentYear = date.getFullYear(); <span class=\"comment\">// 当前年份</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.currentMonth = date.getMonth() + <span class=\"number\">1</span>; <span class=\"comment\">// 当前月份</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.currentWeek = date.getDay(); <span class=\"comment\">// 1...6,0  // 星期几</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.currentWeek === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.currentWeek = <span class=\"number\">7</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> str = <span class=\"keyword\">this</span>.formatDate(</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.currentYear,</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.currentMonth,</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.currentDay</span><br><span class=\"line\">      ); <span class=\"comment\">// 今日日期 年-月-日</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.days.length = <span class=\"number\">0</span>;</span><br><span class=\"line\">      <span class=\"comment\">// 今天是周日，放在第一行第7个位置，前面6个 这里默认显示一周，如果需要显示一个月，则第二个循环为 i&lt;= 35- this.currentWeek</span></span><br><span class=\"line\">      <span class=\"comment\">/* eslint-disabled */</span></span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"keyword\">this</span>.currentWeek - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i -= <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> d = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(str);</span><br><span class=\"line\">        d.setDate(d.getDate() - i);</span><br><span class=\"line\">        <span class=\"comment\">// console.log(y:\" + d.getDate())</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.days.push(d);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">1</span>; i &lt;= <span class=\"number\">7</span> - <span class=\"keyword\">this</span>.currentWeek; i += <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> d = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(str);</span><br><span class=\"line\">        d.setDate(d.getDate() + i);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.days.push(d);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 上个星期</span></span><br><span class=\"line\">    weekPre() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> d = <span class=\"keyword\">this</span>.days[<span class=\"number\">0</span>]; <span class=\"comment\">// 如果当期日期是7号或者小于7号</span></span><br><span class=\"line\">      d.setDate(d.getDate() - <span class=\"number\">7</span>);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.initData(d);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 下个星期</span></span><br><span class=\"line\">    weekNext() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> d = <span class=\"keyword\">this</span>.days[<span class=\"number\">6</span>]; <span class=\"comment\">// 如果当期日期是7号或者小于7号</span></span><br><span class=\"line\">      d.setDate(d.getDate() + <span class=\"number\">7</span>);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.initData(d);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 上一個月  传入当前年份和月份</span></span><br><span class=\"line\">    pickPre(year, month) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> d = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(<span class=\"keyword\">this</span>.formatDate(year, month, <span class=\"number\">1</span>));</span><br><span class=\"line\">      d.setDate(<span class=\"number\">0</span>);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.initData(<span class=\"keyword\">this</span>.formatDate(d.getFullYear(), d.getMonth() + <span class=\"number\">1</span>, <span class=\"number\">1</span>));</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 下一個月  传入当前年份和月份</span></span><br><span class=\"line\">    pickNext(year, month) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> d = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(<span class=\"keyword\">this</span>.formatDate(year, month, <span class=\"number\">1</span>));</span><br><span class=\"line\">      d.setDate(<span class=\"number\">35</span>);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.initData(<span class=\"keyword\">this</span>.formatDate(d.getFullYear(), d.getMonth() + <span class=\"number\">1</span>, <span class=\"number\">1</span>));</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 当前选择日期</span></span><br><span class=\"line\">    pick(date, index) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> newDate = moment(date).format(<span class=\"string\">\"YYYY-MM-DD\"</span>);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.$emit(<span class=\"string\">\"dateValue\"</span>, newDate);</span><br><span class=\"line\">      <span class=\"comment\">// console.log(\"index: \", index);</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.tabIndex = index;</span><br><span class=\"line\">      <span class=\"comment\">// alert(</span></span><br><span class=\"line\">      <span class=\"comment\">//   this.formatDate(date.getFullYear(), date.getMonth() + 1, date.getDate())</span></span><br><span class=\"line\">      <span class=\"comment\">// );</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    pickTime(time, index) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// console.log('time: ', time);</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> timeArr = [];</span><br><span class=\"line\">      timeArr.push(_.head(_.split(time, <span class=\"string\">\"~\"</span>)));</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">\"timeArr: \"</span>, timeArr);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.$emit(<span class=\"string\">\"timeValue\"</span>, _.join(timeArr), <span class=\"string\">\"\"</span>);</span><br><span class=\"line\">      <span class=\"comment\">// console.log(\"index: \", index);</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.tabTimeIndex = index;</span><br><span class=\"line\">      <span class=\"comment\">// alert(</span></span><br><span class=\"line\">      <span class=\"comment\">//   this.formatDate(date.getFullYear(), date.getMonth() + 1, date.getDate())</span></span><br><span class=\"line\">      <span class=\"comment\">// );</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">&lt;<span class=\"regexp\">/script&gt;</span></span><br></pre></td></tr></table></figure>\n"},{"title":"vue-quill-editor富文本内容在页面中样式丢失","date":"2019-08-20T13:47:11.000Z","_content":"## 现象\n用富文本的情况有很多，例如在后台管理系统排版好的富文本页面，准备在移动端页面去显示，或者在官网显示，两个项目不在一起，在管理系统排好的样式在显示页面显示的一塌糊涂，为啥呢？大多数情况是样式没有引入。\n## 解决\n给容器增加一个class ql-editor，才能正常显示，另外前面是主题类名，不同的主题显示不同的样式\n``` css\n  <link href=\"http://cdn.quilljs.com/1.3.4/quill.snow.css\" rel=\"stylesheet\">\n  <link href=\"http://cdn.quilljs.com/1.3.4/quill.bubble.css\" rel=\"stylesheet\">\n  <link href=\"http://cdn.quilljs.com/1.3.4/quill.core.css\" rel=\"stylesheet\">\n```\n 我这边是snow，那么前缀就是ql-snow\n``` html\n<div class=\"ql-snow ql-editor\" v-html=\"report.foreword\"></div>\n```\n关于图片上传之后无法提交，报413错误 [ Request Entity Too Large ],解决方法[将图片上传到七牛云](https://chengheai.github.io/2019/08/15/vue-quill-editor%E5%AF%8C%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E6%8F%92%E5%85%A5%E4%B8%83%E7%89%9B%E4%BA%91%E4%B8%8A%E4%BC%A0/)\n","source":"_posts/vue-quill-editor富文本内容在页面中样式丢失.md","raw":"---\ntitle: vue-quill-editor富文本内容在页面中样式丢失\ndate: 2019-08-20 21:47:11\ntags: ['富文本', 'vue']\n---\n## 现象\n用富文本的情况有很多，例如在后台管理系统排版好的富文本页面，准备在移动端页面去显示，或者在官网显示，两个项目不在一起，在管理系统排好的样式在显示页面显示的一塌糊涂，为啥呢？大多数情况是样式没有引入。\n## 解决\n给容器增加一个class ql-editor，才能正常显示，另外前面是主题类名，不同的主题显示不同的样式\n``` css\n  <link href=\"http://cdn.quilljs.com/1.3.4/quill.snow.css\" rel=\"stylesheet\">\n  <link href=\"http://cdn.quilljs.com/1.3.4/quill.bubble.css\" rel=\"stylesheet\">\n  <link href=\"http://cdn.quilljs.com/1.3.4/quill.core.css\" rel=\"stylesheet\">\n```\n 我这边是snow，那么前缀就是ql-snow\n``` html\n<div class=\"ql-snow ql-editor\" v-html=\"report.foreword\"></div>\n```\n关于图片上传之后无法提交，报413错误 [ Request Entity Too Large ],解决方法[将图片上传到七牛云](https://chengheai.github.io/2019/08/15/vue-quill-editor%E5%AF%8C%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E6%8F%92%E5%85%A5%E4%B8%83%E7%89%9B%E4%BA%91%E4%B8%8A%E4%BC%A0/)\n","slug":"vue-quill-editor富文本内容在页面中样式丢失","published":1,"updated":"2021-10-09T08:48:32.077Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzabo001v5c54takg73vm","content":"<h2 id=\"现象\"><a href=\"#现象\" class=\"headerlink\" title=\"现象\"></a>现象</h2><p>用富文本的情况有很多，例如在后台管理系统排版好的富文本页面，准备在移动端页面去显示，或者在官网显示，两个项目不在一起，在管理系统排好的样式在显示页面显示的一塌糊涂，为啥呢？大多数情况是样式没有引入。</p>\n<h2 id=\"解决\"><a href=\"#解决\" class=\"headerlink\" title=\"解决\"></a>解决</h2><p>给容器增加一个class ql-editor，才能正常显示，另外前面是主题类名，不同的主题显示不同的样式<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;link href=\"http://cdn.quilljs.com/1.3.4/quill.snow.css\" rel=\"stylesheet\"&gt;</span><br><span class=\"line\">&lt;link href=\"http://cdn.quilljs.com/1.3.4/quill.bubble.css\" rel=\"stylesheet\"&gt;</span><br><span class=\"line\">&lt;link href=\"http://cdn.quilljs.com/1.3.4/quill.core.css\" rel=\"stylesheet\"&gt;</span><br></pre></td></tr></table></figure></p>\n<p> 我这边是snow，那么前缀就是ql-snow<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ql-snow ql-editor\"</span> <span class=\"attr\">v-html</span>=<span class=\"string\">\"report.foreword\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>关于图片上传之后无法提交，报413错误 [ Request Entity Too Large ],解决方法<a href=\"https://chengheai.github.io/2019/08/15/vue-quill-editor%E5%AF%8C%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E6%8F%92%E5%85%A5%E4%B8%83%E7%89%9B%E4%BA%91%E4%B8%8A%E4%BC%A0/\" target=\"_blank\" rel=\"noopener\">将图片上传到七牛云</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"现象\"><a href=\"#现象\" class=\"headerlink\" title=\"现象\"></a>现象</h2><p>用富文本的情况有很多，例如在后台管理系统排版好的富文本页面，准备在移动端页面去显示，或者在官网显示，两个项目不在一起，在管理系统排好的样式在显示页面显示的一塌糊涂，为啥呢？大多数情况是样式没有引入。</p>\n<h2 id=\"解决\"><a href=\"#解决\" class=\"headerlink\" title=\"解决\"></a>解决</h2><p>给容器增加一个class ql-editor，才能正常显示，另外前面是主题类名，不同的主题显示不同的样式<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;link href=\"http://cdn.quilljs.com/1.3.4/quill.snow.css\" rel=\"stylesheet\"&gt;</span><br><span class=\"line\">&lt;link href=\"http://cdn.quilljs.com/1.3.4/quill.bubble.css\" rel=\"stylesheet\"&gt;</span><br><span class=\"line\">&lt;link href=\"http://cdn.quilljs.com/1.3.4/quill.core.css\" rel=\"stylesheet\"&gt;</span><br></pre></td></tr></table></figure></p>\n<p> 我这边是snow，那么前缀就是ql-snow<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ql-snow ql-editor\"</span> <span class=\"attr\">v-html</span>=<span class=\"string\">\"report.foreword\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>关于图片上传之后无法提交，报413错误 [ Request Entity Too Large ],解决方法<a href=\"https://chengheai.github.io/2019/08/15/vue-quill-editor%E5%AF%8C%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E6%8F%92%E5%85%A5%E4%B8%83%E7%89%9B%E4%BA%91%E4%B8%8A%E4%BC%A0/\" target=\"_blank\" rel=\"noopener\">将图片上传到七牛云</a></p>\n"},{"title":"vue-quill-editor富文本编辑器实现图片插入七牛云上传","date":"2019-08-15T14:23:26.000Z","_content":"## 前言\nvue-quill-editor是我们再使用vue框架的时候常用的一个富文本编辑器，在进行富文本编辑的时候，我们往往要插入一些图片，vue-quill-editor默认的处理方式是直接将图片转成base64编码，这样的结果是整个富文本的html片段十分冗余，通常来讲，每个服务器端接收的post的数据大小都是有限制的，这样的话有可能导致提交失败，数据要传递很久才全部传送到服务器。\n因此，在富文本编辑的过程中，对于图片的处理，我们更合理的做法是将图片上传到服务器，再将图片链接插入到富文本中。\n## 代码\n### template\n``` html\n<template>\n  <div>\n    <!-- 图片上传组件辅助-->\n    <el-upload\n      class=\"avatar-uploader\"\n      :action=\"serverUrl\"\n      name=\"img\"\n      :headers=\"header\"\n      :show-file-list=\"false\"\n      :on-success=\"uploadSuccess\"\n      :on-error=\"uploadError\"\n      :before-upload=\"beforeUpload\"\n    ></el-upload>\n    <!--富文本编辑器组件-->\n    <el-row v-loading=\"quillUpdateImg\">\n      <quill-editor\n        v-model=\"detailContent\"\n        ref=\"myQuillEditor\"\n        :options=\"editorOption\"\n        @change=\"onEditorChange($event)\"\n        @ready=\"onEditorReady($event)\"\n      ></quill-editor>\n    </el-row>\n  </div>\n</template>\n```\n### script\n``` javascript\n// 工具栏配置\nconst toolbarOptions = [\n  ['bold', 'italic', 'underline', 'strike'], // toggled buttons\n  ['blockquote', 'code-block'],\n\n  [{ header: 1 }, { header: 2 }], // custom button values\n  [{ list: 'ordered' }, { list: 'bullet' }],\n  [{ script: 'sub' }, { script: 'super' }], // superscript/subscript\n  [{ indent: '-1' }, { indent: '+1' }], // outdent/indent\n  [{ direction: 'rtl' }], // text direction\n\n  [{ size: ['small', false, 'large', 'huge'] }], // custom dropdown\n  [{ header: [1, 2, 3, 4, 5, 6, false] }],\n\n  [{ color: [] }, { background: [] }], // dropdown with defaults from theme\n  [{ font: [] }],\n  [{ align: [] }],\n  ['link', 'image', 'video'],\n  ['clean'], // remove formatting button\n];\nexport default {\n  data() {\n    return {\n      serverUrl: '', // 这里写你要上传的图片服务器地址\n      header: { token: sessionStorage.token }, // 有的图片服务器要求请求头需要有token之类的参数，写在这里\n      detailContent: '', // 富文本内容\n      editorOption: {\n        placeholder: '',\n        theme: 'snow', // or 'bubble'\n        modules: {\n          toolbar: {\n            container: toolbarOptions, // 工具栏\n            handlers: {\n              image: function(value) {\n                if (value) {\n                  document.querySelector('#quill-upload input').click();\n                } else {\n                  this.quill.format('image', false);\n                }\n              },\n            },\n          },\n        },\n      },\n    };\n  },\n  methods: {\n    // 富文本图片上传前\n    beforeUpload() {\n      // 显示loading动画\n      this.quillUpdateImg = true;\n    },\n\n    uploadSuccess(res, file) {\n      // res为图片服务器返回的数据\n      // 获取富文本组件实例\n      let quill = this.$refs.myQuillEditor.quill;\n      // 如果上传成功\n      if (res.status === 200) {\n        // 获取光标所在位置\n        let length = quill.getSelection().index;\n        // 插入图片  res.info为服务器返回的图片地址\n        quill.insertEmbed(length, 'image', res.info);\n        // 调整光标到最后\n        quill.setSelection(length + 1);\n      } else {\n        this.$message.error('图片插入失败');\n      }\n      // loading动画消失\n      this.quillUpdateImg = false;\n    },\n\n    // 富文本图片上传失败\n    uploadError() {\n      // loading动画消失\n      this.quillUpdateImg = false;\n      this.$message.error('图片插入失败');\n    },\n    onEditorReady(quill) {\n      console.log('editor ready!', quill);\n    },\n    onEditorChange({ quill, html, text }) {\n      console.log('editor change!', quill, html, text);\n      this.detailContent = html;\n    },\n  },\n};\n```","source":"_posts/vue-quill-editor富文本编辑器实现图片插入七牛云上传.md","raw":"---\ntitle: vue-quill-editor富文本编辑器实现图片插入七牛云上传\ndate: 2019-08-15 22:23:26\ntags: ['vue', '富文本']\n---\n## 前言\nvue-quill-editor是我们再使用vue框架的时候常用的一个富文本编辑器，在进行富文本编辑的时候，我们往往要插入一些图片，vue-quill-editor默认的处理方式是直接将图片转成base64编码，这样的结果是整个富文本的html片段十分冗余，通常来讲，每个服务器端接收的post的数据大小都是有限制的，这样的话有可能导致提交失败，数据要传递很久才全部传送到服务器。\n因此，在富文本编辑的过程中，对于图片的处理，我们更合理的做法是将图片上传到服务器，再将图片链接插入到富文本中。\n## 代码\n### template\n``` html\n<template>\n  <div>\n    <!-- 图片上传组件辅助-->\n    <el-upload\n      class=\"avatar-uploader\"\n      :action=\"serverUrl\"\n      name=\"img\"\n      :headers=\"header\"\n      :show-file-list=\"false\"\n      :on-success=\"uploadSuccess\"\n      :on-error=\"uploadError\"\n      :before-upload=\"beforeUpload\"\n    ></el-upload>\n    <!--富文本编辑器组件-->\n    <el-row v-loading=\"quillUpdateImg\">\n      <quill-editor\n        v-model=\"detailContent\"\n        ref=\"myQuillEditor\"\n        :options=\"editorOption\"\n        @change=\"onEditorChange($event)\"\n        @ready=\"onEditorReady($event)\"\n      ></quill-editor>\n    </el-row>\n  </div>\n</template>\n```\n### script\n``` javascript\n// 工具栏配置\nconst toolbarOptions = [\n  ['bold', 'italic', 'underline', 'strike'], // toggled buttons\n  ['blockquote', 'code-block'],\n\n  [{ header: 1 }, { header: 2 }], // custom button values\n  [{ list: 'ordered' }, { list: 'bullet' }],\n  [{ script: 'sub' }, { script: 'super' }], // superscript/subscript\n  [{ indent: '-1' }, { indent: '+1' }], // outdent/indent\n  [{ direction: 'rtl' }], // text direction\n\n  [{ size: ['small', false, 'large', 'huge'] }], // custom dropdown\n  [{ header: [1, 2, 3, 4, 5, 6, false] }],\n\n  [{ color: [] }, { background: [] }], // dropdown with defaults from theme\n  [{ font: [] }],\n  [{ align: [] }],\n  ['link', 'image', 'video'],\n  ['clean'], // remove formatting button\n];\nexport default {\n  data() {\n    return {\n      serverUrl: '', // 这里写你要上传的图片服务器地址\n      header: { token: sessionStorage.token }, // 有的图片服务器要求请求头需要有token之类的参数，写在这里\n      detailContent: '', // 富文本内容\n      editorOption: {\n        placeholder: '',\n        theme: 'snow', // or 'bubble'\n        modules: {\n          toolbar: {\n            container: toolbarOptions, // 工具栏\n            handlers: {\n              image: function(value) {\n                if (value) {\n                  document.querySelector('#quill-upload input').click();\n                } else {\n                  this.quill.format('image', false);\n                }\n              },\n            },\n          },\n        },\n      },\n    };\n  },\n  methods: {\n    // 富文本图片上传前\n    beforeUpload() {\n      // 显示loading动画\n      this.quillUpdateImg = true;\n    },\n\n    uploadSuccess(res, file) {\n      // res为图片服务器返回的数据\n      // 获取富文本组件实例\n      let quill = this.$refs.myQuillEditor.quill;\n      // 如果上传成功\n      if (res.status === 200) {\n        // 获取光标所在位置\n        let length = quill.getSelection().index;\n        // 插入图片  res.info为服务器返回的图片地址\n        quill.insertEmbed(length, 'image', res.info);\n        // 调整光标到最后\n        quill.setSelection(length + 1);\n      } else {\n        this.$message.error('图片插入失败');\n      }\n      // loading动画消失\n      this.quillUpdateImg = false;\n    },\n\n    // 富文本图片上传失败\n    uploadError() {\n      // loading动画消失\n      this.quillUpdateImg = false;\n      this.$message.error('图片插入失败');\n    },\n    onEditorReady(quill) {\n      console.log('editor ready!', quill);\n    },\n    onEditorChange({ quill, html, text }) {\n      console.log('editor change!', quill, html, text);\n      this.detailContent = html;\n    },\n  },\n};\n```","slug":"vue-quill-editor富文本编辑器实现图片插入七牛云上传","published":1,"updated":"2021-10-09T08:48:32.078Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzabp001y5c54wjs0603i","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>vue-quill-editor是我们再使用vue框架的时候常用的一个富文本编辑器，在进行富文本编辑的时候，我们往往要插入一些图片，vue-quill-editor默认的处理方式是直接将图片转成base64编码，这样的结果是整个富文本的html片段十分冗余，通常来讲，每个服务器端接收的post的数据大小都是有限制的，这样的话有可能导致提交失败，数据要传递很久才全部传送到服务器。<br>因此，在富文本编辑的过程中，对于图片的处理，我们更合理的做法是将图片上传到服务器，再将图片链接插入到富文本中。</p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><h3 id=\"template\"><a href=\"#template\" class=\"headerlink\" title=\"template\"></a>template</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 图片上传组件辅助--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-upload</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">class</span>=<span class=\"string\">\"avatar-uploader\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:action</span>=<span class=\"string\">\"serverUrl\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">name</span>=<span class=\"string\">\"img\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:headers</span>=<span class=\"string\">\"header\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:show-file-list</span>=<span class=\"string\">\"false\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:on-success</span>=<span class=\"string\">\"uploadSuccess\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:on-error</span>=<span class=\"string\">\"uploadError\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:before-upload</span>=<span class=\"string\">\"beforeUpload\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-upload</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--富文本编辑器组件--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-row</span> <span class=\"attr\">v-loading</span>=<span class=\"string\">\"quillUpdateImg\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">quill-editor</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">v-model</span>=<span class=\"string\">\"detailContent\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">ref</span>=<span class=\"string\">\"myQuillEditor\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">:options</span>=<span class=\"string\">\"editorOption\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        @<span class=\"attr\">change</span>=<span class=\"string\">\"onEditorChange($event)\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        @<span class=\"attr\">ready</span>=<span class=\"string\">\"onEditorReady($event)\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">quill-editor</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">el-row</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"script\"><a href=\"#script\" class=\"headerlink\" title=\"script\"></a>script</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 工具栏配置</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> toolbarOptions = [</span><br><span class=\"line\">  [<span class=\"string\">'bold'</span>, <span class=\"string\">'italic'</span>, <span class=\"string\">'underline'</span>, <span class=\"string\">'strike'</span>], <span class=\"comment\">// toggled buttons</span></span><br><span class=\"line\">  [<span class=\"string\">'blockquote'</span>, <span class=\"string\">'code-block'</span>],</span><br><span class=\"line\"></span><br><span class=\"line\">  [&#123; <span class=\"attr\">header</span>: <span class=\"number\">1</span> &#125;, &#123; <span class=\"attr\">header</span>: <span class=\"number\">2</span> &#125;], <span class=\"comment\">// custom button values</span></span><br><span class=\"line\">  [&#123; <span class=\"attr\">list</span>: <span class=\"string\">'ordered'</span> &#125;, &#123; <span class=\"attr\">list</span>: <span class=\"string\">'bullet'</span> &#125;],</span><br><span class=\"line\">  [&#123; <span class=\"attr\">script</span>: <span class=\"string\">'sub'</span> &#125;, &#123; <span class=\"attr\">script</span>: <span class=\"string\">'super'</span> &#125;], <span class=\"comment\">// superscript/subscript</span></span><br><span class=\"line\">  [&#123; <span class=\"attr\">indent</span>: <span class=\"string\">'-1'</span> &#125;, &#123; <span class=\"attr\">indent</span>: <span class=\"string\">'+1'</span> &#125;], <span class=\"comment\">// outdent/indent</span></span><br><span class=\"line\">  [&#123; <span class=\"attr\">direction</span>: <span class=\"string\">'rtl'</span> &#125;], <span class=\"comment\">// text direction</span></span><br><span class=\"line\"></span><br><span class=\"line\">  [&#123; <span class=\"attr\">size</span>: [<span class=\"string\">'small'</span>, <span class=\"literal\">false</span>, <span class=\"string\">'large'</span>, <span class=\"string\">'huge'</span>] &#125;], <span class=\"comment\">// custom dropdown</span></span><br><span class=\"line\">  [&#123; <span class=\"attr\">header</span>: [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>, <span class=\"literal\">false</span>] &#125;],</span><br><span class=\"line\"></span><br><span class=\"line\">  [&#123; <span class=\"attr\">color</span>: [] &#125;, &#123; <span class=\"attr\">background</span>: [] &#125;], <span class=\"comment\">// dropdown with defaults from theme</span></span><br><span class=\"line\">  [&#123; <span class=\"attr\">font</span>: [] &#125;],</span><br><span class=\"line\">  [&#123; <span class=\"attr\">align</span>: [] &#125;],</span><br><span class=\"line\">  [<span class=\"string\">'link'</span>, <span class=\"string\">'image'</span>, <span class=\"string\">'video'</span>],</span><br><span class=\"line\">  [<span class=\"string\">'clean'</span>], <span class=\"comment\">// remove formatting button</span></span><br><span class=\"line\">];</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  data() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      serverUrl: <span class=\"string\">''</span>, <span class=\"comment\">// 这里写你要上传的图片服务器地址</span></span><br><span class=\"line\">      header: &#123; <span class=\"attr\">token</span>: sessionStorage.token &#125;, <span class=\"comment\">// 有的图片服务器要求请求头需要有token之类的参数，写在这里</span></span><br><span class=\"line\">      detailContent: <span class=\"string\">''</span>, <span class=\"comment\">// 富文本内容</span></span><br><span class=\"line\">      editorOption: &#123;</span><br><span class=\"line\">        placeholder: <span class=\"string\">''</span>,</span><br><span class=\"line\">        theme: <span class=\"string\">'snow'</span>, <span class=\"comment\">// or 'bubble'</span></span><br><span class=\"line\">        modules: &#123;</span><br><span class=\"line\">          toolbar: &#123;</span><br><span class=\"line\">            container: toolbarOptions, <span class=\"comment\">// 工具栏</span></span><br><span class=\"line\">            handlers: &#123;</span><br><span class=\"line\">              image: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (value) &#123;</span><br><span class=\"line\">                  <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'#quill-upload input'</span>).click();</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                  <span class=\"keyword\">this</span>.quill.format(<span class=\"string\">'image'</span>, <span class=\"literal\">false</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 富文本图片上传前</span></span><br><span class=\"line\">    beforeUpload() &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 显示loading动画</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.quillUpdateImg = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    uploadSuccess(res, file) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// res为图片服务器返回的数据</span></span><br><span class=\"line\">      <span class=\"comment\">// 获取富文本组件实例</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> quill = <span class=\"keyword\">this</span>.$refs.myQuillEditor.quill;</span><br><span class=\"line\">      <span class=\"comment\">// 如果上传成功</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (res.status === <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 获取光标所在位置</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> length = quill.getSelection().index;</span><br><span class=\"line\">        <span class=\"comment\">// 插入图片  res.info为服务器返回的图片地址</span></span><br><span class=\"line\">        quill.insertEmbed(length, <span class=\"string\">'image'</span>, res.info);</span><br><span class=\"line\">        <span class=\"comment\">// 调整光标到最后</span></span><br><span class=\"line\">        quill.setSelection(length + <span class=\"number\">1</span>);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.$message.error(<span class=\"string\">'图片插入失败'</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"comment\">// loading动画消失</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.quillUpdateImg = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 富文本图片上传失败</span></span><br><span class=\"line\">    uploadError() &#123;</span><br><span class=\"line\">      <span class=\"comment\">// loading动画消失</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.quillUpdateImg = <span class=\"literal\">false</span>;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.$message.error(<span class=\"string\">'图片插入失败'</span>);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    onEditorReady(quill) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'editor ready!'</span>, quill);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    onEditorChange(&#123; quill, html, text &#125;) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'editor change!'</span>, quill, html, text);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.detailContent = html;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>vue-quill-editor是我们再使用vue框架的时候常用的一个富文本编辑器，在进行富文本编辑的时候，我们往往要插入一些图片，vue-quill-editor默认的处理方式是直接将图片转成base64编码，这样的结果是整个富文本的html片段十分冗余，通常来讲，每个服务器端接收的post的数据大小都是有限制的，这样的话有可能导致提交失败，数据要传递很久才全部传送到服务器。<br>因此，在富文本编辑的过程中，对于图片的处理，我们更合理的做法是将图片上传到服务器，再将图片链接插入到富文本中。</p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><h3 id=\"template\"><a href=\"#template\" class=\"headerlink\" title=\"template\"></a>template</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 图片上传组件辅助--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-upload</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">class</span>=<span class=\"string\">\"avatar-uploader\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:action</span>=<span class=\"string\">\"serverUrl\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">name</span>=<span class=\"string\">\"img\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:headers</span>=<span class=\"string\">\"header\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:show-file-list</span>=<span class=\"string\">\"false\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:on-success</span>=<span class=\"string\">\"uploadSuccess\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:on-error</span>=<span class=\"string\">\"uploadError\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:before-upload</span>=<span class=\"string\">\"beforeUpload\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-upload</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--富文本编辑器组件--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-row</span> <span class=\"attr\">v-loading</span>=<span class=\"string\">\"quillUpdateImg\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">quill-editor</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">v-model</span>=<span class=\"string\">\"detailContent\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">ref</span>=<span class=\"string\">\"myQuillEditor\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">:options</span>=<span class=\"string\">\"editorOption\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        @<span class=\"attr\">change</span>=<span class=\"string\">\"onEditorChange($event)\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        @<span class=\"attr\">ready</span>=<span class=\"string\">\"onEditorReady($event)\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">quill-editor</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">el-row</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"script\"><a href=\"#script\" class=\"headerlink\" title=\"script\"></a>script</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 工具栏配置</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> toolbarOptions = [</span><br><span class=\"line\">  [<span class=\"string\">'bold'</span>, <span class=\"string\">'italic'</span>, <span class=\"string\">'underline'</span>, <span class=\"string\">'strike'</span>], <span class=\"comment\">// toggled buttons</span></span><br><span class=\"line\">  [<span class=\"string\">'blockquote'</span>, <span class=\"string\">'code-block'</span>],</span><br><span class=\"line\"></span><br><span class=\"line\">  [&#123; <span class=\"attr\">header</span>: <span class=\"number\">1</span> &#125;, &#123; <span class=\"attr\">header</span>: <span class=\"number\">2</span> &#125;], <span class=\"comment\">// custom button values</span></span><br><span class=\"line\">  [&#123; <span class=\"attr\">list</span>: <span class=\"string\">'ordered'</span> &#125;, &#123; <span class=\"attr\">list</span>: <span class=\"string\">'bullet'</span> &#125;],</span><br><span class=\"line\">  [&#123; <span class=\"attr\">script</span>: <span class=\"string\">'sub'</span> &#125;, &#123; <span class=\"attr\">script</span>: <span class=\"string\">'super'</span> &#125;], <span class=\"comment\">// superscript/subscript</span></span><br><span class=\"line\">  [&#123; <span class=\"attr\">indent</span>: <span class=\"string\">'-1'</span> &#125;, &#123; <span class=\"attr\">indent</span>: <span class=\"string\">'+1'</span> &#125;], <span class=\"comment\">// outdent/indent</span></span><br><span class=\"line\">  [&#123; <span class=\"attr\">direction</span>: <span class=\"string\">'rtl'</span> &#125;], <span class=\"comment\">// text direction</span></span><br><span class=\"line\"></span><br><span class=\"line\">  [&#123; <span class=\"attr\">size</span>: [<span class=\"string\">'small'</span>, <span class=\"literal\">false</span>, <span class=\"string\">'large'</span>, <span class=\"string\">'huge'</span>] &#125;], <span class=\"comment\">// custom dropdown</span></span><br><span class=\"line\">  [&#123; <span class=\"attr\">header</span>: [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>, <span class=\"literal\">false</span>] &#125;],</span><br><span class=\"line\"></span><br><span class=\"line\">  [&#123; <span class=\"attr\">color</span>: [] &#125;, &#123; <span class=\"attr\">background</span>: [] &#125;], <span class=\"comment\">// dropdown with defaults from theme</span></span><br><span class=\"line\">  [&#123; <span class=\"attr\">font</span>: [] &#125;],</span><br><span class=\"line\">  [&#123; <span class=\"attr\">align</span>: [] &#125;],</span><br><span class=\"line\">  [<span class=\"string\">'link'</span>, <span class=\"string\">'image'</span>, <span class=\"string\">'video'</span>],</span><br><span class=\"line\">  [<span class=\"string\">'clean'</span>], <span class=\"comment\">// remove formatting button</span></span><br><span class=\"line\">];</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  data() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      serverUrl: <span class=\"string\">''</span>, <span class=\"comment\">// 这里写你要上传的图片服务器地址</span></span><br><span class=\"line\">      header: &#123; <span class=\"attr\">token</span>: sessionStorage.token &#125;, <span class=\"comment\">// 有的图片服务器要求请求头需要有token之类的参数，写在这里</span></span><br><span class=\"line\">      detailContent: <span class=\"string\">''</span>, <span class=\"comment\">// 富文本内容</span></span><br><span class=\"line\">      editorOption: &#123;</span><br><span class=\"line\">        placeholder: <span class=\"string\">''</span>,</span><br><span class=\"line\">        theme: <span class=\"string\">'snow'</span>, <span class=\"comment\">// or 'bubble'</span></span><br><span class=\"line\">        modules: &#123;</span><br><span class=\"line\">          toolbar: &#123;</span><br><span class=\"line\">            container: toolbarOptions, <span class=\"comment\">// 工具栏</span></span><br><span class=\"line\">            handlers: &#123;</span><br><span class=\"line\">              image: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (value) &#123;</span><br><span class=\"line\">                  <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'#quill-upload input'</span>).click();</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                  <span class=\"keyword\">this</span>.quill.format(<span class=\"string\">'image'</span>, <span class=\"literal\">false</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 富文本图片上传前</span></span><br><span class=\"line\">    beforeUpload() &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 显示loading动画</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.quillUpdateImg = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    uploadSuccess(res, file) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// res为图片服务器返回的数据</span></span><br><span class=\"line\">      <span class=\"comment\">// 获取富文本组件实例</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> quill = <span class=\"keyword\">this</span>.$refs.myQuillEditor.quill;</span><br><span class=\"line\">      <span class=\"comment\">// 如果上传成功</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (res.status === <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 获取光标所在位置</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> length = quill.getSelection().index;</span><br><span class=\"line\">        <span class=\"comment\">// 插入图片  res.info为服务器返回的图片地址</span></span><br><span class=\"line\">        quill.insertEmbed(length, <span class=\"string\">'image'</span>, res.info);</span><br><span class=\"line\">        <span class=\"comment\">// 调整光标到最后</span></span><br><span class=\"line\">        quill.setSelection(length + <span class=\"number\">1</span>);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.$message.error(<span class=\"string\">'图片插入失败'</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"comment\">// loading动画消失</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.quillUpdateImg = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 富文本图片上传失败</span></span><br><span class=\"line\">    uploadError() &#123;</span><br><span class=\"line\">      <span class=\"comment\">// loading动画消失</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.quillUpdateImg = <span class=\"literal\">false</span>;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.$message.error(<span class=\"string\">'图片插入失败'</span>);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    onEditorReady(quill) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'editor ready!'</span>, quill);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    onEditorChange(&#123; quill, html, text &#125;) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'editor change!'</span>, quill, html, text);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.detailContent = html;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>"},{"title":"vue中@keyup.enter.native输入法的回车与消息发送快捷键回车的冲突解决方法","date":"2018-12-24T02:33:58.000Z","_content":"## 问题\n*当你在中文输入法下输入然后回车后，发现表单提交了。\n### 代码\n``` html\n<el-col :span=\"14\">\n  <el-input type=\"text\" v-model=\"loginForm.content\" autocomplete=\"off\" @keyup.enter.native =\"submitForm('loginForm')\" placeholder=\"图形验证码\">\n    <template slot=\"prepend\"><span class=\"fa fa-picture-o\" style=\"width: 13px\"></span></template>\n  </el-input>\n</el-col>\n```\n### 结果\n![文本](/images/WechatIMG27.png)\n## 解决方法\n### 代码更换\n``` html\n@keyup.enter.native =\"submitForm('loginForm')\"\n\n                ||\n                ||\n                ||\n              \\\\||//\n               \\\\//\n                ||\n                👇\n                👇\n↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓\n\n@keypress.enter.native =\"submitForm('loginForm')\"\n```\n\n","source":"_posts/vue中-keyup-enter-native输入法的回车与消息发送快捷键回车的冲突解决方法.md","raw":"---\ntitle: vue中@keyup.enter.native输入法的回车与消息发送快捷键回车的冲突解决方法\ndate: 2018-12-24 10:33:58\ntags: [vue, element]\n---\n## 问题\n*当你在中文输入法下输入然后回车后，发现表单提交了。\n### 代码\n``` html\n<el-col :span=\"14\">\n  <el-input type=\"text\" v-model=\"loginForm.content\" autocomplete=\"off\" @keyup.enter.native =\"submitForm('loginForm')\" placeholder=\"图形验证码\">\n    <template slot=\"prepend\"><span class=\"fa fa-picture-o\" style=\"width: 13px\"></span></template>\n  </el-input>\n</el-col>\n```\n### 结果\n![文本](/images/WechatIMG27.png)\n## 解决方法\n### 代码更换\n``` html\n@keyup.enter.native =\"submitForm('loginForm')\"\n\n                ||\n                ||\n                ||\n              \\\\||//\n               \\\\//\n                ||\n                👇\n                👇\n↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓\n\n@keypress.enter.native =\"submitForm('loginForm')\"\n```\n\n","slug":"vue中-keyup-enter-native输入法的回车与消息发送快捷键回车的冲突解决方法","published":1,"updated":"2021-10-09T08:48:32.079Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzabq00205c54jk0mxjcu","content":"<h2 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h2><p>*当你在中文输入法下输入然后回车后，发现表单提交了。</p>\n<h3 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">el-col</span> <span class=\"attr\">:span</span>=<span class=\"string\">\"14\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">el-input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">v-model</span>=<span class=\"string\">\"loginForm.content\"</span> <span class=\"attr\">autocomplete</span>=<span class=\"string\">\"off\"</span> @<span class=\"attr\">keyup.enter.native</span> =<span class=\"string\">\"submitForm('loginForm')\"</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">\"图形验证码\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">slot</span>=<span class=\"string\">\"prepend\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"fa fa-picture-o\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 13px\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">el-input</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">el-col</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"结果\"><a href=\"#结果\" class=\"headerlink\" title=\"结果\"></a>结果</h3><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/images/WechatIMG27.png\" alt=\"文本\" title>\n                </div>\n                <div class=\"image-caption\">文本</div>\n            </figure>\n<h2 id=\"解决方法\"><a href=\"#解决方法\" class=\"headerlink\" title=\"解决方法\"></a>解决方法</h2><h3 id=\"代码更换\"><a href=\"#代码更换\" class=\"headerlink\" title=\"代码更换\"></a>代码更换</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@keyup.enter.native =\"submitForm('loginForm')\"</span><br><span class=\"line\"></span><br><span class=\"line\">                ||</span><br><span class=\"line\">                ||</span><br><span class=\"line\">                ||</span><br><span class=\"line\">              \\\\||//</span><br><span class=\"line\">               \\\\//</span><br><span class=\"line\">                ||</span><br><span class=\"line\">                👇</span><br><span class=\"line\">                👇</span><br><span class=\"line\">↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓</span><br><span class=\"line\"></span><br><span class=\"line\">@keypress.enter.native =\"submitForm('loginForm')\"</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h2><p>*当你在中文输入法下输入然后回车后，发现表单提交了。</p>\n<h3 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">el-col</span> <span class=\"attr\">:span</span>=<span class=\"string\">\"14\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">el-input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">v-model</span>=<span class=\"string\">\"loginForm.content\"</span> <span class=\"attr\">autocomplete</span>=<span class=\"string\">\"off\"</span> @<span class=\"attr\">keyup.enter.native</span> =<span class=\"string\">\"submitForm('loginForm')\"</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">\"图形验证码\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">slot</span>=<span class=\"string\">\"prepend\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"fa fa-picture-o\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 13px\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">el-input</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">el-col</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"结果\"><a href=\"#结果\" class=\"headerlink\" title=\"结果\"></a>结果</h3><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/images/WechatIMG27.png\" alt=\"文本\" title>\n                </div>\n                <div class=\"image-caption\">文本</div>\n            </figure>\n<h2 id=\"解决方法\"><a href=\"#解决方法\" class=\"headerlink\" title=\"解决方法\"></a>解决方法</h2><h3 id=\"代码更换\"><a href=\"#代码更换\" class=\"headerlink\" title=\"代码更换\"></a>代码更换</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@keyup.enter.native =\"submitForm('loginForm')\"</span><br><span class=\"line\"></span><br><span class=\"line\">                ||</span><br><span class=\"line\">                ||</span><br><span class=\"line\">                ||</span><br><span class=\"line\">              \\\\||//</span><br><span class=\"line\">               \\\\//</span><br><span class=\"line\">                ||</span><br><span class=\"line\">                👇</span><br><span class=\"line\">                👇</span><br><span class=\"line\">↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓</span><br><span class=\"line\"></span><br><span class=\"line\">@keypress.enter.native =\"submitForm('loginForm')\"</span><br></pre></td></tr></table></figure>\n"},{"title":"vue中audio实现微信语音播放动画","date":"2019-09-09T12:58:24.000Z","_content":"## 预览\n![](https://github.com/chengheai/review-demo-image/blob/master/2019-09-09%2021-01-51.2019-09-09%2021_02_34.gif?raw=true)\n## 思路\n拿到时长做倒计时，时长 = （ 时长 + 1 ） * 100; destroy的时候清除一下\n## 代码\n``` html\n<div style=\"display:none\">\n  <audio controls=\"controls\" ref=\"audio\">\n    <source :src=\"url || ''\" type=\"audio/mpeg\" />\n  </audio>\n</div>\n<div class=\"voice-bg\" @click=\"handlePlay\">\n  <img\n    v-if=\"isPlaying\"\n    src=\"./../../assets/images/goods/voice-play.gif\"\n    alt=\"\"\n  />\n  <img\n    v-else\n    src=\"./../../assets/images/goods/voice.png\"\n    alt=\"\"\n  />\n  <span>{{ duration || 0 }}\"</span>\n</div>\n```\n``` javascript\ndata() {\n  return {\n    url: '',\n    timer: null,\n    isPlaying: false,\n    currentTime: 0,\n\n  }\n},\nmethods:{\n  handlePlay() {\n    let audio = this.$refs.audio;\n    if (!this.isPlaying) {\n      audio.play();\n      this.isPlaying = true;\n      this.watchEnd();\n    } else {\n      audio.pause();\n      clearTimeout(this.timer);\n      this.isPlaying = false;\n      audio.currentTime = 0;\n    }\n  },\n  watchEnd() {\n    let that = this;\n    this.timer = setTimeout(() => {\n      that.isPlaying = false;\n    }, (that.duration + 1) * 1000);\n  },\n},\nbeforeDestroy() {\n  clearTimeout(this.timer);\n}\n```\n## 资料\n### 关于获取audio信息接口\n[七牛云🐂🐃🐕🐄](https://developer.qiniu.com/dora/api/1247/audio-and-video-metadata-information-avinfo)\n``` javascript\nthis.$axios.get(`${this.info.url}?avinfo`).then(res => {\n  let { streams } = res.data;\n  this.duration = parseInt((streams && streams[0].duration) || 0);\n});\n```\n### UI图片\n[下载地址](https://github.com/chengheai/chengheai.github.io/issues/1)\n[isPlaying gif](https://github.com/chengheai/chengheai.github.io/issues/1)\n[isPause png](https://github.com/chengheai/chengheai.github.io/issues/1)\n","source":"_posts/vue中audio实现微信语音播放动画.md","raw":"---\ntitle: vue中audio实现微信语音播放动画\ndate: 2019-09-09 20:58:24\ntags: ['vue']\n---\n## 预览\n![](https://github.com/chengheai/review-demo-image/blob/master/2019-09-09%2021-01-51.2019-09-09%2021_02_34.gif?raw=true)\n## 思路\n拿到时长做倒计时，时长 = （ 时长 + 1 ） * 100; destroy的时候清除一下\n## 代码\n``` html\n<div style=\"display:none\">\n  <audio controls=\"controls\" ref=\"audio\">\n    <source :src=\"url || ''\" type=\"audio/mpeg\" />\n  </audio>\n</div>\n<div class=\"voice-bg\" @click=\"handlePlay\">\n  <img\n    v-if=\"isPlaying\"\n    src=\"./../../assets/images/goods/voice-play.gif\"\n    alt=\"\"\n  />\n  <img\n    v-else\n    src=\"./../../assets/images/goods/voice.png\"\n    alt=\"\"\n  />\n  <span>{{ duration || 0 }}\"</span>\n</div>\n```\n``` javascript\ndata() {\n  return {\n    url: '',\n    timer: null,\n    isPlaying: false,\n    currentTime: 0,\n\n  }\n},\nmethods:{\n  handlePlay() {\n    let audio = this.$refs.audio;\n    if (!this.isPlaying) {\n      audio.play();\n      this.isPlaying = true;\n      this.watchEnd();\n    } else {\n      audio.pause();\n      clearTimeout(this.timer);\n      this.isPlaying = false;\n      audio.currentTime = 0;\n    }\n  },\n  watchEnd() {\n    let that = this;\n    this.timer = setTimeout(() => {\n      that.isPlaying = false;\n    }, (that.duration + 1) * 1000);\n  },\n},\nbeforeDestroy() {\n  clearTimeout(this.timer);\n}\n```\n## 资料\n### 关于获取audio信息接口\n[七牛云🐂🐃🐕🐄](https://developer.qiniu.com/dora/api/1247/audio-and-video-metadata-information-avinfo)\n``` javascript\nthis.$axios.get(`${this.info.url}?avinfo`).then(res => {\n  let { streams } = res.data;\n  this.duration = parseInt((streams && streams[0].duration) || 0);\n});\n```\n### UI图片\n[下载地址](https://github.com/chengheai/chengheai.github.io/issues/1)\n[isPlaying gif](https://github.com/chengheai/chengheai.github.io/issues/1)\n[isPause png](https://github.com/chengheai/chengheai.github.io/issues/1)\n","slug":"vue中audio实现微信语音播放动画","published":1,"updated":"2021-10-09T08:48:32.080Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzabr00235c54kmi0x08r","content":"<h2 id=\"预览\"><a href=\"#预览\" class=\"headerlink\" title=\"预览\"></a>预览</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/2019-09-09%2021-01-51.2019-09-09%2021_02_34.gif?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"思路\"><a href=\"#思路\" class=\"headerlink\" title=\"思路\"></a>思路</h2><p>拿到时长做倒计时，时长 = （ 时长 + 1 ） * 100; destroy的时候清除一下</p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"display:none\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">audio</span> <span class=\"attr\">controls</span>=<span class=\"string\">\"controls\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"audio\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">:src</span>=<span class=\"string\">\"url || ''\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"audio/mpeg\"</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">audio</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"voice-bg\"</span> @<span class=\"attr\">click</span>=<span class=\"string\">\"handlePlay\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">img</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">v-if</span>=<span class=\"string\">\"isPlaying\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">src</span>=<span class=\"string\">\"./../../assets/images/goods/voice-play.gif\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">alt</span>=<span class=\"string\">\"\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">img</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">v-else</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">src</span>=<span class=\"string\">\"./../../assets/images/goods/voice.png\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">alt</span>=<span class=\"string\">\"\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>&#123;&#123; duration || 0 &#125;&#125;\"<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">data() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    url: <span class=\"string\">''</span>,</span><br><span class=\"line\">    timer: <span class=\"literal\">null</span>,</span><br><span class=\"line\">    isPlaying: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    currentTime: <span class=\"number\">0</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">methods:&#123;</span><br><span class=\"line\">  handlePlay() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> audio = <span class=\"keyword\">this</span>.$refs.audio;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>.isPlaying) &#123;</span><br><span class=\"line\">      audio.play();</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.isPlaying = <span class=\"literal\">true</span>;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.watchEnd();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      audio.pause();</span><br><span class=\"line\">      clearTimeout(<span class=\"keyword\">this</span>.timer);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.isPlaying = <span class=\"literal\">false</span>;</span><br><span class=\"line\">      audio.currentTime = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  watchEnd() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> that = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.timer = setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      that.isPlaying = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;, (that.duration + <span class=\"number\">1</span>) * <span class=\"number\">1000</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">beforeDestroy() &#123;</span><br><span class=\"line\">  clearTimeout(<span class=\"keyword\">this</span>.timer);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"资料\"><a href=\"#资料\" class=\"headerlink\" title=\"资料\"></a>资料</h2><h3 id=\"关于获取audio信息接口\"><a href=\"#关于获取audio信息接口\" class=\"headerlink\" title=\"关于获取audio信息接口\"></a>关于获取audio信息接口</h3><p><a href=\"https://developer.qiniu.com/dora/api/1247/audio-and-video-metadata-information-avinfo\" target=\"_blank\" rel=\"noopener\">七牛云🐂🐃🐕🐄</a><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">this</span>.$axios.get(<span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.info.url&#125;</span>?avinfo`</span>).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> &#123; streams &#125; = res.data;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.duration = <span class=\"built_in\">parseInt</span>((streams &amp;&amp; streams[<span class=\"number\">0</span>].duration) || <span class=\"number\">0</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"UI图片\"><a href=\"#UI图片\" class=\"headerlink\" title=\"UI图片\"></a>UI图片</h3><p><a href=\"https://github.com/chengheai/chengheai.github.io/issues/1\">下载地址</a><br><a href=\"https://github.com/chengheai/chengheai.github.io/issues/1\">isPlaying gif</a><br><a href=\"https://github.com/chengheai/chengheai.github.io/issues/1\">isPause png</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"预览\"><a href=\"#预览\" class=\"headerlink\" title=\"预览\"></a>预览</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/2019-09-09%2021-01-51.2019-09-09%2021_02_34.gif?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"思路\"><a href=\"#思路\" class=\"headerlink\" title=\"思路\"></a>思路</h2><p>拿到时长做倒计时，时长 = （ 时长 + 1 ） * 100; destroy的时候清除一下</p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"display:none\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">audio</span> <span class=\"attr\">controls</span>=<span class=\"string\">\"controls\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"audio\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">:src</span>=<span class=\"string\">\"url || ''\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"audio/mpeg\"</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">audio</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"voice-bg\"</span> @<span class=\"attr\">click</span>=<span class=\"string\">\"handlePlay\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">img</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">v-if</span>=<span class=\"string\">\"isPlaying\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">src</span>=<span class=\"string\">\"./../../assets/images/goods/voice-play.gif\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">alt</span>=<span class=\"string\">\"\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">img</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">v-else</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">src</span>=<span class=\"string\">\"./../../assets/images/goods/voice.png\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">alt</span>=<span class=\"string\">\"\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>&#123;&#123; duration || 0 &#125;&#125;\"<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">data() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    url: <span class=\"string\">''</span>,</span><br><span class=\"line\">    timer: <span class=\"literal\">null</span>,</span><br><span class=\"line\">    isPlaying: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    currentTime: <span class=\"number\">0</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">methods:&#123;</span><br><span class=\"line\">  handlePlay() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> audio = <span class=\"keyword\">this</span>.$refs.audio;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>.isPlaying) &#123;</span><br><span class=\"line\">      audio.play();</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.isPlaying = <span class=\"literal\">true</span>;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.watchEnd();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      audio.pause();</span><br><span class=\"line\">      clearTimeout(<span class=\"keyword\">this</span>.timer);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.isPlaying = <span class=\"literal\">false</span>;</span><br><span class=\"line\">      audio.currentTime = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  watchEnd() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> that = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.timer = setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      that.isPlaying = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;, (that.duration + <span class=\"number\">1</span>) * <span class=\"number\">1000</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">beforeDestroy() &#123;</span><br><span class=\"line\">  clearTimeout(<span class=\"keyword\">this</span>.timer);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"资料\"><a href=\"#资料\" class=\"headerlink\" title=\"资料\"></a>资料</h2><h3 id=\"关于获取audio信息接口\"><a href=\"#关于获取audio信息接口\" class=\"headerlink\" title=\"关于获取audio信息接口\"></a>关于获取audio信息接口</h3><p><a href=\"https://developer.qiniu.com/dora/api/1247/audio-and-video-metadata-information-avinfo\" target=\"_blank\" rel=\"noopener\">七牛云🐂🐃🐕🐄</a><br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">this</span>.$axios.get(<span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.info.url&#125;</span>?avinfo`</span>).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> &#123; streams &#125; = res.data;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.duration = <span class=\"built_in\">parseInt</span>((streams &amp;&amp; streams[<span class=\"number\">0</span>].duration) || <span class=\"number\">0</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"UI图片\"><a href=\"#UI图片\" class=\"headerlink\" title=\"UI图片\"></a>UI图片</h3><p><a href=\"https://github.com/chengheai/chengheai.github.io/issues/1\">下载地址</a><br><a href=\"https://github.com/chengheai/chengheai.github.io/issues/1\">isPlaying gif</a><br><a href=\"https://github.com/chengheai/chengheai.github.io/issues/1\">isPause png</a></p>\n"},{"title":"vue中audio动态绑定src不能播放","date":"2019-09-05T12:55:50.000Z","_content":"## 前言\n略去。。。\n## 代码\n``` html\n<audio id=\"audio\" controls>\n  <source :src=\"audUrl || '../assets/alarm.ogg'\" type=\"audio/ogg\" />\n</audio>\n```\n## 问题\n### 发现问题\n绑定的时候,发现并不管用\n``` javascript\nlet audio = document.querySelector('#audio')\naxios.get()\n  .then(res => {\n    this.audUrl = res.data.xxx\n  })\n```\n### 解决问题思路\n～打印res.data.xxx是有值的。那为啥不生效呢？【 排除接口问题 】\n～审查html audio元素，src属性是不是我们想要的返回值 【 排除页面属性挂载问题 】\n～重新写一个audio标签写在页面上，引入接口返回的url地址 【 排除接口返回资源是否正确及audio标签是否正常 】\n。。。。。\n\n## 解决\n代码改为\n``` html\n<audio ref='audio' controls>\n  <source :src=\"audUrl || '../assets/alarm.ogg'\" type=\"audio/ogg\" />\n</audio>\n```\n绑定的时候\n``` javascript\nthis.$refs.audio.src = res.data.xxx\n```\n#### 下一节，Vue中实现微信语音播放暂停功能\n[传送门](https://chengheai.github.io/2019/09/09/vue%E4%B8%ADaudio%E5%AE%9E%E7%8E%B0%E5%BE%AE%E4%BF%A1%E8%AF%AD%E9%9F%B3%E6%92%AD%E6%94%BE%E5%8A%A8%E7%94%BB/)\n","source":"_posts/vue中audio动态绑定src不能播放.md","raw":"---\ntitle: vue中audio动态绑定src不能播放\ndate: 2019-09-05 20:55:50\ntags: ['vue']\n---\n## 前言\n略去。。。\n## 代码\n``` html\n<audio id=\"audio\" controls>\n  <source :src=\"audUrl || '../assets/alarm.ogg'\" type=\"audio/ogg\" />\n</audio>\n```\n## 问题\n### 发现问题\n绑定的时候,发现并不管用\n``` javascript\nlet audio = document.querySelector('#audio')\naxios.get()\n  .then(res => {\n    this.audUrl = res.data.xxx\n  })\n```\n### 解决问题思路\n～打印res.data.xxx是有值的。那为啥不生效呢？【 排除接口问题 】\n～审查html audio元素，src属性是不是我们想要的返回值 【 排除页面属性挂载问题 】\n～重新写一个audio标签写在页面上，引入接口返回的url地址 【 排除接口返回资源是否正确及audio标签是否正常 】\n。。。。。\n\n## 解决\n代码改为\n``` html\n<audio ref='audio' controls>\n  <source :src=\"audUrl || '../assets/alarm.ogg'\" type=\"audio/ogg\" />\n</audio>\n```\n绑定的时候\n``` javascript\nthis.$refs.audio.src = res.data.xxx\n```\n#### 下一节，Vue中实现微信语音播放暂停功能\n[传送门](https://chengheai.github.io/2019/09/09/vue%E4%B8%ADaudio%E5%AE%9E%E7%8E%B0%E5%BE%AE%E4%BF%A1%E8%AF%AD%E9%9F%B3%E6%92%AD%E6%94%BE%E5%8A%A8%E7%94%BB/)\n","slug":"vue中audio动态绑定src不能播放","published":1,"updated":"2021-10-09T08:48:32.079Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzabs00255c54e9kf73za","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>略去。。。</p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">audio</span> <span class=\"attr\">id</span>=<span class=\"string\">\"audio\"</span> <span class=\"attr\">controls</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">:src</span>=<span class=\"string\">\"audUrl || '../assets/alarm.ogg'\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"audio/ogg\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">audio</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h2><h3 id=\"发现问题\"><a href=\"#发现问题\" class=\"headerlink\" title=\"发现问题\"></a>发现问题</h3><p>绑定的时候,发现并不管用<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> audio = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'#audio'</span>)</span><br><span class=\"line\">axios.get()</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.audUrl = res.data.xxx</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"解决问题思路\"><a href=\"#解决问题思路\" class=\"headerlink\" title=\"解决问题思路\"></a>解决问题思路</h3><p>～打印res.data.xxx是有值的。那为啥不生效呢？【 排除接口问题 】<br>～审查html audio元素，src属性是不是我们想要的返回值 【 排除页面属性挂载问题 】<br>～重新写一个audio标签写在页面上，引入接口返回的url地址 【 排除接口返回资源是否正确及audio标签是否正常 】<br>。。。。。</p>\n<h2 id=\"解决\"><a href=\"#解决\" class=\"headerlink\" title=\"解决\"></a>解决</h2><p>代码改为<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">audio</span> <span class=\"attr\">ref</span>=<span class=\"string\">'audio'</span> <span class=\"attr\">controls</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">:src</span>=<span class=\"string\">\"audUrl || '../assets/alarm.ogg'\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"audio/ogg\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">audio</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>绑定的时候<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">this</span>.$refs.audio.src = res.data.xxx</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"下一节，Vue中实现微信语音播放暂停功能\"><a href=\"#下一节，Vue中实现微信语音播放暂停功能\" class=\"headerlink\" title=\"下一节，Vue中实现微信语音播放暂停功能\"></a>下一节，Vue中实现微信语音播放暂停功能</h4><p><a href=\"https://chengheai.github.io/2019/09/09/vue%E4%B8%ADaudio%E5%AE%9E%E7%8E%B0%E5%BE%AE%E4%BF%A1%E8%AF%AD%E9%9F%B3%E6%92%AD%E6%94%BE%E5%8A%A8%E7%94%BB/\" target=\"_blank\" rel=\"noopener\">传送门</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>略去。。。</p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">audio</span> <span class=\"attr\">id</span>=<span class=\"string\">\"audio\"</span> <span class=\"attr\">controls</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">:src</span>=<span class=\"string\">\"audUrl || '../assets/alarm.ogg'\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"audio/ogg\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">audio</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h2><h3 id=\"发现问题\"><a href=\"#发现问题\" class=\"headerlink\" title=\"发现问题\"></a>发现问题</h3><p>绑定的时候,发现并不管用<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> audio = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'#audio'</span>)</span><br><span class=\"line\">axios.get()</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.audUrl = res.data.xxx</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"解决问题思路\"><a href=\"#解决问题思路\" class=\"headerlink\" title=\"解决问题思路\"></a>解决问题思路</h3><p>～打印res.data.xxx是有值的。那为啥不生效呢？【 排除接口问题 】<br>～审查html audio元素，src属性是不是我们想要的返回值 【 排除页面属性挂载问题 】<br>～重新写一个audio标签写在页面上，引入接口返回的url地址 【 排除接口返回资源是否正确及audio标签是否正常 】<br>。。。。。</p>\n<h2 id=\"解决\"><a href=\"#解决\" class=\"headerlink\" title=\"解决\"></a>解决</h2><p>代码改为<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">audio</span> <span class=\"attr\">ref</span>=<span class=\"string\">'audio'</span> <span class=\"attr\">controls</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">:src</span>=<span class=\"string\">\"audUrl || '../assets/alarm.ogg'\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"audio/ogg\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">audio</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>绑定的时候<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">this</span>.$refs.audio.src = res.data.xxx</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"下一节，Vue中实现微信语音播放暂停功能\"><a href=\"#下一节，Vue中实现微信语音播放暂停功能\" class=\"headerlink\" title=\"下一节，Vue中实现微信语音播放暂停功能\"></a>下一节，Vue中实现微信语音播放暂停功能</h4><p><a href=\"https://chengheai.github.io/2019/09/09/vue%E4%B8%ADaudio%E5%AE%9E%E7%8E%B0%E5%BE%AE%E4%BF%A1%E8%AF%AD%E9%9F%B3%E6%92%AD%E6%94%BE%E5%8A%A8%E7%94%BB/\" target=\"_blank\" rel=\"noopener\">传送门</a></p>\n"},{"layout":"element-ui","title":"datetime限制日期时间范围","date":"2019-03-25T12:58:47.000Z","_content":"## 效果\n[demo](https://chengheai.github.io/daily-vue-demo/#/timedisable)\n![](https://github.com/chengheai/review-demo-image/blob/master/2019-03-25%2021-12-38.2019-03-25%2021_15_51.gif?raw=true)\n## 代码 [ 日期比较 ]\n``` html\n  <div class=\"block\">\n    <span class=\"demonstration\">开始日期：</span>\n    <el-date-picker\n      v-model=\"startDate\"\n      type=\"date\"\n      :picker-options=\"pickerOptionsStart\"\n      @change=\"changeEnd\"\n      placeholder=\"选择日期\"\n    ></el-date-picker>\n  </div>\n  <div class=\"block\" style=\"margin-right: 50px;\">\n    <span class=\"demonstration\">结束日期：</span>\n    <el-date-picker\n      v-model=\"endDate\"\n      type=\"date\"\n      :picker-options=\"pickerOptionsEnd\"\n      @change=\"changeStart\"\n      placeholder=\"选择日期时间\"\n    ></el-date-picker>\n  </div>\n\n```\n``` javascript\nexport default {\n  data() {\n    return {\n      pickerOptionsStart: {},\n      pickerOptionsEnd: {},\n      startDate: \"\",\n      endDate: \"\"\n    };\n  },\n  methods: {\n    changeStart() {\n      this.pickerOptionsStart = Object.assign({}, this.pickerOptionsStart, {\n        disabledDate: time => {\n          return time.getTime() > this.endDate;\n        }\n      });\n    },\n    changeEnd() {\n      this.pickerOptionsEnd = Object.assign({}, this.pickerOptionsEnd, {\n        disabledDate: time => {\n          return time.getTime() < this.startDate;\n        }\n      });\n    },\n  }\n```\n## 代码 [ 日期时间比较 ]\n``` html\n  <div class=\"block\">\n    <span class=\"demonstration\">开始时间：</span>\n    <el-date-picker\n      v-model=\"startTime\"\n      type=\"datetime\"\n      value-format=\"yyyy-MM-dd HH:mm:ss\"\n      placeholder=\"选择时间\"\n    ></el-date-picker>\n  </div>\n  <div class=\"block\">\n    <span class=\"demonstration\">结束时间：</span>\n    <el-date-picker\n      v-model=\"endTime\"\n      type=\"datetime\"\n      value-format=\"yyyy-MM-dd HH:mm:ss\"\n      @change=\"change\"\n      placeholder=\"选择时间\"\n    ></el-date-picker>\n  </div>\n```\n``` javascript\nexport default {\n  data() {\n    return {\n      pickerOptionsStartTime: {},\n      pickerOptionsEndTime: {},\n      startTime: \"\",\n      endTime: \"\"\n    };\n  },\n  methods: {\n    change(val) {\n      console.log(val);\n      this.comptime(this.startTime, val)\n        .then(res => {\n          this.endTime = res;\n          console.log(\"res: \", res);\n        })\n        .catch(err => {\n          this.endTime = err;\n          console.log(\"err: \", err);\n        });\n    },\n    async comptime(beginTime, endTime) {\n      if (beginTime) {\n        var str = endTime;\n        var beginTimes = beginTime.substring(0, 10).split(\"-\");\n        var endTimes = endTime.substring(0, 10).split(\"-\");\n\n        beginTime =\n          beginTimes[1] +\n          \"-\" +\n          beginTimes[2] +\n          \"-\" +\n          beginTimes[0] +\n          \" \" +\n          beginTime.substring(10, 19);\n        endTime =\n          endTimes[1] +\n          \"-\" +\n          endTimes[2] +\n          \"-\" +\n          endTimes[0] +\n          \" \" +\n          endTime.substring(10, 19);\n        var a = (Date.parse(endTime) - Date.parse(beginTime)) / 3600 / 1000;\n        if (a <= 0) {\n          this.$message({\n            message: \"结束时间必须大于开始时间\",\n            type: \"warning\"\n          });\n          return \"\";\n        } else {\n          return str;\n        }\n      } else {\n        this.$message({\n          message: \"请选择开始时间\",\n          type: \"warning\"\n        });\n      }\n    },\n    changeStartTime() {\n      this.pickerOptionsStartTime = Object.assign(\n        {},\n        this.pickerOptionsStartTime,\n        {\n          disabledDate: time => {\n            return time.getTime() > this.endTime;\n          }\n        }\n      );\n    },\n    changeEndTime() {\n      this.pickerOptionsEndTime = Object.assign({}, this.pickerOptionsEndTime, {\n        disabledDate: time => {\n          return time.getTime() < this.startTime;\n        }\n      });\n    }\n  }\n};\n```\n\n","source":"_posts/datetime限制日期时间范围.md","raw":"---\nlayout: element-ui\ntitle: datetime限制日期时间范围\ndate: 2019-03-25 20:58:47\ntags: ['element-ui', 'vue']\n---\n## 效果\n[demo](https://chengheai.github.io/daily-vue-demo/#/timedisable)\n![](https://github.com/chengheai/review-demo-image/blob/master/2019-03-25%2021-12-38.2019-03-25%2021_15_51.gif?raw=true)\n## 代码 [ 日期比较 ]\n``` html\n  <div class=\"block\">\n    <span class=\"demonstration\">开始日期：</span>\n    <el-date-picker\n      v-model=\"startDate\"\n      type=\"date\"\n      :picker-options=\"pickerOptionsStart\"\n      @change=\"changeEnd\"\n      placeholder=\"选择日期\"\n    ></el-date-picker>\n  </div>\n  <div class=\"block\" style=\"margin-right: 50px;\">\n    <span class=\"demonstration\">结束日期：</span>\n    <el-date-picker\n      v-model=\"endDate\"\n      type=\"date\"\n      :picker-options=\"pickerOptionsEnd\"\n      @change=\"changeStart\"\n      placeholder=\"选择日期时间\"\n    ></el-date-picker>\n  </div>\n\n```\n``` javascript\nexport default {\n  data() {\n    return {\n      pickerOptionsStart: {},\n      pickerOptionsEnd: {},\n      startDate: \"\",\n      endDate: \"\"\n    };\n  },\n  methods: {\n    changeStart() {\n      this.pickerOptionsStart = Object.assign({}, this.pickerOptionsStart, {\n        disabledDate: time => {\n          return time.getTime() > this.endDate;\n        }\n      });\n    },\n    changeEnd() {\n      this.pickerOptionsEnd = Object.assign({}, this.pickerOptionsEnd, {\n        disabledDate: time => {\n          return time.getTime() < this.startDate;\n        }\n      });\n    },\n  }\n```\n## 代码 [ 日期时间比较 ]\n``` html\n  <div class=\"block\">\n    <span class=\"demonstration\">开始时间：</span>\n    <el-date-picker\n      v-model=\"startTime\"\n      type=\"datetime\"\n      value-format=\"yyyy-MM-dd HH:mm:ss\"\n      placeholder=\"选择时间\"\n    ></el-date-picker>\n  </div>\n  <div class=\"block\">\n    <span class=\"demonstration\">结束时间：</span>\n    <el-date-picker\n      v-model=\"endTime\"\n      type=\"datetime\"\n      value-format=\"yyyy-MM-dd HH:mm:ss\"\n      @change=\"change\"\n      placeholder=\"选择时间\"\n    ></el-date-picker>\n  </div>\n```\n``` javascript\nexport default {\n  data() {\n    return {\n      pickerOptionsStartTime: {},\n      pickerOptionsEndTime: {},\n      startTime: \"\",\n      endTime: \"\"\n    };\n  },\n  methods: {\n    change(val) {\n      console.log(val);\n      this.comptime(this.startTime, val)\n        .then(res => {\n          this.endTime = res;\n          console.log(\"res: \", res);\n        })\n        .catch(err => {\n          this.endTime = err;\n          console.log(\"err: \", err);\n        });\n    },\n    async comptime(beginTime, endTime) {\n      if (beginTime) {\n        var str = endTime;\n        var beginTimes = beginTime.substring(0, 10).split(\"-\");\n        var endTimes = endTime.substring(0, 10).split(\"-\");\n\n        beginTime =\n          beginTimes[1] +\n          \"-\" +\n          beginTimes[2] +\n          \"-\" +\n          beginTimes[0] +\n          \" \" +\n          beginTime.substring(10, 19);\n        endTime =\n          endTimes[1] +\n          \"-\" +\n          endTimes[2] +\n          \"-\" +\n          endTimes[0] +\n          \" \" +\n          endTime.substring(10, 19);\n        var a = (Date.parse(endTime) - Date.parse(beginTime)) / 3600 / 1000;\n        if (a <= 0) {\n          this.$message({\n            message: \"结束时间必须大于开始时间\",\n            type: \"warning\"\n          });\n          return \"\";\n        } else {\n          return str;\n        }\n      } else {\n        this.$message({\n          message: \"请选择开始时间\",\n          type: \"warning\"\n        });\n      }\n    },\n    changeStartTime() {\n      this.pickerOptionsStartTime = Object.assign(\n        {},\n        this.pickerOptionsStartTime,\n        {\n          disabledDate: time => {\n            return time.getTime() > this.endTime;\n          }\n        }\n      );\n    },\n    changeEndTime() {\n      this.pickerOptionsEndTime = Object.assign({}, this.pickerOptionsEndTime, {\n        disabledDate: time => {\n          return time.getTime() < this.startTime;\n        }\n      });\n    }\n  }\n};\n```\n\n","slug":"datetime限制日期时间范围","published":1,"updated":"2021-10-09T08:48:32.065Z","comments":1,"photos":[],"link":"","_id":"ckumjzabu00275c54qd7jdfk0","content":"<h2 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h2><p><a href=\"https://chengheai.github.io/daily-vue-demo/#/timedisable\" target=\"_blank\" rel=\"noopener\">demo</a><br><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/2019-03-25%2021-12-38.2019-03-25%2021_15_51.gif?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></p>\n<h2 id=\"代码-日期比较\"><a href=\"#代码-日期比较\" class=\"headerlink\" title=\"代码 [ 日期比较 ]\"></a>代码 [ 日期比较 ]</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"block\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"demonstration\"</span>&gt;</span>开始日期：<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">el-date-picker</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">v-model</span>=<span class=\"string\">\"startDate\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">type</span>=<span class=\"string\">\"date\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">:picker-options</span>=<span class=\"string\">\"pickerOptionsStart\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    @<span class=\"attr\">change</span>=<span class=\"string\">\"changeEnd\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">placeholder</span>=<span class=\"string\">\"选择日期\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-date-picker</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"block\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"margin-right: 50px;\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"demonstration\"</span>&gt;</span>结束日期：<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">el-date-picker</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">v-model</span>=<span class=\"string\">\"endDate\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">type</span>=<span class=\"string\">\"date\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">:picker-options</span>=<span class=\"string\">\"pickerOptionsEnd\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    @<span class=\"attr\">change</span>=<span class=\"string\">\"changeStart\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">placeholder</span>=<span class=\"string\">\"选择日期时间\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-date-picker</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  data() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      pickerOptionsStart: &#123;&#125;,</span><br><span class=\"line\">      pickerOptionsEnd: &#123;&#125;,</span><br><span class=\"line\">      startDate: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">      endDate: <span class=\"string\">\"\"</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    changeStart() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.pickerOptionsStart = <span class=\"built_in\">Object</span>.assign(&#123;&#125;, <span class=\"keyword\">this</span>.pickerOptionsStart, &#123;</span><br><span class=\"line\">        disabledDate: <span class=\"function\"><span class=\"params\">time</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> time.getTime() &gt; <span class=\"keyword\">this</span>.endDate;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    changeEnd() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.pickerOptionsEnd = <span class=\"built_in\">Object</span>.assign(&#123;&#125;, <span class=\"keyword\">this</span>.pickerOptionsEnd, &#123;</span><br><span class=\"line\">        disabledDate: <span class=\"function\"><span class=\"params\">time</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> time.getTime() &lt; <span class=\"keyword\">this</span>.startDate;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"代码-日期时间比较\"><a href=\"#代码-日期时间比较\" class=\"headerlink\" title=\"代码 [ 日期时间比较 ]\"></a>代码 [ 日期时间比较 ]</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"block\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"demonstration\"</span>&gt;</span>开始时间：<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">el-date-picker</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">v-model</span>=<span class=\"string\">\"startTime\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">type</span>=<span class=\"string\">\"datetime\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">value-format</span>=<span class=\"string\">\"yyyy-MM-dd HH:mm:ss\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">placeholder</span>=<span class=\"string\">\"选择时间\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-date-picker</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"block\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"demonstration\"</span>&gt;</span>结束时间：<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">el-date-picker</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">v-model</span>=<span class=\"string\">\"endTime\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">type</span>=<span class=\"string\">\"datetime\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">value-format</span>=<span class=\"string\">\"yyyy-MM-dd HH:mm:ss\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    @<span class=\"attr\">change</span>=<span class=\"string\">\"change\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">placeholder</span>=<span class=\"string\">\"选择时间\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-date-picker</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  data() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      pickerOptionsStartTime: &#123;&#125;,</span><br><span class=\"line\">      pickerOptionsEndTime: &#123;&#125;,</span><br><span class=\"line\">      startTime: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">      endTime: <span class=\"string\">\"\"</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    change(val) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(val);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.comptime(<span class=\"keyword\">this</span>.startTime, val)</span><br><span class=\"line\">        .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">this</span>.endTime = res;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">\"res: \"</span>, res);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">this</span>.endTime = err;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">\"err: \"</span>, err);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"keyword\">async</span> comptime(beginTime, endTime) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (beginTime) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> str = endTime;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> beginTimes = beginTime.substring(<span class=\"number\">0</span>, <span class=\"number\">10</span>).split(<span class=\"string\">\"-\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">var</span> endTimes = endTime.substring(<span class=\"number\">0</span>, <span class=\"number\">10</span>).split(<span class=\"string\">\"-\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        beginTime =</span><br><span class=\"line\">          beginTimes[<span class=\"number\">1</span>] +</span><br><span class=\"line\">          <span class=\"string\">\"-\"</span> +</span><br><span class=\"line\">          beginTimes[<span class=\"number\">2</span>] +</span><br><span class=\"line\">          <span class=\"string\">\"-\"</span> +</span><br><span class=\"line\">          beginTimes[<span class=\"number\">0</span>] +</span><br><span class=\"line\">          <span class=\"string\">\" \"</span> +</span><br><span class=\"line\">          beginTime.substring(<span class=\"number\">10</span>, <span class=\"number\">19</span>);</span><br><span class=\"line\">        endTime =</span><br><span class=\"line\">          endTimes[<span class=\"number\">1</span>] +</span><br><span class=\"line\">          <span class=\"string\">\"-\"</span> +</span><br><span class=\"line\">          endTimes[<span class=\"number\">2</span>] +</span><br><span class=\"line\">          <span class=\"string\">\"-\"</span> +</span><br><span class=\"line\">          endTimes[<span class=\"number\">0</span>] +</span><br><span class=\"line\">          <span class=\"string\">\" \"</span> +</span><br><span class=\"line\">          endTime.substring(<span class=\"number\">10</span>, <span class=\"number\">19</span>);</span><br><span class=\"line\">        <span class=\"keyword\">var</span> a = (<span class=\"built_in\">Date</span>.parse(endTime) - <span class=\"built_in\">Date</span>.parse(beginTime)) / <span class=\"number\">3600</span> / <span class=\"number\">1000</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (a &lt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">this</span>.$message(&#123;</span><br><span class=\"line\">            message: <span class=\"string\">\"结束时间必须大于开始时间\"</span>,</span><br><span class=\"line\">            type: <span class=\"string\">\"warning\"</span></span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> str;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.$message(&#123;</span><br><span class=\"line\">          message: <span class=\"string\">\"请选择开始时间\"</span>,</span><br><span class=\"line\">          type: <span class=\"string\">\"warning\"</span></span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    changeStartTime() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.pickerOptionsStartTime = <span class=\"built_in\">Object</span>.assign(</span><br><span class=\"line\">        &#123;&#125;,</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.pickerOptionsStartTime,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          disabledDate: <span class=\"function\"><span class=\"params\">time</span> =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> time.getTime() &gt; <span class=\"keyword\">this</span>.endTime;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      );</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    changeEndTime() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.pickerOptionsEndTime = <span class=\"built_in\">Object</span>.assign(&#123;&#125;, <span class=\"keyword\">this</span>.pickerOptionsEndTime, &#123;</span><br><span class=\"line\">        disabledDate: <span class=\"function\"><span class=\"params\">time</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> time.getTime() &lt; <span class=\"keyword\">this</span>.startTime;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h2><p><a href=\"https://chengheai.github.io/daily-vue-demo/#/timedisable\" target=\"_blank\" rel=\"noopener\">demo</a><br><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/2019-03-25%2021-12-38.2019-03-25%2021_15_51.gif?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></p>\n<h2 id=\"代码-日期比较\"><a href=\"#代码-日期比较\" class=\"headerlink\" title=\"代码 [ 日期比较 ]\"></a>代码 [ 日期比较 ]</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"block\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"demonstration\"</span>&gt;</span>开始日期：<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">el-date-picker</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">v-model</span>=<span class=\"string\">\"startDate\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">type</span>=<span class=\"string\">\"date\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">:picker-options</span>=<span class=\"string\">\"pickerOptionsStart\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    @<span class=\"attr\">change</span>=<span class=\"string\">\"changeEnd\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">placeholder</span>=<span class=\"string\">\"选择日期\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-date-picker</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"block\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"margin-right: 50px;\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"demonstration\"</span>&gt;</span>结束日期：<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">el-date-picker</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">v-model</span>=<span class=\"string\">\"endDate\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">type</span>=<span class=\"string\">\"date\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">:picker-options</span>=<span class=\"string\">\"pickerOptionsEnd\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    @<span class=\"attr\">change</span>=<span class=\"string\">\"changeStart\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">placeholder</span>=<span class=\"string\">\"选择日期时间\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-date-picker</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  data() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      pickerOptionsStart: &#123;&#125;,</span><br><span class=\"line\">      pickerOptionsEnd: &#123;&#125;,</span><br><span class=\"line\">      startDate: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">      endDate: <span class=\"string\">\"\"</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    changeStart() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.pickerOptionsStart = <span class=\"built_in\">Object</span>.assign(&#123;&#125;, <span class=\"keyword\">this</span>.pickerOptionsStart, &#123;</span><br><span class=\"line\">        disabledDate: <span class=\"function\"><span class=\"params\">time</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> time.getTime() &gt; <span class=\"keyword\">this</span>.endDate;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    changeEnd() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.pickerOptionsEnd = <span class=\"built_in\">Object</span>.assign(&#123;&#125;, <span class=\"keyword\">this</span>.pickerOptionsEnd, &#123;</span><br><span class=\"line\">        disabledDate: <span class=\"function\"><span class=\"params\">time</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> time.getTime() &lt; <span class=\"keyword\">this</span>.startDate;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"代码-日期时间比较\"><a href=\"#代码-日期时间比较\" class=\"headerlink\" title=\"代码 [ 日期时间比较 ]\"></a>代码 [ 日期时间比较 ]</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"block\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"demonstration\"</span>&gt;</span>开始时间：<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">el-date-picker</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">v-model</span>=<span class=\"string\">\"startTime\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">type</span>=<span class=\"string\">\"datetime\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">value-format</span>=<span class=\"string\">\"yyyy-MM-dd HH:mm:ss\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">placeholder</span>=<span class=\"string\">\"选择时间\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-date-picker</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"block\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"demonstration\"</span>&gt;</span>结束时间：<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">el-date-picker</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">v-model</span>=<span class=\"string\">\"endTime\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">type</span>=<span class=\"string\">\"datetime\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">value-format</span>=<span class=\"string\">\"yyyy-MM-dd HH:mm:ss\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    @<span class=\"attr\">change</span>=<span class=\"string\">\"change\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">placeholder</span>=<span class=\"string\">\"选择时间\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-date-picker</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  data() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      pickerOptionsStartTime: &#123;&#125;,</span><br><span class=\"line\">      pickerOptionsEndTime: &#123;&#125;,</span><br><span class=\"line\">      startTime: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">      endTime: <span class=\"string\">\"\"</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    change(val) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(val);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.comptime(<span class=\"keyword\">this</span>.startTime, val)</span><br><span class=\"line\">        .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">this</span>.endTime = res;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">\"res: \"</span>, res);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">this</span>.endTime = err;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">\"err: \"</span>, err);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"keyword\">async</span> comptime(beginTime, endTime) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (beginTime) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> str = endTime;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> beginTimes = beginTime.substring(<span class=\"number\">0</span>, <span class=\"number\">10</span>).split(<span class=\"string\">\"-\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">var</span> endTimes = endTime.substring(<span class=\"number\">0</span>, <span class=\"number\">10</span>).split(<span class=\"string\">\"-\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        beginTime =</span><br><span class=\"line\">          beginTimes[<span class=\"number\">1</span>] +</span><br><span class=\"line\">          <span class=\"string\">\"-\"</span> +</span><br><span class=\"line\">          beginTimes[<span class=\"number\">2</span>] +</span><br><span class=\"line\">          <span class=\"string\">\"-\"</span> +</span><br><span class=\"line\">          beginTimes[<span class=\"number\">0</span>] +</span><br><span class=\"line\">          <span class=\"string\">\" \"</span> +</span><br><span class=\"line\">          beginTime.substring(<span class=\"number\">10</span>, <span class=\"number\">19</span>);</span><br><span class=\"line\">        endTime =</span><br><span class=\"line\">          endTimes[<span class=\"number\">1</span>] +</span><br><span class=\"line\">          <span class=\"string\">\"-\"</span> +</span><br><span class=\"line\">          endTimes[<span class=\"number\">2</span>] +</span><br><span class=\"line\">          <span class=\"string\">\"-\"</span> +</span><br><span class=\"line\">          endTimes[<span class=\"number\">0</span>] +</span><br><span class=\"line\">          <span class=\"string\">\" \"</span> +</span><br><span class=\"line\">          endTime.substring(<span class=\"number\">10</span>, <span class=\"number\">19</span>);</span><br><span class=\"line\">        <span class=\"keyword\">var</span> a = (<span class=\"built_in\">Date</span>.parse(endTime) - <span class=\"built_in\">Date</span>.parse(beginTime)) / <span class=\"number\">3600</span> / <span class=\"number\">1000</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (a &lt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">this</span>.$message(&#123;</span><br><span class=\"line\">            message: <span class=\"string\">\"结束时间必须大于开始时间\"</span>,</span><br><span class=\"line\">            type: <span class=\"string\">\"warning\"</span></span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> str;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.$message(&#123;</span><br><span class=\"line\">          message: <span class=\"string\">\"请选择开始时间\"</span>,</span><br><span class=\"line\">          type: <span class=\"string\">\"warning\"</span></span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    changeStartTime() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.pickerOptionsStartTime = <span class=\"built_in\">Object</span>.assign(</span><br><span class=\"line\">        &#123;&#125;,</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.pickerOptionsStartTime,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          disabledDate: <span class=\"function\"><span class=\"params\">time</span> =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> time.getTime() &gt; <span class=\"keyword\">this</span>.endTime;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      );</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    changeEndTime() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.pickerOptionsEndTime = <span class=\"built_in\">Object</span>.assign(&#123;&#125;, <span class=\"keyword\">this</span>.pickerOptionsEndTime, &#123;</span><br><span class=\"line\">        disabledDate: <span class=\"function\"><span class=\"params\">time</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> time.getTime() &lt; <span class=\"keyword\">this</span>.startTime;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n"},{"title":"vue自定义抽屉组件","date":"2019-08-08T13:05:40.000Z","_content":"## 前说\n在项目开发中，有很多时候由于某某原因，很多UI组件不能被用，像移动端一个小的H5页面，引入一个大的antd-mobile显然也不合理，所以就有了很多形形色色的自定义组件了。\n## 效果\n![](https://github.com/chengheai/review-demo-image/blob/master/2019-08-08%2021-10-42.2019-08-08%2021_11_24.gif?raw=true)\n## LIVE\n[demo](https://chengheai.github.io/daily-vue-demo/#/drawer1)\n## 代码\ndrawer.vue\n``` html\n<template>\n  <div class=\"drawer\">\n    <div :class=\"maskClass\" @click=\"closeByMask\"></div>\n    <div :class=\"mainClass\" :style=\"mainStyle\" class=\"main\">\n      <div class=\"drawer-head\">\n        <span>{{ title }}</span>\n        <span\n          v-show=\"closable\"\n          class=\"close-btn\"\n          @click=\"closeByButton\"\n        >x</span>\n      </div>\n      <div class=\"drawer-body\" :style=\"bodyStyle\">\n        <slot />\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  props: {\n    // 是否打开\n    display: {\n      type: Boolean\n    },\n    // 标题\n    title: {\n      type: String,\n      default: \"标题\"\n    },\n    // 是否显示关闭按钮\n    closable: {\n      type: Boolean,\n      default: true\n    },\n    // 是否显示遮罩\n    mask: {\n      type: Boolean,\n      default: true\n    },\n    // 是否点击遮罩关闭\n    maskClosable: {\n      type: Boolean,\n      default: true\n    },\n    // 宽度\n    width: {\n      type: String,\n      default: \"400px\"\n    },\n    // 高度\n    height: {\n      type: String,\n      default: \"75%\"\n    },\n    // 是否在父级元素中打开\n    inner: {\n      type: Boolean,\n      default: false\n    }\n  },\n  computed: {\n    maskClass: function() {\n      return {\n        \"mask-show\": this.mask && this.display,\n        \"mask-hide\": !(this.mask && this.display),\n        inner: this.inner\n      };\n    },\n    mainClass: function() {\n      return {\n        \"main-show\": this.display,\n        \"main-hide\": !this.display,\n        inner: this.inner\n      };\n    },\n    mainStyle: function() {\n      return {\n        width: this.width,\n        height: this.height,\n        bottom: this.display ? \"0\" : `-${this.height}`,\n        borderTop: this.mask ? \"none\" : \"1px solid #eee\"\n      };\n    },\n    bodyStyle: function() {\n      return {\n        height: this.height\n      };\n    }\n  },\n  mounted() {\n    if (this.inner) {\n      let box = this.$el.parentNode;\n      box.style.position = \"relative\";\n    }\n  },\n  methods: {\n    closeByMask() {\n      this.maskClosable && this.$emit(\"update:display\", false);\n    },\n    closeByButton() {\n      this.$emit(\"update:display\", false);\n    }\n  }\n};\n</script>\n<style lang=\"less\" scoped>\n.drawer {\n  .mask-show {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 10;\n    background-color: rgba(0, 0, 0, 0.5);\n    opacity: 1;\n    transition: opacity 0.5s;\n  }\n  .mask-hide {\n    opacity: 0;\n    transition: opacity 0.5s;\n  }\n  .main {\n    position: fixed;\n    z-index: 10;\n    bottom: 0;\n    height: 100%;\n    border-top-left-radius: 10px;\n    border-top-right-radius: 10px;\n    background: #f7f7f7;\n    transition: all 0.5s;\n  }\n  .main-show {\n    opacity: 1;\n  }\n  .main-hide {\n    opacity: 0;\n  }\n  .inner {\n    position: absolute;\n  }\n  .drawer-head {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    height: 50px;\n    padding: 20px;\n    box-sizing: border-box;\n    border-top-left-radius: 10px;\n    border-top-right-radius: 10px;\n    font-size: 16px;\n    font-weight: bold;\n    background: #fff;\n    position: relative;\n    border-bottom: 1px solid #eee;\n    .close-btn {\n      font-size: 24px;\n      position: absolute;\n      right: 20px;\n      top: 50%;\n      transform: translateY(-50%);\n      display: inline-block;\n      cursor: pointer;\n    }\n  }\n  .drawer-body {\n    // padding: 20px;\n    font-size: 14px;\n    overflow: auto;\n  }\n}\n</style>\n\n```\nindex.vue引用\n``` html\n<template>\n  <div>\n    <el-button type=\"primary\" @click=\"display = !display\">{{display?'close': 'open'}}</el-button>\n    <drawer title=\"我是标题\" :display.sync=\"display\" :width=\"drawerWidth\" :height=\"drawerHeight\">\n      <div>123</div>\n    </drawer>\n  </div>\n</template>\n\n<script>\nimport drawer from './../pages/drawer';\nexport default {\n  components: { drawer },\n  data() {\n    return {\n      activeName: '1',\n      display: true,\n      drawerWidth: '100%',\n      drawerHeight: '500px',\n    };\n  },\n};\n</script>\n\n<style>\n</style>\n\n```","source":"_posts/vue自定义抽屉组件.md","raw":"---\ntitle: vue自定义抽屉组件\ndate: 2019-08-08 21:05:40\ntags: ['vue', '小技巧']\n---\n## 前说\n在项目开发中，有很多时候由于某某原因，很多UI组件不能被用，像移动端一个小的H5页面，引入一个大的antd-mobile显然也不合理，所以就有了很多形形色色的自定义组件了。\n## 效果\n![](https://github.com/chengheai/review-demo-image/blob/master/2019-08-08%2021-10-42.2019-08-08%2021_11_24.gif?raw=true)\n## LIVE\n[demo](https://chengheai.github.io/daily-vue-demo/#/drawer1)\n## 代码\ndrawer.vue\n``` html\n<template>\n  <div class=\"drawer\">\n    <div :class=\"maskClass\" @click=\"closeByMask\"></div>\n    <div :class=\"mainClass\" :style=\"mainStyle\" class=\"main\">\n      <div class=\"drawer-head\">\n        <span>{{ title }}</span>\n        <span\n          v-show=\"closable\"\n          class=\"close-btn\"\n          @click=\"closeByButton\"\n        >x</span>\n      </div>\n      <div class=\"drawer-body\" :style=\"bodyStyle\">\n        <slot />\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  props: {\n    // 是否打开\n    display: {\n      type: Boolean\n    },\n    // 标题\n    title: {\n      type: String,\n      default: \"标题\"\n    },\n    // 是否显示关闭按钮\n    closable: {\n      type: Boolean,\n      default: true\n    },\n    // 是否显示遮罩\n    mask: {\n      type: Boolean,\n      default: true\n    },\n    // 是否点击遮罩关闭\n    maskClosable: {\n      type: Boolean,\n      default: true\n    },\n    // 宽度\n    width: {\n      type: String,\n      default: \"400px\"\n    },\n    // 高度\n    height: {\n      type: String,\n      default: \"75%\"\n    },\n    // 是否在父级元素中打开\n    inner: {\n      type: Boolean,\n      default: false\n    }\n  },\n  computed: {\n    maskClass: function() {\n      return {\n        \"mask-show\": this.mask && this.display,\n        \"mask-hide\": !(this.mask && this.display),\n        inner: this.inner\n      };\n    },\n    mainClass: function() {\n      return {\n        \"main-show\": this.display,\n        \"main-hide\": !this.display,\n        inner: this.inner\n      };\n    },\n    mainStyle: function() {\n      return {\n        width: this.width,\n        height: this.height,\n        bottom: this.display ? \"0\" : `-${this.height}`,\n        borderTop: this.mask ? \"none\" : \"1px solid #eee\"\n      };\n    },\n    bodyStyle: function() {\n      return {\n        height: this.height\n      };\n    }\n  },\n  mounted() {\n    if (this.inner) {\n      let box = this.$el.parentNode;\n      box.style.position = \"relative\";\n    }\n  },\n  methods: {\n    closeByMask() {\n      this.maskClosable && this.$emit(\"update:display\", false);\n    },\n    closeByButton() {\n      this.$emit(\"update:display\", false);\n    }\n  }\n};\n</script>\n<style lang=\"less\" scoped>\n.drawer {\n  .mask-show {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 10;\n    background-color: rgba(0, 0, 0, 0.5);\n    opacity: 1;\n    transition: opacity 0.5s;\n  }\n  .mask-hide {\n    opacity: 0;\n    transition: opacity 0.5s;\n  }\n  .main {\n    position: fixed;\n    z-index: 10;\n    bottom: 0;\n    height: 100%;\n    border-top-left-radius: 10px;\n    border-top-right-radius: 10px;\n    background: #f7f7f7;\n    transition: all 0.5s;\n  }\n  .main-show {\n    opacity: 1;\n  }\n  .main-hide {\n    opacity: 0;\n  }\n  .inner {\n    position: absolute;\n  }\n  .drawer-head {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    height: 50px;\n    padding: 20px;\n    box-sizing: border-box;\n    border-top-left-radius: 10px;\n    border-top-right-radius: 10px;\n    font-size: 16px;\n    font-weight: bold;\n    background: #fff;\n    position: relative;\n    border-bottom: 1px solid #eee;\n    .close-btn {\n      font-size: 24px;\n      position: absolute;\n      right: 20px;\n      top: 50%;\n      transform: translateY(-50%);\n      display: inline-block;\n      cursor: pointer;\n    }\n  }\n  .drawer-body {\n    // padding: 20px;\n    font-size: 14px;\n    overflow: auto;\n  }\n}\n</style>\n\n```\nindex.vue引用\n``` html\n<template>\n  <div>\n    <el-button type=\"primary\" @click=\"display = !display\">{{display?'close': 'open'}}</el-button>\n    <drawer title=\"我是标题\" :display.sync=\"display\" :width=\"drawerWidth\" :height=\"drawerHeight\">\n      <div>123</div>\n    </drawer>\n  </div>\n</template>\n\n<script>\nimport drawer from './../pages/drawer';\nexport default {\n  components: { drawer },\n  data() {\n    return {\n      activeName: '1',\n      display: true,\n      drawerWidth: '100%',\n      drawerHeight: '500px',\n    };\n  },\n};\n</script>\n\n<style>\n</style>\n\n```","slug":"vue自定义抽屉组件","published":1,"updated":"2021-10-09T08:48:32.081Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzabv002a5c549ny0kwla","content":"<h2 id=\"前说\"><a href=\"#前说\" class=\"headerlink\" title=\"前说\"></a>前说</h2><p>在项目开发中，有很多时候由于某某原因，很多UI组件不能被用，像移动端一个小的H5页面，引入一个大的antd-mobile显然也不合理，所以就有了很多形形色色的自定义组件了。</p>\n<h2 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/2019-08-08%2021-10-42.2019-08-08%2021_11_24.gif?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"LIVE\"><a href=\"#LIVE\" class=\"headerlink\" title=\"LIVE\"></a>LIVE</h2><p><a href=\"https://chengheai.github.io/daily-vue-demo/#/drawer1\" target=\"_blank\" rel=\"noopener\">demo</a></p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><p>drawer.vue<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"drawer\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">:class</span>=<span class=\"string\">\"maskClass\"</span> @<span class=\"attr\">click</span>=<span class=\"string\">\"closeByMask\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">:class</span>=<span class=\"string\">\"mainClass\"</span> <span class=\"attr\">:style</span>=<span class=\"string\">\"mainStyle\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"main\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"drawer-head\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">span</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">v-show</span>=<span class=\"string\">\"closable\"</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">class</span>=<span class=\"string\">\"close-btn\"</span></span></span><br><span class=\"line\"><span class=\"tag\">          @<span class=\"attr\">click</span>=<span class=\"string\">\"closeByButton\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        &gt;</span>x<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"drawer-body\"</span> <span class=\"attr\">:style</span>=<span class=\"string\">\"bodyStyle\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">slot</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span><br><span class=\"line\">  props: &#123;</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 是否打开</span></span></span><br><span class=\"line\">    display: &#123;</span><br><span class=\"line\"><span class=\"javascript\">      type: <span class=\"built_in\">Boolean</span></span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 标题</span></span></span><br><span class=\"line\">    title: &#123;</span><br><span class=\"line\"><span class=\"javascript\">      type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">default</span>: <span class=\"string\">\"标题\"</span></span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 是否显示关闭按钮</span></span></span><br><span class=\"line\">    closable: &#123;</span><br><span class=\"line\"><span class=\"javascript\">      type: <span class=\"built_in\">Boolean</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">default</span>: <span class=\"literal\">true</span></span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 是否显示遮罩</span></span></span><br><span class=\"line\">    mask: &#123;</span><br><span class=\"line\"><span class=\"javascript\">      type: <span class=\"built_in\">Boolean</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">default</span>: <span class=\"literal\">true</span></span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 是否点击遮罩关闭</span></span></span><br><span class=\"line\">    maskClosable: &#123;</span><br><span class=\"line\"><span class=\"javascript\">      type: <span class=\"built_in\">Boolean</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">default</span>: <span class=\"literal\">true</span></span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 宽度</span></span></span><br><span class=\"line\">    width: &#123;</span><br><span class=\"line\"><span class=\"javascript\">      type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">default</span>: <span class=\"string\">\"400px\"</span></span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 高度</span></span></span><br><span class=\"line\">    height: &#123;</span><br><span class=\"line\"><span class=\"javascript\">      type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">default</span>: <span class=\"string\">\"75%\"</span></span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 是否在父级元素中打开</span></span></span><br><span class=\"line\">    inner: &#123;</span><br><span class=\"line\"><span class=\"javascript\">      type: <span class=\"built_in\">Boolean</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">default</span>: <span class=\"literal\">false</span></span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  computed: &#123;</span><br><span class=\"line\"><span class=\"javascript\">    maskClass: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"string\">\"mask-show\"</span>: <span class=\"keyword\">this</span>.mask &amp;&amp; <span class=\"keyword\">this</span>.display,</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"string\">\"mask-hide\"</span>: !(<span class=\"keyword\">this</span>.mask &amp;&amp; <span class=\"keyword\">this</span>.display),</span></span><br><span class=\"line\"><span class=\"javascript\">        inner: <span class=\"keyword\">this</span>.inner</span></span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"><span class=\"javascript\">    mainClass: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"string\">\"main-show\"</span>: <span class=\"keyword\">this</span>.display,</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"string\">\"main-hide\"</span>: !<span class=\"keyword\">this</span>.display,</span></span><br><span class=\"line\"><span class=\"javascript\">        inner: <span class=\"keyword\">this</span>.inner</span></span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"><span class=\"javascript\">    mainStyle: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        width: <span class=\"keyword\">this</span>.width,</span></span><br><span class=\"line\"><span class=\"javascript\">        height: <span class=\"keyword\">this</span>.height,</span></span><br><span class=\"line\"><span class=\"javascript\">        bottom: <span class=\"keyword\">this</span>.display ? <span class=\"string\">\"0\"</span> : <span class=\"string\">`-<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.height&#125;</span>`</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">        borderTop: <span class=\"keyword\">this</span>.mask ? <span class=\"string\">\"none\"</span> : <span class=\"string\">\"1px solid #eee\"</span></span></span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"><span class=\"javascript\">    bodyStyle: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        height: <span class=\"keyword\">this</span>.height</span></span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  mounted() &#123;</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.inner) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">let</span> box = <span class=\"keyword\">this</span>.$el.parentNode;</span></span><br><span class=\"line\"><span class=\"javascript\">      box.style.position = <span class=\"string\">\"relative\"</span>;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    closeByMask() &#123;</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">this</span>.maskClosable &amp;&amp; <span class=\"keyword\">this</span>.$emit(<span class=\"string\">\"update:display\"</span>, <span class=\"literal\">false</span>);</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    closeByButton() &#123;</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">this</span>.$emit(<span class=\"string\">\"update:display\"</span>, <span class=\"literal\">false</span>);</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"less\"</span> <span class=\"attr\">scoped</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\"><span class=\"selector-class\">.drawer</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"selector-class\">.mask-show</span> &#123;</span></span><br><span class=\"line\">    position: fixed;</span><br><span class=\"line\">    top: 0;</span><br><span class=\"line\">    left: 0;</span><br><span class=\"line\">    width: 100%;</span><br><span class=\"line\">    height: 100%;</span><br><span class=\"line\">    z-index: 10;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-tag\">background-color</span>: <span class=\"selector-tag\">rgba</span>(0, 0, 0, 0<span class=\"selector-class\">.5</span>);</span></span><br><span class=\"line\">    opacity: 1;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-tag\">transition</span>: <span class=\"selector-tag\">opacity</span> 0<span class=\"selector-class\">.5s</span>;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"css\">  <span class=\"selector-class\">.mask-hide</span> &#123;</span></span><br><span class=\"line\">    opacity: 0;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-tag\">transition</span>: <span class=\"selector-tag\">opacity</span> 0<span class=\"selector-class\">.5s</span>;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"css\">  <span class=\"selector-class\">.main</span> &#123;</span></span><br><span class=\"line\">    position: fixed;</span><br><span class=\"line\">    z-index: 10;</span><br><span class=\"line\">    bottom: 0;</span><br><span class=\"line\">    height: 100%;</span><br><span class=\"line\">    border-top-left-radius: 10px;</span><br><span class=\"line\">    border-top-right-radius: 10px;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-tag\">background</span>: <span class=\"selector-id\">#f7f7f7</span>;</span></span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-tag\">transition</span>: <span class=\"selector-tag\">all</span> 0<span class=\"selector-class\">.5s</span>;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"css\">  <span class=\"selector-class\">.main-show</span> &#123;</span></span><br><span class=\"line\">    opacity: 1;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"css\">  <span class=\"selector-class\">.main-hide</span> &#123;</span></span><br><span class=\"line\">    opacity: 0;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"css\">  <span class=\"selector-class\">.inner</span> &#123;</span></span><br><span class=\"line\">    position: absolute;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"css\">  <span class=\"selector-class\">.drawer-head</span> &#123;</span></span><br><span class=\"line\">    display: flex;</span><br><span class=\"line\">    justify-content: space-between;</span><br><span class=\"line\">    align-items: center;</span><br><span class=\"line\">    height: 50px;</span><br><span class=\"line\">    padding: 20px;</span><br><span class=\"line\">    box-sizing: border-box;</span><br><span class=\"line\">    border-top-left-radius: 10px;</span><br><span class=\"line\">    border-top-right-radius: 10px;</span><br><span class=\"line\">    font-size: 16px;</span><br><span class=\"line\">    font-weight: bold;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-tag\">background</span>: <span class=\"selector-id\">#fff</span>;</span></span><br><span class=\"line\">    position: relative;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-tag\">border-bottom</span>: 1<span class=\"selector-tag\">px</span> <span class=\"selector-tag\">solid</span> <span class=\"selector-id\">#eee</span>;</span></span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.close-btn</span> &#123;</span></span><br><span class=\"line\">      font-size: 24px;</span><br><span class=\"line\">      position: absolute;</span><br><span class=\"line\">      right: 20px;</span><br><span class=\"line\">      top: 50%;</span><br><span class=\"line\">      transform: translateY(-50%);</span><br><span class=\"line\">      display: inline-block;</span><br><span class=\"line\">      cursor: pointer;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"css\">  <span class=\"selector-class\">.drawer-body</span> &#123;</span></span><br><span class=\"line\">    // padding: 20px;</span><br><span class=\"line\">    font-size: 14px;</span><br><span class=\"line\">    overflow: auto;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>index.vue引用<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-button</span> <span class=\"attr\">type</span>=<span class=\"string\">\"primary\"</span> @<span class=\"attr\">click</span>=<span class=\"string\">\"display = !display\"</span>&gt;</span>&#123;&#123;display?'close': 'open'&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">el-button</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">drawer</span> <span class=\"attr\">title</span>=<span class=\"string\">\"我是标题\"</span> <span class=\"attr\">:display.sync</span>=<span class=\"string\">\"display\"</span> <span class=\"attr\">:width</span>=<span class=\"string\">\"drawerWidth\"</span> <span class=\"attr\">:height</span>=<span class=\"string\">\"drawerHeight\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>123<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">drawer</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">import</span> drawer <span class=\"keyword\">from</span> <span class=\"string\">'./../pages/drawer'</span>;</span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span><br><span class=\"line\">  components: &#123; drawer &#125;,</span><br><span class=\"line\">  data() &#123;</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">      activeName: <span class=\"string\">'1'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">      display: <span class=\"literal\">true</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">      drawerWidth: <span class=\"string\">'100%'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">      drawerHeight: <span class=\"string\">'500px'</span>,</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"前说\"><a href=\"#前说\" class=\"headerlink\" title=\"前说\"></a>前说</h2><p>在项目开发中，有很多时候由于某某原因，很多UI组件不能被用，像移动端一个小的H5页面，引入一个大的antd-mobile显然也不合理，所以就有了很多形形色色的自定义组件了。</p>\n<h2 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/2019-08-08%2021-10-42.2019-08-08%2021_11_24.gif?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"LIVE\"><a href=\"#LIVE\" class=\"headerlink\" title=\"LIVE\"></a>LIVE</h2><p><a href=\"https://chengheai.github.io/daily-vue-demo/#/drawer1\" target=\"_blank\" rel=\"noopener\">demo</a></p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><p>drawer.vue<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"drawer\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">:class</span>=<span class=\"string\">\"maskClass\"</span> @<span class=\"attr\">click</span>=<span class=\"string\">\"closeByMask\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">:class</span>=<span class=\"string\">\"mainClass\"</span> <span class=\"attr\">:style</span>=<span class=\"string\">\"mainStyle\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"main\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"drawer-head\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">span</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">v-show</span>=<span class=\"string\">\"closable\"</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">class</span>=<span class=\"string\">\"close-btn\"</span></span></span><br><span class=\"line\"><span class=\"tag\">          @<span class=\"attr\">click</span>=<span class=\"string\">\"closeByButton\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        &gt;</span>x<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"drawer-body\"</span> <span class=\"attr\">:style</span>=<span class=\"string\">\"bodyStyle\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">slot</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span><br><span class=\"line\">  props: &#123;</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 是否打开</span></span></span><br><span class=\"line\">    display: &#123;</span><br><span class=\"line\"><span class=\"javascript\">      type: <span class=\"built_in\">Boolean</span></span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 标题</span></span></span><br><span class=\"line\">    title: &#123;</span><br><span class=\"line\"><span class=\"javascript\">      type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">default</span>: <span class=\"string\">\"标题\"</span></span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 是否显示关闭按钮</span></span></span><br><span class=\"line\">    closable: &#123;</span><br><span class=\"line\"><span class=\"javascript\">      type: <span class=\"built_in\">Boolean</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">default</span>: <span class=\"literal\">true</span></span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 是否显示遮罩</span></span></span><br><span class=\"line\">    mask: &#123;</span><br><span class=\"line\"><span class=\"javascript\">      type: <span class=\"built_in\">Boolean</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">default</span>: <span class=\"literal\">true</span></span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 是否点击遮罩关闭</span></span></span><br><span class=\"line\">    maskClosable: &#123;</span><br><span class=\"line\"><span class=\"javascript\">      type: <span class=\"built_in\">Boolean</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">default</span>: <span class=\"literal\">true</span></span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 宽度</span></span></span><br><span class=\"line\">    width: &#123;</span><br><span class=\"line\"><span class=\"javascript\">      type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">default</span>: <span class=\"string\">\"400px\"</span></span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 高度</span></span></span><br><span class=\"line\">    height: &#123;</span><br><span class=\"line\"><span class=\"javascript\">      type: <span class=\"built_in\">String</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">default</span>: <span class=\"string\">\"75%\"</span></span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 是否在父级元素中打开</span></span></span><br><span class=\"line\">    inner: &#123;</span><br><span class=\"line\"><span class=\"javascript\">      type: <span class=\"built_in\">Boolean</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">default</span>: <span class=\"literal\">false</span></span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  computed: &#123;</span><br><span class=\"line\"><span class=\"javascript\">    maskClass: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"string\">\"mask-show\"</span>: <span class=\"keyword\">this</span>.mask &amp;&amp; <span class=\"keyword\">this</span>.display,</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"string\">\"mask-hide\"</span>: !(<span class=\"keyword\">this</span>.mask &amp;&amp; <span class=\"keyword\">this</span>.display),</span></span><br><span class=\"line\"><span class=\"javascript\">        inner: <span class=\"keyword\">this</span>.inner</span></span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"><span class=\"javascript\">    mainClass: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"string\">\"main-show\"</span>: <span class=\"keyword\">this</span>.display,</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"string\">\"main-hide\"</span>: !<span class=\"keyword\">this</span>.display,</span></span><br><span class=\"line\"><span class=\"javascript\">        inner: <span class=\"keyword\">this</span>.inner</span></span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"><span class=\"javascript\">    mainStyle: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        width: <span class=\"keyword\">this</span>.width,</span></span><br><span class=\"line\"><span class=\"javascript\">        height: <span class=\"keyword\">this</span>.height,</span></span><br><span class=\"line\"><span class=\"javascript\">        bottom: <span class=\"keyword\">this</span>.display ? <span class=\"string\">\"0\"</span> : <span class=\"string\">`-<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.height&#125;</span>`</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">        borderTop: <span class=\"keyword\">this</span>.mask ? <span class=\"string\">\"none\"</span> : <span class=\"string\">\"1px solid #eee\"</span></span></span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"><span class=\"javascript\">    bodyStyle: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        height: <span class=\"keyword\">this</span>.height</span></span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  mounted() &#123;</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.inner) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">let</span> box = <span class=\"keyword\">this</span>.$el.parentNode;</span></span><br><span class=\"line\"><span class=\"javascript\">      box.style.position = <span class=\"string\">\"relative\"</span>;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    closeByMask() &#123;</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">this</span>.maskClosable &amp;&amp; <span class=\"keyword\">this</span>.$emit(<span class=\"string\">\"update:display\"</span>, <span class=\"literal\">false</span>);</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    closeByButton() &#123;</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">this</span>.$emit(<span class=\"string\">\"update:display\"</span>, <span class=\"literal\">false</span>);</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"less\"</span> <span class=\"attr\">scoped</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\"><span class=\"selector-class\">.drawer</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">  <span class=\"selector-class\">.mask-show</span> &#123;</span></span><br><span class=\"line\">    position: fixed;</span><br><span class=\"line\">    top: 0;</span><br><span class=\"line\">    left: 0;</span><br><span class=\"line\">    width: 100%;</span><br><span class=\"line\">    height: 100%;</span><br><span class=\"line\">    z-index: 10;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-tag\">background-color</span>: <span class=\"selector-tag\">rgba</span>(0, 0, 0, 0<span class=\"selector-class\">.5</span>);</span></span><br><span class=\"line\">    opacity: 1;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-tag\">transition</span>: <span class=\"selector-tag\">opacity</span> 0<span class=\"selector-class\">.5s</span>;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"css\">  <span class=\"selector-class\">.mask-hide</span> &#123;</span></span><br><span class=\"line\">    opacity: 0;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-tag\">transition</span>: <span class=\"selector-tag\">opacity</span> 0<span class=\"selector-class\">.5s</span>;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"css\">  <span class=\"selector-class\">.main</span> &#123;</span></span><br><span class=\"line\">    position: fixed;</span><br><span class=\"line\">    z-index: 10;</span><br><span class=\"line\">    bottom: 0;</span><br><span class=\"line\">    height: 100%;</span><br><span class=\"line\">    border-top-left-radius: 10px;</span><br><span class=\"line\">    border-top-right-radius: 10px;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-tag\">background</span>: <span class=\"selector-id\">#f7f7f7</span>;</span></span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-tag\">transition</span>: <span class=\"selector-tag\">all</span> 0<span class=\"selector-class\">.5s</span>;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"css\">  <span class=\"selector-class\">.main-show</span> &#123;</span></span><br><span class=\"line\">    opacity: 1;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"css\">  <span class=\"selector-class\">.main-hide</span> &#123;</span></span><br><span class=\"line\">    opacity: 0;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"css\">  <span class=\"selector-class\">.inner</span> &#123;</span></span><br><span class=\"line\">    position: absolute;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"css\">  <span class=\"selector-class\">.drawer-head</span> &#123;</span></span><br><span class=\"line\">    display: flex;</span><br><span class=\"line\">    justify-content: space-between;</span><br><span class=\"line\">    align-items: center;</span><br><span class=\"line\">    height: 50px;</span><br><span class=\"line\">    padding: 20px;</span><br><span class=\"line\">    box-sizing: border-box;</span><br><span class=\"line\">    border-top-left-radius: 10px;</span><br><span class=\"line\">    border-top-right-radius: 10px;</span><br><span class=\"line\">    font-size: 16px;</span><br><span class=\"line\">    font-weight: bold;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-tag\">background</span>: <span class=\"selector-id\">#fff</span>;</span></span><br><span class=\"line\">    position: relative;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-tag\">border-bottom</span>: 1<span class=\"selector-tag\">px</span> <span class=\"selector-tag\">solid</span> <span class=\"selector-id\">#eee</span>;</span></span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.close-btn</span> &#123;</span></span><br><span class=\"line\">      font-size: 24px;</span><br><span class=\"line\">      position: absolute;</span><br><span class=\"line\">      right: 20px;</span><br><span class=\"line\">      top: 50%;</span><br><span class=\"line\">      transform: translateY(-50%);</span><br><span class=\"line\">      display: inline-block;</span><br><span class=\"line\">      cursor: pointer;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"css\">  <span class=\"selector-class\">.drawer-body</span> &#123;</span></span><br><span class=\"line\">    // padding: 20px;</span><br><span class=\"line\">    font-size: 14px;</span><br><span class=\"line\">    overflow: auto;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>index.vue引用<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-button</span> <span class=\"attr\">type</span>=<span class=\"string\">\"primary\"</span> @<span class=\"attr\">click</span>=<span class=\"string\">\"display = !display\"</span>&gt;</span>&#123;&#123;display?'close': 'open'&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">el-button</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">drawer</span> <span class=\"attr\">title</span>=<span class=\"string\">\"我是标题\"</span> <span class=\"attr\">:display.sync</span>=<span class=\"string\">\"display\"</span> <span class=\"attr\">:width</span>=<span class=\"string\">\"drawerWidth\"</span> <span class=\"attr\">:height</span>=<span class=\"string\">\"drawerHeight\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>123<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">drawer</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">import</span> drawer <span class=\"keyword\">from</span> <span class=\"string\">'./../pages/drawer'</span>;</span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span><br><span class=\"line\">  components: &#123; drawer &#125;,</span><br><span class=\"line\">  data() &#123;</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">      activeName: <span class=\"string\">'1'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">      display: <span class=\"literal\">true</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">      drawerWidth: <span class=\"string\">'100%'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">      drawerHeight: <span class=\"string\">'500px'</span>,</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n"},{"title":"vue中实现图片上传添加自定义水印并下载","date":"2019-11-20T13:27:28.000Z","_content":"\n## 前言\n\n最近看了一篇用 Angular4+ 写的添加水印功能，觉得挺好玩，就自己试着用 vue 写一个相同功能\n\n## 效果\n\n![](https://github.com/chengheai/review-demo-image/blob/master/2019-11-20%2022-47-46.2019-11-20%2022_57_10.gif?raw=true)\n\n## LIVE\n\n[☀️🇱🇷🏮 在线例子 🌰🌪☃️❄️](https://chengheai.github.io/daily-vue-demo/#/watermark)\n\n## 代码\n\n[✈️✈️✈️✈️✈️✈️ 直达完整代码 🚅✈️🛫🛬🛸🚀](https://github.com/chengheai/daily-vue-demo/blob/master/src/components/Watermark.vue)\n\n```html\n<div class=\"wrap\">\n  <div class=\"optea\">\n    <div class=\"file-upload\">\n      <p>选择图片</p>\n      <el-button type=\"text\" style=\"color: #c00;\"\n        ><label for=\"uploads\">\n          <i class=\"el-icon-upload2\" style=\"margin-right: 5px;\"></i>\n          选择需要添加水印的图片</label\n        ></el-button\n      >\n      <input\n        type=\"file\"\n        id=\"uploads\"\n        hidden\n        accept=\"image/png, image/jpeg, image/gif, image/jpg\"\n        @change=\"uploadImg($event, 1)\"\n      />\n    </div>\n    <p>水印文字</p>\n    <el-input v-model=\"watermarkOptions.text\" placeholder=\"请输入水印内容\"></el-input>\n    <p>字体颜色</p>\n    <el-color-picker v-model=\"watermarkOptions.color\"></el-color-picker>\n    <p>旋转角度</p>\n    <el-slider v-model=\"watermarkOptions.rotate\" :min=\"0\" :max=\"360\"></el-slider>\n    <p>透明度</p>\n    <el-slider v-model=\"watermarkOptions.alpha\" :min=\"0\" :max=\"100\"></el-slider>\n    <p>文本间距</p>\n    <el-slider v-model=\"watermarkOptions.width\" :min=\"0\" :max=\"100\"></el-slider>\n    <p>字体大小</p>\n    <el-slider v-model=\"watermarkOptions.fontSize\" :min=\"0\" :step=\"0.5\" :max=\"50\"></el-slider>\n  </div>\n  <div>\n    <el-button @click=\"handleDown\" class=\"download-btn\" type=\"primary\" plain icon=\"el-icon-download\"\n      >下载水印图片</el-button\n    >\n    <div class=\"preview\" ref=\"previewImg\">\n      <img :src=\"preImg || defaultimg\" alt=\"\" />\n      <div class=\"watermark\" :style=\"{ background: paint }\"></div>\n    </div>\n  </div>\n</div>\n```\n\n```javascript\nexport default {\n  data() {\n    return {\n      defaultimg,\n      preImg: '',\n      watermarkOptions: {\n        text: '仅供 xxx 验证使用',\n        fontSize: 10,\n        width: 5,\n        color: '#000000',\n        alpha: 35,\n        rotate: 35,\n      },\n    };\n  },\n  methods: {\n    uploadImg(e, num) {\n      //上传图片\n      // this.option.img\n      var file = e.target.files[0];\n      if (!/\\.(gif|jpg|jpeg|png|bmp|GIF|JPG|PNG)$/.test(e.target.value)) {\n        alert('图片类型必须是.gif,jpeg,jpg,png,bmp中的一种');\n        return false;\n      }\n      var reader = new FileReader();\n      reader.onload = e => {\n        let data;\n        if (typeof e.target.result === 'object') {\n          // 把Array Buffer转化为blob 如果是base64不需要\n          data = window.URL.createObjectURL(new Blob([e.target.result]));\n        } else {\n          data = e.target.result;\n        }\n        if (num === 1) {\n          this.preImg = data;\n        }\n      };\n      // 转化为base64\n      reader.readAsDataURL(file);\n      // 转化为blob\n      // reader.readAsArrayBuffer(file)\n    },\n    handleDown() {\n      let node = this.$refs.previewImg;\n      let that = this;\n      DomToImage.toPng(node)\n        .then(function(dataUrl) {\n          var oLink = document.createElement('a');\n          oLink.download = '水印图片.png';\n          oLink.href = dataUrl;\n          oLink.click();\n          that.$nextTick(() => {\n            that.$message.success('水印图片下载成功');\n          });\n        })\n        .catch(function(error) {\n          console.error('oops, something went wrong!', error);\n          that.$message.error('下载失败');\n        });\n    },\n  },\n  computed: {\n    paint() {\n      // 文字长度\n      const wordWidth =\n        this.watermarkOptions.fontSize * this.watermarkOptions.text.split('').length;\n      const width = wordWidth + this.watermarkOptions.width;\n\n      let svgText = `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${width}px\" height=\"${width}px\">\n    <text x=\"50%\" y=\"50%\"\n        alignment-baseline=\"middle\"\n        text-anchor=\"middle\"\n        stroke=\"${this.watermarkOptions.color}\"\n        opacity=\"${this.watermarkOptions.alpha / 100}\"\n        transform=\"translate(${width / 2}, ${width / 2}) rotate(${\n        this.watermarkOptions.rotate\n      }) translate(-${width / 2}, -${width / 2})\"\n        font-weight=\"100\"\n        font-size=\"${this.watermarkOptions.fontSize}\"\n        font-family=\"microsoft yahe\"\n        >\n        ${this.watermarkOptions.text}\n    </text>\n   </svg>`;\n\n      return `url(data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(svgText)))})`;\n    },\n  },\n};\n```\n","source":"_posts/vue中实现图片上传添加自定义水印并下载.md","raw":"---\ntitle: vue中实现图片上传添加自定义水印并下载\ndate: 2019-11-20 21:27:28\ntags: ['水印']\n---\n\n## 前言\n\n最近看了一篇用 Angular4+ 写的添加水印功能，觉得挺好玩，就自己试着用 vue 写一个相同功能\n\n## 效果\n\n![](https://github.com/chengheai/review-demo-image/blob/master/2019-11-20%2022-47-46.2019-11-20%2022_57_10.gif?raw=true)\n\n## LIVE\n\n[☀️🇱🇷🏮 在线例子 🌰🌪☃️❄️](https://chengheai.github.io/daily-vue-demo/#/watermark)\n\n## 代码\n\n[✈️✈️✈️✈️✈️✈️ 直达完整代码 🚅✈️🛫🛬🛸🚀](https://github.com/chengheai/daily-vue-demo/blob/master/src/components/Watermark.vue)\n\n```html\n<div class=\"wrap\">\n  <div class=\"optea\">\n    <div class=\"file-upload\">\n      <p>选择图片</p>\n      <el-button type=\"text\" style=\"color: #c00;\"\n        ><label for=\"uploads\">\n          <i class=\"el-icon-upload2\" style=\"margin-right: 5px;\"></i>\n          选择需要添加水印的图片</label\n        ></el-button\n      >\n      <input\n        type=\"file\"\n        id=\"uploads\"\n        hidden\n        accept=\"image/png, image/jpeg, image/gif, image/jpg\"\n        @change=\"uploadImg($event, 1)\"\n      />\n    </div>\n    <p>水印文字</p>\n    <el-input v-model=\"watermarkOptions.text\" placeholder=\"请输入水印内容\"></el-input>\n    <p>字体颜色</p>\n    <el-color-picker v-model=\"watermarkOptions.color\"></el-color-picker>\n    <p>旋转角度</p>\n    <el-slider v-model=\"watermarkOptions.rotate\" :min=\"0\" :max=\"360\"></el-slider>\n    <p>透明度</p>\n    <el-slider v-model=\"watermarkOptions.alpha\" :min=\"0\" :max=\"100\"></el-slider>\n    <p>文本间距</p>\n    <el-slider v-model=\"watermarkOptions.width\" :min=\"0\" :max=\"100\"></el-slider>\n    <p>字体大小</p>\n    <el-slider v-model=\"watermarkOptions.fontSize\" :min=\"0\" :step=\"0.5\" :max=\"50\"></el-slider>\n  </div>\n  <div>\n    <el-button @click=\"handleDown\" class=\"download-btn\" type=\"primary\" plain icon=\"el-icon-download\"\n      >下载水印图片</el-button\n    >\n    <div class=\"preview\" ref=\"previewImg\">\n      <img :src=\"preImg || defaultimg\" alt=\"\" />\n      <div class=\"watermark\" :style=\"{ background: paint }\"></div>\n    </div>\n  </div>\n</div>\n```\n\n```javascript\nexport default {\n  data() {\n    return {\n      defaultimg,\n      preImg: '',\n      watermarkOptions: {\n        text: '仅供 xxx 验证使用',\n        fontSize: 10,\n        width: 5,\n        color: '#000000',\n        alpha: 35,\n        rotate: 35,\n      },\n    };\n  },\n  methods: {\n    uploadImg(e, num) {\n      //上传图片\n      // this.option.img\n      var file = e.target.files[0];\n      if (!/\\.(gif|jpg|jpeg|png|bmp|GIF|JPG|PNG)$/.test(e.target.value)) {\n        alert('图片类型必须是.gif,jpeg,jpg,png,bmp中的一种');\n        return false;\n      }\n      var reader = new FileReader();\n      reader.onload = e => {\n        let data;\n        if (typeof e.target.result === 'object') {\n          // 把Array Buffer转化为blob 如果是base64不需要\n          data = window.URL.createObjectURL(new Blob([e.target.result]));\n        } else {\n          data = e.target.result;\n        }\n        if (num === 1) {\n          this.preImg = data;\n        }\n      };\n      // 转化为base64\n      reader.readAsDataURL(file);\n      // 转化为blob\n      // reader.readAsArrayBuffer(file)\n    },\n    handleDown() {\n      let node = this.$refs.previewImg;\n      let that = this;\n      DomToImage.toPng(node)\n        .then(function(dataUrl) {\n          var oLink = document.createElement('a');\n          oLink.download = '水印图片.png';\n          oLink.href = dataUrl;\n          oLink.click();\n          that.$nextTick(() => {\n            that.$message.success('水印图片下载成功');\n          });\n        })\n        .catch(function(error) {\n          console.error('oops, something went wrong!', error);\n          that.$message.error('下载失败');\n        });\n    },\n  },\n  computed: {\n    paint() {\n      // 文字长度\n      const wordWidth =\n        this.watermarkOptions.fontSize * this.watermarkOptions.text.split('').length;\n      const width = wordWidth + this.watermarkOptions.width;\n\n      let svgText = `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${width}px\" height=\"${width}px\">\n    <text x=\"50%\" y=\"50%\"\n        alignment-baseline=\"middle\"\n        text-anchor=\"middle\"\n        stroke=\"${this.watermarkOptions.color}\"\n        opacity=\"${this.watermarkOptions.alpha / 100}\"\n        transform=\"translate(${width / 2}, ${width / 2}) rotate(${\n        this.watermarkOptions.rotate\n      }) translate(-${width / 2}, -${width / 2})\"\n        font-weight=\"100\"\n        font-size=\"${this.watermarkOptions.fontSize}\"\n        font-family=\"microsoft yahe\"\n        >\n        ${this.watermarkOptions.text}\n    </text>\n   </svg>`;\n\n      return `url(data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(svgText)))})`;\n    },\n  },\n};\n```\n","slug":"vue中实现图片上传添加自定义水印并下载","published":1,"updated":"2021-10-09T08:48:32.080Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzabw002c5c54qjf9emgn","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>最近看了一篇用 Angular4+ 写的添加水印功能，觉得挺好玩，就自己试着用 vue 写一个相同功能</p>\n<h2 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/2019-11-20%2022-47-46.2019-11-20%2022_57_10.gif?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"LIVE\"><a href=\"#LIVE\" class=\"headerlink\" title=\"LIVE\"></a>LIVE</h2><p><a href=\"https://chengheai.github.io/daily-vue-demo/#/watermark\" target=\"_blank\" rel=\"noopener\">☀️🇱🇷🏮 在线例子 🌰🌪☃️❄️</a></p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><p><a href=\"https://github.com/chengheai/daily-vue-demo/blob/master/src/components/Watermark.vue\">✈️✈️✈️✈️✈️✈️ 直达完整代码 🚅✈️🛫🛬🛸🚀</a></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"wrap\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"optea\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"file-upload\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>选择图片<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">el-button</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"color: #c00;\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        &gt;</span><span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">\"uploads\"</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">\"el-icon-upload2\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"margin-right: 5px;\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">          选择需要添加水印的图片<span class=\"tag\">&lt;/<span class=\"name\">label</span></span></span><br><span class=\"line\"><span class=\"tag\">        &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-button</span></span></span><br><span class=\"line\"><span class=\"tag\">      &gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">input</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">type</span>=<span class=\"string\">\"file\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">id</span>=<span class=\"string\">\"uploads\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">hidden</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">accept</span>=<span class=\"string\">\"image/png, image/jpeg, image/gif, image/jpg\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        @<span class=\"attr\">change</span>=<span class=\"string\">\"uploadImg($event, 1)\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>水印文字<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-input</span> <span class=\"attr\">v-model</span>=<span class=\"string\">\"watermarkOptions.text\"</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">\"请输入水印内容\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-input</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>字体颜色<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-color-picker</span> <span class=\"attr\">v-model</span>=<span class=\"string\">\"watermarkOptions.color\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-color-picker</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>旋转角度<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-slider</span> <span class=\"attr\">v-model</span>=<span class=\"string\">\"watermarkOptions.rotate\"</span> <span class=\"attr\">:min</span>=<span class=\"string\">\"0\"</span> <span class=\"attr\">:max</span>=<span class=\"string\">\"360\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-slider</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>透明度<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-slider</span> <span class=\"attr\">v-model</span>=<span class=\"string\">\"watermarkOptions.alpha\"</span> <span class=\"attr\">:min</span>=<span class=\"string\">\"0\"</span> <span class=\"attr\">:max</span>=<span class=\"string\">\"100\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-slider</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>文本间距<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-slider</span> <span class=\"attr\">v-model</span>=<span class=\"string\">\"watermarkOptions.width\"</span> <span class=\"attr\">:min</span>=<span class=\"string\">\"0\"</span> <span class=\"attr\">:max</span>=<span class=\"string\">\"100\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-slider</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>字体大小<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-slider</span> <span class=\"attr\">v-model</span>=<span class=\"string\">\"watermarkOptions.fontSize\"</span> <span class=\"attr\">:min</span>=<span class=\"string\">\"0\"</span> <span class=\"attr\">:step</span>=<span class=\"string\">\"0.5\"</span> <span class=\"attr\">:max</span>=<span class=\"string\">\"50\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-slider</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-button</span> @<span class=\"attr\">click</span>=<span class=\"string\">\"handleDown\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"download-btn\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"primary\"</span> <span class=\"attr\">plain</span> <span class=\"attr\">icon</span>=<span class=\"string\">\"el-icon-download\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      &gt;</span>下载水印图片<span class=\"tag\">&lt;/<span class=\"name\">el-button</span></span></span><br><span class=\"line\"><span class=\"tag\">    &gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"preview\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"previewImg\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">:src</span>=<span class=\"string\">\"preImg || defaultimg\"</span> <span class=\"attr\">alt</span>=<span class=\"string\">\"\"</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"watermark\"</span> <span class=\"attr\">:style</span>=<span class=\"string\">\"&#123; background: paint &#125;\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  data() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      defaultimg,</span><br><span class=\"line\">      preImg: <span class=\"string\">''</span>,</span><br><span class=\"line\">      watermarkOptions: &#123;</span><br><span class=\"line\">        text: <span class=\"string\">'仅供 xxx 验证使用'</span>,</span><br><span class=\"line\">        fontSize: <span class=\"number\">10</span>,</span><br><span class=\"line\">        width: <span class=\"number\">5</span>,</span><br><span class=\"line\">        color: <span class=\"string\">'#000000'</span>,</span><br><span class=\"line\">        alpha: <span class=\"number\">35</span>,</span><br><span class=\"line\">        rotate: <span class=\"number\">35</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    uploadImg(e, num) &#123;</span><br><span class=\"line\">      <span class=\"comment\">//上传图片</span></span><br><span class=\"line\">      <span class=\"comment\">// this.option.img</span></span><br><span class=\"line\">      <span class=\"keyword\">var</span> file = e.target.files[<span class=\"number\">0</span>];</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!<span class=\"regexp\">/\\.(gif|jpg|jpeg|png|bmp|GIF|JPG|PNG)$/</span>.test(e.target.value)) &#123;</span><br><span class=\"line\">        alert(<span class=\"string\">'图片类型必须是.gif,jpeg,jpg,png,bmp中的一种'</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> reader = <span class=\"keyword\">new</span> FileReader();</span><br><span class=\"line\">      reader.onload = <span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> data;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> e.target.result === <span class=\"string\">'object'</span>) &#123;</span><br><span class=\"line\">          <span class=\"comment\">// 把Array Buffer转化为blob 如果是base64不需要</span></span><br><span class=\"line\">          data = <span class=\"built_in\">window</span>.URL.createObjectURL(<span class=\"keyword\">new</span> Blob([e.target.result]));</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          data = e.target.result;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (num === <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">this</span>.preImg = data;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      <span class=\"comment\">// 转化为base64</span></span><br><span class=\"line\">      reader.readAsDataURL(file);</span><br><span class=\"line\">      <span class=\"comment\">// 转化为blob</span></span><br><span class=\"line\">      <span class=\"comment\">// reader.readAsArrayBuffer(file)</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    handleDown() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> node = <span class=\"keyword\">this</span>.$refs.previewImg;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> that = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">      DomToImage.toPng(node)</span><br><span class=\"line\">        .then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">dataUrl</span>) </span>&#123;</span><br><span class=\"line\">          <span class=\"keyword\">var</span> oLink = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'a'</span>);</span><br><span class=\"line\">          oLink.download = <span class=\"string\">'水印图片.png'</span>;</span><br><span class=\"line\">          oLink.href = dataUrl;</span><br><span class=\"line\">          oLink.click();</span><br><span class=\"line\">          that.$nextTick(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">            that.$message.success(<span class=\"string\">'水印图片下载成功'</span>);</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        .catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.error(<span class=\"string\">'oops, something went wrong!'</span>, error);</span><br><span class=\"line\">          that.$message.error(<span class=\"string\">'下载失败'</span>);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  computed: &#123;</span><br><span class=\"line\">    paint() &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 文字长度</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> wordWidth =</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.watermarkOptions.fontSize * <span class=\"keyword\">this</span>.watermarkOptions.text.split(<span class=\"string\">''</span>).length;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> width = wordWidth + <span class=\"keyword\">this</span>.watermarkOptions.width;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">let</span> svgText = <span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    &lt;svg xmlns=\"http://www.w3.org/2000/svg\" width=\"<span class=\"subst\">$&#123;width&#125;</span>px\" height=\"<span class=\"subst\">$&#123;width&#125;</span>px\"&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;text x=\"50%\" y=\"50%\"</span></span><br><span class=\"line\"><span class=\"string\">        alignment-baseline=\"middle\"</span></span><br><span class=\"line\"><span class=\"string\">        text-anchor=\"middle\"</span></span><br><span class=\"line\"><span class=\"string\">        stroke=\"<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.watermarkOptions.color&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"string\">        opacity=\"<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.watermarkOptions.alpha <span class=\"regexp\">/ 100&#125;\"</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"regexp\">        transform=\"translate($&#123;width /</span> <span class=\"number\">2</span>&#125;</span>, <span class=\"subst\">$&#123;width <span class=\"regexp\">/ 2&#125;) rotate($&#123;</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"regexp\">        this.watermarkOptions.rotate</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"regexp\">      &#125;) translate(-$&#123;width /</span> <span class=\"number\">2</span>&#125;</span>, -<span class=\"subst\">$&#123;width <span class=\"regexp\">/ 2&#125;)\"</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"regexp\">        font-weight=\"100\"</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"regexp\">        font-size=\"$&#123;this.watermarkOptions.fontSize&#125;\"</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"regexp\">        font-family=\"microsoft yahe\"</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"regexp\">        &gt;</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"regexp\">        $&#123;this.watermarkOptions.text&#125;</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"regexp\">    &lt;/</span>text&gt;</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\">   &lt;<span class=\"regexp\">/svg&gt;`;</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"regexp\"></span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"regexp\">      return `url(data:image/</span>svg+xml;base64,$&#123;btoa(<span class=\"built_in\">unescape</span>(<span class=\"built_in\">encodeURIComponent</span>(svgText)))&#125;</span>)`</span>;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>最近看了一篇用 Angular4+ 写的添加水印功能，觉得挺好玩，就自己试着用 vue 写一个相同功能</p>\n<h2 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/2019-11-20%2022-47-46.2019-11-20%2022_57_10.gif?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"LIVE\"><a href=\"#LIVE\" class=\"headerlink\" title=\"LIVE\"></a>LIVE</h2><p><a href=\"https://chengheai.github.io/daily-vue-demo/#/watermark\" target=\"_blank\" rel=\"noopener\">☀️🇱🇷🏮 在线例子 🌰🌪☃️❄️</a></p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><p><a href=\"https://github.com/chengheai/daily-vue-demo/blob/master/src/components/Watermark.vue\">✈️✈️✈️✈️✈️✈️ 直达完整代码 🚅✈️🛫🛬🛸🚀</a></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"wrap\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"optea\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"file-upload\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>选择图片<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">el-button</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"color: #c00;\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        &gt;</span><span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">\"uploads\"</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">\"el-icon-upload2\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"margin-right: 5px;\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">          选择需要添加水印的图片<span class=\"tag\">&lt;/<span class=\"name\">label</span></span></span><br><span class=\"line\"><span class=\"tag\">        &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-button</span></span></span><br><span class=\"line\"><span class=\"tag\">      &gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">input</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">type</span>=<span class=\"string\">\"file\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">id</span>=<span class=\"string\">\"uploads\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">hidden</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">accept</span>=<span class=\"string\">\"image/png, image/jpeg, image/gif, image/jpg\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        @<span class=\"attr\">change</span>=<span class=\"string\">\"uploadImg($event, 1)\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>水印文字<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-input</span> <span class=\"attr\">v-model</span>=<span class=\"string\">\"watermarkOptions.text\"</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">\"请输入水印内容\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-input</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>字体颜色<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-color-picker</span> <span class=\"attr\">v-model</span>=<span class=\"string\">\"watermarkOptions.color\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-color-picker</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>旋转角度<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-slider</span> <span class=\"attr\">v-model</span>=<span class=\"string\">\"watermarkOptions.rotate\"</span> <span class=\"attr\">:min</span>=<span class=\"string\">\"0\"</span> <span class=\"attr\">:max</span>=<span class=\"string\">\"360\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-slider</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>透明度<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-slider</span> <span class=\"attr\">v-model</span>=<span class=\"string\">\"watermarkOptions.alpha\"</span> <span class=\"attr\">:min</span>=<span class=\"string\">\"0\"</span> <span class=\"attr\">:max</span>=<span class=\"string\">\"100\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-slider</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>文本间距<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-slider</span> <span class=\"attr\">v-model</span>=<span class=\"string\">\"watermarkOptions.width\"</span> <span class=\"attr\">:min</span>=<span class=\"string\">\"0\"</span> <span class=\"attr\">:max</span>=<span class=\"string\">\"100\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-slider</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>字体大小<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-slider</span> <span class=\"attr\">v-model</span>=<span class=\"string\">\"watermarkOptions.fontSize\"</span> <span class=\"attr\">:min</span>=<span class=\"string\">\"0\"</span> <span class=\"attr\">:step</span>=<span class=\"string\">\"0.5\"</span> <span class=\"attr\">:max</span>=<span class=\"string\">\"50\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-slider</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-button</span> @<span class=\"attr\">click</span>=<span class=\"string\">\"handleDown\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"download-btn\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"primary\"</span> <span class=\"attr\">plain</span> <span class=\"attr\">icon</span>=<span class=\"string\">\"el-icon-download\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      &gt;</span>下载水印图片<span class=\"tag\">&lt;/<span class=\"name\">el-button</span></span></span><br><span class=\"line\"><span class=\"tag\">    &gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"preview\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"previewImg\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">:src</span>=<span class=\"string\">\"preImg || defaultimg\"</span> <span class=\"attr\">alt</span>=<span class=\"string\">\"\"</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"watermark\"</span> <span class=\"attr\">:style</span>=<span class=\"string\">\"&#123; background: paint &#125;\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  data() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      defaultimg,</span><br><span class=\"line\">      preImg: <span class=\"string\">''</span>,</span><br><span class=\"line\">      watermarkOptions: &#123;</span><br><span class=\"line\">        text: <span class=\"string\">'仅供 xxx 验证使用'</span>,</span><br><span class=\"line\">        fontSize: <span class=\"number\">10</span>,</span><br><span class=\"line\">        width: <span class=\"number\">5</span>,</span><br><span class=\"line\">        color: <span class=\"string\">'#000000'</span>,</span><br><span class=\"line\">        alpha: <span class=\"number\">35</span>,</span><br><span class=\"line\">        rotate: <span class=\"number\">35</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    uploadImg(e, num) &#123;</span><br><span class=\"line\">      <span class=\"comment\">//上传图片</span></span><br><span class=\"line\">      <span class=\"comment\">// this.option.img</span></span><br><span class=\"line\">      <span class=\"keyword\">var</span> file = e.target.files[<span class=\"number\">0</span>];</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!<span class=\"regexp\">/\\.(gif|jpg|jpeg|png|bmp|GIF|JPG|PNG)$/</span>.test(e.target.value)) &#123;</span><br><span class=\"line\">        alert(<span class=\"string\">'图片类型必须是.gif,jpeg,jpg,png,bmp中的一种'</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> reader = <span class=\"keyword\">new</span> FileReader();</span><br><span class=\"line\">      reader.onload = <span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> data;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> e.target.result === <span class=\"string\">'object'</span>) &#123;</span><br><span class=\"line\">          <span class=\"comment\">// 把Array Buffer转化为blob 如果是base64不需要</span></span><br><span class=\"line\">          data = <span class=\"built_in\">window</span>.URL.createObjectURL(<span class=\"keyword\">new</span> Blob([e.target.result]));</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          data = e.target.result;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (num === <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">this</span>.preImg = data;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      <span class=\"comment\">// 转化为base64</span></span><br><span class=\"line\">      reader.readAsDataURL(file);</span><br><span class=\"line\">      <span class=\"comment\">// 转化为blob</span></span><br><span class=\"line\">      <span class=\"comment\">// reader.readAsArrayBuffer(file)</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    handleDown() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> node = <span class=\"keyword\">this</span>.$refs.previewImg;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> that = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">      DomToImage.toPng(node)</span><br><span class=\"line\">        .then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">dataUrl</span>) </span>&#123;</span><br><span class=\"line\">          <span class=\"keyword\">var</span> oLink = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'a'</span>);</span><br><span class=\"line\">          oLink.download = <span class=\"string\">'水印图片.png'</span>;</span><br><span class=\"line\">          oLink.href = dataUrl;</span><br><span class=\"line\">          oLink.click();</span><br><span class=\"line\">          that.$nextTick(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">            that.$message.success(<span class=\"string\">'水印图片下载成功'</span>);</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        .catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.error(<span class=\"string\">'oops, something went wrong!'</span>, error);</span><br><span class=\"line\">          that.$message.error(<span class=\"string\">'下载失败'</span>);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  computed: &#123;</span><br><span class=\"line\">    paint() &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 文字长度</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> wordWidth =</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.watermarkOptions.fontSize * <span class=\"keyword\">this</span>.watermarkOptions.text.split(<span class=\"string\">''</span>).length;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> width = wordWidth + <span class=\"keyword\">this</span>.watermarkOptions.width;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">let</span> svgText = <span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    &lt;svg xmlns=\"http://www.w3.org/2000/svg\" width=\"<span class=\"subst\">$&#123;width&#125;</span>px\" height=\"<span class=\"subst\">$&#123;width&#125;</span>px\"&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;text x=\"50%\" y=\"50%\"</span></span><br><span class=\"line\"><span class=\"string\">        alignment-baseline=\"middle\"</span></span><br><span class=\"line\"><span class=\"string\">        text-anchor=\"middle\"</span></span><br><span class=\"line\"><span class=\"string\">        stroke=\"<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.watermarkOptions.color&#125;</span>\"</span></span><br><span class=\"line\"><span class=\"string\">        opacity=\"<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.watermarkOptions.alpha <span class=\"regexp\">/ 100&#125;\"</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"regexp\">        transform=\"translate($&#123;width /</span> <span class=\"number\">2</span>&#125;</span>, <span class=\"subst\">$&#123;width <span class=\"regexp\">/ 2&#125;) rotate($&#123;</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"regexp\">        this.watermarkOptions.rotate</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"regexp\">      &#125;) translate(-$&#123;width /</span> <span class=\"number\">2</span>&#125;</span>, -<span class=\"subst\">$&#123;width <span class=\"regexp\">/ 2&#125;)\"</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"regexp\">        font-weight=\"100\"</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"regexp\">        font-size=\"$&#123;this.watermarkOptions.fontSize&#125;\"</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"regexp\">        font-family=\"microsoft yahe\"</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"regexp\">        &gt;</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"regexp\">        $&#123;this.watermarkOptions.text&#125;</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"regexp\">    &lt;/</span>text&gt;</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\">   &lt;<span class=\"regexp\">/svg&gt;`;</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"regexp\"></span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\"><span class=\"regexp\">      return `url(data:image/</span>svg+xml;base64,$&#123;btoa(<span class=\"built_in\">unescape</span>(<span class=\"built_in\">encodeURIComponent</span>(svgText)))&#125;</span>)`</span>;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n"},{"layout":"vue-cli","title":"vue-cli 上传文件与文件夹进度条","date":"2019-04-13T09:12:03.000Z","_content":"### 效果\n![](https://github.com/chengheai/review-demo-image/blob/master/2019-04-11%2021-29-10.2019-04-11%2021_30_08.gif?raw=true)\n### DEMO\n[点我呀🐳](https://chengheai.github.io/daily-vue-demo/#/upload-file)\n⚠️🔞测试上传的东西后端一概不收！！！[...]\n### 代码\n#### Way - 01\n``` javascript\n*** store.js\n/* eslint-disable */\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport axios from 'axios';\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n  state: {\n    uploadPercentage: 0\n  },\n  mutations: {\n    setUploadPercentage(state, percentage) {\n      state.uploadPercentage = percentage;\n    },\n  },\n  actions: {\n    upload({ commit }, file) {\n      const config = {\n        onUploadProgress: function(progressEvent) {\n          console.log(progressEvent);\n          const uploadPercentage = Math.round((progressEvent.loaded * 100) / progressEvent.total);\n          commit('setUploadPercentage', uploadPercentage);\n        },\n      };\n      const data = new FormData();\n      data.append('file', file);\n      axios\n        .post('https://api/v1/upload', data, config)\n        .then(data => {\n          console.log(data);\n        })\n        .catch(err => {\n          commit('setUploadPercentage', 10); // 上传失败\n          console.log(err);\n        });\n    },\n  },\n\n  getters: {\n    uploadPercentage: state => state.uploadPercentage,\n  },\n});\n```\n``` html\n*** temp.vue\n<template>\n  <div>\n    <a href=\"javascript:;\" class=\"file\">\n      上传文件夹\n      <i class=\"el-icon-upload2 el-icon--right\"></i>\n      <input type=\"file\" ref=\"file\" name=\"file\" webkitdirectory @change.stop=\"handleFileChanged\">\n    </a>\n    <a href=\"javascript:;\" class=\"file\">\n      上传文件\n      <i class=\"el-icon-upload2 el-icon--right\"></i>\n      <input type=\"file\" ref=\"upload\" name=\"file\" @change.stop=\"handleFileChanged\">\n    </a>\n    <!--  -->\n    <el-progress :text-inside=\"true\" :stroke-width=\"18\" :percentage=\"percentage\"></el-progress>\n    <el-progress\n      :text-inside=\"true\"\n      :stroke-width=\"18\"\n      :percentage=\"percentage\"\n      color=\"rgba(142, 113, 199, 0.7)\"\n    ></el-progress>\n    <el-progress :text-inside=\"true\" :stroke-width=\"18\" :percentage=\"percentage\" status=\"success\"></el-progress>\n    <el-progress :text-inside=\"true\" :stroke-width=\"18\" :percentage=\"percentage\" status=\"exception\"></el-progress>\n    <el-progress type=\"circle\" :percentage=\"percentage\"></el-progress>\n    <el-progress type=\"circle\" :percentage=\"percentage\" color=\"#8e71c7\"></el-progress>\n    <el-progress type=\"circle\" :percentage=\"percentage\" status=\"success\"></el-progress>\n    <el-progress type=\"circle\" :percentage=\"percentage\" status=\"exception\"></el-progress>\n  </div>\n</template>\n```\n``` javascript\n*** temp.vue\nimport axios from \"axios\";\nimport { mapState, mapGetters, mapActions, mapMutations } from \"vuex\";\nexport default {\n  data() {\n    return {\n      file: null\n    };\n  },\n  computed: {\n    ...mapGetters({\n      percentage: \"uploadPercentage\"\n    })\n  },\n  methods: {\n    handleFileChanged(event) {\n      const file = event.target.files[0];\n      this.$store.dispatch(\"upload\", file);\n    }\n  }\n};\n```\n``` less\n*** temp.vue\n<style lang=\"less\" scoped>\n.el-progress {\n  margin-top: 10px;\n}\n.file {\n  position: relative;\n  display: inline-block;\n  background: #1890ff;\n  border-radius: 4px;\n  padding: 4px 12px;\n  overflow: hidden;\n  color: #fff;\n  text-decoration: none;\n  text-indent: 0;\n  line-height: 20px;\n  font-size: 14px;\n  input {\n    position: absolute;\n    font-size: 14px;\n    right: 0;\n    top: 0;\n    opacity: 0;\n    cursor: pointer;\n  }\n  i {\n    float: left;\n    font-size: 16px;\n    margin-top: 2px;\n    margin-right: 4px;\n    margin-left: -6px;\n  }\n}\n</style>\n```\n### Way - 02\n#### temple\n``` html\n <el-dialog title=\"上传进度\" :visible.sync=\"dialogVisible\" @closed=\"closeDal\" width=\"60%\">\n  <div>\n    <el-progress\n      :text-inside=\"true\"\n      :stroke-width=\"18\"\n      status=\"success\"\n      :percentage=\"percentage\"\n    ></el-progress>\n    <p>{{percentage === 100 ? '上传完成！': percentage === 0? '上传失败': '上传中...'}}</p>\n  </div>\n  <span slot=\"footer\" class=\"dialog-footer\">\n    <el-button type=\"primary\" @click=\"closeDal\">确 定</el-button>\n  </span>\n</el-dialog>\n```\n#### 单个文件\n``` javascript\nuploadFile(e, m) {\n  let file = e.target.files;\n  let param = new FormData(); // 创建FormData对象\n  this.dialogVisible = true;\n  const config = {\n    onUploadProgress: progressEvent => {\n      const complete = Math.round(\n        (progressEvent.loaded * 100) / progressEvent.total\n      );\n      this.percentage = complete;\n    }\n  };\n  for (var i = 0; i < file.length; i++) {\n    // 通过append向FormData对象添加数据\n    param.append(\"file\", file[i]);\n  }\n  axios\n    .post(\"/task/upload-file\", param, config)\n    .then(res => {\n      if (res.data.code === \"0\") {\n        this.openMessageSuccess(res.data.msg);\n        this.getTasks();\n      } else {\n        this.percentage = 0;\n        this.openMessageError(res.data.msg);\n      }\n    })\n    .catch(err => {\n      this.percentage = 0;\n      this.openMessageError(err);\n    });\n},\n\n```\n#### 文件夹\n``` javascript\n  uploadFiles(event) {\n    const fileList = event.target.files;\n    let param = new FormData(); // 创建FormData对象\n    let paths = [];\n    _.each(fileList, function(o) {\n      paths.push(o.webkitRelativePath);\n    });\n    for (var i = 0; i < fileList.length; i++) {\n      // 通过append向FormData对象添加数据\n      param.append(\"file\", fileList[i]);\n      param.append(\"path\", paths[i]);\n    }\n    const config = {\n      onUploadProgress: progressEvent => {\n        const complete = Math.round(\n          (progressEvent.loaded * 100) / progressEvent.total\n        );\n        this.percentage = complete;\n      }\n    };\n    // param.append({paths});\n    axios\n      .post(\"/task/upload-dir\", param, config)\n      .then(res => {\n        if (res.data.code === \"0\") {\n          this.openMessageSuccess(res.data.msg);\n          this.getTasks();\n        } else {\n          this.percentage = 0;\n          this.openMessageError(res.data.msg);\n        }\n      })\n      .catch(err => {\n        this.percentage = 0;\n        this.openMessageError(err);\n      });\n  },\n```\n","source":"_posts/上传文件与文件夹进度条.md","raw":"---\nlayout: vue-cli\ntitle: vue-cli 上传文件与文件夹进度条\ndate: 2019-04-13 17:12:03\ntags: ['vue', 'progress']\n---\n### 效果\n![](https://github.com/chengheai/review-demo-image/blob/master/2019-04-11%2021-29-10.2019-04-11%2021_30_08.gif?raw=true)\n### DEMO\n[点我呀🐳](https://chengheai.github.io/daily-vue-demo/#/upload-file)\n⚠️🔞测试上传的东西后端一概不收！！！[...]\n### 代码\n#### Way - 01\n``` javascript\n*** store.js\n/* eslint-disable */\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport axios from 'axios';\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n  state: {\n    uploadPercentage: 0\n  },\n  mutations: {\n    setUploadPercentage(state, percentage) {\n      state.uploadPercentage = percentage;\n    },\n  },\n  actions: {\n    upload({ commit }, file) {\n      const config = {\n        onUploadProgress: function(progressEvent) {\n          console.log(progressEvent);\n          const uploadPercentage = Math.round((progressEvent.loaded * 100) / progressEvent.total);\n          commit('setUploadPercentage', uploadPercentage);\n        },\n      };\n      const data = new FormData();\n      data.append('file', file);\n      axios\n        .post('https://api/v1/upload', data, config)\n        .then(data => {\n          console.log(data);\n        })\n        .catch(err => {\n          commit('setUploadPercentage', 10); // 上传失败\n          console.log(err);\n        });\n    },\n  },\n\n  getters: {\n    uploadPercentage: state => state.uploadPercentage,\n  },\n});\n```\n``` html\n*** temp.vue\n<template>\n  <div>\n    <a href=\"javascript:;\" class=\"file\">\n      上传文件夹\n      <i class=\"el-icon-upload2 el-icon--right\"></i>\n      <input type=\"file\" ref=\"file\" name=\"file\" webkitdirectory @change.stop=\"handleFileChanged\">\n    </a>\n    <a href=\"javascript:;\" class=\"file\">\n      上传文件\n      <i class=\"el-icon-upload2 el-icon--right\"></i>\n      <input type=\"file\" ref=\"upload\" name=\"file\" @change.stop=\"handleFileChanged\">\n    </a>\n    <!--  -->\n    <el-progress :text-inside=\"true\" :stroke-width=\"18\" :percentage=\"percentage\"></el-progress>\n    <el-progress\n      :text-inside=\"true\"\n      :stroke-width=\"18\"\n      :percentage=\"percentage\"\n      color=\"rgba(142, 113, 199, 0.7)\"\n    ></el-progress>\n    <el-progress :text-inside=\"true\" :stroke-width=\"18\" :percentage=\"percentage\" status=\"success\"></el-progress>\n    <el-progress :text-inside=\"true\" :stroke-width=\"18\" :percentage=\"percentage\" status=\"exception\"></el-progress>\n    <el-progress type=\"circle\" :percentage=\"percentage\"></el-progress>\n    <el-progress type=\"circle\" :percentage=\"percentage\" color=\"#8e71c7\"></el-progress>\n    <el-progress type=\"circle\" :percentage=\"percentage\" status=\"success\"></el-progress>\n    <el-progress type=\"circle\" :percentage=\"percentage\" status=\"exception\"></el-progress>\n  </div>\n</template>\n```\n``` javascript\n*** temp.vue\nimport axios from \"axios\";\nimport { mapState, mapGetters, mapActions, mapMutations } from \"vuex\";\nexport default {\n  data() {\n    return {\n      file: null\n    };\n  },\n  computed: {\n    ...mapGetters({\n      percentage: \"uploadPercentage\"\n    })\n  },\n  methods: {\n    handleFileChanged(event) {\n      const file = event.target.files[0];\n      this.$store.dispatch(\"upload\", file);\n    }\n  }\n};\n```\n``` less\n*** temp.vue\n<style lang=\"less\" scoped>\n.el-progress {\n  margin-top: 10px;\n}\n.file {\n  position: relative;\n  display: inline-block;\n  background: #1890ff;\n  border-radius: 4px;\n  padding: 4px 12px;\n  overflow: hidden;\n  color: #fff;\n  text-decoration: none;\n  text-indent: 0;\n  line-height: 20px;\n  font-size: 14px;\n  input {\n    position: absolute;\n    font-size: 14px;\n    right: 0;\n    top: 0;\n    opacity: 0;\n    cursor: pointer;\n  }\n  i {\n    float: left;\n    font-size: 16px;\n    margin-top: 2px;\n    margin-right: 4px;\n    margin-left: -6px;\n  }\n}\n</style>\n```\n### Way - 02\n#### temple\n``` html\n <el-dialog title=\"上传进度\" :visible.sync=\"dialogVisible\" @closed=\"closeDal\" width=\"60%\">\n  <div>\n    <el-progress\n      :text-inside=\"true\"\n      :stroke-width=\"18\"\n      status=\"success\"\n      :percentage=\"percentage\"\n    ></el-progress>\n    <p>{{percentage === 100 ? '上传完成！': percentage === 0? '上传失败': '上传中...'}}</p>\n  </div>\n  <span slot=\"footer\" class=\"dialog-footer\">\n    <el-button type=\"primary\" @click=\"closeDal\">确 定</el-button>\n  </span>\n</el-dialog>\n```\n#### 单个文件\n``` javascript\nuploadFile(e, m) {\n  let file = e.target.files;\n  let param = new FormData(); // 创建FormData对象\n  this.dialogVisible = true;\n  const config = {\n    onUploadProgress: progressEvent => {\n      const complete = Math.round(\n        (progressEvent.loaded * 100) / progressEvent.total\n      );\n      this.percentage = complete;\n    }\n  };\n  for (var i = 0; i < file.length; i++) {\n    // 通过append向FormData对象添加数据\n    param.append(\"file\", file[i]);\n  }\n  axios\n    .post(\"/task/upload-file\", param, config)\n    .then(res => {\n      if (res.data.code === \"0\") {\n        this.openMessageSuccess(res.data.msg);\n        this.getTasks();\n      } else {\n        this.percentage = 0;\n        this.openMessageError(res.data.msg);\n      }\n    })\n    .catch(err => {\n      this.percentage = 0;\n      this.openMessageError(err);\n    });\n},\n\n```\n#### 文件夹\n``` javascript\n  uploadFiles(event) {\n    const fileList = event.target.files;\n    let param = new FormData(); // 创建FormData对象\n    let paths = [];\n    _.each(fileList, function(o) {\n      paths.push(o.webkitRelativePath);\n    });\n    for (var i = 0; i < fileList.length; i++) {\n      // 通过append向FormData对象添加数据\n      param.append(\"file\", fileList[i]);\n      param.append(\"path\", paths[i]);\n    }\n    const config = {\n      onUploadProgress: progressEvent => {\n        const complete = Math.round(\n          (progressEvent.loaded * 100) / progressEvent.total\n        );\n        this.percentage = complete;\n      }\n    };\n    // param.append({paths});\n    axios\n      .post(\"/task/upload-dir\", param, config)\n      .then(res => {\n        if (res.data.code === \"0\") {\n          this.openMessageSuccess(res.data.msg);\n          this.getTasks();\n        } else {\n          this.percentage = 0;\n          this.openMessageError(res.data.msg);\n        }\n      })\n      .catch(err => {\n        this.percentage = 0;\n        this.openMessageError(err);\n      });\n  },\n```\n","slug":"上传文件与文件夹进度条","published":1,"updated":"2021-10-09T08:48:32.082Z","comments":1,"photos":[],"link":"","_id":"ckumjzabx002f5c54bdplvyeg","content":"<h3 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h3><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/2019-04-11%2021-29-10.2019-04-11%2021_30_08.gif?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h3 id=\"DEMO\"><a href=\"#DEMO\" class=\"headerlink\" title=\"DEMO\"></a>DEMO</h3><p><a href=\"https://chengheai.github.io/daily-vue-demo/#/upload-file\" target=\"_blank\" rel=\"noopener\">点我呀🐳</a><br>⚠️🔞测试上传的东西后端一概不收！！！[…]</p>\n<h3 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h3><h4 id=\"Way-01\"><a href=\"#Way-01\" class=\"headerlink\" title=\"Way - 01\"></a>Way - 01</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">*** store.js</span><br><span class=\"line\"><span class=\"comment\">/* eslint-disable */</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> Vue <span class=\"keyword\">from</span> <span class=\"string\">'vue'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Vuex <span class=\"keyword\">from</span> <span class=\"string\">'vuex'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">'axios'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">Vue.use(Vuex);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">new</span> Vuex.Store(&#123;</span><br><span class=\"line\">  state: &#123;</span><br><span class=\"line\">    uploadPercentage: <span class=\"number\">0</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  mutations: &#123;</span><br><span class=\"line\">    setUploadPercentage(state, percentage) &#123;</span><br><span class=\"line\">      state.uploadPercentage = percentage;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  actions: &#123;</span><br><span class=\"line\">    upload(&#123; commit &#125;, file) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> config = &#123;</span><br><span class=\"line\">        onUploadProgress: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">progressEvent</span>) </span>&#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(progressEvent);</span><br><span class=\"line\">          <span class=\"keyword\">const</span> uploadPercentage = <span class=\"built_in\">Math</span>.round((progressEvent.loaded * <span class=\"number\">100</span>) / progressEvent.total);</span><br><span class=\"line\">          commit(<span class=\"string\">'setUploadPercentage'</span>, uploadPercentage);</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> data = <span class=\"keyword\">new</span> FormData();</span><br><span class=\"line\">      data.append(<span class=\"string\">'file'</span>, file);</span><br><span class=\"line\">      axios</span><br><span class=\"line\">        .post(<span class=\"string\">'https://api/v1/upload'</span>, data, config)</span><br><span class=\"line\">        .then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">          commit(<span class=\"string\">'setUploadPercentage'</span>, <span class=\"number\">10</span>); <span class=\"comment\">// 上传失败</span></span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  getters: &#123;</span><br><span class=\"line\">    uploadPercentage: <span class=\"function\"><span class=\"params\">state</span> =&gt;</span> state.uploadPercentage,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">*** temp.vue</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"javascript:;\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"file\"</span>&gt;</span></span><br><span class=\"line\">      上传文件夹</span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">\"el-icon-upload2 el-icon--right\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"file\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"file\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"file\"</span> <span class=\"attr\">webkitdirectory</span> @<span class=\"attr\">change.stop</span>=<span class=\"string\">\"handleFileChanged\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"javascript:;\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"file\"</span>&gt;</span></span><br><span class=\"line\">      上传文件</span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">\"el-icon-upload2 el-icon--right\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"file\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"upload\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"file\"</span> @<span class=\"attr\">change.stop</span>=<span class=\"string\">\"handleFileChanged\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--  --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-progress</span> <span class=\"attr\">:text-inside</span>=<span class=\"string\">\"true\"</span> <span class=\"attr\">:stroke-width</span>=<span class=\"string\">\"18\"</span> <span class=\"attr\">:percentage</span>=<span class=\"string\">\"percentage\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-progress</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-progress</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:text-inside</span>=<span class=\"string\">\"true\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:stroke-width</span>=<span class=\"string\">\"18\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:percentage</span>=<span class=\"string\">\"percentage\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">color</span>=<span class=\"string\">\"rgba(142, 113, 199, 0.7)\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-progress</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-progress</span> <span class=\"attr\">:text-inside</span>=<span class=\"string\">\"true\"</span> <span class=\"attr\">:stroke-width</span>=<span class=\"string\">\"18\"</span> <span class=\"attr\">:percentage</span>=<span class=\"string\">\"percentage\"</span> <span class=\"attr\">status</span>=<span class=\"string\">\"success\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-progress</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-progress</span> <span class=\"attr\">:text-inside</span>=<span class=\"string\">\"true\"</span> <span class=\"attr\">:stroke-width</span>=<span class=\"string\">\"18\"</span> <span class=\"attr\">:percentage</span>=<span class=\"string\">\"percentage\"</span> <span class=\"attr\">status</span>=<span class=\"string\">\"exception\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-progress</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-progress</span> <span class=\"attr\">type</span>=<span class=\"string\">\"circle\"</span> <span class=\"attr\">:percentage</span>=<span class=\"string\">\"percentage\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-progress</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-progress</span> <span class=\"attr\">type</span>=<span class=\"string\">\"circle\"</span> <span class=\"attr\">:percentage</span>=<span class=\"string\">\"percentage\"</span> <span class=\"attr\">color</span>=<span class=\"string\">\"#8e71c7\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-progress</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-progress</span> <span class=\"attr\">type</span>=<span class=\"string\">\"circle\"</span> <span class=\"attr\">:percentage</span>=<span class=\"string\">\"percentage\"</span> <span class=\"attr\">status</span>=<span class=\"string\">\"success\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-progress</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-progress</span> <span class=\"attr\">type</span>=<span class=\"string\">\"circle\"</span> <span class=\"attr\">:percentage</span>=<span class=\"string\">\"percentage\"</span> <span class=\"attr\">status</span>=<span class=\"string\">\"exception\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-progress</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">*** temp.vue</span><br><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">\"axios\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; mapState, mapGetters, mapActions, mapMutations &#125; <span class=\"keyword\">from</span> <span class=\"string\">\"vuex\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  data() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      file: <span class=\"literal\">null</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  computed: &#123;</span><br><span class=\"line\">    ...mapGetters(&#123;</span><br><span class=\"line\">      percentage: <span class=\"string\">\"uploadPercentage\"</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    handleFileChanged(event) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> file = event.target.files[<span class=\"number\">0</span>];</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.$store.dispatch(<span class=\"string\">\"upload\"</span>, file);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">*** <span class=\"selector-tag\">temp</span><span class=\"selector-class\">.vue</span></span><br><span class=\"line\">&lt;style lang=\"less\" scoped&gt;</span><br><span class=\"line\"><span class=\"selector-class\">.el-progress</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">margin-top</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.file</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: inline-block;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: <span class=\"number\">#1890ff</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border-radius</span>: <span class=\"number\">4px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">4px</span> <span class=\"number\">12px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"number\">#fff</span>;</span><br><span class=\"line\">  <span class=\"attribute\">text-decoration</span>: none;</span><br><span class=\"line\">  <span class=\"attribute\">text-indent</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">line-height</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">14px</span>;</span><br><span class=\"line\">  <span class=\"selector-tag\">input</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">14px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">right</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">top</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">cursor</span>: pointer;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"selector-tag\">i</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">float</span>: left;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">16px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin-top</span>: <span class=\"number\">2px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin-right</span>: <span class=\"number\">4px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin-left</span>: -<span class=\"number\">6px</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"Way-02\"><a href=\"#Way-02\" class=\"headerlink\" title=\"Way - 02\"></a>Way - 02</h3><h4 id=\"temple\"><a href=\"#temple\" class=\"headerlink\" title=\"temple\"></a>temple</h4><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">el-dialog</span> <span class=\"attr\">title</span>=<span class=\"string\">\"上传进度\"</span> <span class=\"attr\">:visible.sync</span>=<span class=\"string\">\"dialogVisible\"</span> @<span class=\"attr\">closed</span>=<span class=\"string\">\"closeDal\"</span> <span class=\"attr\">width</span>=<span class=\"string\">\"60%\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-progress</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:text-inside</span>=<span class=\"string\">\"true\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:stroke-width</span>=<span class=\"string\">\"18\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">status</span>=<span class=\"string\">\"success\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:percentage</span>=<span class=\"string\">\"percentage\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-progress</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123;percentage === 100 ? '上传完成！': percentage === 0? '上传失败': '上传中...'&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">slot</span>=<span class=\"string\">\"footer\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"dialog-footer\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-button</span> <span class=\"attr\">type</span>=<span class=\"string\">\"primary\"</span> @<span class=\"attr\">click</span>=<span class=\"string\">\"closeDal\"</span>&gt;</span>确 定<span class=\"tag\">&lt;/<span class=\"name\">el-button</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">el-dialog</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"单个文件\"><a href=\"#单个文件\" class=\"headerlink\" title=\"单个文件\"></a>单个文件</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">uploadFile(e, m) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> file = e.target.files;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> param = <span class=\"keyword\">new</span> FormData(); <span class=\"comment\">// 创建FormData对象</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.dialogVisible = <span class=\"literal\">true</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> config = &#123;</span><br><span class=\"line\">    onUploadProgress: <span class=\"function\"><span class=\"params\">progressEvent</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> complete = <span class=\"built_in\">Math</span>.round(</span><br><span class=\"line\">        (progressEvent.loaded * <span class=\"number\">100</span>) / progressEvent.total</span><br><span class=\"line\">      );</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.percentage = complete;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; file.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 通过append向FormData对象添加数据</span></span><br><span class=\"line\">    param.append(<span class=\"string\">\"file\"</span>, file[i]);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  axios</span><br><span class=\"line\">    .post(<span class=\"string\">\"/task/upload-file\"</span>, param, config)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (res.data.code === <span class=\"string\">\"0\"</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.openMessageSuccess(res.data.msg);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.getTasks();</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.percentage = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.openMessageError(res.data.msg);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.percentage = <span class=\"number\">0</span>;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.openMessageError(err);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<h4 id=\"文件夹\"><a href=\"#文件夹\" class=\"headerlink\" title=\"文件夹\"></a>文件夹</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">uploadFiles(event) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> fileList = event.target.files;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> param = <span class=\"keyword\">new</span> FormData(); <span class=\"comment\">// 创建FormData对象</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> paths = [];</span><br><span class=\"line\">  _.each(fileList, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">o</span>) </span>&#123;</span><br><span class=\"line\">    paths.push(o.webkitRelativePath);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; fileList.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 通过append向FormData对象添加数据</span></span><br><span class=\"line\">    param.append(<span class=\"string\">\"file\"</span>, fileList[i]);</span><br><span class=\"line\">    param.append(<span class=\"string\">\"path\"</span>, paths[i]);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> config = &#123;</span><br><span class=\"line\">    onUploadProgress: <span class=\"function\"><span class=\"params\">progressEvent</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> complete = <span class=\"built_in\">Math</span>.round(</span><br><span class=\"line\">        (progressEvent.loaded * <span class=\"number\">100</span>) / progressEvent.total</span><br><span class=\"line\">      );</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.percentage = complete;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"comment\">// param.append(&#123;paths&#125;);</span></span><br><span class=\"line\">  axios</span><br><span class=\"line\">    .post(<span class=\"string\">\"/task/upload-dir\"</span>, param, config)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (res.data.code === <span class=\"string\">\"0\"</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.openMessageSuccess(res.data.msg);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.getTasks();</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.percentage = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.openMessageError(res.data.msg);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.percentage = <span class=\"number\">0</span>;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.openMessageError(err);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h3><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/2019-04-11%2021-29-10.2019-04-11%2021_30_08.gif?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h3 id=\"DEMO\"><a href=\"#DEMO\" class=\"headerlink\" title=\"DEMO\"></a>DEMO</h3><p><a href=\"https://chengheai.github.io/daily-vue-demo/#/upload-file\" target=\"_blank\" rel=\"noopener\">点我呀🐳</a><br>⚠️🔞测试上传的东西后端一概不收！！！[…]</p>\n<h3 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h3><h4 id=\"Way-01\"><a href=\"#Way-01\" class=\"headerlink\" title=\"Way - 01\"></a>Way - 01</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">*** store.js</span><br><span class=\"line\"><span class=\"comment\">/* eslint-disable */</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> Vue <span class=\"keyword\">from</span> <span class=\"string\">'vue'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Vuex <span class=\"keyword\">from</span> <span class=\"string\">'vuex'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">'axios'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">Vue.use(Vuex);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">new</span> Vuex.Store(&#123;</span><br><span class=\"line\">  state: &#123;</span><br><span class=\"line\">    uploadPercentage: <span class=\"number\">0</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  mutations: &#123;</span><br><span class=\"line\">    setUploadPercentage(state, percentage) &#123;</span><br><span class=\"line\">      state.uploadPercentage = percentage;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  actions: &#123;</span><br><span class=\"line\">    upload(&#123; commit &#125;, file) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> config = &#123;</span><br><span class=\"line\">        onUploadProgress: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">progressEvent</span>) </span>&#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(progressEvent);</span><br><span class=\"line\">          <span class=\"keyword\">const</span> uploadPercentage = <span class=\"built_in\">Math</span>.round((progressEvent.loaded * <span class=\"number\">100</span>) / progressEvent.total);</span><br><span class=\"line\">          commit(<span class=\"string\">'setUploadPercentage'</span>, uploadPercentage);</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> data = <span class=\"keyword\">new</span> FormData();</span><br><span class=\"line\">      data.append(<span class=\"string\">'file'</span>, file);</span><br><span class=\"line\">      axios</span><br><span class=\"line\">        .post(<span class=\"string\">'https://api/v1/upload'</span>, data, config)</span><br><span class=\"line\">        .then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">          commit(<span class=\"string\">'setUploadPercentage'</span>, <span class=\"number\">10</span>); <span class=\"comment\">// 上传失败</span></span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  getters: &#123;</span><br><span class=\"line\">    uploadPercentage: <span class=\"function\"><span class=\"params\">state</span> =&gt;</span> state.uploadPercentage,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">*** temp.vue</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"javascript:;\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"file\"</span>&gt;</span></span><br><span class=\"line\">      上传文件夹</span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">\"el-icon-upload2 el-icon--right\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"file\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"file\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"file\"</span> <span class=\"attr\">webkitdirectory</span> @<span class=\"attr\">change.stop</span>=<span class=\"string\">\"handleFileChanged\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"javascript:;\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"file\"</span>&gt;</span></span><br><span class=\"line\">      上传文件</span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">\"el-icon-upload2 el-icon--right\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"file\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"upload\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"file\"</span> @<span class=\"attr\">change.stop</span>=<span class=\"string\">\"handleFileChanged\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--  --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-progress</span> <span class=\"attr\">:text-inside</span>=<span class=\"string\">\"true\"</span> <span class=\"attr\">:stroke-width</span>=<span class=\"string\">\"18\"</span> <span class=\"attr\">:percentage</span>=<span class=\"string\">\"percentage\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-progress</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-progress</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:text-inside</span>=<span class=\"string\">\"true\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:stroke-width</span>=<span class=\"string\">\"18\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:percentage</span>=<span class=\"string\">\"percentage\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">color</span>=<span class=\"string\">\"rgba(142, 113, 199, 0.7)\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-progress</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-progress</span> <span class=\"attr\">:text-inside</span>=<span class=\"string\">\"true\"</span> <span class=\"attr\">:stroke-width</span>=<span class=\"string\">\"18\"</span> <span class=\"attr\">:percentage</span>=<span class=\"string\">\"percentage\"</span> <span class=\"attr\">status</span>=<span class=\"string\">\"success\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-progress</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-progress</span> <span class=\"attr\">:text-inside</span>=<span class=\"string\">\"true\"</span> <span class=\"attr\">:stroke-width</span>=<span class=\"string\">\"18\"</span> <span class=\"attr\">:percentage</span>=<span class=\"string\">\"percentage\"</span> <span class=\"attr\">status</span>=<span class=\"string\">\"exception\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-progress</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-progress</span> <span class=\"attr\">type</span>=<span class=\"string\">\"circle\"</span> <span class=\"attr\">:percentage</span>=<span class=\"string\">\"percentage\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-progress</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-progress</span> <span class=\"attr\">type</span>=<span class=\"string\">\"circle\"</span> <span class=\"attr\">:percentage</span>=<span class=\"string\">\"percentage\"</span> <span class=\"attr\">color</span>=<span class=\"string\">\"#8e71c7\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-progress</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-progress</span> <span class=\"attr\">type</span>=<span class=\"string\">\"circle\"</span> <span class=\"attr\">:percentage</span>=<span class=\"string\">\"percentage\"</span> <span class=\"attr\">status</span>=<span class=\"string\">\"success\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-progress</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-progress</span> <span class=\"attr\">type</span>=<span class=\"string\">\"circle\"</span> <span class=\"attr\">:percentage</span>=<span class=\"string\">\"percentage\"</span> <span class=\"attr\">status</span>=<span class=\"string\">\"exception\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-progress</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">*** temp.vue</span><br><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">\"axios\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; mapState, mapGetters, mapActions, mapMutations &#125; <span class=\"keyword\">from</span> <span class=\"string\">\"vuex\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  data() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      file: <span class=\"literal\">null</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  computed: &#123;</span><br><span class=\"line\">    ...mapGetters(&#123;</span><br><span class=\"line\">      percentage: <span class=\"string\">\"uploadPercentage\"</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    handleFileChanged(event) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> file = event.target.files[<span class=\"number\">0</span>];</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.$store.dispatch(<span class=\"string\">\"upload\"</span>, file);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">*** <span class=\"selector-tag\">temp</span><span class=\"selector-class\">.vue</span></span><br><span class=\"line\">&lt;style lang=\"less\" scoped&gt;</span><br><span class=\"line\"><span class=\"selector-class\">.el-progress</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">margin-top</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.file</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: inline-block;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: <span class=\"number\">#1890ff</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border-radius</span>: <span class=\"number\">4px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">4px</span> <span class=\"number\">12px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"number\">#fff</span>;</span><br><span class=\"line\">  <span class=\"attribute\">text-decoration</span>: none;</span><br><span class=\"line\">  <span class=\"attribute\">text-indent</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">line-height</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">14px</span>;</span><br><span class=\"line\">  <span class=\"selector-tag\">input</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">14px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">right</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">top</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">cursor</span>: pointer;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"selector-tag\">i</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">float</span>: left;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">16px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin-top</span>: <span class=\"number\">2px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin-right</span>: <span class=\"number\">4px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin-left</span>: -<span class=\"number\">6px</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"Way-02\"><a href=\"#Way-02\" class=\"headerlink\" title=\"Way - 02\"></a>Way - 02</h3><h4 id=\"temple\"><a href=\"#temple\" class=\"headerlink\" title=\"temple\"></a>temple</h4><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">el-dialog</span> <span class=\"attr\">title</span>=<span class=\"string\">\"上传进度\"</span> <span class=\"attr\">:visible.sync</span>=<span class=\"string\">\"dialogVisible\"</span> @<span class=\"attr\">closed</span>=<span class=\"string\">\"closeDal\"</span> <span class=\"attr\">width</span>=<span class=\"string\">\"60%\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-progress</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:text-inside</span>=<span class=\"string\">\"true\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:stroke-width</span>=<span class=\"string\">\"18\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">status</span>=<span class=\"string\">\"success\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">:percentage</span>=<span class=\"string\">\"percentage\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-progress</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123;percentage === 100 ? '上传完成！': percentage === 0? '上传失败': '上传中...'&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">slot</span>=<span class=\"string\">\"footer\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"dialog-footer\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-button</span> <span class=\"attr\">type</span>=<span class=\"string\">\"primary\"</span> @<span class=\"attr\">click</span>=<span class=\"string\">\"closeDal\"</span>&gt;</span>确 定<span class=\"tag\">&lt;/<span class=\"name\">el-button</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">el-dialog</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"单个文件\"><a href=\"#单个文件\" class=\"headerlink\" title=\"单个文件\"></a>单个文件</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">uploadFile(e, m) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> file = e.target.files;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> param = <span class=\"keyword\">new</span> FormData(); <span class=\"comment\">// 创建FormData对象</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.dialogVisible = <span class=\"literal\">true</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> config = &#123;</span><br><span class=\"line\">    onUploadProgress: <span class=\"function\"><span class=\"params\">progressEvent</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> complete = <span class=\"built_in\">Math</span>.round(</span><br><span class=\"line\">        (progressEvent.loaded * <span class=\"number\">100</span>) / progressEvent.total</span><br><span class=\"line\">      );</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.percentage = complete;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; file.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 通过append向FormData对象添加数据</span></span><br><span class=\"line\">    param.append(<span class=\"string\">\"file\"</span>, file[i]);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  axios</span><br><span class=\"line\">    .post(<span class=\"string\">\"/task/upload-file\"</span>, param, config)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (res.data.code === <span class=\"string\">\"0\"</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.openMessageSuccess(res.data.msg);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.getTasks();</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.percentage = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.openMessageError(res.data.msg);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.percentage = <span class=\"number\">0</span>;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.openMessageError(err);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<h4 id=\"文件夹\"><a href=\"#文件夹\" class=\"headerlink\" title=\"文件夹\"></a>文件夹</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">uploadFiles(event) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> fileList = event.target.files;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> param = <span class=\"keyword\">new</span> FormData(); <span class=\"comment\">// 创建FormData对象</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> paths = [];</span><br><span class=\"line\">  _.each(fileList, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">o</span>) </span>&#123;</span><br><span class=\"line\">    paths.push(o.webkitRelativePath);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; fileList.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 通过append向FormData对象添加数据</span></span><br><span class=\"line\">    param.append(<span class=\"string\">\"file\"</span>, fileList[i]);</span><br><span class=\"line\">    param.append(<span class=\"string\">\"path\"</span>, paths[i]);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> config = &#123;</span><br><span class=\"line\">    onUploadProgress: <span class=\"function\"><span class=\"params\">progressEvent</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> complete = <span class=\"built_in\">Math</span>.round(</span><br><span class=\"line\">        (progressEvent.loaded * <span class=\"number\">100</span>) / progressEvent.total</span><br><span class=\"line\">      );</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.percentage = complete;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"comment\">// param.append(&#123;paths&#125;);</span></span><br><span class=\"line\">  axios</span><br><span class=\"line\">    .post(<span class=\"string\">\"/task/upload-dir\"</span>, param, config)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (res.data.code === <span class=\"string\">\"0\"</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.openMessageSuccess(res.data.msg);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.getTasks();</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.percentage = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.openMessageError(res.data.msg);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.percentage = <span class=\"number\">0</span>;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.openMessageError(err);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n"},{"title":"vue项目按需使用keep-alive","date":"2019-05-23T14:05:40.000Z","_content":"\n## 需求\n\nlist 页面做缓存\nadd/edit 页面不做缓存\ndetail 页面不做缓存\n...........\n\n## 前人法子\n\n```javascript\n<keep-alive>\n  <!-- 需要缓存 -->\n  <router-view :include=\"include\" v-if=\"$route.meta.keepAlive\" />\n</keep-alive>\n\n<!-- 不需要缓存 -->\n<router-view v-if=\"!$route.meta.keepAlive\" />\n```\n\n```javascript\nexport default {\n\tname: 'app',\n\tdata: () => ({\n\t\tinclude: [],\n\t}),\n\twatch: {\n\t\t$route(to, from) {\n\t\t\t//如果要to的页面是需要 keepAlive 缓存的，把 name push 进 include数组\n\t\t\tif (to.meta.keepAlive) {\n\t\t\t\t!this.include.includes(to.name) && this.include.push(to.name);\n\t\t\t}\n\t\t\t//如果要form的页面是 keepAlive缓存的，\n\t\t\t//再根据 deepth 来判断是前进还是后退\n\t\t\t//如果是后退\n\t\t\tif (from.meta.keepAlive && to.meta.deepth < from.meta.deepth) {\n\t\t\t\tvar index = this.include.indexOf(from.name);\n\t\t\t\tindex !== -1 && this.include.splice(index, 1);\n\t\t\t}\n\t\t},\n\t},\n};\n```\n\n## 粗暴法子\n``` html\n<transition name=\"move\" mode=\"out-in\">\n  <keep-alive>\n    <!-- 需要缓存的视图组件 -->\n    <router-view v-if=\"$route.meta.keepAlive\" />\n  </keep-alive>\n</transition>\n<!-- 不需要缓存的视图组件 -->\n<router-view v-if=\"!$route.meta.keepAlive\" />\n```\n``` javascript\n\nwatch: {\n  $route(to, from) {\n    console.log(to);\n    // 如果是后退\n    if (to.meta.deepth < from.meta.deepth) {\n      to.meta.keepAlive = false;\n    } else {\n      to.meta.keepAlive = true;\n    }\n  }\n},\n```\n```javascript\nnew Router({\n  routes: [\n    {\n      path: '/',\n      name: 'index',\n      component: () => import('./views/keep-alive/index.vue'),\n      meta: {\n        deepth: 1, // 同级 不刷新\n        keepAlive: true\n      }\n    },\n    {\n      path: '/list',\n      name: 'list',\n      component: () => import('./views/keep-alive/list.vue'),\n      meta: {\n        deepth: 1 // 同级不刷新\n        keepAlive: true\n      }\n    },\n    {\n      path: '/detail',\n      name: 'detail',\n      component: () => import('./views/keep-alive/detail.vue'),\n      meta: {\n        deepth: 0, // 进入list不刷新页面\n        keepAlive: false\n      }\n    },\n    {\n      path: '/edit',\n      name: 'edit',\n      component: () => import('./views/keep-alive/edit.vue'),\n      meta: {\n        deepth: 2, // 进入list刷新页面\n        keepAlive: false\n      }\n    }\n  ]\n})\n```\n","source":"_posts/vue项目按需使用keep-alive.md","raw":"---\ntitle: vue项目按需使用keep-alive\ndate: 2019-05-23 22:05:40\ntags: ['vue', 'vue-router']\n---\n\n## 需求\n\nlist 页面做缓存\nadd/edit 页面不做缓存\ndetail 页面不做缓存\n...........\n\n## 前人法子\n\n```javascript\n<keep-alive>\n  <!-- 需要缓存 -->\n  <router-view :include=\"include\" v-if=\"$route.meta.keepAlive\" />\n</keep-alive>\n\n<!-- 不需要缓存 -->\n<router-view v-if=\"!$route.meta.keepAlive\" />\n```\n\n```javascript\nexport default {\n\tname: 'app',\n\tdata: () => ({\n\t\tinclude: [],\n\t}),\n\twatch: {\n\t\t$route(to, from) {\n\t\t\t//如果要to的页面是需要 keepAlive 缓存的，把 name push 进 include数组\n\t\t\tif (to.meta.keepAlive) {\n\t\t\t\t!this.include.includes(to.name) && this.include.push(to.name);\n\t\t\t}\n\t\t\t//如果要form的页面是 keepAlive缓存的，\n\t\t\t//再根据 deepth 来判断是前进还是后退\n\t\t\t//如果是后退\n\t\t\tif (from.meta.keepAlive && to.meta.deepth < from.meta.deepth) {\n\t\t\t\tvar index = this.include.indexOf(from.name);\n\t\t\t\tindex !== -1 && this.include.splice(index, 1);\n\t\t\t}\n\t\t},\n\t},\n};\n```\n\n## 粗暴法子\n``` html\n<transition name=\"move\" mode=\"out-in\">\n  <keep-alive>\n    <!-- 需要缓存的视图组件 -->\n    <router-view v-if=\"$route.meta.keepAlive\" />\n  </keep-alive>\n</transition>\n<!-- 不需要缓存的视图组件 -->\n<router-view v-if=\"!$route.meta.keepAlive\" />\n```\n``` javascript\n\nwatch: {\n  $route(to, from) {\n    console.log(to);\n    // 如果是后退\n    if (to.meta.deepth < from.meta.deepth) {\n      to.meta.keepAlive = false;\n    } else {\n      to.meta.keepAlive = true;\n    }\n  }\n},\n```\n```javascript\nnew Router({\n  routes: [\n    {\n      path: '/',\n      name: 'index',\n      component: () => import('./views/keep-alive/index.vue'),\n      meta: {\n        deepth: 1, // 同级 不刷新\n        keepAlive: true\n      }\n    },\n    {\n      path: '/list',\n      name: 'list',\n      component: () => import('./views/keep-alive/list.vue'),\n      meta: {\n        deepth: 1 // 同级不刷新\n        keepAlive: true\n      }\n    },\n    {\n      path: '/detail',\n      name: 'detail',\n      component: () => import('./views/keep-alive/detail.vue'),\n      meta: {\n        deepth: 0, // 进入list不刷新页面\n        keepAlive: false\n      }\n    },\n    {\n      path: '/edit',\n      name: 'edit',\n      component: () => import('./views/keep-alive/edit.vue'),\n      meta: {\n        deepth: 2, // 进入list刷新页面\n        keepAlive: false\n      }\n    }\n  ]\n})\n```\n","slug":"vue项目按需使用keep-alive","published":1,"updated":"2021-10-09T08:48:32.081Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzaby002h5c5419l3p72r","content":"<h2 id=\"需求\"><a href=\"#需求\" class=\"headerlink\" title=\"需求\"></a>需求</h2><p>list 页面做缓存<br>add/edit 页面不做缓存<br>detail 页面不做缓存<br>………..</p>\n<h2 id=\"前人法子\"><a href=\"#前人法子\" class=\"headerlink\" title=\"前人法子\"></a>前人法子</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;keep-alive&gt;</span><br><span class=\"line\">  &lt;!-- 需要缓存 --&gt;</span><br><span class=\"line\">  &lt;router-view :include=<span class=\"string\">\"include\"</span> v-<span class=\"keyword\">if</span>=<span class=\"string\">\"$route.meta.keepAlive\"</span> /&gt;</span><br><span class=\"line\">&lt;<span class=\"regexp\">/keep-alive&gt;</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">&lt;!-- 不需要缓存 --&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">&lt;router-view v-if=\"!$route.meta.keepAlive\" /</span>&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">\tname: <span class=\"string\">'app'</span>,</span><br><span class=\"line\">\tdata: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> (&#123;</span><br><span class=\"line\">\t\tinclude: [],</span><br><span class=\"line\">\t&#125;),</span><br><span class=\"line\">\twatch: &#123;</span><br><span class=\"line\">\t\t$route(to, <span class=\"keyword\">from</span>) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//如果要to的页面是需要 keepAlive 缓存的，把 name push 进 include数组</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (to.meta.keepAlive) &#123;</span><br><span class=\"line\">\t\t\t\t!<span class=\"keyword\">this</span>.include.includes(to.name) &amp;&amp; <span class=\"keyword\">this</span>.include.push(to.name);</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//如果要form的页面是 keepAlive缓存的，</span></span><br><span class=\"line\">\t\t\t<span class=\"comment\">//再根据 deepth 来判断是前进还是后退</span></span><br><span class=\"line\">\t\t\t<span class=\"comment\">//如果是后退</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (<span class=\"keyword\">from</span>.meta.keepAlive &amp;&amp; to.meta.deepth &lt; <span class=\"keyword\">from</span>.meta.deepth) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">var</span> index = <span class=\"keyword\">this</span>.include.indexOf(<span class=\"keyword\">from</span>.name);</span><br><span class=\"line\">\t\t\t\tindex !== <span class=\"number\">-1</span> &amp;&amp; <span class=\"keyword\">this</span>.include.splice(index, <span class=\"number\">1</span>);</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h2 id=\"粗暴法子\"><a href=\"#粗暴法子\" class=\"headerlink\" title=\"粗暴法子\"></a>粗暴法子</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">transition</span> <span class=\"attr\">name</span>=<span class=\"string\">\"move\"</span> <span class=\"attr\">mode</span>=<span class=\"string\">\"out-in\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">keep-alive</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 需要缓存的视图组件 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">router-view</span> <span class=\"attr\">v-if</span>=<span class=\"string\">\"$route.meta.keepAlive\"</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">keep-alive</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">transition</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 不需要缓存的视图组件 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">router-view</span> <span class=\"attr\">v-if</span>=<span class=\"string\">\"!$route.meta.keepAlive\"</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">watch: &#123;</span><br><span class=\"line\">  $route(to, <span class=\"keyword\">from</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(to);</span><br><span class=\"line\">    <span class=\"comment\">// 如果是后退</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (to.meta.deepth &lt; <span class=\"keyword\">from</span>.meta.deepth) &#123;</span><br><span class=\"line\">      to.meta.keepAlive = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      to.meta.keepAlive = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> Router(&#123;</span><br><span class=\"line\">  routes: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      path: <span class=\"string\">'/'</span>,</span><br><span class=\"line\">      name: <span class=\"string\">'index'</span>,</span><br><span class=\"line\">      component: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"keyword\">import</span>(<span class=\"string\">'./views/keep-alive/index.vue'</span>),</span><br><span class=\"line\">      meta: &#123;</span><br><span class=\"line\">        deepth: <span class=\"number\">1</span>, <span class=\"comment\">// 同级 不刷新</span></span><br><span class=\"line\">        keepAlive: <span class=\"literal\">true</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      path: <span class=\"string\">'/list'</span>,</span><br><span class=\"line\">      name: <span class=\"string\">'list'</span>,</span><br><span class=\"line\">      component: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"keyword\">import</span>(<span class=\"string\">'./views/keep-alive/list.vue'</span>),</span><br><span class=\"line\">      meta: &#123;</span><br><span class=\"line\">        deepth: <span class=\"number\">1</span> <span class=\"comment\">// 同级不刷新</span></span><br><span class=\"line\">        keepAlive: <span class=\"literal\">true</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      path: <span class=\"string\">'/detail'</span>,</span><br><span class=\"line\">      name: <span class=\"string\">'detail'</span>,</span><br><span class=\"line\">      component: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"keyword\">import</span>(<span class=\"string\">'./views/keep-alive/detail.vue'</span>),</span><br><span class=\"line\">      meta: &#123;</span><br><span class=\"line\">        deepth: <span class=\"number\">0</span>, <span class=\"comment\">// 进入list不刷新页面</span></span><br><span class=\"line\">        keepAlive: <span class=\"literal\">false</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      path: <span class=\"string\">'/edit'</span>,</span><br><span class=\"line\">      name: <span class=\"string\">'edit'</span>,</span><br><span class=\"line\">      component: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"keyword\">import</span>(<span class=\"string\">'./views/keep-alive/edit.vue'</span>),</span><br><span class=\"line\">      meta: &#123;</span><br><span class=\"line\">        deepth: <span class=\"number\">2</span>, <span class=\"comment\">// 进入list刷新页面</span></span><br><span class=\"line\">        keepAlive: <span class=\"literal\">false</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"需求\"><a href=\"#需求\" class=\"headerlink\" title=\"需求\"></a>需求</h2><p>list 页面做缓存<br>add/edit 页面不做缓存<br>detail 页面不做缓存<br>………..</p>\n<h2 id=\"前人法子\"><a href=\"#前人法子\" class=\"headerlink\" title=\"前人法子\"></a>前人法子</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;keep-alive&gt;</span><br><span class=\"line\">  &lt;!-- 需要缓存 --&gt;</span><br><span class=\"line\">  &lt;router-view :include=<span class=\"string\">\"include\"</span> v-<span class=\"keyword\">if</span>=<span class=\"string\">\"$route.meta.keepAlive\"</span> /&gt;</span><br><span class=\"line\">&lt;<span class=\"regexp\">/keep-alive&gt;</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">&lt;!-- 不需要缓存 --&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">&lt;router-view v-if=\"!$route.meta.keepAlive\" /</span>&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">\tname: <span class=\"string\">'app'</span>,</span><br><span class=\"line\">\tdata: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> (&#123;</span><br><span class=\"line\">\t\tinclude: [],</span><br><span class=\"line\">\t&#125;),</span><br><span class=\"line\">\twatch: &#123;</span><br><span class=\"line\">\t\t$route(to, <span class=\"keyword\">from</span>) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//如果要to的页面是需要 keepAlive 缓存的，把 name push 进 include数组</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (to.meta.keepAlive) &#123;</span><br><span class=\"line\">\t\t\t\t!<span class=\"keyword\">this</span>.include.includes(to.name) &amp;&amp; <span class=\"keyword\">this</span>.include.push(to.name);</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//如果要form的页面是 keepAlive缓存的，</span></span><br><span class=\"line\">\t\t\t<span class=\"comment\">//再根据 deepth 来判断是前进还是后退</span></span><br><span class=\"line\">\t\t\t<span class=\"comment\">//如果是后退</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (<span class=\"keyword\">from</span>.meta.keepAlive &amp;&amp; to.meta.deepth &lt; <span class=\"keyword\">from</span>.meta.deepth) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">var</span> index = <span class=\"keyword\">this</span>.include.indexOf(<span class=\"keyword\">from</span>.name);</span><br><span class=\"line\">\t\t\t\tindex !== <span class=\"number\">-1</span> &amp;&amp; <span class=\"keyword\">this</span>.include.splice(index, <span class=\"number\">1</span>);</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h2 id=\"粗暴法子\"><a href=\"#粗暴法子\" class=\"headerlink\" title=\"粗暴法子\"></a>粗暴法子</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">transition</span> <span class=\"attr\">name</span>=<span class=\"string\">\"move\"</span> <span class=\"attr\">mode</span>=<span class=\"string\">\"out-in\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">keep-alive</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 需要缓存的视图组件 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">router-view</span> <span class=\"attr\">v-if</span>=<span class=\"string\">\"$route.meta.keepAlive\"</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">keep-alive</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">transition</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 不需要缓存的视图组件 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">router-view</span> <span class=\"attr\">v-if</span>=<span class=\"string\">\"!$route.meta.keepAlive\"</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">watch: &#123;</span><br><span class=\"line\">  $route(to, <span class=\"keyword\">from</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(to);</span><br><span class=\"line\">    <span class=\"comment\">// 如果是后退</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (to.meta.deepth &lt; <span class=\"keyword\">from</span>.meta.deepth) &#123;</span><br><span class=\"line\">      to.meta.keepAlive = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      to.meta.keepAlive = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> Router(&#123;</span><br><span class=\"line\">  routes: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      path: <span class=\"string\">'/'</span>,</span><br><span class=\"line\">      name: <span class=\"string\">'index'</span>,</span><br><span class=\"line\">      component: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"keyword\">import</span>(<span class=\"string\">'./views/keep-alive/index.vue'</span>),</span><br><span class=\"line\">      meta: &#123;</span><br><span class=\"line\">        deepth: <span class=\"number\">1</span>, <span class=\"comment\">// 同级 不刷新</span></span><br><span class=\"line\">        keepAlive: <span class=\"literal\">true</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      path: <span class=\"string\">'/list'</span>,</span><br><span class=\"line\">      name: <span class=\"string\">'list'</span>,</span><br><span class=\"line\">      component: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"keyword\">import</span>(<span class=\"string\">'./views/keep-alive/list.vue'</span>),</span><br><span class=\"line\">      meta: &#123;</span><br><span class=\"line\">        deepth: <span class=\"number\">1</span> <span class=\"comment\">// 同级不刷新</span></span><br><span class=\"line\">        keepAlive: <span class=\"literal\">true</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      path: <span class=\"string\">'/detail'</span>,</span><br><span class=\"line\">      name: <span class=\"string\">'detail'</span>,</span><br><span class=\"line\">      component: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"keyword\">import</span>(<span class=\"string\">'./views/keep-alive/detail.vue'</span>),</span><br><span class=\"line\">      meta: &#123;</span><br><span class=\"line\">        deepth: <span class=\"number\">0</span>, <span class=\"comment\">// 进入list不刷新页面</span></span><br><span class=\"line\">        keepAlive: <span class=\"literal\">false</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      path: <span class=\"string\">'/edit'</span>,</span><br><span class=\"line\">      name: <span class=\"string\">'edit'</span>,</span><br><span class=\"line\">      component: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"keyword\">import</span>(<span class=\"string\">'./views/keep-alive/edit.vue'</span>),</span><br><span class=\"line\">      meta: &#123;</span><br><span class=\"line\">        deepth: <span class=\"number\">2</span>, <span class=\"comment\">// 进入list刷新页面</span></span><br><span class=\"line\">        keepAlive: <span class=\"literal\">false</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n"},{"layout":"在docker","title":"在docker下删除一个或多个image及container","date":"2018-11-15T06:13:52.000Z","_content":"<table><tr><td bgcolor=orange>停止所有的container，这样才能够删除其中的images</td></tr></table>\n### 删除一个container\n#### 公式\n```\ndocker rm container_name/ID\n```\n``` bash\n➜  docker git:(master) ✗ docker ps -a\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                           PORTS               NAMES\n41c2ed15b32a        koa-demo            \"/bin/bash\"         About an hour ago   Exited (127) About an hour ago                       awesome_noyce\ncaec5440819a        hello-world         \"/hello\"            2 hours ago         Exited (0) 2 hours ago                               festive_austin\n```\n```\n➜  docker git:(master) ✗ docker rm caec5440819a\ncaec5440819a\n```\n```\n➜  docker git:(master) ✗ docker ps -a\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                           PORTS               NAMES\n41c2ed15b32a        koa-demo            \"/bin/bash\"         About an hour ago   Exited (127) About an hour ago                       awesome_noyce\n```\n### 删除多个container\n```\ndocker rm $(docker ps -a -q)\n```\n### 删除一个image\n#### 停止\n```\n➜  docker git:(master) ✗  docker stop $(docker  ps  -a -q)\n41c2ed15b32a\n```\n#### 查看所有\n```\n➜  docker git:(master) ✗ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nkoa-demo            latest              7d24f0109057        About an hour ago   676MB\nhello-world         latest              4ab4c602aa5e        2 months ago        1.84kB\nnode                8.4                 386940f92d24        14 months ago       673MB\n```\n#### 删除\n```\n➜  docker git:(master) ✗ docker rmi 4ab4c602aa5e\nUntagged: hello-world:latest\nUntagged: hello-world@sha256:0add3ace90ecb4adbf7777e9aacf18357296e799f81cabc9fde470971e499788\nDeleted: sha256:4ab4c602aa5eed5528a6620ff18a1dc4faef0e1ab3a5eddeddb410714478c67f\nDeleted: sha256:428c97da766c4c13b19088a471de6b622b038f3ae8efa10ec5a37d6d31a2df0b\n```\n#### 检查是否删除\n```\n➜  docker git:(master) ✗ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nkoa-demo            latest              7d24f0109057        About an hour ago   676MB\nnode                8.4                 386940f92d24        14 months ago       673MB\n```\n### 删除多个image\n```\ndocker rmi  $( docker  images -q )\n```\n#### 强制删除\n```\ndocker rmi  imagename 或者docker  rmi  -f   imagename\n```\n\n","source":"_posts/下删除一个或多个image及container.md","raw":"---\nlayout: 在docker\ntitle: 在docker下删除一个或多个image及container\ndate: 2018-11-15 14:13:52\ntags: docker\n---\n<table><tr><td bgcolor=orange>停止所有的container，这样才能够删除其中的images</td></tr></table>\n### 删除一个container\n#### 公式\n```\ndocker rm container_name/ID\n```\n``` bash\n➜  docker git:(master) ✗ docker ps -a\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                           PORTS               NAMES\n41c2ed15b32a        koa-demo            \"/bin/bash\"         About an hour ago   Exited (127) About an hour ago                       awesome_noyce\ncaec5440819a        hello-world         \"/hello\"            2 hours ago         Exited (0) 2 hours ago                               festive_austin\n```\n```\n➜  docker git:(master) ✗ docker rm caec5440819a\ncaec5440819a\n```\n```\n➜  docker git:(master) ✗ docker ps -a\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                           PORTS               NAMES\n41c2ed15b32a        koa-demo            \"/bin/bash\"         About an hour ago   Exited (127) About an hour ago                       awesome_noyce\n```\n### 删除多个container\n```\ndocker rm $(docker ps -a -q)\n```\n### 删除一个image\n#### 停止\n```\n➜  docker git:(master) ✗  docker stop $(docker  ps  -a -q)\n41c2ed15b32a\n```\n#### 查看所有\n```\n➜  docker git:(master) ✗ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nkoa-demo            latest              7d24f0109057        About an hour ago   676MB\nhello-world         latest              4ab4c602aa5e        2 months ago        1.84kB\nnode                8.4                 386940f92d24        14 months ago       673MB\n```\n#### 删除\n```\n➜  docker git:(master) ✗ docker rmi 4ab4c602aa5e\nUntagged: hello-world:latest\nUntagged: hello-world@sha256:0add3ace90ecb4adbf7777e9aacf18357296e799f81cabc9fde470971e499788\nDeleted: sha256:4ab4c602aa5eed5528a6620ff18a1dc4faef0e1ab3a5eddeddb410714478c67f\nDeleted: sha256:428c97da766c4c13b19088a471de6b622b038f3ae8efa10ec5a37d6d31a2df0b\n```\n#### 检查是否删除\n```\n➜  docker git:(master) ✗ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nkoa-demo            latest              7d24f0109057        About an hour ago   676MB\nnode                8.4                 386940f92d24        14 months ago       673MB\n```\n### 删除多个image\n```\ndocker rmi  $( docker  images -q )\n```\n#### 强制删除\n```\ndocker rmi  imagename 或者docker  rmi  -f   imagename\n```\n\n","slug":"下删除一个或多个image及container","published":1,"updated":"2021-10-09T08:48:32.083Z","comments":1,"photos":[],"link":"","_id":"ckumjzabz002j5c545npyu1jd","content":"<p><table><tr><td bgcolor=\"orange\">停止所有的container，这样才能够删除其中的images</td></tr></table></p>\n<h3 id=\"删除一个container\"><a href=\"#删除一个container\" class=\"headerlink\" title=\"删除一个container\"></a>删除一个container</h3><h4 id=\"公式\"><a href=\"#公式\" class=\"headerlink\" title=\"公式\"></a>公式</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rm container_name/ID</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">➜  docker git:(master) ✗ docker ps -a</span><br><span class=\"line\">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                           PORTS               NAMES</span><br><span class=\"line\">41c2ed15b32a        koa-demo            <span class=\"string\">\"/bin/bash\"</span>         About an hour ago   Exited (127) About an hour ago                       awesome_noyce</span><br><span class=\"line\">caec5440819a        hello-world         <span class=\"string\">\"/hello\"</span>            2 hours ago         Exited (0) 2 hours ago                               festive_austin</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">➜  docker git:(master) ✗ docker rm caec5440819a</span><br><span class=\"line\">caec5440819a</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">➜  docker git:(master) ✗ docker ps -a</span><br><span class=\"line\">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                           PORTS               NAMES</span><br><span class=\"line\">41c2ed15b32a        koa-demo            &quot;/bin/bash&quot;         About an hour ago   Exited (127) About an hour ago                       awesome_noyce</span><br></pre></td></tr></table></figure>\n<h3 id=\"删除多个container\"><a href=\"#删除多个container\" class=\"headerlink\" title=\"删除多个container\"></a>删除多个container</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rm $(docker ps -a -q)</span><br></pre></td></tr></table></figure>\n<h3 id=\"删除一个image\"><a href=\"#删除一个image\" class=\"headerlink\" title=\"删除一个image\"></a>删除一个image</h3><h4 id=\"停止\"><a href=\"#停止\" class=\"headerlink\" title=\"停止\"></a>停止</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">➜  docker git:(master) ✗  docker stop $(docker  ps  -a -q)</span><br><span class=\"line\">41c2ed15b32a</span><br></pre></td></tr></table></figure>\n<h4 id=\"查看所有\"><a href=\"#查看所有\" class=\"headerlink\" title=\"查看所有\"></a>查看所有</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">➜  docker git:(master) ✗ docker images</span><br><span class=\"line\">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class=\"line\">koa-demo            latest              7d24f0109057        About an hour ago   676MB</span><br><span class=\"line\">hello-world         latest              4ab4c602aa5e        2 months ago        1.84kB</span><br><span class=\"line\">node                8.4                 386940f92d24        14 months ago       673MB</span><br></pre></td></tr></table></figure>\n<h4 id=\"删除\"><a href=\"#删除\" class=\"headerlink\" title=\"删除\"></a>删除</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">➜  docker git:(master) ✗ docker rmi 4ab4c602aa5e</span><br><span class=\"line\">Untagged: hello-world:latest</span><br><span class=\"line\">Untagged: hello-world@sha256:0add3ace90ecb4adbf7777e9aacf18357296e799f81cabc9fde470971e499788</span><br><span class=\"line\">Deleted: sha256:4ab4c602aa5eed5528a6620ff18a1dc4faef0e1ab3a5eddeddb410714478c67f</span><br><span class=\"line\">Deleted: sha256:428c97da766c4c13b19088a471de6b622b038f3ae8efa10ec5a37d6d31a2df0b</span><br></pre></td></tr></table></figure>\n<h4 id=\"检查是否删除\"><a href=\"#检查是否删除\" class=\"headerlink\" title=\"检查是否删除\"></a>检查是否删除</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">➜  docker git:(master) ✗ docker images</span><br><span class=\"line\">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class=\"line\">koa-demo            latest              7d24f0109057        About an hour ago   676MB</span><br><span class=\"line\">node                8.4                 386940f92d24        14 months ago       673MB</span><br></pre></td></tr></table></figure>\n<h3 id=\"删除多个image\"><a href=\"#删除多个image\" class=\"headerlink\" title=\"删除多个image\"></a>删除多个image</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rmi  $( docker  images -q )</span><br></pre></td></tr></table></figure>\n<h4 id=\"强制删除\"><a href=\"#强制删除\" class=\"headerlink\" title=\"强制删除\"></a>强制删除</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rmi  imagename 或者docker  rmi  -f   imagename</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><table><tr><td bgcolor=\"orange\">停止所有的container，这样才能够删除其中的images</td></tr></table></p>\n<h3 id=\"删除一个container\"><a href=\"#删除一个container\" class=\"headerlink\" title=\"删除一个container\"></a>删除一个container</h3><h4 id=\"公式\"><a href=\"#公式\" class=\"headerlink\" title=\"公式\"></a>公式</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rm container_name/ID</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">➜  docker git:(master) ✗ docker ps -a</span><br><span class=\"line\">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                           PORTS               NAMES</span><br><span class=\"line\">41c2ed15b32a        koa-demo            <span class=\"string\">\"/bin/bash\"</span>         About an hour ago   Exited (127) About an hour ago                       awesome_noyce</span><br><span class=\"line\">caec5440819a        hello-world         <span class=\"string\">\"/hello\"</span>            2 hours ago         Exited (0) 2 hours ago                               festive_austin</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">➜  docker git:(master) ✗ docker rm caec5440819a</span><br><span class=\"line\">caec5440819a</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">➜  docker git:(master) ✗ docker ps -a</span><br><span class=\"line\">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                           PORTS               NAMES</span><br><span class=\"line\">41c2ed15b32a        koa-demo            &quot;/bin/bash&quot;         About an hour ago   Exited (127) About an hour ago                       awesome_noyce</span><br></pre></td></tr></table></figure>\n<h3 id=\"删除多个container\"><a href=\"#删除多个container\" class=\"headerlink\" title=\"删除多个container\"></a>删除多个container</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rm $(docker ps -a -q)</span><br></pre></td></tr></table></figure>\n<h3 id=\"删除一个image\"><a href=\"#删除一个image\" class=\"headerlink\" title=\"删除一个image\"></a>删除一个image</h3><h4 id=\"停止\"><a href=\"#停止\" class=\"headerlink\" title=\"停止\"></a>停止</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">➜  docker git:(master) ✗  docker stop $(docker  ps  -a -q)</span><br><span class=\"line\">41c2ed15b32a</span><br></pre></td></tr></table></figure>\n<h4 id=\"查看所有\"><a href=\"#查看所有\" class=\"headerlink\" title=\"查看所有\"></a>查看所有</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">➜  docker git:(master) ✗ docker images</span><br><span class=\"line\">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class=\"line\">koa-demo            latest              7d24f0109057        About an hour ago   676MB</span><br><span class=\"line\">hello-world         latest              4ab4c602aa5e        2 months ago        1.84kB</span><br><span class=\"line\">node                8.4                 386940f92d24        14 months ago       673MB</span><br></pre></td></tr></table></figure>\n<h4 id=\"删除\"><a href=\"#删除\" class=\"headerlink\" title=\"删除\"></a>删除</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">➜  docker git:(master) ✗ docker rmi 4ab4c602aa5e</span><br><span class=\"line\">Untagged: hello-world:latest</span><br><span class=\"line\">Untagged: hello-world@sha256:0add3ace90ecb4adbf7777e9aacf18357296e799f81cabc9fde470971e499788</span><br><span class=\"line\">Deleted: sha256:4ab4c602aa5eed5528a6620ff18a1dc4faef0e1ab3a5eddeddb410714478c67f</span><br><span class=\"line\">Deleted: sha256:428c97da766c4c13b19088a471de6b622b038f3ae8efa10ec5a37d6d31a2df0b</span><br></pre></td></tr></table></figure>\n<h4 id=\"检查是否删除\"><a href=\"#检查是否删除\" class=\"headerlink\" title=\"检查是否删除\"></a>检查是否删除</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">➜  docker git:(master) ✗ docker images</span><br><span class=\"line\">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class=\"line\">koa-demo            latest              7d24f0109057        About an hour ago   676MB</span><br><span class=\"line\">node                8.4                 386940f92d24        14 months ago       673MB</span><br></pre></td></tr></table></figure>\n<h3 id=\"删除多个image\"><a href=\"#删除多个image\" class=\"headerlink\" title=\"删除多个image\"></a>删除多个image</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rmi  $( docker  images -q )</span><br></pre></td></tr></table></figure>\n<h4 id=\"强制删除\"><a href=\"#强制删除\" class=\"headerlink\" title=\"强制删除\"></a>强制删除</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rmi  imagename 或者docker  rmi  -f   imagename</span><br></pre></td></tr></table></figure>\n"},{"title":"使用vue中mixin制作一个公用el-table组件","date":"2019-07-09T05:20:17.000Z","_content":"## 官网原话\n混入 (mixin) 提供了一种非常灵活的方式，来分发 Vue 组件中的可复用功能。一个混入对象可以包含任意组件选项。当组件使用混入对象时，所有混入对象的选项将被“混合”进入该组件本身的选项\n## 功能\n～1.选项合并\n～1.全局混入\n～1.自定义选项合并策略\n具体看官网介绍：https://cn.vuejs.org/v2/guide/mixins.html\n\n## 需求\n假如我们的项目中有很多重复类似的页面，比如admin管理系统中，有很多很多的表格页面，你是不是每个页面都去写pageNum，pageSize，handleSizeChange，handleCurrentChange.....\n这样一来页面太多重复代码了。那怎么提取优化呢？🐳。你可以组件提出来写。经网上查阅资料所得：\n*1. 组件在引用之后相当于在父组件内开辟了一块单独的空间，来根据父组件props过来的值进行相应的操作，单本质上两者还是泾渭分明，相对独立。<br />\n*2. mixin则是在引入组件之后，则是将组件内部的内容如data等方法、method等属性与父组件相应内容进行合并。相当于在引入后，父组件的各种属性方法都被扩充了\n  单纯组件引用：\n    => 父组件 + 子组件 >>> 父组件 + 子组件\n  mixin：\n    => 父组件 + 子组件 >>> new父组件\n\n## 实例\n### 想要实现的内容\n把项目中table非常多的东西都是可以复用的例如分页，表格高度，加载方法， loading 声明等一大堆的东西。下面我们来整理出来一个简单通用混入 list.js\n## DEMO\n[👻 点我呀 🐳](https://chengheai.github.io/daily-vue-demo/#/table)\n[ react👅 + redux🌈 + dvajs🦞 + mobx👺 + antd-design🤡](https://chengheai.github.io/daily-react-demo/index.html#/)\n## list代码\nlist.js\n``` javascript\n\nconst list = {\n  data() {\n    return {\n      loading: false,\n      pageParam: {\n        pageNum: 1, // 页码\n        pageSize: 10, // 每页显示条数\n      },\n      total: 0, // 总数\n      pageSizes: [10, 20, 30, 50], // 每页条数\n      pageLayout: 'total, sizes, prev, pager, next, jumper', // 分页布局\n      pagerCount: 5, // 大于等于 5 且小于等于 21 的奇数\n      list: [],\n    };\n  },\n  methods: {\n    // 分页回掉事件\n    handleSizeChange(val) {\n      this.pageParam.pageSize = val;\n      this.getList();\n    },\n    handleCurrentChange(val) {\n      this.pageParam.pageNum = val;\n      this.getList();\n    },\n    /**\n     * 请求返回的回调\n     * @param {*} apiResult\n     * @returns {*} promise\n     */\n    listSuccessCb(apiResult = {}) {\n      return new Promise((resolve, reject) => {\n        let tempList = []; // resolve return出的list\n        try {\n          this.loading = false;\n          tempList = apiResult.data.data.list;\n          this.total = apiResult.data.totalCount;\n          // 直接抛出\n          resolve(tempList);\n        } catch (error) {\n          reject(error);\n        }\n      });\n    },\n    /**\n     * 处理异常情况\n     * 错误时将loading置为 false\n     */\n    listExceptionCb(error) {\n      this.loading = false;\n      console.error(error);\n    },\n  },\n  created() {\n    this.$nextTick().then(() => {\n      console.log('我是table mixin')\n    });\n  },\n};\nexport default list;\n\n```\n## 应用代码\n``` javascript\n<template>\n  <div>\n    <el-table\n      :data=\"list\"\n      v-loading=\"loading\"\n      style=\"width: 100%\">\n      <el-table-column\n        prop=\"date\"\n        label=\"日期\"\n        width=\"180\">\n      </el-table-column>\n      <el-table-column\n        prop=\"name\"\n        label=\"姓名\"\n        width=\"180\">\n      </el-table-column>\n      <el-table-column\n        prop=\"address\"\n        label=\"地址\">\n      </el-table-column>\n    </el-table>\n    <el-pagination\n      @size-change=\"handleSizeChange\"\n      @current-change=\"handleCurrentChange\"\n      :page-sizes=\"pageSizes\"\n      :pager-count=\"pagerCount\"\n      :layout=\"pageLayout\"\n      :total=\"total\">\n    </el-pagination>\n  </div>\n</template>\n\n<script>\nimport mixin from '@/mixins/list' // 引入\nexport default {\n  name: 'mixins-demo',\n  mixins: [mixin], // 使用mixins\n  data () {\n    return {\n      searchForm: {\n        // age: 18,\n        // six: 'male'\n      }\n    }\n  },\n  methods: {\n    // 加载列表\n    getList () {\n      this.loading = true;\n      const params = { ...this.searchForm, ...this.pageParam }\n      this.$http.get('https://www.api.com/api/v1/query', {params}).then(res => {\n        if (res.data.code === 0) {\n          this.listSuccessCb(res).then((list) => {\n            this.list = list\n          }).catch((err) => {\n            this.listExceptionCb(err)\n            // console.log(err)\n          })\n        }\n      })\n    }\n  },\n  created() {\n    console.log('我是组件自己的created');\n  },\n  mounted() {\n    this.getList()\n  }\n}\n</script>\n\n<style>\n\n</style>\n\n```\n使用了 mixins 之后一个简单的有 loading, 分页,数据的表格大概就只需要上面这些代码。\n\n现在在list.js中我们可以直接调用组件的方法，比如在分页\b回调事件中调用组件的 getList()方法，在组件中直接调用 list.js中的代码，如直接访问 this.pageParam\n\n\n","source":"_posts/使用vue中mixin制作一个公用el-table组件.md","raw":"---\ntitle: 使用vue中mixin制作一个公用el-table组件\ndate: 2019-07-09 13:20:17\ntags: ['vue', 'element-ui']\n---\n## 官网原话\n混入 (mixin) 提供了一种非常灵活的方式，来分发 Vue 组件中的可复用功能。一个混入对象可以包含任意组件选项。当组件使用混入对象时，所有混入对象的选项将被“混合”进入该组件本身的选项\n## 功能\n～1.选项合并\n～1.全局混入\n～1.自定义选项合并策略\n具体看官网介绍：https://cn.vuejs.org/v2/guide/mixins.html\n\n## 需求\n假如我们的项目中有很多重复类似的页面，比如admin管理系统中，有很多很多的表格页面，你是不是每个页面都去写pageNum，pageSize，handleSizeChange，handleCurrentChange.....\n这样一来页面太多重复代码了。那怎么提取优化呢？🐳。你可以组件提出来写。经网上查阅资料所得：\n*1. 组件在引用之后相当于在父组件内开辟了一块单独的空间，来根据父组件props过来的值进行相应的操作，单本质上两者还是泾渭分明，相对独立。<br />\n*2. mixin则是在引入组件之后，则是将组件内部的内容如data等方法、method等属性与父组件相应内容进行合并。相当于在引入后，父组件的各种属性方法都被扩充了\n  单纯组件引用：\n    => 父组件 + 子组件 >>> 父组件 + 子组件\n  mixin：\n    => 父组件 + 子组件 >>> new父组件\n\n## 实例\n### 想要实现的内容\n把项目中table非常多的东西都是可以复用的例如分页，表格高度，加载方法， loading 声明等一大堆的东西。下面我们来整理出来一个简单通用混入 list.js\n## DEMO\n[👻 点我呀 🐳](https://chengheai.github.io/daily-vue-demo/#/table)\n[ react👅 + redux🌈 + dvajs🦞 + mobx👺 + antd-design🤡](https://chengheai.github.io/daily-react-demo/index.html#/)\n## list代码\nlist.js\n``` javascript\n\nconst list = {\n  data() {\n    return {\n      loading: false,\n      pageParam: {\n        pageNum: 1, // 页码\n        pageSize: 10, // 每页显示条数\n      },\n      total: 0, // 总数\n      pageSizes: [10, 20, 30, 50], // 每页条数\n      pageLayout: 'total, sizes, prev, pager, next, jumper', // 分页布局\n      pagerCount: 5, // 大于等于 5 且小于等于 21 的奇数\n      list: [],\n    };\n  },\n  methods: {\n    // 分页回掉事件\n    handleSizeChange(val) {\n      this.pageParam.pageSize = val;\n      this.getList();\n    },\n    handleCurrentChange(val) {\n      this.pageParam.pageNum = val;\n      this.getList();\n    },\n    /**\n     * 请求返回的回调\n     * @param {*} apiResult\n     * @returns {*} promise\n     */\n    listSuccessCb(apiResult = {}) {\n      return new Promise((resolve, reject) => {\n        let tempList = []; // resolve return出的list\n        try {\n          this.loading = false;\n          tempList = apiResult.data.data.list;\n          this.total = apiResult.data.totalCount;\n          // 直接抛出\n          resolve(tempList);\n        } catch (error) {\n          reject(error);\n        }\n      });\n    },\n    /**\n     * 处理异常情况\n     * 错误时将loading置为 false\n     */\n    listExceptionCb(error) {\n      this.loading = false;\n      console.error(error);\n    },\n  },\n  created() {\n    this.$nextTick().then(() => {\n      console.log('我是table mixin')\n    });\n  },\n};\nexport default list;\n\n```\n## 应用代码\n``` javascript\n<template>\n  <div>\n    <el-table\n      :data=\"list\"\n      v-loading=\"loading\"\n      style=\"width: 100%\">\n      <el-table-column\n        prop=\"date\"\n        label=\"日期\"\n        width=\"180\">\n      </el-table-column>\n      <el-table-column\n        prop=\"name\"\n        label=\"姓名\"\n        width=\"180\">\n      </el-table-column>\n      <el-table-column\n        prop=\"address\"\n        label=\"地址\">\n      </el-table-column>\n    </el-table>\n    <el-pagination\n      @size-change=\"handleSizeChange\"\n      @current-change=\"handleCurrentChange\"\n      :page-sizes=\"pageSizes\"\n      :pager-count=\"pagerCount\"\n      :layout=\"pageLayout\"\n      :total=\"total\">\n    </el-pagination>\n  </div>\n</template>\n\n<script>\nimport mixin from '@/mixins/list' // 引入\nexport default {\n  name: 'mixins-demo',\n  mixins: [mixin], // 使用mixins\n  data () {\n    return {\n      searchForm: {\n        // age: 18,\n        // six: 'male'\n      }\n    }\n  },\n  methods: {\n    // 加载列表\n    getList () {\n      this.loading = true;\n      const params = { ...this.searchForm, ...this.pageParam }\n      this.$http.get('https://www.api.com/api/v1/query', {params}).then(res => {\n        if (res.data.code === 0) {\n          this.listSuccessCb(res).then((list) => {\n            this.list = list\n          }).catch((err) => {\n            this.listExceptionCb(err)\n            // console.log(err)\n          })\n        }\n      })\n    }\n  },\n  created() {\n    console.log('我是组件自己的created');\n  },\n  mounted() {\n    this.getList()\n  }\n}\n</script>\n\n<style>\n\n</style>\n\n```\n使用了 mixins 之后一个简单的有 loading, 分页,数据的表格大概就只需要上面这些代码。\n\n现在在list.js中我们可以直接调用组件的方法，比如在分页\b回调事件中调用组件的 getList()方法，在组件中直接调用 list.js中的代码，如直接访问 this.pageParam\n\n\n","slug":"使用vue中mixin制作一个公用el-table组件","published":1,"updated":"2021-10-09T08:48:32.084Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzac1002m5c54vtq1o3ve","content":"<h2 id=\"官网原话\"><a href=\"#官网原话\" class=\"headerlink\" title=\"官网原话\"></a>官网原话</h2><p>混入 (mixin) 提供了一种非常灵活的方式，来分发 Vue 组件中的可复用功能。一个混入对象可以包含任意组件选项。当组件使用混入对象时，所有混入对象的选项将被“混合”进入该组件本身的选项</p>\n<h2 id=\"功能\"><a href=\"#功能\" class=\"headerlink\" title=\"功能\"></a>功能</h2><p>～1.选项合并<br>～1.全局混入<br>～1.自定义选项合并策略<br>具体看官网介绍：<a href=\"https://cn.vuejs.org/v2/guide/mixins.html\" target=\"_blank\" rel=\"noopener\">https://cn.vuejs.org/v2/guide/mixins.html</a></p>\n<h2 id=\"需求\"><a href=\"#需求\" class=\"headerlink\" title=\"需求\"></a>需求</h2><p>假如我们的项目中有很多重复类似的页面，比如admin管理系统中，有很多很多的表格页面，你是不是每个页面都去写pageNum，pageSize，handleSizeChange，handleCurrentChange…..<br>这样一来页面太多重复代码了。那怎么提取优化呢？🐳。你可以组件提出来写。经网上查阅资料所得：<br><em>1. 组件在引用之后相当于在父组件内开辟了一块单独的空间，来根据父组件props过来的值进行相应的操作，单本质上两者还是泾渭分明，相对独立。<br>\n</em>2. mixin则是在引入组件之后，则是将组件内部的内容如data等方法、method等属性与父组件相应内容进行合并。相当于在引入后，父组件的各种属性方法都被扩充了<br>  单纯组件引用：<br>    =&gt; 父组件 + 子组件 &gt;&gt;&gt; 父组件 + 子组件<br>  mixin：<br>    =&gt; 父组件 + 子组件 &gt;&gt;&gt; new父组件</p>\n<h2 id=\"实例\"><a href=\"#实例\" class=\"headerlink\" title=\"实例\"></a>实例</h2><h3 id=\"想要实现的内容\"><a href=\"#想要实现的内容\" class=\"headerlink\" title=\"想要实现的内容\"></a>想要实现的内容</h3><p>把项目中table非常多的东西都是可以复用的例如分页，表格高度，加载方法， loading 声明等一大堆的东西。下面我们来整理出来一个简单通用混入 list.js</p>\n<h2 id=\"DEMO\"><a href=\"#DEMO\" class=\"headerlink\" title=\"DEMO\"></a>DEMO</h2><p><a href=\"https://chengheai.github.io/daily-vue-demo/#/table\" target=\"_blank\" rel=\"noopener\">👻 点我呀 🐳</a><br><a href=\"https://chengheai.github.io/daily-react-demo/index.html#/\" target=\"_blank\" rel=\"noopener\"> react👅 + redux🌈 + dvajs🦞 + mobx👺 + antd-design🤡</a></p>\n<h2 id=\"list代码\"><a href=\"#list代码\" class=\"headerlink\" title=\"list代码\"></a>list代码</h2><p>list.js<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> list = &#123;</span><br><span class=\"line\">  data() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      loading: <span class=\"literal\">false</span>,</span><br><span class=\"line\">      pageParam: &#123;</span><br><span class=\"line\">        pageNum: <span class=\"number\">1</span>, <span class=\"comment\">// 页码</span></span><br><span class=\"line\">        pageSize: <span class=\"number\">10</span>, <span class=\"comment\">// 每页显示条数</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      total: <span class=\"number\">0</span>, <span class=\"comment\">// 总数</span></span><br><span class=\"line\">      pageSizes: [<span class=\"number\">10</span>, <span class=\"number\">20</span>, <span class=\"number\">30</span>, <span class=\"number\">50</span>], <span class=\"comment\">// 每页条数</span></span><br><span class=\"line\">      pageLayout: <span class=\"string\">'total, sizes, prev, pager, next, jumper'</span>, <span class=\"comment\">// 分页布局</span></span><br><span class=\"line\">      pagerCount: <span class=\"number\">5</span>, <span class=\"comment\">// 大于等于 5 且小于等于 21 的奇数</span></span><br><span class=\"line\">      list: [],</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 分页回掉事件</span></span><br><span class=\"line\">    handleSizeChange(val) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.pageParam.pageSize = val;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.getList();</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    handleCurrentChange(val) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.pageParam.pageNum = val;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.getList();</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 请求返回的回调</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> <span class=\"variable\">apiResult</span></span></span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@returns <span class=\"type\">&#123;*&#125;</span> <span class=\"variable\">promise</span></span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    listSuccessCb(apiResult = &#123;&#125;) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> tempList = []; <span class=\"comment\">// resolve return出的list</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">this</span>.loading = <span class=\"literal\">false</span>;</span><br><span class=\"line\">          tempList = apiResult.data.data.list;</span><br><span class=\"line\">          <span class=\"keyword\">this</span>.total = apiResult.data.totalCount;</span><br><span class=\"line\">          <span class=\"comment\">// 直接抛出</span></span><br><span class=\"line\">          resolve(tempList);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (error) &#123;</span><br><span class=\"line\">          reject(error);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 处理异常情况</span></span><br><span class=\"line\"><span class=\"comment\">     * 错误时将loading置为 false</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    listExceptionCb(error) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.loading = <span class=\"literal\">false</span>;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.error(error);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  created() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.$nextTick().then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'我是table mixin'</span>)</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> list;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"应用代码\"><a href=\"#应用代码\" class=\"headerlink\" title=\"应用代码\"></a>应用代码</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div&gt;</span><br><span class=\"line\">    &lt;el-table</span><br><span class=\"line\">      :data=<span class=\"string\">\"list\"</span></span><br><span class=\"line\">      v-loading=<span class=\"string\">\"loading\"</span></span><br><span class=\"line\">      style=<span class=\"string\">\"width: 100%\"</span>&gt;</span><br><span class=\"line\">      &lt;el-table-column</span><br><span class=\"line\">        prop=<span class=\"string\">\"date\"</span></span><br><span class=\"line\">        label=<span class=\"string\">\"日期\"</span></span><br><span class=\"line\">        width=<span class=\"string\">\"180\"</span>&gt;</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/el-table-column&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;el-table-column</span></span><br><span class=\"line\"><span class=\"regexp\">        prop=\"name\"</span></span><br><span class=\"line\"><span class=\"regexp\">        label=\"姓名\"</span></span><br><span class=\"line\"><span class=\"regexp\">        width=\"180\"&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;/</span>el-table-column&gt;</span><br><span class=\"line\">      &lt;el-table-column</span><br><span class=\"line\">        prop=<span class=\"string\">\"address\"</span></span><br><span class=\"line\">        label=<span class=\"string\">\"地址\"</span>&gt;</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/el-table-column&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>el-table&gt;</span><br><span class=\"line\">    &lt;el-pagination</span><br><span class=\"line\">      @size-change=<span class=\"string\">\"handleSizeChange\"</span></span><br><span class=\"line\">      @current-change=<span class=\"string\">\"handleCurrentChange\"</span></span><br><span class=\"line\">      :page-sizes=<span class=\"string\">\"pageSizes\"</span></span><br><span class=\"line\">      :pager-count=<span class=\"string\">\"pagerCount\"</span></span><br><span class=\"line\">      :layout=<span class=\"string\">\"pageLayout\"</span></span><br><span class=\"line\">      :total=<span class=\"string\">\"total\"</span>&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/el-pagination&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  &lt;/</span>div&gt;</span><br><span class=\"line\">&lt;<span class=\"regexp\">/template&gt;</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">&lt;script&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">import mixin from '@/mi</span>xins/list<span class=\"string\">' // 引入</span></span><br><span class=\"line\"><span class=\"string\">export default &#123;</span></span><br><span class=\"line\"><span class=\"string\">  name: '</span>mixins-demo<span class=\"string\">',</span></span><br><span class=\"line\"><span class=\"string\">  mixins: [mixin], // 使用mixins</span></span><br><span class=\"line\"><span class=\"string\">  data () &#123;</span></span><br><span class=\"line\"><span class=\"string\">    return &#123;</span></span><br><span class=\"line\"><span class=\"string\">      searchForm: &#123;</span></span><br><span class=\"line\"><span class=\"string\">        // age: 18,</span></span><br><span class=\"line\"><span class=\"string\">        // six: '</span>male<span class=\"string\">'</span></span><br><span class=\"line\"><span class=\"string\">      &#125;</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;,</span></span><br><span class=\"line\"><span class=\"string\">  methods: &#123;</span></span><br><span class=\"line\"><span class=\"string\">    // 加载列表</span></span><br><span class=\"line\"><span class=\"string\">    getList () &#123;</span></span><br><span class=\"line\"><span class=\"string\">      this.loading = true;</span></span><br><span class=\"line\"><span class=\"string\">      const params = &#123; ...this.searchForm, ...this.pageParam &#125;</span></span><br><span class=\"line\"><span class=\"string\">      this.$http.get('</span>https:<span class=\"comment\">//www.api.com/api/v1/query', &#123;params&#125;).then(res =&gt; &#123;</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (res.data.code === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">this</span>.listSuccessCb(res).then(<span class=\"function\">(<span class=\"params\">list</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.list = list</span><br><span class=\"line\">          &#125;).catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.listExceptionCb(err)</span><br><span class=\"line\">            <span class=\"comment\">// console.log(err)</span></span><br><span class=\"line\">          &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  created() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'我是组件自己的created'</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  mounted() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.getList()</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;<span class=\"regexp\">/script&gt;</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">&lt;style&gt;</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">&lt;/</span>style&gt;</span><br></pre></td></tr></table></figure>\n<p>使用了 mixins 之后一个简单的有 loading, 分页,数据的表格大概就只需要上面这些代码。</p>\n<p>现在在list.js中我们可以直接调用组件的方法，比如在分页\b回调事件中调用组件的 getList()方法，在组件中直接调用 list.js中的代码，如直接访问 this.pageParam</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"官网原话\"><a href=\"#官网原话\" class=\"headerlink\" title=\"官网原话\"></a>官网原话</h2><p>混入 (mixin) 提供了一种非常灵活的方式，来分发 Vue 组件中的可复用功能。一个混入对象可以包含任意组件选项。当组件使用混入对象时，所有混入对象的选项将被“混合”进入该组件本身的选项</p>\n<h2 id=\"功能\"><a href=\"#功能\" class=\"headerlink\" title=\"功能\"></a>功能</h2><p>～1.选项合并<br>～1.全局混入<br>～1.自定义选项合并策略<br>具体看官网介绍：<a href=\"https://cn.vuejs.org/v2/guide/mixins.html\" target=\"_blank\" rel=\"noopener\">https://cn.vuejs.org/v2/guide/mixins.html</a></p>\n<h2 id=\"需求\"><a href=\"#需求\" class=\"headerlink\" title=\"需求\"></a>需求</h2><p>假如我们的项目中有很多重复类似的页面，比如admin管理系统中，有很多很多的表格页面，你是不是每个页面都去写pageNum，pageSize，handleSizeChange，handleCurrentChange…..<br>这样一来页面太多重复代码了。那怎么提取优化呢？🐳。你可以组件提出来写。经网上查阅资料所得：<br><em>1. 组件在引用之后相当于在父组件内开辟了一块单独的空间，来根据父组件props过来的值进行相应的操作，单本质上两者还是泾渭分明，相对独立。<br>\n</em>2. mixin则是在引入组件之后，则是将组件内部的内容如data等方法、method等属性与父组件相应内容进行合并。相当于在引入后，父组件的各种属性方法都被扩充了<br>  单纯组件引用：<br>    =&gt; 父组件 + 子组件 &gt;&gt;&gt; 父组件 + 子组件<br>  mixin：<br>    =&gt; 父组件 + 子组件 &gt;&gt;&gt; new父组件</p>\n<h2 id=\"实例\"><a href=\"#实例\" class=\"headerlink\" title=\"实例\"></a>实例</h2><h3 id=\"想要实现的内容\"><a href=\"#想要实现的内容\" class=\"headerlink\" title=\"想要实现的内容\"></a>想要实现的内容</h3><p>把项目中table非常多的东西都是可以复用的例如分页，表格高度，加载方法， loading 声明等一大堆的东西。下面我们来整理出来一个简单通用混入 list.js</p>\n<h2 id=\"DEMO\"><a href=\"#DEMO\" class=\"headerlink\" title=\"DEMO\"></a>DEMO</h2><p><a href=\"https://chengheai.github.io/daily-vue-demo/#/table\" target=\"_blank\" rel=\"noopener\">👻 点我呀 🐳</a><br><a href=\"https://chengheai.github.io/daily-react-demo/index.html#/\" target=\"_blank\" rel=\"noopener\"> react👅 + redux🌈 + dvajs🦞 + mobx👺 + antd-design🤡</a></p>\n<h2 id=\"list代码\"><a href=\"#list代码\" class=\"headerlink\" title=\"list代码\"></a>list代码</h2><p>list.js<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> list = &#123;</span><br><span class=\"line\">  data() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      loading: <span class=\"literal\">false</span>,</span><br><span class=\"line\">      pageParam: &#123;</span><br><span class=\"line\">        pageNum: <span class=\"number\">1</span>, <span class=\"comment\">// 页码</span></span><br><span class=\"line\">        pageSize: <span class=\"number\">10</span>, <span class=\"comment\">// 每页显示条数</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      total: <span class=\"number\">0</span>, <span class=\"comment\">// 总数</span></span><br><span class=\"line\">      pageSizes: [<span class=\"number\">10</span>, <span class=\"number\">20</span>, <span class=\"number\">30</span>, <span class=\"number\">50</span>], <span class=\"comment\">// 每页条数</span></span><br><span class=\"line\">      pageLayout: <span class=\"string\">'total, sizes, prev, pager, next, jumper'</span>, <span class=\"comment\">// 分页布局</span></span><br><span class=\"line\">      pagerCount: <span class=\"number\">5</span>, <span class=\"comment\">// 大于等于 5 且小于等于 21 的奇数</span></span><br><span class=\"line\">      list: [],</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 分页回掉事件</span></span><br><span class=\"line\">    handleSizeChange(val) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.pageParam.pageSize = val;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.getList();</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    handleCurrentChange(val) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.pageParam.pageNum = val;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.getList();</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 请求返回的回调</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> <span class=\"variable\">apiResult</span></span></span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@returns <span class=\"type\">&#123;*&#125;</span> <span class=\"variable\">promise</span></span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    listSuccessCb(apiResult = &#123;&#125;) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> tempList = []; <span class=\"comment\">// resolve return出的list</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">this</span>.loading = <span class=\"literal\">false</span>;</span><br><span class=\"line\">          tempList = apiResult.data.data.list;</span><br><span class=\"line\">          <span class=\"keyword\">this</span>.total = apiResult.data.totalCount;</span><br><span class=\"line\">          <span class=\"comment\">// 直接抛出</span></span><br><span class=\"line\">          resolve(tempList);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (error) &#123;</span><br><span class=\"line\">          reject(error);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 处理异常情况</span></span><br><span class=\"line\"><span class=\"comment\">     * 错误时将loading置为 false</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    listExceptionCb(error) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.loading = <span class=\"literal\">false</span>;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.error(error);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  created() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.$nextTick().then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'我是table mixin'</span>)</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> list;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"应用代码\"><a href=\"#应用代码\" class=\"headerlink\" title=\"应用代码\"></a>应用代码</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div&gt;</span><br><span class=\"line\">    &lt;el-table</span><br><span class=\"line\">      :data=<span class=\"string\">\"list\"</span></span><br><span class=\"line\">      v-loading=<span class=\"string\">\"loading\"</span></span><br><span class=\"line\">      style=<span class=\"string\">\"width: 100%\"</span>&gt;</span><br><span class=\"line\">      &lt;el-table-column</span><br><span class=\"line\">        prop=<span class=\"string\">\"date\"</span></span><br><span class=\"line\">        label=<span class=\"string\">\"日期\"</span></span><br><span class=\"line\">        width=<span class=\"string\">\"180\"</span>&gt;</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/el-table-column&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;el-table-column</span></span><br><span class=\"line\"><span class=\"regexp\">        prop=\"name\"</span></span><br><span class=\"line\"><span class=\"regexp\">        label=\"姓名\"</span></span><br><span class=\"line\"><span class=\"regexp\">        width=\"180\"&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;/</span>el-table-column&gt;</span><br><span class=\"line\">      &lt;el-table-column</span><br><span class=\"line\">        prop=<span class=\"string\">\"address\"</span></span><br><span class=\"line\">        label=<span class=\"string\">\"地址\"</span>&gt;</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/el-table-column&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>el-table&gt;</span><br><span class=\"line\">    &lt;el-pagination</span><br><span class=\"line\">      @size-change=<span class=\"string\">\"handleSizeChange\"</span></span><br><span class=\"line\">      @current-change=<span class=\"string\">\"handleCurrentChange\"</span></span><br><span class=\"line\">      :page-sizes=<span class=\"string\">\"pageSizes\"</span></span><br><span class=\"line\">      :pager-count=<span class=\"string\">\"pagerCount\"</span></span><br><span class=\"line\">      :layout=<span class=\"string\">\"pageLayout\"</span></span><br><span class=\"line\">      :total=<span class=\"string\">\"total\"</span>&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/el-pagination&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  &lt;/</span>div&gt;</span><br><span class=\"line\">&lt;<span class=\"regexp\">/template&gt;</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">&lt;script&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">import mixin from '@/mi</span>xins/list<span class=\"string\">' // 引入</span></span><br><span class=\"line\"><span class=\"string\">export default &#123;</span></span><br><span class=\"line\"><span class=\"string\">  name: '</span>mixins-demo<span class=\"string\">',</span></span><br><span class=\"line\"><span class=\"string\">  mixins: [mixin], // 使用mixins</span></span><br><span class=\"line\"><span class=\"string\">  data () &#123;</span></span><br><span class=\"line\"><span class=\"string\">    return &#123;</span></span><br><span class=\"line\"><span class=\"string\">      searchForm: &#123;</span></span><br><span class=\"line\"><span class=\"string\">        // age: 18,</span></span><br><span class=\"line\"><span class=\"string\">        // six: '</span>male<span class=\"string\">'</span></span><br><span class=\"line\"><span class=\"string\">      &#125;</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;,</span></span><br><span class=\"line\"><span class=\"string\">  methods: &#123;</span></span><br><span class=\"line\"><span class=\"string\">    // 加载列表</span></span><br><span class=\"line\"><span class=\"string\">    getList () &#123;</span></span><br><span class=\"line\"><span class=\"string\">      this.loading = true;</span></span><br><span class=\"line\"><span class=\"string\">      const params = &#123; ...this.searchForm, ...this.pageParam &#125;</span></span><br><span class=\"line\"><span class=\"string\">      this.$http.get('</span>https:<span class=\"comment\">//www.api.com/api/v1/query', &#123;params&#125;).then(res =&gt; &#123;</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (res.data.code === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">this</span>.listSuccessCb(res).then(<span class=\"function\">(<span class=\"params\">list</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.list = list</span><br><span class=\"line\">          &#125;).catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.listExceptionCb(err)</span><br><span class=\"line\">            <span class=\"comment\">// console.log(err)</span></span><br><span class=\"line\">          &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  created() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'我是组件自己的created'</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  mounted() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.getList()</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;<span class=\"regexp\">/script&gt;</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">&lt;style&gt;</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">&lt;/</span>style&gt;</span><br></pre></td></tr></table></figure>\n<p>使用了 mixins 之后一个简单的有 loading, 分页,数据的表格大概就只需要上面这些代码。</p>\n<p>现在在list.js中我们可以直接调用组件的方法，比如在分页\b回调事件中调用组件的 getList()方法，在组件中直接调用 list.js中的代码，如直接访问 this.pageParam</p>\n"},{"title":"关于js中构造函数手写return的影响","date":"2019-07-15T12:44:55.000Z","_content":"## 例子\n### 基础例子\n构造函数正常的应该是这样的格式，new关键字调用函数，函数名首字母大写。\n``` javascript\n// 一个类\nfunction Fun(name, age, sex) {\n  this.name = name;\n  this.age = age;\n  this.sex = sex;\n}\n// 实例\nvar obj = new Fun('alex', 12, 'male');\nconsole.log(obj);\n```\n### 不用new调用的构造函数this指向window\n1、\n``` javascript\nfunction Fun(name, age, sex) {\n  this.name = name;\n  this.age = age;\n  this.sex = sex;\n}\n// 不用new调用，函数直接调用，this window\nFun('alex', 12, 'male');\nconsole.log(age) // 12  window\n```\n2、\n``` javascript\nfunction People(name, age){\n  this.name = name;\n  this.age = age;\n}\nvar obj = People('小米', 12);\nconsole.log(obj == null) // true\nconsole.log(obj.age) // 报错 \n// 没有用new调用 不是构造函数，没有返回值\n```\n### 构造函数末尾有return语句\n``` javascript\nfunction fun(name, age) {\n  this.name = name;\n  this.age = age;\n  return 3;\n}\nvar xiaoming = new fun('小明', 12);\nconsole.log(xiaoming) // 忽略return 3；\n```\n### 构造函数在句中有return语句[基本类型值]\n``` javascript\nfunction fun(name, age) {\n  this.name = name;\n  return 3;\n  this.age = age;\n}\n// 基本类型值，就会被忽视； \n// NaN undefined '' true, false\nvar xiaoming = new fun('小明', 12);\nconsole.log(xiaoming) // 打断程序执行，age将不会执行\n```\n### 构造函数语句中return [引用类型值]\n``` javascript\n// 返回 {} []  Math /\\d/\n// 引用类型值\nfunction fun(name, age) {\n  this.name = name;\n  return 　{\n    a: 1,\n    b: 2\n  };\n  this.age = age;\n}\n// 基本类型值，就会被忽视；\nvar xiaoming = new fun('小明', 12);\nconsole.log(xiaoming) // 返回函数自己写的return里的值\n```\n### 工厂类型\n``` javascript\nfunction createPeople(name, age, sex) {\n  var obj = {};\n  obj.name = name;\n  obj.age = age;\n  obj.sex = sex;\n  return obj;\n}\n// 不写new也可以的，名称为工厂模式\n\nvar xiaoming = createPeople('小明', 12, '男');\nconsole.log(xiaoming) // { name: '小明', age: 12, sex: '男' }\nconsole.log(xiaoming instanceof createPeople) // false\n```\n## 总结\n### 构造函数运行\n用new运算符调用一个函数的时候，分为4个步骤\n1，函数内部自己创建一个局部变量吗是一个控对象{}\n2,函数将自己的上下文设置为这个{}, 即所有语句中的this都指向这个控对象\n3，函数执行所有语句\n4，所有语句执行后，函数将return这个对象，函数将把自己的上下文返回\n<table><tr><td bgcolor=yellow>上面的构造函数就是典型的四步走</td></tr></table>\n\n### 含有return语句\n构造函数不用谢return语句，自动return\n如果写了一个return ：\n如果return这个基本类型值，无视这个return值，该return什么还是return什么\n但是return阻止了构造函数的执行\n","source":"_posts/关于js中构造函数手写return的影响.md","raw":"---\ntitle: 关于js中构造函数手写return的影响\ndate: 2019-07-15 20:44:55\ntags: ['JavaScript']\n---\n## 例子\n### 基础例子\n构造函数正常的应该是这样的格式，new关键字调用函数，函数名首字母大写。\n``` javascript\n// 一个类\nfunction Fun(name, age, sex) {\n  this.name = name;\n  this.age = age;\n  this.sex = sex;\n}\n// 实例\nvar obj = new Fun('alex', 12, 'male');\nconsole.log(obj);\n```\n### 不用new调用的构造函数this指向window\n1、\n``` javascript\nfunction Fun(name, age, sex) {\n  this.name = name;\n  this.age = age;\n  this.sex = sex;\n}\n// 不用new调用，函数直接调用，this window\nFun('alex', 12, 'male');\nconsole.log(age) // 12  window\n```\n2、\n``` javascript\nfunction People(name, age){\n  this.name = name;\n  this.age = age;\n}\nvar obj = People('小米', 12);\nconsole.log(obj == null) // true\nconsole.log(obj.age) // 报错 \n// 没有用new调用 不是构造函数，没有返回值\n```\n### 构造函数末尾有return语句\n``` javascript\nfunction fun(name, age) {\n  this.name = name;\n  this.age = age;\n  return 3;\n}\nvar xiaoming = new fun('小明', 12);\nconsole.log(xiaoming) // 忽略return 3；\n```\n### 构造函数在句中有return语句[基本类型值]\n``` javascript\nfunction fun(name, age) {\n  this.name = name;\n  return 3;\n  this.age = age;\n}\n// 基本类型值，就会被忽视； \n// NaN undefined '' true, false\nvar xiaoming = new fun('小明', 12);\nconsole.log(xiaoming) // 打断程序执行，age将不会执行\n```\n### 构造函数语句中return [引用类型值]\n``` javascript\n// 返回 {} []  Math /\\d/\n// 引用类型值\nfunction fun(name, age) {\n  this.name = name;\n  return 　{\n    a: 1,\n    b: 2\n  };\n  this.age = age;\n}\n// 基本类型值，就会被忽视；\nvar xiaoming = new fun('小明', 12);\nconsole.log(xiaoming) // 返回函数自己写的return里的值\n```\n### 工厂类型\n``` javascript\nfunction createPeople(name, age, sex) {\n  var obj = {};\n  obj.name = name;\n  obj.age = age;\n  obj.sex = sex;\n  return obj;\n}\n// 不写new也可以的，名称为工厂模式\n\nvar xiaoming = createPeople('小明', 12, '男');\nconsole.log(xiaoming) // { name: '小明', age: 12, sex: '男' }\nconsole.log(xiaoming instanceof createPeople) // false\n```\n## 总结\n### 构造函数运行\n用new运算符调用一个函数的时候，分为4个步骤\n1，函数内部自己创建一个局部变量吗是一个控对象{}\n2,函数将自己的上下文设置为这个{}, 即所有语句中的this都指向这个控对象\n3，函数执行所有语句\n4，所有语句执行后，函数将return这个对象，函数将把自己的上下文返回\n<table><tr><td bgcolor=yellow>上面的构造函数就是典型的四步走</td></tr></table>\n\n### 含有return语句\n构造函数不用谢return语句，自动return\n如果写了一个return ：\n如果return这个基本类型值，无视这个return值，该return什么还是return什么\n但是return阻止了构造函数的执行\n","slug":"关于js中构造函数手写return的影响","published":1,"updated":"2021-10-09T08:48:32.085Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzac1002o5c54eh43ccyc","content":"<h2 id=\"例子\"><a href=\"#例子\" class=\"headerlink\" title=\"例子\"></a>例子</h2><h3 id=\"基础例子\"><a href=\"#基础例子\" class=\"headerlink\" title=\"基础例子\"></a>基础例子</h3><p>构造函数正常的应该是这样的格式，new关键字调用函数，函数名首字母大写。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 一个类</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Fun</span>(<span class=\"params\">name, age, sex</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.sex = sex;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 实例</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = <span class=\"keyword\">new</span> Fun(<span class=\"string\">'alex'</span>, <span class=\"number\">12</span>, <span class=\"string\">'male'</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj);</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"不用new调用的构造函数this指向window\"><a href=\"#不用new调用的构造函数this指向window\" class=\"headerlink\" title=\"不用new调用的构造函数this指向window\"></a>不用new调用的构造函数this指向window</h3><p>1、<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Fun</span>(<span class=\"params\">name, age, sex</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.sex = sex;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 不用new调用，函数直接调用，this window</span></span><br><span class=\"line\">Fun(<span class=\"string\">'alex'</span>, <span class=\"number\">12</span>, <span class=\"string\">'male'</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(age) <span class=\"comment\">// 12  window</span></span><br></pre></td></tr></table></figure></p>\n<p>2、<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">People</span>(<span class=\"params\">name, age</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = People(<span class=\"string\">'小米'</span>, <span class=\"number\">12</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj == <span class=\"literal\">null</span>) <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj.age) <span class=\"comment\">// 报错 </span></span><br><span class=\"line\"><span class=\"comment\">// 没有用new调用 不是构造函数，没有返回值</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"构造函数末尾有return语句\"><a href=\"#构造函数末尾有return语句\" class=\"headerlink\" title=\"构造函数末尾有return语句\"></a>构造函数末尾有return语句</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fun</span>(<span class=\"params\">name, age</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">3</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> xiaoming = <span class=\"keyword\">new</span> fun(<span class=\"string\">'小明'</span>, <span class=\"number\">12</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(xiaoming) <span class=\"comment\">// 忽略return 3；</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"构造函数在句中有return语句-基本类型值\"><a href=\"#构造函数在句中有return语句-基本类型值\" class=\"headerlink\" title=\"构造函数在句中有return语句[基本类型值]\"></a>构造函数在句中有return语句[基本类型值]</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fun</span>(<span class=\"params\">name, age</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">3</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 基本类型值，就会被忽视； </span></span><br><span class=\"line\"><span class=\"comment\">// NaN undefined '' true, false</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> xiaoming = <span class=\"keyword\">new</span> fun(<span class=\"string\">'小明'</span>, <span class=\"number\">12</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(xiaoming) <span class=\"comment\">// 打断程序执行，age将不会执行</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"构造函数语句中return-引用类型值\"><a href=\"#构造函数语句中return-引用类型值\" class=\"headerlink\" title=\"构造函数语句中return [引用类型值]\"></a>构造函数语句中return [引用类型值]</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 返回 &#123;&#125; []  Math /\\d/</span></span><br><span class=\"line\"><span class=\"comment\">// 引用类型值</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fun</span>(<span class=\"params\">name, age</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> 　&#123;</span><br><span class=\"line\">    a: <span class=\"number\">1</span>,</span><br><span class=\"line\">    b: <span class=\"number\">2</span></span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 基本类型值，就会被忽视；</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> xiaoming = <span class=\"keyword\">new</span> fun(<span class=\"string\">'小明'</span>, <span class=\"number\">12</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(xiaoming) <span class=\"comment\">// 返回函数自己写的return里的值</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"工厂类型\"><a href=\"#工厂类型\" class=\"headerlink\" title=\"工厂类型\"></a>工厂类型</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createPeople</span>(<span class=\"params\">name, age, sex</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> obj = &#123;&#125;;</span><br><span class=\"line\">  obj.name = name;</span><br><span class=\"line\">  obj.age = age;</span><br><span class=\"line\">  obj.sex = sex;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> obj;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 不写new也可以的，名称为工厂模式</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> xiaoming = createPeople(<span class=\"string\">'小明'</span>, <span class=\"number\">12</span>, <span class=\"string\">'男'</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(xiaoming) <span class=\"comment\">// &#123; name: '小明', age: 12, sex: '男' &#125;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(xiaoming <span class=\"keyword\">instanceof</span> createPeople) <span class=\"comment\">// false</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><h3 id=\"构造函数运行\"><a href=\"#构造函数运行\" class=\"headerlink\" title=\"构造函数运行\"></a>构造函数运行</h3><p>用new运算符调用一个函数的时候，分为4个步骤<br>1，函数内部自己创建一个局部变量吗是一个控对象{}<br>2,函数将自己的上下文设置为这个{}, 即所有语句中的this都指向这个控对象<br>3，函数执行所有语句<br>4，所有语句执行后，函数将return这个对象，函数将把自己的上下文返回</p>\n<table><tr><td bgcolor=\"yellow\">上面的构造函数就是典型的四步走</td></tr></table>\n\n<h3 id=\"含有return语句\"><a href=\"#含有return语句\" class=\"headerlink\" title=\"含有return语句\"></a>含有return语句</h3><p>构造函数不用谢return语句，自动return<br>如果写了一个return ：<br>如果return这个基本类型值，无视这个return值，该return什么还是return什么<br>但是return阻止了构造函数的执行</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"例子\"><a href=\"#例子\" class=\"headerlink\" title=\"例子\"></a>例子</h2><h3 id=\"基础例子\"><a href=\"#基础例子\" class=\"headerlink\" title=\"基础例子\"></a>基础例子</h3><p>构造函数正常的应该是这样的格式，new关键字调用函数，函数名首字母大写。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 一个类</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Fun</span>(<span class=\"params\">name, age, sex</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.sex = sex;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 实例</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = <span class=\"keyword\">new</span> Fun(<span class=\"string\">'alex'</span>, <span class=\"number\">12</span>, <span class=\"string\">'male'</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj);</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"不用new调用的构造函数this指向window\"><a href=\"#不用new调用的构造函数this指向window\" class=\"headerlink\" title=\"不用new调用的构造函数this指向window\"></a>不用new调用的构造函数this指向window</h3><p>1、<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Fun</span>(<span class=\"params\">name, age, sex</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.sex = sex;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 不用new调用，函数直接调用，this window</span></span><br><span class=\"line\">Fun(<span class=\"string\">'alex'</span>, <span class=\"number\">12</span>, <span class=\"string\">'male'</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(age) <span class=\"comment\">// 12  window</span></span><br></pre></td></tr></table></figure></p>\n<p>2、<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">People</span>(<span class=\"params\">name, age</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = People(<span class=\"string\">'小米'</span>, <span class=\"number\">12</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj == <span class=\"literal\">null</span>) <span class=\"comment\">// true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj.age) <span class=\"comment\">// 报错 </span></span><br><span class=\"line\"><span class=\"comment\">// 没有用new调用 不是构造函数，没有返回值</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"构造函数末尾有return语句\"><a href=\"#构造函数末尾有return语句\" class=\"headerlink\" title=\"构造函数末尾有return语句\"></a>构造函数末尾有return语句</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fun</span>(<span class=\"params\">name, age</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">3</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> xiaoming = <span class=\"keyword\">new</span> fun(<span class=\"string\">'小明'</span>, <span class=\"number\">12</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(xiaoming) <span class=\"comment\">// 忽略return 3；</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"构造函数在句中有return语句-基本类型值\"><a href=\"#构造函数在句中有return语句-基本类型值\" class=\"headerlink\" title=\"构造函数在句中有return语句[基本类型值]\"></a>构造函数在句中有return语句[基本类型值]</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fun</span>(<span class=\"params\">name, age</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">3</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 基本类型值，就会被忽视； </span></span><br><span class=\"line\"><span class=\"comment\">// NaN undefined '' true, false</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> xiaoming = <span class=\"keyword\">new</span> fun(<span class=\"string\">'小明'</span>, <span class=\"number\">12</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(xiaoming) <span class=\"comment\">// 打断程序执行，age将不会执行</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"构造函数语句中return-引用类型值\"><a href=\"#构造函数语句中return-引用类型值\" class=\"headerlink\" title=\"构造函数语句中return [引用类型值]\"></a>构造函数语句中return [引用类型值]</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 返回 &#123;&#125; []  Math /\\d/</span></span><br><span class=\"line\"><span class=\"comment\">// 引用类型值</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fun</span>(<span class=\"params\">name, age</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> 　&#123;</span><br><span class=\"line\">    a: <span class=\"number\">1</span>,</span><br><span class=\"line\">    b: <span class=\"number\">2</span></span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 基本类型值，就会被忽视；</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> xiaoming = <span class=\"keyword\">new</span> fun(<span class=\"string\">'小明'</span>, <span class=\"number\">12</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(xiaoming) <span class=\"comment\">// 返回函数自己写的return里的值</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"工厂类型\"><a href=\"#工厂类型\" class=\"headerlink\" title=\"工厂类型\"></a>工厂类型</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createPeople</span>(<span class=\"params\">name, age, sex</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> obj = &#123;&#125;;</span><br><span class=\"line\">  obj.name = name;</span><br><span class=\"line\">  obj.age = age;</span><br><span class=\"line\">  obj.sex = sex;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> obj;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 不写new也可以的，名称为工厂模式</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> xiaoming = createPeople(<span class=\"string\">'小明'</span>, <span class=\"number\">12</span>, <span class=\"string\">'男'</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(xiaoming) <span class=\"comment\">// &#123; name: '小明', age: 12, sex: '男' &#125;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(xiaoming <span class=\"keyword\">instanceof</span> createPeople) <span class=\"comment\">// false</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><h3 id=\"构造函数运行\"><a href=\"#构造函数运行\" class=\"headerlink\" title=\"构造函数运行\"></a>构造函数运行</h3><p>用new运算符调用一个函数的时候，分为4个步骤<br>1，函数内部自己创建一个局部变量吗是一个控对象{}<br>2,函数将自己的上下文设置为这个{}, 即所有语句中的this都指向这个控对象<br>3，函数执行所有语句<br>4，所有语句执行后，函数将return这个对象，函数将把自己的上下文返回</p>\n<table><tr><td bgcolor=\"yellow\">上面的构造函数就是典型的四步走</td></tr></table>\n\n<h3 id=\"含有return语句\"><a href=\"#含有return语句\" class=\"headerlink\" title=\"含有return语句\"></a>含有return语句</h3><p>构造函数不用谢return语句，自动return<br>如果写了一个return ：<br>如果return这个基本类型值，无视这个return值，该return什么还是return什么<br>但是return阻止了构造函数的执行</p>\n"},{"title":"代码注释各种图像","date":"2019-07-16T08:49:07.000Z","_content":"```\n    /* 标准键盘布局\n┌───┐   ┌───┬───┬───┬───┐ ┌───┬───┬───┬───┐ ┌───┬───┬───┬───┐ ┌───┬───┬───┐\n│Esc│   │ F1│ F2│ F3│ F4│ │ F5│ F6│ F7│ F8│ │ F9│F10│F11│F12│ │P/S│S L│P/B│  ┌┐    ┌┐    ┌┐\n└───┘   └───┴───┴───┴───┘ └───┴───┴───┴───┘ └───┴───┴───┴───┘ └───┴───┴───┘  └┘    └┘    └┘\n┌───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───────┐ ┌───┬───┬───┐ ┌───┬───┬───┬───┐\n│~ `│! 1│@ 2│# 3│$ 4│% 5│^ 6│& 7│* 8│( 9│) 0│_ -│+ =│ BacSp │ │Ins│Hom│PUp│ │N L│ / │ * │ - │\n├───┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─────┤ ├───┼───┼───┤ ├───┼───┼───┼───┤\n│ Tab │ Q │ W │ E │ R │ T │ Y │ U │ I │ O │ P │{ [│} ]│ | \\ │ │Del│End│PDn│ │ 7 │ 8 │ 9 │   │\n├─────┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴─────┤ └───┴───┴───┘ ├───┼───┼───┤ + │\n│ Caps │ A │ S │ D │ F │ G │ H │ J │ K │ L │: ;│\" '│ Enter  │               │ 4 │ 5 │ 6 │   │\n├──────┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴────────┤     ┌───┐     ├───┼───┼───┼───┤\n│ Shift  │ Z │ X │ C │ V │ B │ N │ M │< ,│> .│? /│  Shift   │     │ ↑ │     │ 1 │ 2 │ 3 │   │\n├─────┬──┴─┬─┴──┬┴───┴───┴───┴───┴───┴──┬┴───┼───┴┬────┬────┤ ┌───┼───┼───┐ ├───┴───┼───┤ E││\n│ Ctrl│    │Alt │         Space         │ Alt│    │    │Ctrl│ │ ← │ ↓ │ → │ │   0   │ . │←─┘│\n└─────┴────┴────┴───────────────────────┴────┴────┴────┴────┘ └───┴───┴───┘ └───────┴───┴───┘\n*/\n\n\n\n\n        /*\n                           _ooOoo_\n                          o8888888o\n                          88\" . \"88\n                          (| -_- |)\n                          O\\  =  /O\n                       ____/`---'\\____\n                     .'  \\\\|     |//  `.\n                    /  \\\\|||  :  |||//  \\\n                   /  _||||| -:- |||||-  \\\n                   |   | \\\\\\  -  /// |   |\n                   | \\_|  ''\\---/''  |   |\n                   \\  .-\\__  `-`  ___/-. /\n                 ___`. .'  /--.--\\  `. . __\n              .\"\" '<  `.___\\_<|>_/___.'  >'\"\".\n             | | :  `- \\`.;`\\ _ /`;.`/ - ` : | |\n             \\  \\ `-.   \\_ __\\ /__ _/   .-` /  /\n        ======`-.____`-.___\\_____/___.-`____.-'======\n                           `=---='\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                 佛祖保佑       永无BUG\n        */\n\n\n\n        /*\n*\n*          ┌─┐       ┌─┐\n*       ┌──┘ ┴───────┘ ┴──┐\n*       │                 │\n*       │       ───       │\n*       │  ─┬┘       └┬─  │\n*       │                 │\n*       │       ─┴─       │\n*       │                 │\n*       └───┐         ┌───┘\n*           │         │\n*           │         │\n*           │         │\n*           │         └──────────────┐\n*           │                        │\n*           │                        ├─┐\n*           │                        ┌─┘\n*           │                        │\n*           └─┐  ┐  ┌───────┬──┐  ┌──┘\n*             │ ─┤ ─┤       │ ─┤ ─┤\n*             └──┴──┘       └──┴──┘\n*                 神兽保佑\n*                 代码无BUG!\n*/\n/**\n *   ┏┓　　　┏┓\n * ┏┛┻━━━┛┻┓\n * ┃　　　　　　　┃\n * ┃　　　━　　　┃\n * ┃　┳┛　┗┳　┃\n * ┃　　　　　　　┃\n * ┃　　　┻　　　┃\n * ┃　　　　　　　┃\n * ┗━┓　　　┏━┛\n *    ┃　　　┃\n *    ┃　　　┃\n *    ┃　　　┗━━━┓\n *    ┃　　　　　　　┣┓\n *    ┃　　　　　　　┏┛\n *    ┗┓┓┏━┳┓┏┛\n *      ┃┫┫　┃┫┫\n *      ┗┻┛　┗┻┛\n *        神兽保佑\n *        代码无BUG!\n */\n\n\n //                      d*##$.\n// zP\"\"\"\"\"$e.           $\"    $o\n//4$       '$          $\"      $\n//'$        '$        J$       $F\n// 'b        $k       $>       $\n//  $k        $r     J$       d$\n//  '$         $     $\"       $~\n//   '$        \"$   '$E       $\n//    $         $L   $\"      $F ...\n//     $.       4B   $      $$$*\"\"\"*b\n//     '$        $.  $$     $$      $F\n//      \"$       R$  $F     $\"      $\n//       $k      ?$ u*     dF      .$\n//       ^$.      $$\"     z$      u$$$$e\n//        #$b             $E.dW@e$\"    ?$\n//         #$           .o$$# d$$$$c    ?F\n//          $      .d$$#\" . zo$>   #$r .uF\n//          $L .u$*\"      $&$$$k   .$$d$$F\n//           $$\"            \"\"^\"$$$P\"$P9$\n//          JP              .o$$$$u:$P $$\n//          $          ..ue$\"      \"\"  $\"\n//         d$          $F              $\n//         $$     ....udE             4B\n//          #$    \"\"\"\"` $r            @$\n//           ^$L        '$            $F\n//             RN        4N           $\n//              *$b                  d$\n//               $$k                 $F\n//               $$b                $F\n//                 $\"\"               $F\n//                 '$                $\n//                  $L               $\n//                  '$               $\n//                   $               $\n\n\n\n书本代码注释\n\n//                .-~~~~~~~~~-._       _.-~~~~~~~~~-.\n//            __.'              ~.   .~              `.__\n//          .'//                  \\./                  \\\\`.\n//        .'//                     |                     \\\\`.\n//      .'// .-~\"\"\"\"\"\"\"~~~~-._     |     _,-~~~~\"\"\"\"\"\"\"~-. \\\\`.\n//    .'//.-\"                 `-.  |  .-'                 \"-.\\\\`.\n//  .'//______.============-..   \\ | /   ..-============.______\\\\`.\n//.'______________________________\\|/______________________________`.\n微软经典图标代码注释\n\n        /*\n                         __\n                    ,-~¨^  ^¨-,           _,\n                   /          / ;^-._...,¨/\n                  /          / /         /\n                 /          / /         /\n                /          / /         /\n               /,.-:''-,_ / /         /\n               _,.-:--._ ^ ^:-._ __../\n             /^         / /¨:.._¨__.;\n            /          / /      ^  /\n           /          / /         /\n          /          / /         /\n         /_,.--:^-._/ /         /\n        ^            ^¨¨-.___.:^  (R) - G33K\n\n        */\n谷歌google代码注释\n\n        /*\n          ___                _\n         / __|___  ___  __ _| |___\n        | (_ / _ \\/ _ \\/ _` |   -_)\n         \\___\\___/\\___/\\__, |_\\___|\n                       |___/\n\n        */\n奥运五环代码注释\n\n        /*\n              _.-\"\"\"\"\"-._         _.-\"\"\"\"\"-._         _.-\"\"\"\"\"-._\n           ,'           `.     ,'           `.     ,'           `.\n          /               \\   /               \\   /               \\\n         |                 | |                 | |                 |\n        |                   |                   |                   |\n        |                   |                   |                   |\n         |             _.-\"|\"|\"-._         _.-\"|\"|\"-._             |\n          \\          ,'   /   \\   `.     ,'   /   \\   `.          /\n           `.       /   ,'     `.   \\   /   ,'     `.   \\       ,'\n             `-..__|..-'         `-..|_|..-'         `-..|__..-'\n                  |                   |                   |\n                  |                   |                   |\n                   |                 | |                 |\n                    \\               /   \\               /\n                     `.           ,'     `.           ,'\n                       `-..___..-'         `-..___..-'\n\n         */\n\n         电脑图像代码注释\n\n        /*\n                     ,----------------,              ,---------,\n                ,-----------------------,          ,\"        ,\"|\n              ,\"                      ,\"|        ,\"        ,\"  |\n             +-----------------------+  |      ,\"        ,\"    |\n             |  .-----------------.  |  |     +---------+      |\n             |  |                 |  |  |     | -==----'|      |\n             |  |  I LOVE DOS!    |  |  |     |         |      |\n             |  |  Bad command or |  |  |/----|`---=    |      |\n             |  |  C:\\>_          |  |  |   ,/|==== ooo |      ;\n             |  |                 |  |  |  // |(((( [33]|    ,\"\n             |  `-----------------'  |,\" .;'| |((((     |  ,\"\n             +-----------------------+  ;;  | |         |,\"\n                /_)______________(_/  //'   | +---------+\n           ___________________________/___  `,\n          /  oooooooooooooooo  .o.  oooo /,   \\,\"-----------\n         / ==ooooooooooooooo==.o.  ooo= //   ,`\\--{)B     ,\"\n        /_==__==========__==_ooo__ooo=_/'   /___________,\"\n\n        */\n        /*\n                                    _________\n                                   /         /.\n            .-------------.       /_________/ |\n           /             / |      |         | |\n          /+============+\\ |      | |====|  | |\n          ||C:\\>        || |      |         | |\n          ||            || |      | |====|  | |\n          ||            || |      |   ___   | |\n          ||            || |      |  |166|  | |\n          ||            ||/@@@    |   ---   | |\n          \\+============+/    @   |_________|./.\n                             @          ..  ....'\n          ..................@     __.'.'  ''\n         /oooooooooooooooo//     ///\n        /................//     /_/\n        ------------------\n        */\n```\n","source":"_posts/代码注释各种图像.md","raw":"---\ntitle: 代码注释各种图像\ndate: 2019-07-16 16:49:07\ntags: ['材料']\n---\n```\n    /* 标准键盘布局\n┌───┐   ┌───┬───┬───┬───┐ ┌───┬───┬───┬───┐ ┌───┬───┬───┬───┐ ┌───┬───┬───┐\n│Esc│   │ F1│ F2│ F3│ F4│ │ F5│ F6│ F7│ F8│ │ F9│F10│F11│F12│ │P/S│S L│P/B│  ┌┐    ┌┐    ┌┐\n└───┘   └───┴───┴───┴───┘ └───┴───┴───┴───┘ └───┴───┴───┴───┘ └───┴───┴───┘  └┘    └┘    └┘\n┌───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───────┐ ┌───┬───┬───┐ ┌───┬───┬───┬───┐\n│~ `│! 1│@ 2│# 3│$ 4│% 5│^ 6│& 7│* 8│( 9│) 0│_ -│+ =│ BacSp │ │Ins│Hom│PUp│ │N L│ / │ * │ - │\n├───┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─────┤ ├───┼───┼───┤ ├───┼───┼───┼───┤\n│ Tab │ Q │ W │ E │ R │ T │ Y │ U │ I │ O │ P │{ [│} ]│ | \\ │ │Del│End│PDn│ │ 7 │ 8 │ 9 │   │\n├─────┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴─────┤ └───┴───┴───┘ ├───┼───┼───┤ + │\n│ Caps │ A │ S │ D │ F │ G │ H │ J │ K │ L │: ;│\" '│ Enter  │               │ 4 │ 5 │ 6 │   │\n├──────┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴────────┤     ┌───┐     ├───┼───┼───┼───┤\n│ Shift  │ Z │ X │ C │ V │ B │ N │ M │< ,│> .│? /│  Shift   │     │ ↑ │     │ 1 │ 2 │ 3 │   │\n├─────┬──┴─┬─┴──┬┴───┴───┴───┴───┴───┴──┬┴───┼───┴┬────┬────┤ ┌───┼───┼───┐ ├───┴───┼───┤ E││\n│ Ctrl│    │Alt │         Space         │ Alt│    │    │Ctrl│ │ ← │ ↓ │ → │ │   0   │ . │←─┘│\n└─────┴────┴────┴───────────────────────┴────┴────┴────┴────┘ └───┴───┴───┘ └───────┴───┴───┘\n*/\n\n\n\n\n        /*\n                           _ooOoo_\n                          o8888888o\n                          88\" . \"88\n                          (| -_- |)\n                          O\\  =  /O\n                       ____/`---'\\____\n                     .'  \\\\|     |//  `.\n                    /  \\\\|||  :  |||//  \\\n                   /  _||||| -:- |||||-  \\\n                   |   | \\\\\\  -  /// |   |\n                   | \\_|  ''\\---/''  |   |\n                   \\  .-\\__  `-`  ___/-. /\n                 ___`. .'  /--.--\\  `. . __\n              .\"\" '<  `.___\\_<|>_/___.'  >'\"\".\n             | | :  `- \\`.;`\\ _ /`;.`/ - ` : | |\n             \\  \\ `-.   \\_ __\\ /__ _/   .-` /  /\n        ======`-.____`-.___\\_____/___.-`____.-'======\n                           `=---='\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                 佛祖保佑       永无BUG\n        */\n\n\n\n        /*\n*\n*          ┌─┐       ┌─┐\n*       ┌──┘ ┴───────┘ ┴──┐\n*       │                 │\n*       │       ───       │\n*       │  ─┬┘       └┬─  │\n*       │                 │\n*       │       ─┴─       │\n*       │                 │\n*       └───┐         ┌───┘\n*           │         │\n*           │         │\n*           │         │\n*           │         └──────────────┐\n*           │                        │\n*           │                        ├─┐\n*           │                        ┌─┘\n*           │                        │\n*           └─┐  ┐  ┌───────┬──┐  ┌──┘\n*             │ ─┤ ─┤       │ ─┤ ─┤\n*             └──┴──┘       └──┴──┘\n*                 神兽保佑\n*                 代码无BUG!\n*/\n/**\n *   ┏┓　　　┏┓\n * ┏┛┻━━━┛┻┓\n * ┃　　　　　　　┃\n * ┃　　　━　　　┃\n * ┃　┳┛　┗┳　┃\n * ┃　　　　　　　┃\n * ┃　　　┻　　　┃\n * ┃　　　　　　　┃\n * ┗━┓　　　┏━┛\n *    ┃　　　┃\n *    ┃　　　┃\n *    ┃　　　┗━━━┓\n *    ┃　　　　　　　┣┓\n *    ┃　　　　　　　┏┛\n *    ┗┓┓┏━┳┓┏┛\n *      ┃┫┫　┃┫┫\n *      ┗┻┛　┗┻┛\n *        神兽保佑\n *        代码无BUG!\n */\n\n\n //                      d*##$.\n// zP\"\"\"\"\"$e.           $\"    $o\n//4$       '$          $\"      $\n//'$        '$        J$       $F\n// 'b        $k       $>       $\n//  $k        $r     J$       d$\n//  '$         $     $\"       $~\n//   '$        \"$   '$E       $\n//    $         $L   $\"      $F ...\n//     $.       4B   $      $$$*\"\"\"*b\n//     '$        $.  $$     $$      $F\n//      \"$       R$  $F     $\"      $\n//       $k      ?$ u*     dF      .$\n//       ^$.      $$\"     z$      u$$$$e\n//        #$b             $E.dW@e$\"    ?$\n//         #$           .o$$# d$$$$c    ?F\n//          $      .d$$#\" . zo$>   #$r .uF\n//          $L .u$*\"      $&$$$k   .$$d$$F\n//           $$\"            \"\"^\"$$$P\"$P9$\n//          JP              .o$$$$u:$P $$\n//          $          ..ue$\"      \"\"  $\"\n//         d$          $F              $\n//         $$     ....udE             4B\n//          #$    \"\"\"\"` $r            @$\n//           ^$L        '$            $F\n//             RN        4N           $\n//              *$b                  d$\n//               $$k                 $F\n//               $$b                $F\n//                 $\"\"               $F\n//                 '$                $\n//                  $L               $\n//                  '$               $\n//                   $               $\n\n\n\n书本代码注释\n\n//                .-~~~~~~~~~-._       _.-~~~~~~~~~-.\n//            __.'              ~.   .~              `.__\n//          .'//                  \\./                  \\\\`.\n//        .'//                     |                     \\\\`.\n//      .'// .-~\"\"\"\"\"\"\"~~~~-._     |     _,-~~~~\"\"\"\"\"\"\"~-. \\\\`.\n//    .'//.-\"                 `-.  |  .-'                 \"-.\\\\`.\n//  .'//______.============-..   \\ | /   ..-============.______\\\\`.\n//.'______________________________\\|/______________________________`.\n微软经典图标代码注释\n\n        /*\n                         __\n                    ,-~¨^  ^¨-,           _,\n                   /          / ;^-._...,¨/\n                  /          / /         /\n                 /          / /         /\n                /          / /         /\n               /,.-:''-,_ / /         /\n               _,.-:--._ ^ ^:-._ __../\n             /^         / /¨:.._¨__.;\n            /          / /      ^  /\n           /          / /         /\n          /          / /         /\n         /_,.--:^-._/ /         /\n        ^            ^¨¨-.___.:^  (R) - G33K\n\n        */\n谷歌google代码注释\n\n        /*\n          ___                _\n         / __|___  ___  __ _| |___\n        | (_ / _ \\/ _ \\/ _` |   -_)\n         \\___\\___/\\___/\\__, |_\\___|\n                       |___/\n\n        */\n奥运五环代码注释\n\n        /*\n              _.-\"\"\"\"\"-._         _.-\"\"\"\"\"-._         _.-\"\"\"\"\"-._\n           ,'           `.     ,'           `.     ,'           `.\n          /               \\   /               \\   /               \\\n         |                 | |                 | |                 |\n        |                   |                   |                   |\n        |                   |                   |                   |\n         |             _.-\"|\"|\"-._         _.-\"|\"|\"-._             |\n          \\          ,'   /   \\   `.     ,'   /   \\   `.          /\n           `.       /   ,'     `.   \\   /   ,'     `.   \\       ,'\n             `-..__|..-'         `-..|_|..-'         `-..|__..-'\n                  |                   |                   |\n                  |                   |                   |\n                   |                 | |                 |\n                    \\               /   \\               /\n                     `.           ,'     `.           ,'\n                       `-..___..-'         `-..___..-'\n\n         */\n\n         电脑图像代码注释\n\n        /*\n                     ,----------------,              ,---------,\n                ,-----------------------,          ,\"        ,\"|\n              ,\"                      ,\"|        ,\"        ,\"  |\n             +-----------------------+  |      ,\"        ,\"    |\n             |  .-----------------.  |  |     +---------+      |\n             |  |                 |  |  |     | -==----'|      |\n             |  |  I LOVE DOS!    |  |  |     |         |      |\n             |  |  Bad command or |  |  |/----|`---=    |      |\n             |  |  C:\\>_          |  |  |   ,/|==== ooo |      ;\n             |  |                 |  |  |  // |(((( [33]|    ,\"\n             |  `-----------------'  |,\" .;'| |((((     |  ,\"\n             +-----------------------+  ;;  | |         |,\"\n                /_)______________(_/  //'   | +---------+\n           ___________________________/___  `,\n          /  oooooooooooooooo  .o.  oooo /,   \\,\"-----------\n         / ==ooooooooooooooo==.o.  ooo= //   ,`\\--{)B     ,\"\n        /_==__==========__==_ooo__ooo=_/'   /___________,\"\n\n        */\n        /*\n                                    _________\n                                   /         /.\n            .-------------.       /_________/ |\n           /             / |      |         | |\n          /+============+\\ |      | |====|  | |\n          ||C:\\>        || |      |         | |\n          ||            || |      | |====|  | |\n          ||            || |      |   ___   | |\n          ||            || |      |  |166|  | |\n          ||            ||/@@@    |   ---   | |\n          \\+============+/    @   |_________|./.\n                             @          ..  ....'\n          ..................@     __.'.'  ''\n         /oooooooooooooooo//     ///\n        /................//     /_/\n        ------------------\n        */\n```\n","slug":"代码注释各种图像","published":1,"updated":"2021-10-09T08:48:32.084Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzac5002r5c548c3spn0n","content":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    /* 标准键盘布局</span><br><span class=\"line\">┌───┐   ┌───┬───┬───┬───┐ ┌───┬───┬───┬───┐ ┌───┬───┬───┬───┐ ┌───┬───┬───┐</span><br><span class=\"line\">│Esc│   │ F1│ F2│ F3│ F4│ │ F5│ F6│ F7│ F8│ │ F9│F10│F11│F12│ │P/S│S L│P/B│  ┌┐    ┌┐    ┌┐</span><br><span class=\"line\">└───┘   └───┴───┴───┴───┘ └───┴───┴───┴───┘ └───┴───┴───┴───┘ └───┴───┴───┘  └┘    └┘    └┘</span><br><span class=\"line\">┌───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───────┐ ┌───┬───┬───┐ ┌───┬───┬───┬───┐</span><br><span class=\"line\">│~ `│! 1│@ 2│# 3│$ 4│% 5│^ 6│&amp; 7│* 8│( 9│) 0│_ -│+ =│ BacSp │ │Ins│Hom│PUp│ │N L│ / │ * │ - │</span><br><span class=\"line\">├───┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─────┤ ├───┼───┼───┤ ├───┼───┼───┼───┤</span><br><span class=\"line\">│ Tab │ Q │ W │ E │ R │ T │ Y │ U │ I │ O │ P │&#123; [│&#125; ]│ | \\ │ │Del│End│PDn│ │ 7 │ 8 │ 9 │   │</span><br><span class=\"line\">├─────┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴─────┤ └───┴───┴───┘ ├───┼───┼───┤ + │</span><br><span class=\"line\">│ Caps │ A │ S │ D │ F │ G │ H │ J │ K │ L │: ;│&quot; &apos;│ Enter  │               │ 4 │ 5 │ 6 │   │</span><br><span class=\"line\">├──────┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴────────┤     ┌───┐     ├───┼───┼───┼───┤</span><br><span class=\"line\">│ Shift  │ Z │ X │ C │ V │ B │ N │ M │&lt; ,│&gt; .│? /│  Shift   │     │ ↑ │     │ 1 │ 2 │ 3 │   │</span><br><span class=\"line\">├─────┬──┴─┬─┴──┬┴───┴───┴───┴───┴───┴──┬┴───┼───┴┬────┬────┤ ┌───┼───┼───┐ ├───┴───┼───┤ E││</span><br><span class=\"line\">│ Ctrl│    │Alt │         Space         │ Alt│    │    │Ctrl│ │ ← │ ↓ │ → │ │   0   │ . │←─┘│</span><br><span class=\"line\">└─────┴────┴────┴───────────────────────┴────┴────┴────┴────┘ └───┴───┴───┘ └───────┴───┴───┘</span><br><span class=\"line\">*/</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        /*</span><br><span class=\"line\">                           _ooOoo_</span><br><span class=\"line\">                          o8888888o</span><br><span class=\"line\">                          88&quot; . &quot;88</span><br><span class=\"line\">                          (| -_- |)</span><br><span class=\"line\">                          O\\  =  /O</span><br><span class=\"line\">                       ____/`---&apos;\\____</span><br><span class=\"line\">                     .&apos;  \\\\|     |//  `.</span><br><span class=\"line\">                    /  \\\\|||  :  |||//  \\</span><br><span class=\"line\">                   /  _||||| -:- |||||-  \\</span><br><span class=\"line\">                   |   | \\\\\\  -  /// |   |</span><br><span class=\"line\">                   | \\_|  &apos;&apos;\\---/&apos;&apos;  |   |</span><br><span class=\"line\">                   \\  .-\\__  `-`  ___/-. /</span><br><span class=\"line\">                 ___`. .&apos;  /--.--\\  `. . __</span><br><span class=\"line\">              .&quot;&quot; &apos;&lt;  `.___\\_&lt;|&gt;_/___.&apos;  &gt;&apos;&quot;&quot;.</span><br><span class=\"line\">             | | :  `- \\`.;`\\ _ /`;.`/ - ` : | |</span><br><span class=\"line\">             \\  \\ `-.   \\_ __\\ /__ _/   .-` /  /</span><br><span class=\"line\">        ======`-.____`-.___\\_____/___.-`____.-&apos;======</span><br><span class=\"line\">                           `=---=&apos;</span><br><span class=\"line\">        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><br><span class=\"line\">                 佛祖保佑       永无BUG</span><br><span class=\"line\">        */</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        /*</span><br><span class=\"line\">*</span><br><span class=\"line\">*          ┌─┐       ┌─┐</span><br><span class=\"line\">*       ┌──┘ ┴───────┘ ┴──┐</span><br><span class=\"line\">*       │                 │</span><br><span class=\"line\">*       │       ───       │</span><br><span class=\"line\">*       │  ─┬┘       └┬─  │</span><br><span class=\"line\">*       │                 │</span><br><span class=\"line\">*       │       ─┴─       │</span><br><span class=\"line\">*       │                 │</span><br><span class=\"line\">*       └───┐         ┌───┘</span><br><span class=\"line\">*           │         │</span><br><span class=\"line\">*           │         │</span><br><span class=\"line\">*           │         │</span><br><span class=\"line\">*           │         └──────────────┐</span><br><span class=\"line\">*           │                        │</span><br><span class=\"line\">*           │                        ├─┐</span><br><span class=\"line\">*           │                        ┌─┘</span><br><span class=\"line\">*           │                        │</span><br><span class=\"line\">*           └─┐  ┐  ┌───────┬──┐  ┌──┘</span><br><span class=\"line\">*             │ ─┤ ─┤       │ ─┤ ─┤</span><br><span class=\"line\">*             └──┴──┘       └──┴──┘</span><br><span class=\"line\">*                 神兽保佑</span><br><span class=\"line\">*                 代码无BUG!</span><br><span class=\"line\">*/</span><br><span class=\"line\">/**</span><br><span class=\"line\"> *   ┏┓　　　┏┓</span><br><span class=\"line\"> * ┏┛┻━━━┛┻┓</span><br><span class=\"line\"> * ┃　　　　　　　┃</span><br><span class=\"line\"> * ┃　　　━　　　┃</span><br><span class=\"line\"> * ┃　┳┛　┗┳　┃</span><br><span class=\"line\"> * ┃　　　　　　　┃</span><br><span class=\"line\"> * ┃　　　┻　　　┃</span><br><span class=\"line\"> * ┃　　　　　　　┃</span><br><span class=\"line\"> * ┗━┓　　　┏━┛</span><br><span class=\"line\"> *    ┃　　　┃</span><br><span class=\"line\"> *    ┃　　　┃</span><br><span class=\"line\"> *    ┃　　　┗━━━┓</span><br><span class=\"line\"> *    ┃　　　　　　　┣┓</span><br><span class=\"line\"> *    ┃　　　　　　　┏┛</span><br><span class=\"line\"> *    ┗┓┓┏━┳┓┏┛</span><br><span class=\"line\"> *      ┃┫┫　┃┫┫</span><br><span class=\"line\"> *      ┗┻┛　┗┻┛</span><br><span class=\"line\"> *        神兽保佑</span><br><span class=\"line\"> *        代码无BUG!</span><br><span class=\"line\"> */</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> //                      d*##$.</span><br><span class=\"line\">// zP&quot;&quot;&quot;&quot;&quot;$e.           $&quot;    $o</span><br><span class=\"line\">//4$       &apos;$          $&quot;      $</span><br><span class=\"line\">//&apos;$        &apos;$        J$       $F</span><br><span class=\"line\">// &apos;b        $k       $&gt;       $</span><br><span class=\"line\">//  $k        $r     J$       d$</span><br><span class=\"line\">//  &apos;$         $     $&quot;       $~</span><br><span class=\"line\">//   &apos;$        &quot;$   &apos;$E       $</span><br><span class=\"line\">//    $         $L   $&quot;      $F ...</span><br><span class=\"line\">//     $.       4B   $      $$$*&quot;&quot;&quot;*b</span><br><span class=\"line\">//     &apos;$        $.  $$     $$      $F</span><br><span class=\"line\">//      &quot;$       R$  $F     $&quot;      $</span><br><span class=\"line\">//       $k      ?$ u*     dF      .$</span><br><span class=\"line\">//       ^$.      $$&quot;     z$      u$$$$e</span><br><span class=\"line\">//        #$b             $E.dW@e$&quot;    ?$</span><br><span class=\"line\">//         #$           .o$$# d$$$$c    ?F</span><br><span class=\"line\">//          $      .d$$#&quot; . zo$&gt;   #$r .uF</span><br><span class=\"line\">//          $L .u$*&quot;      $&amp;$$$k   .$$d$$F</span><br><span class=\"line\">//           $$&quot;            &quot;&quot;^&quot;$$$P&quot;$P9$</span><br><span class=\"line\">//          JP              .o$$$$u:$P $$</span><br><span class=\"line\">//          $          ..ue$&quot;      &quot;&quot;  $&quot;</span><br><span class=\"line\">//         d$          $F              $</span><br><span class=\"line\">//         $$     ....udE             4B</span><br><span class=\"line\">//          #$    &quot;&quot;&quot;&quot;` $r            @$</span><br><span class=\"line\">//           ^$L        &apos;$            $F</span><br><span class=\"line\">//             RN        4N           $</span><br><span class=\"line\">//              *$b                  d$</span><br><span class=\"line\">//               $$k                 $F</span><br><span class=\"line\">//               $$b                $F</span><br><span class=\"line\">//                 $&quot;&quot;               $F</span><br><span class=\"line\">//                 &apos;$                $</span><br><span class=\"line\">//                  $L               $</span><br><span class=\"line\">//                  &apos;$               $</span><br><span class=\"line\">//                   $               $</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">书本代码注释</span><br><span class=\"line\"></span><br><span class=\"line\">//                .-~~~~~~~~~-._       _.-~~~~~~~~~-.</span><br><span class=\"line\">//            __.&apos;              ~.   .~              `.__</span><br><span class=\"line\">//          .&apos;//                  \\./                  \\\\`.</span><br><span class=\"line\">//        .&apos;//                     |                     \\\\`.</span><br><span class=\"line\">//      .&apos;// .-~&quot;&quot;&quot;&quot;&quot;&quot;&quot;~~~~-._     |     _,-~~~~&quot;&quot;&quot;&quot;&quot;&quot;&quot;~-. \\\\`.</span><br><span class=\"line\">//    .&apos;//.-&quot;                 `-.  |  .-&apos;                 &quot;-.\\\\`.</span><br><span class=\"line\">//  .&apos;//______.============-..   \\ | /   ..-============.______\\\\`.</span><br><span class=\"line\">//.&apos;______________________________\\|/______________________________`.</span><br><span class=\"line\">微软经典图标代码注释</span><br><span class=\"line\"></span><br><span class=\"line\">        /*</span><br><span class=\"line\">                         __</span><br><span class=\"line\">                    ,-~¨^  ^¨-,           _,</span><br><span class=\"line\">                   /          / ;^-._...,¨/</span><br><span class=\"line\">                  /          / /         /</span><br><span class=\"line\">                 /          / /         /</span><br><span class=\"line\">                /          / /         /</span><br><span class=\"line\">               /,.-:&apos;&apos;-,_ / /         /</span><br><span class=\"line\">               _,.-:--._ ^ ^:-._ __../</span><br><span class=\"line\">             /^         / /¨:.._¨__.;</span><br><span class=\"line\">            /          / /      ^  /</span><br><span class=\"line\">           /          / /         /</span><br><span class=\"line\">          /          / /         /</span><br><span class=\"line\">         /_,.--:^-._/ /         /</span><br><span class=\"line\">        ^            ^¨¨-.___.:^  (R) - G33K</span><br><span class=\"line\"></span><br><span class=\"line\">        */</span><br><span class=\"line\">谷歌google代码注释</span><br><span class=\"line\"></span><br><span class=\"line\">        /*</span><br><span class=\"line\">          ___                _</span><br><span class=\"line\">         / __|___  ___  __ _| |___</span><br><span class=\"line\">        | (_ / _ \\/ _ \\/ _` |   -_)</span><br><span class=\"line\">         \\___\\___/\\___/\\__, |_\\___|</span><br><span class=\"line\">                       |___/</span><br><span class=\"line\"></span><br><span class=\"line\">        */</span><br><span class=\"line\">奥运五环代码注释</span><br><span class=\"line\"></span><br><span class=\"line\">        /*</span><br><span class=\"line\">              _.-&quot;&quot;&quot;&quot;&quot;-._         _.-&quot;&quot;&quot;&quot;&quot;-._         _.-&quot;&quot;&quot;&quot;&quot;-._</span><br><span class=\"line\">           ,&apos;           `.     ,&apos;           `.     ,&apos;           `.</span><br><span class=\"line\">          /               \\   /               \\   /               \\</span><br><span class=\"line\">         |                 | |                 | |                 |</span><br><span class=\"line\">        |                   |                   |                   |</span><br><span class=\"line\">        |                   |                   |                   |</span><br><span class=\"line\">         |             _.-&quot;|&quot;|&quot;-._         _.-&quot;|&quot;|&quot;-._             |</span><br><span class=\"line\">          \\          ,&apos;   /   \\   `.     ,&apos;   /   \\   `.          /</span><br><span class=\"line\">           `.       /   ,&apos;     `.   \\   /   ,&apos;     `.   \\       ,&apos;</span><br><span class=\"line\">             `-..__|..-&apos;         `-..|_|..-&apos;         `-..|__..-&apos;</span><br><span class=\"line\">                  |                   |                   |</span><br><span class=\"line\">                  |                   |                   |</span><br><span class=\"line\">                   |                 | |                 |</span><br><span class=\"line\">                    \\               /   \\               /</span><br><span class=\"line\">                     `.           ,&apos;     `.           ,&apos;</span><br><span class=\"line\">                       `-..___..-&apos;         `-..___..-&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">         */</span><br><span class=\"line\"></span><br><span class=\"line\">         电脑图像代码注释</span><br><span class=\"line\"></span><br><span class=\"line\">        /*</span><br><span class=\"line\">                     ,----------------,              ,---------,</span><br><span class=\"line\">                ,-----------------------,          ,&quot;        ,&quot;|</span><br><span class=\"line\">              ,&quot;                      ,&quot;|        ,&quot;        ,&quot;  |</span><br><span class=\"line\">             +-----------------------+  |      ,&quot;        ,&quot;    |</span><br><span class=\"line\">             |  .-----------------.  |  |     +---------+      |</span><br><span class=\"line\">             |  |                 |  |  |     | -==----&apos;|      |</span><br><span class=\"line\">             |  |  I LOVE DOS!    |  |  |     |         |      |</span><br><span class=\"line\">             |  |  Bad command or |  |  |/----|`---=    |      |</span><br><span class=\"line\">             |  |  C:\\&gt;_          |  |  |   ,/|==== ooo |      ;</span><br><span class=\"line\">             |  |                 |  |  |  // |(((( [33]|    ,&quot;</span><br><span class=\"line\">             |  `-----------------&apos;  |,&quot; .;&apos;| |((((     |  ,&quot;</span><br><span class=\"line\">             +-----------------------+  ;;  | |         |,&quot;</span><br><span class=\"line\">                /_)______________(_/  //&apos;   | +---------+</span><br><span class=\"line\">           ___________________________/___  `,</span><br><span class=\"line\">          /  oooooooooooooooo  .o.  oooo /,   \\,&quot;-----------</span><br><span class=\"line\">         / ==ooooooooooooooo==.o.  ooo= //   ,`\\--&#123;)B     ,&quot;</span><br><span class=\"line\">        /_==__==========__==_ooo__ooo=_/&apos;   /___________,&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">        */</span><br><span class=\"line\">        /*</span><br><span class=\"line\">                                    _________</span><br><span class=\"line\">                                   /         /.</span><br><span class=\"line\">            .-------------.       /_________/ |</span><br><span class=\"line\">           /             / |      |         | |</span><br><span class=\"line\">          /+============+\\ |      | |====|  | |</span><br><span class=\"line\">          ||C:\\&gt;        || |      |         | |</span><br><span class=\"line\">          ||            || |      | |====|  | |</span><br><span class=\"line\">          ||            || |      |   ___   | |</span><br><span class=\"line\">          ||            || |      |  |166|  | |</span><br><span class=\"line\">          ||            ||/@@@    |   ---   | |</span><br><span class=\"line\">          \\+============+/    @   |_________|./.</span><br><span class=\"line\">                             @          ..  ....&apos;</span><br><span class=\"line\">          ..................@     __.&apos;.&apos;  &apos;&apos;</span><br><span class=\"line\">         /oooooooooooooooo//     ///</span><br><span class=\"line\">        /................//     /_/</span><br><span class=\"line\">        ------------------</span><br><span class=\"line\">        */</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    /* 标准键盘布局</span><br><span class=\"line\">┌───┐   ┌───┬───┬───┬───┐ ┌───┬───┬───┬───┐ ┌───┬───┬───┬───┐ ┌───┬───┬───┐</span><br><span class=\"line\">│Esc│   │ F1│ F2│ F3│ F4│ │ F5│ F6│ F7│ F8│ │ F9│F10│F11│F12│ │P/S│S L│P/B│  ┌┐    ┌┐    ┌┐</span><br><span class=\"line\">└───┘   └───┴───┴───┴───┘ └───┴───┴───┴───┘ └───┴───┴───┴───┘ └───┴───┴───┘  └┘    └┘    └┘</span><br><span class=\"line\">┌───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───────┐ ┌───┬───┬───┐ ┌───┬───┬───┬───┐</span><br><span class=\"line\">│~ `│! 1│@ 2│# 3│$ 4│% 5│^ 6│&amp; 7│* 8│( 9│) 0│_ -│+ =│ BacSp │ │Ins│Hom│PUp│ │N L│ / │ * │ - │</span><br><span class=\"line\">├───┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─────┤ ├───┼───┼───┤ ├───┼───┼───┼───┤</span><br><span class=\"line\">│ Tab │ Q │ W │ E │ R │ T │ Y │ U │ I │ O │ P │&#123; [│&#125; ]│ | \\ │ │Del│End│PDn│ │ 7 │ 8 │ 9 │   │</span><br><span class=\"line\">├─────┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴─────┤ └───┴───┴───┘ ├───┼───┼───┤ + │</span><br><span class=\"line\">│ Caps │ A │ S │ D │ F │ G │ H │ J │ K │ L │: ;│&quot; &apos;│ Enter  │               │ 4 │ 5 │ 6 │   │</span><br><span class=\"line\">├──────┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴────────┤     ┌───┐     ├───┼───┼───┼───┤</span><br><span class=\"line\">│ Shift  │ Z │ X │ C │ V │ B │ N │ M │&lt; ,│&gt; .│? /│  Shift   │     │ ↑ │     │ 1 │ 2 │ 3 │   │</span><br><span class=\"line\">├─────┬──┴─┬─┴──┬┴───┴───┴───┴───┴───┴──┬┴───┼───┴┬────┬────┤ ┌───┼───┼───┐ ├───┴───┼───┤ E││</span><br><span class=\"line\">│ Ctrl│    │Alt │         Space         │ Alt│    │    │Ctrl│ │ ← │ ↓ │ → │ │   0   │ . │←─┘│</span><br><span class=\"line\">└─────┴────┴────┴───────────────────────┴────┴────┴────┴────┘ └───┴───┴───┘ └───────┴───┴───┘</span><br><span class=\"line\">*/</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        /*</span><br><span class=\"line\">                           _ooOoo_</span><br><span class=\"line\">                          o8888888o</span><br><span class=\"line\">                          88&quot; . &quot;88</span><br><span class=\"line\">                          (| -_- |)</span><br><span class=\"line\">                          O\\  =  /O</span><br><span class=\"line\">                       ____/`---&apos;\\____</span><br><span class=\"line\">                     .&apos;  \\\\|     |//  `.</span><br><span class=\"line\">                    /  \\\\|||  :  |||//  \\</span><br><span class=\"line\">                   /  _||||| -:- |||||-  \\</span><br><span class=\"line\">                   |   | \\\\\\  -  /// |   |</span><br><span class=\"line\">                   | \\_|  &apos;&apos;\\---/&apos;&apos;  |   |</span><br><span class=\"line\">                   \\  .-\\__  `-`  ___/-. /</span><br><span class=\"line\">                 ___`. .&apos;  /--.--\\  `. . __</span><br><span class=\"line\">              .&quot;&quot; &apos;&lt;  `.___\\_&lt;|&gt;_/___.&apos;  &gt;&apos;&quot;&quot;.</span><br><span class=\"line\">             | | :  `- \\`.;`\\ _ /`;.`/ - ` : | |</span><br><span class=\"line\">             \\  \\ `-.   \\_ __\\ /__ _/   .-` /  /</span><br><span class=\"line\">        ======`-.____`-.___\\_____/___.-`____.-&apos;======</span><br><span class=\"line\">                           `=---=&apos;</span><br><span class=\"line\">        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><br><span class=\"line\">                 佛祖保佑       永无BUG</span><br><span class=\"line\">        */</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        /*</span><br><span class=\"line\">*</span><br><span class=\"line\">*          ┌─┐       ┌─┐</span><br><span class=\"line\">*       ┌──┘ ┴───────┘ ┴──┐</span><br><span class=\"line\">*       │                 │</span><br><span class=\"line\">*       │       ───       │</span><br><span class=\"line\">*       │  ─┬┘       └┬─  │</span><br><span class=\"line\">*       │                 │</span><br><span class=\"line\">*       │       ─┴─       │</span><br><span class=\"line\">*       │                 │</span><br><span class=\"line\">*       └───┐         ┌───┘</span><br><span class=\"line\">*           │         │</span><br><span class=\"line\">*           │         │</span><br><span class=\"line\">*           │         │</span><br><span class=\"line\">*           │         └──────────────┐</span><br><span class=\"line\">*           │                        │</span><br><span class=\"line\">*           │                        ├─┐</span><br><span class=\"line\">*           │                        ┌─┘</span><br><span class=\"line\">*           │                        │</span><br><span class=\"line\">*           └─┐  ┐  ┌───────┬──┐  ┌──┘</span><br><span class=\"line\">*             │ ─┤ ─┤       │ ─┤ ─┤</span><br><span class=\"line\">*             └──┴──┘       └──┴──┘</span><br><span class=\"line\">*                 神兽保佑</span><br><span class=\"line\">*                 代码无BUG!</span><br><span class=\"line\">*/</span><br><span class=\"line\">/**</span><br><span class=\"line\"> *   ┏┓　　　┏┓</span><br><span class=\"line\"> * ┏┛┻━━━┛┻┓</span><br><span class=\"line\"> * ┃　　　　　　　┃</span><br><span class=\"line\"> * ┃　　　━　　　┃</span><br><span class=\"line\"> * ┃　┳┛　┗┳　┃</span><br><span class=\"line\"> * ┃　　　　　　　┃</span><br><span class=\"line\"> * ┃　　　┻　　　┃</span><br><span class=\"line\"> * ┃　　　　　　　┃</span><br><span class=\"line\"> * ┗━┓　　　┏━┛</span><br><span class=\"line\"> *    ┃　　　┃</span><br><span class=\"line\"> *    ┃　　　┃</span><br><span class=\"line\"> *    ┃　　　┗━━━┓</span><br><span class=\"line\"> *    ┃　　　　　　　┣┓</span><br><span class=\"line\"> *    ┃　　　　　　　┏┛</span><br><span class=\"line\"> *    ┗┓┓┏━┳┓┏┛</span><br><span class=\"line\"> *      ┃┫┫　┃┫┫</span><br><span class=\"line\"> *      ┗┻┛　┗┻┛</span><br><span class=\"line\"> *        神兽保佑</span><br><span class=\"line\"> *        代码无BUG!</span><br><span class=\"line\"> */</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> //                      d*##$.</span><br><span class=\"line\">// zP&quot;&quot;&quot;&quot;&quot;$e.           $&quot;    $o</span><br><span class=\"line\">//4$       &apos;$          $&quot;      $</span><br><span class=\"line\">//&apos;$        &apos;$        J$       $F</span><br><span class=\"line\">// &apos;b        $k       $&gt;       $</span><br><span class=\"line\">//  $k        $r     J$       d$</span><br><span class=\"line\">//  &apos;$         $     $&quot;       $~</span><br><span class=\"line\">//   &apos;$        &quot;$   &apos;$E       $</span><br><span class=\"line\">//    $         $L   $&quot;      $F ...</span><br><span class=\"line\">//     $.       4B   $      $$$*&quot;&quot;&quot;*b</span><br><span class=\"line\">//     &apos;$        $.  $$     $$      $F</span><br><span class=\"line\">//      &quot;$       R$  $F     $&quot;      $</span><br><span class=\"line\">//       $k      ?$ u*     dF      .$</span><br><span class=\"line\">//       ^$.      $$&quot;     z$      u$$$$e</span><br><span class=\"line\">//        #$b             $E.dW@e$&quot;    ?$</span><br><span class=\"line\">//         #$           .o$$# d$$$$c    ?F</span><br><span class=\"line\">//          $      .d$$#&quot; . zo$&gt;   #$r .uF</span><br><span class=\"line\">//          $L .u$*&quot;      $&amp;$$$k   .$$d$$F</span><br><span class=\"line\">//           $$&quot;            &quot;&quot;^&quot;$$$P&quot;$P9$</span><br><span class=\"line\">//          JP              .o$$$$u:$P $$</span><br><span class=\"line\">//          $          ..ue$&quot;      &quot;&quot;  $&quot;</span><br><span class=\"line\">//         d$          $F              $</span><br><span class=\"line\">//         $$     ....udE             4B</span><br><span class=\"line\">//          #$    &quot;&quot;&quot;&quot;` $r            @$</span><br><span class=\"line\">//           ^$L        &apos;$            $F</span><br><span class=\"line\">//             RN        4N           $</span><br><span class=\"line\">//              *$b                  d$</span><br><span class=\"line\">//               $$k                 $F</span><br><span class=\"line\">//               $$b                $F</span><br><span class=\"line\">//                 $&quot;&quot;               $F</span><br><span class=\"line\">//                 &apos;$                $</span><br><span class=\"line\">//                  $L               $</span><br><span class=\"line\">//                  &apos;$               $</span><br><span class=\"line\">//                   $               $</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">书本代码注释</span><br><span class=\"line\"></span><br><span class=\"line\">//                .-~~~~~~~~~-._       _.-~~~~~~~~~-.</span><br><span class=\"line\">//            __.&apos;              ~.   .~              `.__</span><br><span class=\"line\">//          .&apos;//                  \\./                  \\\\`.</span><br><span class=\"line\">//        .&apos;//                     |                     \\\\`.</span><br><span class=\"line\">//      .&apos;// .-~&quot;&quot;&quot;&quot;&quot;&quot;&quot;~~~~-._     |     _,-~~~~&quot;&quot;&quot;&quot;&quot;&quot;&quot;~-. \\\\`.</span><br><span class=\"line\">//    .&apos;//.-&quot;                 `-.  |  .-&apos;                 &quot;-.\\\\`.</span><br><span class=\"line\">//  .&apos;//______.============-..   \\ | /   ..-============.______\\\\`.</span><br><span class=\"line\">//.&apos;______________________________\\|/______________________________`.</span><br><span class=\"line\">微软经典图标代码注释</span><br><span class=\"line\"></span><br><span class=\"line\">        /*</span><br><span class=\"line\">                         __</span><br><span class=\"line\">                    ,-~¨^  ^¨-,           _,</span><br><span class=\"line\">                   /          / ;^-._...,¨/</span><br><span class=\"line\">                  /          / /         /</span><br><span class=\"line\">                 /          / /         /</span><br><span class=\"line\">                /          / /         /</span><br><span class=\"line\">               /,.-:&apos;&apos;-,_ / /         /</span><br><span class=\"line\">               _,.-:--._ ^ ^:-._ __../</span><br><span class=\"line\">             /^         / /¨:.._¨__.;</span><br><span class=\"line\">            /          / /      ^  /</span><br><span class=\"line\">           /          / /         /</span><br><span class=\"line\">          /          / /         /</span><br><span class=\"line\">         /_,.--:^-._/ /         /</span><br><span class=\"line\">        ^            ^¨¨-.___.:^  (R) - G33K</span><br><span class=\"line\"></span><br><span class=\"line\">        */</span><br><span class=\"line\">谷歌google代码注释</span><br><span class=\"line\"></span><br><span class=\"line\">        /*</span><br><span class=\"line\">          ___                _</span><br><span class=\"line\">         / __|___  ___  __ _| |___</span><br><span class=\"line\">        | (_ / _ \\/ _ \\/ _` |   -_)</span><br><span class=\"line\">         \\___\\___/\\___/\\__, |_\\___|</span><br><span class=\"line\">                       |___/</span><br><span class=\"line\"></span><br><span class=\"line\">        */</span><br><span class=\"line\">奥运五环代码注释</span><br><span class=\"line\"></span><br><span class=\"line\">        /*</span><br><span class=\"line\">              _.-&quot;&quot;&quot;&quot;&quot;-._         _.-&quot;&quot;&quot;&quot;&quot;-._         _.-&quot;&quot;&quot;&quot;&quot;-._</span><br><span class=\"line\">           ,&apos;           `.     ,&apos;           `.     ,&apos;           `.</span><br><span class=\"line\">          /               \\   /               \\   /               \\</span><br><span class=\"line\">         |                 | |                 | |                 |</span><br><span class=\"line\">        |                   |                   |                   |</span><br><span class=\"line\">        |                   |                   |                   |</span><br><span class=\"line\">         |             _.-&quot;|&quot;|&quot;-._         _.-&quot;|&quot;|&quot;-._             |</span><br><span class=\"line\">          \\          ,&apos;   /   \\   `.     ,&apos;   /   \\   `.          /</span><br><span class=\"line\">           `.       /   ,&apos;     `.   \\   /   ,&apos;     `.   \\       ,&apos;</span><br><span class=\"line\">             `-..__|..-&apos;         `-..|_|..-&apos;         `-..|__..-&apos;</span><br><span class=\"line\">                  |                   |                   |</span><br><span class=\"line\">                  |                   |                   |</span><br><span class=\"line\">                   |                 | |                 |</span><br><span class=\"line\">                    \\               /   \\               /</span><br><span class=\"line\">                     `.           ,&apos;     `.           ,&apos;</span><br><span class=\"line\">                       `-..___..-&apos;         `-..___..-&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">         */</span><br><span class=\"line\"></span><br><span class=\"line\">         电脑图像代码注释</span><br><span class=\"line\"></span><br><span class=\"line\">        /*</span><br><span class=\"line\">                     ,----------------,              ,---------,</span><br><span class=\"line\">                ,-----------------------,          ,&quot;        ,&quot;|</span><br><span class=\"line\">              ,&quot;                      ,&quot;|        ,&quot;        ,&quot;  |</span><br><span class=\"line\">             +-----------------------+  |      ,&quot;        ,&quot;    |</span><br><span class=\"line\">             |  .-----------------.  |  |     +---------+      |</span><br><span class=\"line\">             |  |                 |  |  |     | -==----&apos;|      |</span><br><span class=\"line\">             |  |  I LOVE DOS!    |  |  |     |         |      |</span><br><span class=\"line\">             |  |  Bad command or |  |  |/----|`---=    |      |</span><br><span class=\"line\">             |  |  C:\\&gt;_          |  |  |   ,/|==== ooo |      ;</span><br><span class=\"line\">             |  |                 |  |  |  // |(((( [33]|    ,&quot;</span><br><span class=\"line\">             |  `-----------------&apos;  |,&quot; .;&apos;| |((((     |  ,&quot;</span><br><span class=\"line\">             +-----------------------+  ;;  | |         |,&quot;</span><br><span class=\"line\">                /_)______________(_/  //&apos;   | +---------+</span><br><span class=\"line\">           ___________________________/___  `,</span><br><span class=\"line\">          /  oooooooooooooooo  .o.  oooo /,   \\,&quot;-----------</span><br><span class=\"line\">         / ==ooooooooooooooo==.o.  ooo= //   ,`\\--&#123;)B     ,&quot;</span><br><span class=\"line\">        /_==__==========__==_ooo__ooo=_/&apos;   /___________,&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">        */</span><br><span class=\"line\">        /*</span><br><span class=\"line\">                                    _________</span><br><span class=\"line\">                                   /         /.</span><br><span class=\"line\">            .-------------.       /_________/ |</span><br><span class=\"line\">           /             / |      |         | |</span><br><span class=\"line\">          /+============+\\ |      | |====|  | |</span><br><span class=\"line\">          ||C:\\&gt;        || |      |         | |</span><br><span class=\"line\">          ||            || |      | |====|  | |</span><br><span class=\"line\">          ||            || |      |   ___   | |</span><br><span class=\"line\">          ||            || |      |  |166|  | |</span><br><span class=\"line\">          ||            ||/@@@    |   ---   | |</span><br><span class=\"line\">          \\+============+/    @   |_________|./.</span><br><span class=\"line\">                             @          ..  ....&apos;</span><br><span class=\"line\">          ..................@     __.&apos;.&apos;  &apos;&apos;</span><br><span class=\"line\">         /oooooooooooooooo//     ///</span><br><span class=\"line\">        /................//     /_/</span><br><span class=\"line\">        ------------------</span><br><span class=\"line\">        */</span><br></pre></td></tr></table></figure>\n"},{"title":"前端js综合经典面试题","date":"2019-07-15T13:09:18.000Z","_content":"## 前记\n前些时间，面试中写的笔试题，偶然的机会做了两次，最后还是错了几道，结果回来在网上一挡，哎。。不过说实话，该公司面试题道道都是经典题，的确不错，长知识了。\n## 题目\n``` javascript\nfunction Foo() {\n\tgetName = function() {console.log(1);};\n\treturn this;\n}\nFoo.getName = function() {console.log(2);};\nFoo.prototype.getName = function() {console.log(3);};\nvar getName = function() {console.log(4);};\nfunction getName() {console.log(5);}\n\n//以下输出值为多少？\nFoo.getName();\ngetName();\nFoo().getName();\ngetName();\nnew Foo.getName();\nnew Foo().getName();\nnew new Foo().getName();\n```\n## 答案\n2 4 1 1 2 3 3\n## 分析\n### 考察知识点分析\n<table><tr><td bgcolor=yellow><font color=Blue>逻辑运算符、运算符的优先级、声明变量和声明函数的提升优先级、原型继承、闭包</font></td></tr></table>\n\n### 步骤分析\n#### 1.函数和变量提升\n``` javascript\nFoo.getName();  // 2\ngetName();      // 4\n```\n##### 第一问 Foo.getName();\n第5行代码 Foo创建了一个叫getName的静态属性存储了一个匿名函数， 则第一问的答案就是Foo的静态函数返回 。 2\n\n##### 第二问 getName();\n var getName 与 function getName 都是声明语句，区别在于 var getName 是函数表达式，而 function getName 是函数声明。函数声明会提前\n 小例子\n ``` javascript\n  console.log(a);//输出：function a(){}\n  var a=1;\n  function a(){}\n ```\n原题中代码最终执行时的是\n``` javascript\nfunction Foo() {\n getName = function () { console.log(1); };\n return this;\n}\nvar getName;//只提升变量声明\nfunction getName() { console.log(5);}//提升函数声明，覆盖var的声明\n \nFoo.getName = function () { console.log(2);};\nFoo.prototype.getName = function () { console.log(3);};\ngetName = function () { console.log(4);};//最终的赋值再次覆盖function getName声明\ngetName();//最终输出4\n\n```\n#### 函数和作用域\n##### 第三问 Foo().getName() 与第四问 getName();\nFoo().getName(); 先执行了Foo函数，然后调用Foo函数的返回值对象的getName属性函数\n\n1、Foo的函数体内，getName是没有用var声明的，所以getName是一个全局变量。\n\n2、Foo()的意思是运行Foo的函数体，这个函数体中做的事情就是，把全局变量getName的函数体替换成console.log(1)。\n3、Foo函数体的返回值是this，这里的this指向的是window对象。Foo().getName();就相当于window.getName();，也就是直接调用getName()函数，显示结果就是1。\n4、此时的window.getName(), getName(), Foo().getName()是等价的，如不熟悉this指向问题，[可点击](https://chengheai.github.io/2019/07/08/%E6%9C%89%E5%85%B3%E5%89%8D%E7%AB%AFjs%E4%B8%ADthis%E6%8C%87%E5%90%91%E7%9A%84%E9%97%AE%E9%A2%98%E7%AC%94%E8%AE%B0/)\n#### 运算符和优先级\n[优先级汇总表](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence)\n\n从以上的运算符优先级资料中可以看出，\".\"运算符的优先级是比\"new\"运算符的优先级高的。\n##### 第五问 new Foo.getName()\n分析\n1、相当于new (Foo.getName)();\n2、执行Foo.getName函数，这时候就已经输出2了\n3、实例化一个对象\n\n所以实际上将getName函数作为了构造函数来执行，故打印2。\n##### 第六问 new Foo().getName()\n1、相当于(new Foo()).getName();\n.运算符的优先级是19，就是指.会优于其他运算符之前执行，但是执行点的时候，是按照点前和点后的表达式依次执行的，因为Foo后面有个括号，而圆括号的优先级是20，所以new运算符是归Foo()这个函数的。\n2、函数中返回的是this，而this在构造函数中本来就代表当前实例化对象，遂最终Foo函数返回实例化对象。\n之后调用实例化对象的getName函数，因为在Foo构造函数中没有为实例化对象添加任何属性，遂到当前对象的原型对象（prototype）中寻找getName，找到了。[构造函数中自定书写return问题](https://chengheai.github.io/2019/07/15/%E5%85%B3%E4%BA%8Ejs%E4%B8%AD%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E6%89%8B%E5%86%99return%E7%9A%84%E5%BD%B1%E5%93%8D/)\n3、执行new Foo()，实例化一个对象，这个对象中拥有Foo.prototype.getName方法。\n4、执行.getName()，调用Foo.prototype.getName方法，输出为3。\n##### 第七问 new new Foo().getName()\n\n最终运行代码 new ((new Foo()).getName)();\n先初始化Foo的实例化对象，然后将其原型上的getName函数作为构造函数再次new\n1、.运算符的优先级是19，就是指.会优于其他运算符之前执行。执行点的时候，是按照点前和点后的表达式依次执行的。\n看看左边的new new Foo()，带参数的new优先级是比不带参数的new优先级高的，所以左边的部分就相当于new (new Foo())\n什么是带参数的new：new Foo()\n什么是不带参数的new：new Foo\n2、执行(new Foo()).getName()，相当于foo.getName()。\nfoo是new Foo()出来后的实例，这个结果和题目2是一样的。这时候已经输出3了。\n3、执行new，实例化一个对象\n\n\n","source":"_posts/前端js综合经典面试题.md","raw":"---\ntitle: 前端js综合经典面试题\ndate: 2019-07-15 21:09:18\ntags: ['面试题']\n---\n## 前记\n前些时间，面试中写的笔试题，偶然的机会做了两次，最后还是错了几道，结果回来在网上一挡，哎。。不过说实话，该公司面试题道道都是经典题，的确不错，长知识了。\n## 题目\n``` javascript\nfunction Foo() {\n\tgetName = function() {console.log(1);};\n\treturn this;\n}\nFoo.getName = function() {console.log(2);};\nFoo.prototype.getName = function() {console.log(3);};\nvar getName = function() {console.log(4);};\nfunction getName() {console.log(5);}\n\n//以下输出值为多少？\nFoo.getName();\ngetName();\nFoo().getName();\ngetName();\nnew Foo.getName();\nnew Foo().getName();\nnew new Foo().getName();\n```\n## 答案\n2 4 1 1 2 3 3\n## 分析\n### 考察知识点分析\n<table><tr><td bgcolor=yellow><font color=Blue>逻辑运算符、运算符的优先级、声明变量和声明函数的提升优先级、原型继承、闭包</font></td></tr></table>\n\n### 步骤分析\n#### 1.函数和变量提升\n``` javascript\nFoo.getName();  // 2\ngetName();      // 4\n```\n##### 第一问 Foo.getName();\n第5行代码 Foo创建了一个叫getName的静态属性存储了一个匿名函数， 则第一问的答案就是Foo的静态函数返回 。 2\n\n##### 第二问 getName();\n var getName 与 function getName 都是声明语句，区别在于 var getName 是函数表达式，而 function getName 是函数声明。函数声明会提前\n 小例子\n ``` javascript\n  console.log(a);//输出：function a(){}\n  var a=1;\n  function a(){}\n ```\n原题中代码最终执行时的是\n``` javascript\nfunction Foo() {\n getName = function () { console.log(1); };\n return this;\n}\nvar getName;//只提升变量声明\nfunction getName() { console.log(5);}//提升函数声明，覆盖var的声明\n \nFoo.getName = function () { console.log(2);};\nFoo.prototype.getName = function () { console.log(3);};\ngetName = function () { console.log(4);};//最终的赋值再次覆盖function getName声明\ngetName();//最终输出4\n\n```\n#### 函数和作用域\n##### 第三问 Foo().getName() 与第四问 getName();\nFoo().getName(); 先执行了Foo函数，然后调用Foo函数的返回值对象的getName属性函数\n\n1、Foo的函数体内，getName是没有用var声明的，所以getName是一个全局变量。\n\n2、Foo()的意思是运行Foo的函数体，这个函数体中做的事情就是，把全局变量getName的函数体替换成console.log(1)。\n3、Foo函数体的返回值是this，这里的this指向的是window对象。Foo().getName();就相当于window.getName();，也就是直接调用getName()函数，显示结果就是1。\n4、此时的window.getName(), getName(), Foo().getName()是等价的，如不熟悉this指向问题，[可点击](https://chengheai.github.io/2019/07/08/%E6%9C%89%E5%85%B3%E5%89%8D%E7%AB%AFjs%E4%B8%ADthis%E6%8C%87%E5%90%91%E7%9A%84%E9%97%AE%E9%A2%98%E7%AC%94%E8%AE%B0/)\n#### 运算符和优先级\n[优先级汇总表](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence)\n\n从以上的运算符优先级资料中可以看出，\".\"运算符的优先级是比\"new\"运算符的优先级高的。\n##### 第五问 new Foo.getName()\n分析\n1、相当于new (Foo.getName)();\n2、执行Foo.getName函数，这时候就已经输出2了\n3、实例化一个对象\n\n所以实际上将getName函数作为了构造函数来执行，故打印2。\n##### 第六问 new Foo().getName()\n1、相当于(new Foo()).getName();\n.运算符的优先级是19，就是指.会优于其他运算符之前执行，但是执行点的时候，是按照点前和点后的表达式依次执行的，因为Foo后面有个括号，而圆括号的优先级是20，所以new运算符是归Foo()这个函数的。\n2、函数中返回的是this，而this在构造函数中本来就代表当前实例化对象，遂最终Foo函数返回实例化对象。\n之后调用实例化对象的getName函数，因为在Foo构造函数中没有为实例化对象添加任何属性，遂到当前对象的原型对象（prototype）中寻找getName，找到了。[构造函数中自定书写return问题](https://chengheai.github.io/2019/07/15/%E5%85%B3%E4%BA%8Ejs%E4%B8%AD%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E6%89%8B%E5%86%99return%E7%9A%84%E5%BD%B1%E5%93%8D/)\n3、执行new Foo()，实例化一个对象，这个对象中拥有Foo.prototype.getName方法。\n4、执行.getName()，调用Foo.prototype.getName方法，输出为3。\n##### 第七问 new new Foo().getName()\n\n最终运行代码 new ((new Foo()).getName)();\n先初始化Foo的实例化对象，然后将其原型上的getName函数作为构造函数再次new\n1、.运算符的优先级是19，就是指.会优于其他运算符之前执行。执行点的时候，是按照点前和点后的表达式依次执行的。\n看看左边的new new Foo()，带参数的new优先级是比不带参数的new优先级高的，所以左边的部分就相当于new (new Foo())\n什么是带参数的new：new Foo()\n什么是不带参数的new：new Foo\n2、执行(new Foo()).getName()，相当于foo.getName()。\nfoo是new Foo()出来后的实例，这个结果和题目2是一样的。这时候已经输出3了。\n3、执行new，实例化一个对象\n\n\n","slug":"前端js综合经典面试题","published":1,"updated":"2021-10-09T08:48:32.085Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzac7002t5c542eprxjls","content":"<h2 id=\"前记\"><a href=\"#前记\" class=\"headerlink\" title=\"前记\"></a>前记</h2><p>前些时间，面试中写的笔试题，偶然的机会做了两次，最后还是错了几道，结果回来在网上一挡，哎。。不过说实话，该公司面试题道道都是经典题，的确不错，长知识了。</p>\n<h2 id=\"题目\"><a href=\"#题目\" class=\"headerlink\" title=\"题目\"></a>题目</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Foo</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\tgetName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;<span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>);&#125;;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Foo.getName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;<span class=\"built_in\">console</span>.log(<span class=\"number\">2</span>);&#125;;</span><br><span class=\"line\">Foo.prototype.getName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;<span class=\"built_in\">console</span>.log(<span class=\"number\">3</span>);&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> getName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;<span class=\"built_in\">console</span>.log(<span class=\"number\">4</span>);&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getName</span>(<span class=\"params\"></span>) </span>&#123;<span class=\"built_in\">console</span>.log(<span class=\"number\">5</span>);&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//以下输出值为多少？</span></span><br><span class=\"line\">Foo.getName();</span><br><span class=\"line\">getName();</span><br><span class=\"line\">Foo().getName();</span><br><span class=\"line\">getName();</span><br><span class=\"line\"><span class=\"keyword\">new</span> Foo.getName();</span><br><span class=\"line\"><span class=\"keyword\">new</span> Foo().getName();</span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"keyword\">new</span> Foo().getName();</span><br></pre></td></tr></table></figure>\n<h2 id=\"答案\"><a href=\"#答案\" class=\"headerlink\" title=\"答案\"></a>答案</h2><p>2 4 1 1 2 3 3</p>\n<h2 id=\"分析\"><a href=\"#分析\" class=\"headerlink\" title=\"分析\"></a>分析</h2><h3 id=\"考察知识点分析\"><a href=\"#考察知识点分析\" class=\"headerlink\" title=\"考察知识点分析\"></a>考察知识点分析</h3><table><tr><td bgcolor=\"yellow\"><font color=\"Blue\">逻辑运算符、运算符的优先级、声明变量和声明函数的提升优先级、原型继承、闭包</font></td></tr></table>\n\n<h3 id=\"步骤分析\"><a href=\"#步骤分析\" class=\"headerlink\" title=\"步骤分析\"></a>步骤分析</h3><h4 id=\"1-函数和变量提升\"><a href=\"#1-函数和变量提升\" class=\"headerlink\" title=\"1.函数和变量提升\"></a>1.函数和变量提升</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Foo.getName();  <span class=\"comment\">// 2</span></span><br><span class=\"line\">getName();      <span class=\"comment\">// 4</span></span><br></pre></td></tr></table></figure>\n<h5 id=\"第一问-Foo-getName\"><a href=\"#第一问-Foo-getName\" class=\"headerlink\" title=\"第一问 Foo.getName();\"></a>第一问 Foo.getName();</h5><p>第5行代码 Foo创建了一个叫getName的静态属性存储了一个匿名函数， 则第一问的答案就是Foo的静态函数返回 。 2</p>\n<h5 id=\"第二问-getName\"><a href=\"#第二问-getName\" class=\"headerlink\" title=\"第二问 getName();\"></a>第二问 getName();</h5><p> var getName 与 function getName 都是声明语句，区别在于 var getName 是函数表达式，而 function getName 是函数声明。函数声明会提前<br> 小例子<br> <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(a);<span class=\"comment\">//输出：function a()&#123;&#125;</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> a=<span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">a</span>(<span class=\"params\"></span>)</span>&#123;&#125;</span><br></pre></td></tr></table></figure></p>\n<p>原题中代码最终执行时的是<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Foo</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\"> getName = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>); &#125;;</span><br><span class=\"line\"> <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> getName;<span class=\"comment\">//只提升变量声明</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getName</span>(<span class=\"params\"></span>) </span>&#123; <span class=\"built_in\">console</span>.log(<span class=\"number\">5</span>);&#125;<span class=\"comment\">//提升函数声明，覆盖var的声明</span></span><br><span class=\"line\"> </span><br><span class=\"line\">Foo.getName = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"built_in\">console</span>.log(<span class=\"number\">2</span>);&#125;;</span><br><span class=\"line\">Foo.prototype.getName = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"built_in\">console</span>.log(<span class=\"number\">3</span>);&#125;;</span><br><span class=\"line\">getName = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"built_in\">console</span>.log(<span class=\"number\">4</span>);&#125;;<span class=\"comment\">//最终的赋值再次覆盖function getName声明</span></span><br><span class=\"line\">getName();<span class=\"comment\">//最终输出4</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"函数和作用域\"><a href=\"#函数和作用域\" class=\"headerlink\" title=\"函数和作用域\"></a>函数和作用域</h4><h5 id=\"第三问-Foo-getName-与第四问-getName\"><a href=\"#第三问-Foo-getName-与第四问-getName\" class=\"headerlink\" title=\"第三问 Foo().getName() 与第四问 getName();\"></a>第三问 Foo().getName() 与第四问 getName();</h5><p>Foo().getName(); 先执行了Foo函数，然后调用Foo函数的返回值对象的getName属性函数</p>\n<p>1、Foo的函数体内，getName是没有用var声明的，所以getName是一个全局变量。</p>\n<p>2、Foo()的意思是运行Foo的函数体，这个函数体中做的事情就是，把全局变量getName的函数体替换成console.log(1)。<br>3、Foo函数体的返回值是this，这里的this指向的是window对象。Foo().getName();就相当于window.getName();，也就是直接调用getName()函数，显示结果就是1。<br>4、此时的window.getName(), getName(), Foo().getName()是等价的，如不熟悉this指向问题，<a href=\"https://chengheai.github.io/2019/07/08/%E6%9C%89%E5%85%B3%E5%89%8D%E7%AB%AFjs%E4%B8%ADthis%E6%8C%87%E5%90%91%E7%9A%84%E9%97%AE%E9%A2%98%E7%AC%94%E8%AE%B0/\" target=\"_blank\" rel=\"noopener\">可点击</a></p>\n<h4 id=\"运算符和优先级\"><a href=\"#运算符和优先级\" class=\"headerlink\" title=\"运算符和优先级\"></a>运算符和优先级</h4><p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence\" target=\"_blank\" rel=\"noopener\">优先级汇总表</a></p>\n<p>从以上的运算符优先级资料中可以看出，”.”运算符的优先级是比”new”运算符的优先级高的。</p>\n<h5 id=\"第五问-new-Foo-getName\"><a href=\"#第五问-new-Foo-getName\" class=\"headerlink\" title=\"第五问 new Foo.getName()\"></a>第五问 new Foo.getName()</h5><p>分析<br>1、相当于new (Foo.getName)();<br>2、执行Foo.getName函数，这时候就已经输出2了<br>3、实例化一个对象</p>\n<p>所以实际上将getName函数作为了构造函数来执行，故打印2。</p>\n<h5 id=\"第六问-new-Foo-getName\"><a href=\"#第六问-new-Foo-getName\" class=\"headerlink\" title=\"第六问 new Foo().getName()\"></a>第六问 new Foo().getName()</h5><p>1、相当于(new Foo()).getName();<br>.运算符的优先级是19，就是指.会优于其他运算符之前执行，但是执行点的时候，是按照点前和点后的表达式依次执行的，因为Foo后面有个括号，而圆括号的优先级是20，所以new运算符是归Foo()这个函数的。<br>2、函数中返回的是this，而this在构造函数中本来就代表当前实例化对象，遂最终Foo函数返回实例化对象。<br>之后调用实例化对象的getName函数，因为在Foo构造函数中没有为实例化对象添加任何属性，遂到当前对象的原型对象（prototype）中寻找getName，找到了。<a href=\"https://chengheai.github.io/2019/07/15/%E5%85%B3%E4%BA%8Ejs%E4%B8%AD%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E6%89%8B%E5%86%99return%E7%9A%84%E5%BD%B1%E5%93%8D/\" target=\"_blank\" rel=\"noopener\">构造函数中自定书写return问题</a><br>3、执行new Foo()，实例化一个对象，这个对象中拥有Foo.prototype.getName方法。<br>4、执行.getName()，调用Foo.prototype.getName方法，输出为3。</p>\n<h5 id=\"第七问-new-new-Foo-getName\"><a href=\"#第七问-new-new-Foo-getName\" class=\"headerlink\" title=\"第七问 new new Foo().getName()\"></a>第七问 new new Foo().getName()</h5><p>最终运行代码 new ((new Foo()).getName)();<br>先初始化Foo的实例化对象，然后将其原型上的getName函数作为构造函数再次new<br>1、.运算符的优先级是19，就是指.会优于其他运算符之前执行。执行点的时候，是按照点前和点后的表达式依次执行的。<br>看看左边的new new Foo()，带参数的new优先级是比不带参数的new优先级高的，所以左边的部分就相当于new (new Foo())<br>什么是带参数的new：new Foo()<br>什么是不带参数的new：new Foo<br>2、执行(new Foo()).getName()，相当于foo.getName()。<br>foo是new Foo()出来后的实例，这个结果和题目2是一样的。这时候已经输出3了。<br>3、执行new，实例化一个对象</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"前记\"><a href=\"#前记\" class=\"headerlink\" title=\"前记\"></a>前记</h2><p>前些时间，面试中写的笔试题，偶然的机会做了两次，最后还是错了几道，结果回来在网上一挡，哎。。不过说实话，该公司面试题道道都是经典题，的确不错，长知识了。</p>\n<h2 id=\"题目\"><a href=\"#题目\" class=\"headerlink\" title=\"题目\"></a>题目</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Foo</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\tgetName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;<span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>);&#125;;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Foo.getName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;<span class=\"built_in\">console</span>.log(<span class=\"number\">2</span>);&#125;;</span><br><span class=\"line\">Foo.prototype.getName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;<span class=\"built_in\">console</span>.log(<span class=\"number\">3</span>);&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> getName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;<span class=\"built_in\">console</span>.log(<span class=\"number\">4</span>);&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getName</span>(<span class=\"params\"></span>) </span>&#123;<span class=\"built_in\">console</span>.log(<span class=\"number\">5</span>);&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//以下输出值为多少？</span></span><br><span class=\"line\">Foo.getName();</span><br><span class=\"line\">getName();</span><br><span class=\"line\">Foo().getName();</span><br><span class=\"line\">getName();</span><br><span class=\"line\"><span class=\"keyword\">new</span> Foo.getName();</span><br><span class=\"line\"><span class=\"keyword\">new</span> Foo().getName();</span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"keyword\">new</span> Foo().getName();</span><br></pre></td></tr></table></figure>\n<h2 id=\"答案\"><a href=\"#答案\" class=\"headerlink\" title=\"答案\"></a>答案</h2><p>2 4 1 1 2 3 3</p>\n<h2 id=\"分析\"><a href=\"#分析\" class=\"headerlink\" title=\"分析\"></a>分析</h2><h3 id=\"考察知识点分析\"><a href=\"#考察知识点分析\" class=\"headerlink\" title=\"考察知识点分析\"></a>考察知识点分析</h3><table><tr><td bgcolor=\"yellow\"><font color=\"Blue\">逻辑运算符、运算符的优先级、声明变量和声明函数的提升优先级、原型继承、闭包</font></td></tr></table>\n\n<h3 id=\"步骤分析\"><a href=\"#步骤分析\" class=\"headerlink\" title=\"步骤分析\"></a>步骤分析</h3><h4 id=\"1-函数和变量提升\"><a href=\"#1-函数和变量提升\" class=\"headerlink\" title=\"1.函数和变量提升\"></a>1.函数和变量提升</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Foo.getName();  <span class=\"comment\">// 2</span></span><br><span class=\"line\">getName();      <span class=\"comment\">// 4</span></span><br></pre></td></tr></table></figure>\n<h5 id=\"第一问-Foo-getName\"><a href=\"#第一问-Foo-getName\" class=\"headerlink\" title=\"第一问 Foo.getName();\"></a>第一问 Foo.getName();</h5><p>第5行代码 Foo创建了一个叫getName的静态属性存储了一个匿名函数， 则第一问的答案就是Foo的静态函数返回 。 2</p>\n<h5 id=\"第二问-getName\"><a href=\"#第二问-getName\" class=\"headerlink\" title=\"第二问 getName();\"></a>第二问 getName();</h5><p> var getName 与 function getName 都是声明语句，区别在于 var getName 是函数表达式，而 function getName 是函数声明。函数声明会提前<br> 小例子<br> <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(a);<span class=\"comment\">//输出：function a()&#123;&#125;</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> a=<span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">a</span>(<span class=\"params\"></span>)</span>&#123;&#125;</span><br></pre></td></tr></table></figure></p>\n<p>原题中代码最终执行时的是<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Foo</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\"> getName = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>); &#125;;</span><br><span class=\"line\"> <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> getName;<span class=\"comment\">//只提升变量声明</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getName</span>(<span class=\"params\"></span>) </span>&#123; <span class=\"built_in\">console</span>.log(<span class=\"number\">5</span>);&#125;<span class=\"comment\">//提升函数声明，覆盖var的声明</span></span><br><span class=\"line\"> </span><br><span class=\"line\">Foo.getName = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"built_in\">console</span>.log(<span class=\"number\">2</span>);&#125;;</span><br><span class=\"line\">Foo.prototype.getName = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"built_in\">console</span>.log(<span class=\"number\">3</span>);&#125;;</span><br><span class=\"line\">getName = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"built_in\">console</span>.log(<span class=\"number\">4</span>);&#125;;<span class=\"comment\">//最终的赋值再次覆盖function getName声明</span></span><br><span class=\"line\">getName();<span class=\"comment\">//最终输出4</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"函数和作用域\"><a href=\"#函数和作用域\" class=\"headerlink\" title=\"函数和作用域\"></a>函数和作用域</h4><h5 id=\"第三问-Foo-getName-与第四问-getName\"><a href=\"#第三问-Foo-getName-与第四问-getName\" class=\"headerlink\" title=\"第三问 Foo().getName() 与第四问 getName();\"></a>第三问 Foo().getName() 与第四问 getName();</h5><p>Foo().getName(); 先执行了Foo函数，然后调用Foo函数的返回值对象的getName属性函数</p>\n<p>1、Foo的函数体内，getName是没有用var声明的，所以getName是一个全局变量。</p>\n<p>2、Foo()的意思是运行Foo的函数体，这个函数体中做的事情就是，把全局变量getName的函数体替换成console.log(1)。<br>3、Foo函数体的返回值是this，这里的this指向的是window对象。Foo().getName();就相当于window.getName();，也就是直接调用getName()函数，显示结果就是1。<br>4、此时的window.getName(), getName(), Foo().getName()是等价的，如不熟悉this指向问题，<a href=\"https://chengheai.github.io/2019/07/08/%E6%9C%89%E5%85%B3%E5%89%8D%E7%AB%AFjs%E4%B8%ADthis%E6%8C%87%E5%90%91%E7%9A%84%E9%97%AE%E9%A2%98%E7%AC%94%E8%AE%B0/\" target=\"_blank\" rel=\"noopener\">可点击</a></p>\n<h4 id=\"运算符和优先级\"><a href=\"#运算符和优先级\" class=\"headerlink\" title=\"运算符和优先级\"></a>运算符和优先级</h4><p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence\" target=\"_blank\" rel=\"noopener\">优先级汇总表</a></p>\n<p>从以上的运算符优先级资料中可以看出，”.”运算符的优先级是比”new”运算符的优先级高的。</p>\n<h5 id=\"第五问-new-Foo-getName\"><a href=\"#第五问-new-Foo-getName\" class=\"headerlink\" title=\"第五问 new Foo.getName()\"></a>第五问 new Foo.getName()</h5><p>分析<br>1、相当于new (Foo.getName)();<br>2、执行Foo.getName函数，这时候就已经输出2了<br>3、实例化一个对象</p>\n<p>所以实际上将getName函数作为了构造函数来执行，故打印2。</p>\n<h5 id=\"第六问-new-Foo-getName\"><a href=\"#第六问-new-Foo-getName\" class=\"headerlink\" title=\"第六问 new Foo().getName()\"></a>第六问 new Foo().getName()</h5><p>1、相当于(new Foo()).getName();<br>.运算符的优先级是19，就是指.会优于其他运算符之前执行，但是执行点的时候，是按照点前和点后的表达式依次执行的，因为Foo后面有个括号，而圆括号的优先级是20，所以new运算符是归Foo()这个函数的。<br>2、函数中返回的是this，而this在构造函数中本来就代表当前实例化对象，遂最终Foo函数返回实例化对象。<br>之后调用实例化对象的getName函数，因为在Foo构造函数中没有为实例化对象添加任何属性，遂到当前对象的原型对象（prototype）中寻找getName，找到了。<a href=\"https://chengheai.github.io/2019/07/15/%E5%85%B3%E4%BA%8Ejs%E4%B8%AD%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E6%89%8B%E5%86%99return%E7%9A%84%E5%BD%B1%E5%93%8D/\" target=\"_blank\" rel=\"noopener\">构造函数中自定书写return问题</a><br>3、执行new Foo()，实例化一个对象，这个对象中拥有Foo.prototype.getName方法。<br>4、执行.getName()，调用Foo.prototype.getName方法，输出为3。</p>\n<h5 id=\"第七问-new-new-Foo-getName\"><a href=\"#第七问-new-new-Foo-getName\" class=\"headerlink\" title=\"第七问 new new Foo().getName()\"></a>第七问 new new Foo().getName()</h5><p>最终运行代码 new ((new Foo()).getName)();<br>先初始化Foo的实例化对象，然后将其原型上的getName函数作为构造函数再次new<br>1、.运算符的优先级是19，就是指.会优于其他运算符之前执行。执行点的时候，是按照点前和点后的表达式依次执行的。<br>看看左边的new new Foo()，带参数的new优先级是比不带参数的new优先级高的，所以左边的部分就相当于new (new Foo())<br>什么是带参数的new：new Foo()<br>什么是不带参数的new：new Foo<br>2、执行(new Foo()).getName()，相当于foo.getName()。<br>foo是new Foo()出来后的实例，这个结果和题目2是一样的。这时候已经输出3了。<br>3、执行new，实例化一个对象</p>\n"},{"title":"前端库2018总结","date":"2018-12-20T02:15:05.000Z","_content":"### [GitHub](https://github.com/chengheai/stud-libs)\n## 前端库2018/12/19\n\n\n\n## 打包工具\n\n* [webpack](https://github.com/webpack/webpack) - 打包项目。\n* [rollup](https://github.com/rollup/rollup) - 打包 npm 库。\n* [parcel](https://github.com/parcel-bundler/parcel) - webpack 竞品，但发展前景不乐观，再观察一段时间。\n* [systemjs](https://github.com/systemjs/systemjs) - 针对一些特殊场景会比较有用，比如云 ide，支付宝小程序 IDE 等。\n* [microbundle](https://github.com/developit/microbundle) - 基于 rollup，简化配置。\n* [webpack-dev-server](https://github.com/webpack/webpack-dev-server) - webpack 开发服务器。\n* [webpack-dev-middleware](https://github.com/webpack/webpack-dev-middleware) - webpack 中间件。\n* [vue-cli](https://github.com/vuejs/vue-cli) - vue 命令行工具。\n* [create-react-app](https://github.com/facebook/create-react-app) - react 官方脚手架。\n* [webpack-merge](https://github.com/survivejs/webpack-merge) - 合并 webpack 配置。\n* [webpack-chain](https://github.com/neutrinojs/webpack-chain) - 通过 chain 风格 api 的方式修改 webpack 配置。\n\n### webpack loader 和插件\n\n* [hard-source-webpack-plugin](https://github.com/mzgoddard/hard-source-webpack-plugin) - 性能提升 70%，但有坑。\n* [svgr](https://github.com/smooth-code/svgr) - svg 转 react 组件。\n* [postcss](https://github.com/postcss/postcss) - CSS 界的 babel。\n* [autoprefixer](https://github.com/postcss/autoprefixer) - 为 CSS 选择权自动加 prefix。\n* [cssnano](https://github.com/cssnano/cssnano) - CSS 压缩，也有类 preset 的概念。\n* [mini-css-extract-plugin](https://github.com/webpack-contrib/mini-css-extract-plugin) - 提取 CSS 为单独文件。\n* [webpackbar](https://github.com/nuxt/webpackbar) - webpack 进度条。\n* [webpack-bundle-analyzer](https://github.com/webpack-contrib/webpack-bundle-analyzer) - 构建产物占比分析。\n* [uglifyjs-webpack-plugin](https://github.com/webpack-contrib/uglifyjs-webpack-plugin) - JS 压缩，产物为 ES5 语法。\n* [terser-webpack-plugin](https://github.com/webpack-contrib/terser-webpack-plugin) - JS 压缩，产物为 ES6 语法。\n* [webpack-manifest-plugin](https://github.com/danethurber/webpack-manifest-plugin) - 生成 manifest.json。\n* [copy-webpack-plugin](https://github.com/webpack-contrib/copy-webpack-plugin) - 复制额外的文件到输出目录。\n* [case-sensitive-paths-webpack-plugin](https://github.com/Urthen/case-sensitive-paths-webpack-plugin) - 大小写敏感检测，能规避一些问题，但构建时性能消耗较大。\n* [css-hot-loader](https://github.com/shepherdwind/css-hot-loader) - CSS 热更新，搭配 mini-css-extract-plugin 使用。\n* [duplicate-package-checker-webpack-plugin](https://github.com/darrenscerri/duplicate-package-checker-webpack-plugin) - 重复依赖检测。\n\n## 包管理\n\n* [yarn](https://github.com/yarnpkg/yarn)\n* [npm](https://github.com/npm/cli)\n\n## babel\n\n* [babel](https://github.com/babel/babel)\n* [babel-plugin-rawest](https://github.com/sokra/rawact) - React 的 DOM 直出方案。\n* [babel-plugin-macros](https://github.com/kentcdodds/babel-plugin-macros) - 前端文件写 node 逻辑。\n* [babel-plugin-dynamic-import-node](https://github.com/airbnb/babel-plugin-dynamic-import-node) - 有些场景下会需要禁用 `import()` 语法。\n* [babel-plugin-react-require](https://github.com/vslinko/babel-plugin-react-require) - 自动为 jsx 语法加 react 引用。\n* [babel-plugin-react-remove-prop-types](https://github.com/nkt/babel-plugin-react-remove-prop-types) - 删除 prop-types，生产环境用。\n\n## 测试\n\n* [jest](https://github.com/facebook/jest)\n* [ts-jest](https://github.com/kulshekhar/ts-jest)\n* [enzyme](https://github.com/airbnb/enzyme)\n* [jsdom](https://github.com/jsdom/jsdom)\n* [puppeteer](https://github.com/GoogleChrome/puppeteer)\n* [react-test-rerender](https://github.com/facebook/react/tree/master/packages/react-test-renderer) - 官方出品。\n* [react-testing-library](https://github.com/kentcdodds/react-testing-library) - kentcdodds 出品。\n\n## 框架\n\n* [react](https://github.com/facebook/react)\n* [vue](https://github.com/vuejs/vue)\n* [next.js](https://github.com/zeit/next.js)\n* [nuxt.js](https://github.com/nuxt/nuxt.js)\n* [gastby](https://github.com/gatsbyjs/gatsby)\n* [umi](https://github.com/umijs/umi)\n* [choo](https://github.com/choojs/choo)\n* [taro](https://github.com/NervJS/taro) - 用 React 写小程序，适配微信和支付宝等。\n* [mpvue](https://github.com/Meituan-Dianping/mpvue) - 用 Vue 写小程序。\n* [after.js](https://github.com/jaredpalmer/after.js)\n\n## react 相关库\n\n* [preact](https://github.com/developit/preact) - 轻量级 React 实现。\n* [inferno](https://github.com/infernojs/inferno) - 轻量级 React 实现。\n* [react-router](https://github.com/ReactTraining/react-router) - React 路由方案。\n* [reach-router](https://github.com/reach/router) - React 路由方案，较新，优势是可访问性。\n* [router5](https://github.com/router5/router5) - 通用的路由方案。\n* [react-loadable](https://github.com/jamiebuilds/react-loadable) - 按需加载 react 组件。\n* [ant-design](https://github.com/ant-design/ant-design) - 蚂蚁金服的 React UI 库。\n* [material-ui](https://github.com/mui-org/material-ui) - UI 库。\n* [react-intl](https://github.com/yahoo/react-intl) - React 的国际化方案。\n* [react-dnd](https://github.com/react-dnd/react-dnd) - 拖拽实现。\n* [react-helmet](https://github.com/nfl/react-helmet) - 修改 html 的 header 内容。\n\n## vue 相关库\n\n* [vue-router](https://github.com/vuejs/vue-router)\n\n## 工具类\n\n* [history](https://github.com/ReactTraining/history)\n* [path-to-regexp](https://github.com/pillarjs/path-to-regexp)\n* [lodash](https://github.com/lodash/lodash)\n* [fastclick](https://github.com/ftlabs/fastclick)\n\n## 数据流\n\n* [redux](https://github.com/reduxjs/redux)\n* [immer](https://github.com/mweststrate/immer)\n* [mobx](https://github.com/mobxjs/mobx)\n* [unstated](https://github.com/jamiebuilds/unstated)\n* [rxjs](https://github.com/ReactiveX/rxjs)\n* [dva](https://github.com/dvajs/dva)\n* [rematch](https://github.com/rematch/rematch) - 基于 redux。\n* [vuex](https://github.com/vuejs/vuex)\n* [ngrx](https://github.com/ngrx/platform)\n\n### redux 扩展\n\n* [react-redux](https://github.com/reduxjs/react-redux) - 绑定 react 和 redux。\n* [redux-saga](https://github.com/redux-saga/redux-saga)\n* [redux-persist](https://github.com/rt2zz/redux-persist)\n* [redux-bundler](https://github.com/henrikjoreteg/redux-bundler)\n* [redux-box](https://github.com/anish000kumar/redux-box)\n\n## 性能优化\n\n* [workbox](https://github.com/GoogleChrome/workbox) - PWA 方案，Google 出品。\n* [critical](https://github.com/addyosmani/critical) - 提取关键 CSS。\n\n## 语言\n\n* [typescript](https://github.com/Microsoft/TypeScript)\n* [flow](https://github.com/facebook/flow)\n* [graphql](https://github.com/graphql/graphql-js)\n\n## 文档\n\n* [vuepress](https://github.com/vuejs/vuepress)\n* [docz](https://github.com/pedronauck/docz)\n\n## 工程\n\n* [lerna](https://github.com/lerna/lerna) - monorepo 管理。\n* [lerna-changelog](https://github.com/lerna/lerna-changelog) - 为 lerna 项目自动生成 changelog。\n* [eslint](https://github.com/eslint/eslint) - JS 风格约束。\n* [eslint-config-airbnb](https://github.com/airbnb/javascript)\n* [prettier](https://github.com/prettier/prettier) - 更主观的风格自动修改。\n* [yeoman-generator](https://github.com/yeoman/generator) - 脚手架工具。\n* [serve](https://github.com/zeit/serve) - 本地静态服务器。\n* [np](https://github.com/sindresorhus/np) - npm publish 辅助，自动 push、打 tag、升版本等。\n* [lint-staged](https://github.com/okonet/lint-staged) - eslint 提速，只 lint 提交的代码。\n* [coveralls](https://github.com/marketplace/coveralls) - 覆盖率。\n* [husky](https://github.com/typicode/husky) - 添加 git hooks。\n* [cross-env](https://github.com/kentcdodds/cross-env) - 跨平台的环境变量声明。\n* [projj](https://github.com/popomore/projj) - 本地 git 项目管理，支持 github 和 gitlab。\n* [nvm](https://github.com/creationix/nvm) - 管理 node 版本。\n* [concurrently](https://github.com/kimmobrunfeldt/concurrently) - 在 npm scripts 里并行执行命令。\n* [@zeit/ncc](https://github.com/zeit/ncc) - 打包为 npm 包为一个文件。\n\n## 编辑器\n\n* [VSCode](https://code.visualstudio.com/)\n* [IntelliJ IDEA](https://www.jetbrains.com/idea/)\n* [codesandbox](https://codesandbox.io/)\n* [stackblitz](https://stackblitz.com/)\n\n## css\n\n* [css modules](https://github.com/css-modules/css-modules)\n* [emotion](https://github.com/emotion-js/emotion)\n\n## 命令行\n\n* [yargs](https://github.com/yargs/yargs) - 命令行入口套件。\n* [yargs-parser](https://github.com/yargs/yargs-parser) - 命令行参数解析。\n* [chalk](https://github.com/chalk/chalk) - 输出不同颜色。\n* [cheerio](https://github.com/cheeriojs/cheerio) - 用类 jQuery 语法处理 HTML。\n* [chokidar](https://github.com/paulmillr/chokidar) - 文件监听。\n* [clipboardy](https://github.com/sindresorhus/clipboardy) - 复制文本到粘贴板。\n* [debug](https://github.com/visionmedia/debug) - 打印调试信息。\n* [deprecate](https://github.com/brianc/node-deprecate) - 给过期警告。\n* [glob](https://github.com/isaacs/node-glob) - 文件查找。\n* [tiny-glob](https://github.com/terkelg/tiny-glob) - 文件查找。\n* [signale](https://github.com/klaussinani/signale) - 漂亮的日志打印。\n* [semver](https://github.com/npm/node-semver) - semver 版本处理。\n* [update-notifier](https://github.com/yeoman/update-notifier) - 更新提醒。\n* [rimraf](https://github.com/isaacs/rimraf) - 删除文件。\n* [depd](https://github.com/dougwilson/nodejs-depd) - 给出 deprecated 警告。\n\n## 请求处理\n\n* [whatwg-fetch](https://github.com/github/fetch)\n* [got](https://github.com/sindresorhus/got)\n* [axios](https://github.com/axios/axios)\n* [request](https://github.com/request/request)\n* [reqwest](https://github.com/ded/reqwest)\n\n## 语法解析\n\n* [esquery](https://github.com/estools/esquery) - 语法树查询。\n\n## 其他\n\n* [electron](https://github.com/electron/electron)\n\n","source":"_posts/前端库2018总结.md","raw":"---\ntitle: 前端库2018总结\ndate: 2018-12-20 10:15:05\ntags:  总结\n---\n### [GitHub](https://github.com/chengheai/stud-libs)\n## 前端库2018/12/19\n\n\n\n## 打包工具\n\n* [webpack](https://github.com/webpack/webpack) - 打包项目。\n* [rollup](https://github.com/rollup/rollup) - 打包 npm 库。\n* [parcel](https://github.com/parcel-bundler/parcel) - webpack 竞品，但发展前景不乐观，再观察一段时间。\n* [systemjs](https://github.com/systemjs/systemjs) - 针对一些特殊场景会比较有用，比如云 ide，支付宝小程序 IDE 等。\n* [microbundle](https://github.com/developit/microbundle) - 基于 rollup，简化配置。\n* [webpack-dev-server](https://github.com/webpack/webpack-dev-server) - webpack 开发服务器。\n* [webpack-dev-middleware](https://github.com/webpack/webpack-dev-middleware) - webpack 中间件。\n* [vue-cli](https://github.com/vuejs/vue-cli) - vue 命令行工具。\n* [create-react-app](https://github.com/facebook/create-react-app) - react 官方脚手架。\n* [webpack-merge](https://github.com/survivejs/webpack-merge) - 合并 webpack 配置。\n* [webpack-chain](https://github.com/neutrinojs/webpack-chain) - 通过 chain 风格 api 的方式修改 webpack 配置。\n\n### webpack loader 和插件\n\n* [hard-source-webpack-plugin](https://github.com/mzgoddard/hard-source-webpack-plugin) - 性能提升 70%，但有坑。\n* [svgr](https://github.com/smooth-code/svgr) - svg 转 react 组件。\n* [postcss](https://github.com/postcss/postcss) - CSS 界的 babel。\n* [autoprefixer](https://github.com/postcss/autoprefixer) - 为 CSS 选择权自动加 prefix。\n* [cssnano](https://github.com/cssnano/cssnano) - CSS 压缩，也有类 preset 的概念。\n* [mini-css-extract-plugin](https://github.com/webpack-contrib/mini-css-extract-plugin) - 提取 CSS 为单独文件。\n* [webpackbar](https://github.com/nuxt/webpackbar) - webpack 进度条。\n* [webpack-bundle-analyzer](https://github.com/webpack-contrib/webpack-bundle-analyzer) - 构建产物占比分析。\n* [uglifyjs-webpack-plugin](https://github.com/webpack-contrib/uglifyjs-webpack-plugin) - JS 压缩，产物为 ES5 语法。\n* [terser-webpack-plugin](https://github.com/webpack-contrib/terser-webpack-plugin) - JS 压缩，产物为 ES6 语法。\n* [webpack-manifest-plugin](https://github.com/danethurber/webpack-manifest-plugin) - 生成 manifest.json。\n* [copy-webpack-plugin](https://github.com/webpack-contrib/copy-webpack-plugin) - 复制额外的文件到输出目录。\n* [case-sensitive-paths-webpack-plugin](https://github.com/Urthen/case-sensitive-paths-webpack-plugin) - 大小写敏感检测，能规避一些问题，但构建时性能消耗较大。\n* [css-hot-loader](https://github.com/shepherdwind/css-hot-loader) - CSS 热更新，搭配 mini-css-extract-plugin 使用。\n* [duplicate-package-checker-webpack-plugin](https://github.com/darrenscerri/duplicate-package-checker-webpack-plugin) - 重复依赖检测。\n\n## 包管理\n\n* [yarn](https://github.com/yarnpkg/yarn)\n* [npm](https://github.com/npm/cli)\n\n## babel\n\n* [babel](https://github.com/babel/babel)\n* [babel-plugin-rawest](https://github.com/sokra/rawact) - React 的 DOM 直出方案。\n* [babel-plugin-macros](https://github.com/kentcdodds/babel-plugin-macros) - 前端文件写 node 逻辑。\n* [babel-plugin-dynamic-import-node](https://github.com/airbnb/babel-plugin-dynamic-import-node) - 有些场景下会需要禁用 `import()` 语法。\n* [babel-plugin-react-require](https://github.com/vslinko/babel-plugin-react-require) - 自动为 jsx 语法加 react 引用。\n* [babel-plugin-react-remove-prop-types](https://github.com/nkt/babel-plugin-react-remove-prop-types) - 删除 prop-types，生产环境用。\n\n## 测试\n\n* [jest](https://github.com/facebook/jest)\n* [ts-jest](https://github.com/kulshekhar/ts-jest)\n* [enzyme](https://github.com/airbnb/enzyme)\n* [jsdom](https://github.com/jsdom/jsdom)\n* [puppeteer](https://github.com/GoogleChrome/puppeteer)\n* [react-test-rerender](https://github.com/facebook/react/tree/master/packages/react-test-renderer) - 官方出品。\n* [react-testing-library](https://github.com/kentcdodds/react-testing-library) - kentcdodds 出品。\n\n## 框架\n\n* [react](https://github.com/facebook/react)\n* [vue](https://github.com/vuejs/vue)\n* [next.js](https://github.com/zeit/next.js)\n* [nuxt.js](https://github.com/nuxt/nuxt.js)\n* [gastby](https://github.com/gatsbyjs/gatsby)\n* [umi](https://github.com/umijs/umi)\n* [choo](https://github.com/choojs/choo)\n* [taro](https://github.com/NervJS/taro) - 用 React 写小程序，适配微信和支付宝等。\n* [mpvue](https://github.com/Meituan-Dianping/mpvue) - 用 Vue 写小程序。\n* [after.js](https://github.com/jaredpalmer/after.js)\n\n## react 相关库\n\n* [preact](https://github.com/developit/preact) - 轻量级 React 实现。\n* [inferno](https://github.com/infernojs/inferno) - 轻量级 React 实现。\n* [react-router](https://github.com/ReactTraining/react-router) - React 路由方案。\n* [reach-router](https://github.com/reach/router) - React 路由方案，较新，优势是可访问性。\n* [router5](https://github.com/router5/router5) - 通用的路由方案。\n* [react-loadable](https://github.com/jamiebuilds/react-loadable) - 按需加载 react 组件。\n* [ant-design](https://github.com/ant-design/ant-design) - 蚂蚁金服的 React UI 库。\n* [material-ui](https://github.com/mui-org/material-ui) - UI 库。\n* [react-intl](https://github.com/yahoo/react-intl) - React 的国际化方案。\n* [react-dnd](https://github.com/react-dnd/react-dnd) - 拖拽实现。\n* [react-helmet](https://github.com/nfl/react-helmet) - 修改 html 的 header 内容。\n\n## vue 相关库\n\n* [vue-router](https://github.com/vuejs/vue-router)\n\n## 工具类\n\n* [history](https://github.com/ReactTraining/history)\n* [path-to-regexp](https://github.com/pillarjs/path-to-regexp)\n* [lodash](https://github.com/lodash/lodash)\n* [fastclick](https://github.com/ftlabs/fastclick)\n\n## 数据流\n\n* [redux](https://github.com/reduxjs/redux)\n* [immer](https://github.com/mweststrate/immer)\n* [mobx](https://github.com/mobxjs/mobx)\n* [unstated](https://github.com/jamiebuilds/unstated)\n* [rxjs](https://github.com/ReactiveX/rxjs)\n* [dva](https://github.com/dvajs/dva)\n* [rematch](https://github.com/rematch/rematch) - 基于 redux。\n* [vuex](https://github.com/vuejs/vuex)\n* [ngrx](https://github.com/ngrx/platform)\n\n### redux 扩展\n\n* [react-redux](https://github.com/reduxjs/react-redux) - 绑定 react 和 redux。\n* [redux-saga](https://github.com/redux-saga/redux-saga)\n* [redux-persist](https://github.com/rt2zz/redux-persist)\n* [redux-bundler](https://github.com/henrikjoreteg/redux-bundler)\n* [redux-box](https://github.com/anish000kumar/redux-box)\n\n## 性能优化\n\n* [workbox](https://github.com/GoogleChrome/workbox) - PWA 方案，Google 出品。\n* [critical](https://github.com/addyosmani/critical) - 提取关键 CSS。\n\n## 语言\n\n* [typescript](https://github.com/Microsoft/TypeScript)\n* [flow](https://github.com/facebook/flow)\n* [graphql](https://github.com/graphql/graphql-js)\n\n## 文档\n\n* [vuepress](https://github.com/vuejs/vuepress)\n* [docz](https://github.com/pedronauck/docz)\n\n## 工程\n\n* [lerna](https://github.com/lerna/lerna) - monorepo 管理。\n* [lerna-changelog](https://github.com/lerna/lerna-changelog) - 为 lerna 项目自动生成 changelog。\n* [eslint](https://github.com/eslint/eslint) - JS 风格约束。\n* [eslint-config-airbnb](https://github.com/airbnb/javascript)\n* [prettier](https://github.com/prettier/prettier) - 更主观的风格自动修改。\n* [yeoman-generator](https://github.com/yeoman/generator) - 脚手架工具。\n* [serve](https://github.com/zeit/serve) - 本地静态服务器。\n* [np](https://github.com/sindresorhus/np) - npm publish 辅助，自动 push、打 tag、升版本等。\n* [lint-staged](https://github.com/okonet/lint-staged) - eslint 提速，只 lint 提交的代码。\n* [coveralls](https://github.com/marketplace/coveralls) - 覆盖率。\n* [husky](https://github.com/typicode/husky) - 添加 git hooks。\n* [cross-env](https://github.com/kentcdodds/cross-env) - 跨平台的环境变量声明。\n* [projj](https://github.com/popomore/projj) - 本地 git 项目管理，支持 github 和 gitlab。\n* [nvm](https://github.com/creationix/nvm) - 管理 node 版本。\n* [concurrently](https://github.com/kimmobrunfeldt/concurrently) - 在 npm scripts 里并行执行命令。\n* [@zeit/ncc](https://github.com/zeit/ncc) - 打包为 npm 包为一个文件。\n\n## 编辑器\n\n* [VSCode](https://code.visualstudio.com/)\n* [IntelliJ IDEA](https://www.jetbrains.com/idea/)\n* [codesandbox](https://codesandbox.io/)\n* [stackblitz](https://stackblitz.com/)\n\n## css\n\n* [css modules](https://github.com/css-modules/css-modules)\n* [emotion](https://github.com/emotion-js/emotion)\n\n## 命令行\n\n* [yargs](https://github.com/yargs/yargs) - 命令行入口套件。\n* [yargs-parser](https://github.com/yargs/yargs-parser) - 命令行参数解析。\n* [chalk](https://github.com/chalk/chalk) - 输出不同颜色。\n* [cheerio](https://github.com/cheeriojs/cheerio) - 用类 jQuery 语法处理 HTML。\n* [chokidar](https://github.com/paulmillr/chokidar) - 文件监听。\n* [clipboardy](https://github.com/sindresorhus/clipboardy) - 复制文本到粘贴板。\n* [debug](https://github.com/visionmedia/debug) - 打印调试信息。\n* [deprecate](https://github.com/brianc/node-deprecate) - 给过期警告。\n* [glob](https://github.com/isaacs/node-glob) - 文件查找。\n* [tiny-glob](https://github.com/terkelg/tiny-glob) - 文件查找。\n* [signale](https://github.com/klaussinani/signale) - 漂亮的日志打印。\n* [semver](https://github.com/npm/node-semver) - semver 版本处理。\n* [update-notifier](https://github.com/yeoman/update-notifier) - 更新提醒。\n* [rimraf](https://github.com/isaacs/rimraf) - 删除文件。\n* [depd](https://github.com/dougwilson/nodejs-depd) - 给出 deprecated 警告。\n\n## 请求处理\n\n* [whatwg-fetch](https://github.com/github/fetch)\n* [got](https://github.com/sindresorhus/got)\n* [axios](https://github.com/axios/axios)\n* [request](https://github.com/request/request)\n* [reqwest](https://github.com/ded/reqwest)\n\n## 语法解析\n\n* [esquery](https://github.com/estools/esquery) - 语法树查询。\n\n## 其他\n\n* [electron](https://github.com/electron/electron)\n\n","slug":"前端库2018总结","published":1,"updated":"2021-10-09T08:48:32.086Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzac8002w5c541pgmlcbk","content":"<h3 id=\"GitHub\"><a href=\"#GitHub\" class=\"headerlink\" title=\"GitHub\"></a><a href=\"https://github.com/chengheai/stud-libs\">GitHub</a></h3><h2 id=\"前端库2018-12-19\"><a href=\"#前端库2018-12-19\" class=\"headerlink\" title=\"前端库2018/12/19\"></a>前端库2018/12/19</h2><h2 id=\"打包工具\"><a href=\"#打包工具\" class=\"headerlink\" title=\"打包工具\"></a>打包工具</h2><ul>\n<li><a href=\"https://github.com/webpack/webpack\">webpack</a> - 打包项目。</li>\n<li><a href=\"https://github.com/rollup/rollup\">rollup</a> - 打包 npm 库。</li>\n<li><a href=\"https://github.com/parcel-bundler/parcel\">parcel</a> - webpack 竞品，但发展前景不乐观，再观察一段时间。</li>\n<li><a href=\"https://github.com/systemjs/systemjs\">systemjs</a> - 针对一些特殊场景会比较有用，比如云 ide，支付宝小程序 IDE 等。</li>\n<li><a href=\"https://github.com/developit/microbundle\">microbundle</a> - 基于 rollup，简化配置。</li>\n<li><a href=\"https://github.com/webpack/webpack-dev-server\">webpack-dev-server</a> - webpack 开发服务器。</li>\n<li><a href=\"https://github.com/webpack/webpack-dev-middleware\">webpack-dev-middleware</a> - webpack 中间件。</li>\n<li><a href=\"https://github.com/vuejs/vue-cli\">vue-cli</a> - vue 命令行工具。</li>\n<li><a href=\"https://github.com/facebook/create-react-app\">create-react-app</a> - react 官方脚手架。</li>\n<li><a href=\"https://github.com/survivejs/webpack-merge\">webpack-merge</a> - 合并 webpack 配置。</li>\n<li><a href=\"https://github.com/neutrinojs/webpack-chain\">webpack-chain</a> - 通过 chain 风格 api 的方式修改 webpack 配置。</li>\n</ul>\n<h3 id=\"webpack-loader-和插件\"><a href=\"#webpack-loader-和插件\" class=\"headerlink\" title=\"webpack loader 和插件\"></a>webpack loader 和插件</h3><ul>\n<li><a href=\"https://github.com/mzgoddard/hard-source-webpack-plugin\">hard-source-webpack-plugin</a> - 性能提升 70%，但有坑。</li>\n<li><a href=\"https://github.com/smooth-code/svgr\">svgr</a> - svg 转 react 组件。</li>\n<li><a href=\"https://github.com/postcss/postcss\">postcss</a> - CSS 界的 babel。</li>\n<li><a href=\"https://github.com/postcss/autoprefixer\">autoprefixer</a> - 为 CSS 选择权自动加 prefix。</li>\n<li><a href=\"https://github.com/cssnano/cssnano\">cssnano</a> - CSS 压缩，也有类 preset 的概念。</li>\n<li><a href=\"https://github.com/webpack-contrib/mini-css-extract-plugin\">mini-css-extract-plugin</a> - 提取 CSS 为单独文件。</li>\n<li><a href=\"https://github.com/nuxt/webpackbar\">webpackbar</a> - webpack 进度条。</li>\n<li><a href=\"https://github.com/webpack-contrib/webpack-bundle-analyzer\">webpack-bundle-analyzer</a> - 构建产物占比分析。</li>\n<li><a href=\"https://github.com/webpack-contrib/uglifyjs-webpack-plugin\">uglifyjs-webpack-plugin</a> - JS 压缩，产物为 ES5 语法。</li>\n<li><a href=\"https://github.com/webpack-contrib/terser-webpack-plugin\">terser-webpack-plugin</a> - JS 压缩，产物为 ES6 语法。</li>\n<li><a href=\"https://github.com/danethurber/webpack-manifest-plugin\">webpack-manifest-plugin</a> - 生成 manifest.json。</li>\n<li><a href=\"https://github.com/webpack-contrib/copy-webpack-plugin\">copy-webpack-plugin</a> - 复制额外的文件到输出目录。</li>\n<li><a href=\"https://github.com/Urthen/case-sensitive-paths-webpack-plugin\">case-sensitive-paths-webpack-plugin</a> - 大小写敏感检测，能规避一些问题，但构建时性能消耗较大。</li>\n<li><a href=\"https://github.com/shepherdwind/css-hot-loader\">css-hot-loader</a> - CSS 热更新，搭配 mini-css-extract-plugin 使用。</li>\n<li><a href=\"https://github.com/darrenscerri/duplicate-package-checker-webpack-plugin\">duplicate-package-checker-webpack-plugin</a> - 重复依赖检测。</li>\n</ul>\n<h2 id=\"包管理\"><a href=\"#包管理\" class=\"headerlink\" title=\"包管理\"></a>包管理</h2><ul>\n<li><a href=\"https://github.com/yarnpkg/yarn\">yarn</a></li>\n<li><a href=\"https://github.com/npm/cli\">npm</a></li>\n</ul>\n<h2 id=\"babel\"><a href=\"#babel\" class=\"headerlink\" title=\"babel\"></a>babel</h2><ul>\n<li><a href=\"https://github.com/babel/babel\">babel</a></li>\n<li><a href=\"https://github.com/sokra/rawact\">babel-plugin-rawest</a> - React 的 DOM 直出方案。</li>\n<li><a href=\"https://github.com/kentcdodds/babel-plugin-macros\">babel-plugin-macros</a> - 前端文件写 node 逻辑。</li>\n<li><a href=\"https://github.com/airbnb/babel-plugin-dynamic-import-node\">babel-plugin-dynamic-import-node</a> - 有些场景下会需要禁用 <code>import()</code> 语法。</li>\n<li><a href=\"https://github.com/vslinko/babel-plugin-react-require\">babel-plugin-react-require</a> - 自动为 jsx 语法加 react 引用。</li>\n<li><a href=\"https://github.com/nkt/babel-plugin-react-remove-prop-types\">babel-plugin-react-remove-prop-types</a> - 删除 prop-types，生产环境用。</li>\n</ul>\n<h2 id=\"测试\"><a href=\"#测试\" class=\"headerlink\" title=\"测试\"></a>测试</h2><ul>\n<li><a href=\"https://github.com/facebook/jest\">jest</a></li>\n<li><a href=\"https://github.com/kulshekhar/ts-jest\">ts-jest</a></li>\n<li><a href=\"https://github.com/airbnb/enzyme\">enzyme</a></li>\n<li><a href=\"https://github.com/jsdom/jsdom\">jsdom</a></li>\n<li><a href=\"https://github.com/GoogleChrome/puppeteer\">puppeteer</a></li>\n<li><a href=\"https://github.com/facebook/react/tree/master/packages/react-test-renderer\">react-test-rerender</a> - 官方出品。</li>\n<li><a href=\"https://github.com/kentcdodds/react-testing-library\">react-testing-library</a> - kentcdodds 出品。</li>\n</ul>\n<h2 id=\"框架\"><a href=\"#框架\" class=\"headerlink\" title=\"框架\"></a>框架</h2><ul>\n<li><a href=\"https://github.com/facebook/react\">react</a></li>\n<li><a href=\"https://github.com/vuejs/vue\">vue</a></li>\n<li><a href=\"https://github.com/zeit/next.js\">next.js</a></li>\n<li><a href=\"https://github.com/nuxt/nuxt.js\">nuxt.js</a></li>\n<li><a href=\"https://github.com/gatsbyjs/gatsby\">gastby</a></li>\n<li><a href=\"https://github.com/umijs/umi\">umi</a></li>\n<li><a href=\"https://github.com/choojs/choo\">choo</a></li>\n<li><a href=\"https://github.com/NervJS/taro\">taro</a> - 用 React 写小程序，适配微信和支付宝等。</li>\n<li><a href=\"https://github.com/Meituan-Dianping/mpvue\">mpvue</a> - 用 Vue 写小程序。</li>\n<li><a href=\"https://github.com/jaredpalmer/after.js\">after.js</a></li>\n</ul>\n<h2 id=\"react-相关库\"><a href=\"#react-相关库\" class=\"headerlink\" title=\"react 相关库\"></a>react 相关库</h2><ul>\n<li><a href=\"https://github.com/developit/preact\">preact</a> - 轻量级 React 实现。</li>\n<li><a href=\"https://github.com/infernojs/inferno\">inferno</a> - 轻量级 React 实现。</li>\n<li><a href=\"https://github.com/ReactTraining/react-router\">react-router</a> - React 路由方案。</li>\n<li><a href=\"https://github.com/reach/router\">reach-router</a> - React 路由方案，较新，优势是可访问性。</li>\n<li><a href=\"https://github.com/router5/router5\">router5</a> - 通用的路由方案。</li>\n<li><a href=\"https://github.com/jamiebuilds/react-loadable\">react-loadable</a> - 按需加载 react 组件。</li>\n<li><a href=\"https://github.com/ant-design/ant-design\">ant-design</a> - 蚂蚁金服的 React UI 库。</li>\n<li><a href=\"https://github.com/mui-org/material-ui\">material-ui</a> - UI 库。</li>\n<li><a href=\"https://github.com/yahoo/react-intl\">react-intl</a> - React 的国际化方案。</li>\n<li><a href=\"https://github.com/react-dnd/react-dnd\">react-dnd</a> - 拖拽实现。</li>\n<li><a href=\"https://github.com/nfl/react-helmet\">react-helmet</a> - 修改 html 的 header 内容。</li>\n</ul>\n<h2 id=\"vue-相关库\"><a href=\"#vue-相关库\" class=\"headerlink\" title=\"vue 相关库\"></a>vue 相关库</h2><ul>\n<li><a href=\"https://github.com/vuejs/vue-router\">vue-router</a></li>\n</ul>\n<h2 id=\"工具类\"><a href=\"#工具类\" class=\"headerlink\" title=\"工具类\"></a>工具类</h2><ul>\n<li><a href=\"https://github.com/ReactTraining/history\">history</a></li>\n<li><a href=\"https://github.com/pillarjs/path-to-regexp\">path-to-regexp</a></li>\n<li><a href=\"https://github.com/lodash/lodash\">lodash</a></li>\n<li><a href=\"https://github.com/ftlabs/fastclick\">fastclick</a></li>\n</ul>\n<h2 id=\"数据流\"><a href=\"#数据流\" class=\"headerlink\" title=\"数据流\"></a>数据流</h2><ul>\n<li><a href=\"https://github.com/reduxjs/redux\">redux</a></li>\n<li><a href=\"https://github.com/mweststrate/immer\">immer</a></li>\n<li><a href=\"https://github.com/mobxjs/mobx\">mobx</a></li>\n<li><a href=\"https://github.com/jamiebuilds/unstated\">unstated</a></li>\n<li><a href=\"https://github.com/ReactiveX/rxjs\">rxjs</a></li>\n<li><a href=\"https://github.com/dvajs/dva\">dva</a></li>\n<li><a href=\"https://github.com/rematch/rematch\">rematch</a> - 基于 redux。</li>\n<li><a href=\"https://github.com/vuejs/vuex\">vuex</a></li>\n<li><a href=\"https://github.com/ngrx/platform\">ngrx</a></li>\n</ul>\n<h3 id=\"redux-扩展\"><a href=\"#redux-扩展\" class=\"headerlink\" title=\"redux 扩展\"></a>redux 扩展</h3><ul>\n<li><a href=\"https://github.com/reduxjs/react-redux\">react-redux</a> - 绑定 react 和 redux。</li>\n<li><a href=\"https://github.com/redux-saga/redux-saga\">redux-saga</a></li>\n<li><a href=\"https://github.com/rt2zz/redux-persist\">redux-persist</a></li>\n<li><a href=\"https://github.com/henrikjoreteg/redux-bundler\">redux-bundler</a></li>\n<li><a href=\"https://github.com/anish000kumar/redux-box\">redux-box</a></li>\n</ul>\n<h2 id=\"性能优化\"><a href=\"#性能优化\" class=\"headerlink\" title=\"性能优化\"></a>性能优化</h2><ul>\n<li><a href=\"https://github.com/GoogleChrome/workbox\">workbox</a> - PWA 方案，Google 出品。</li>\n<li><a href=\"https://github.com/addyosmani/critical\">critical</a> - 提取关键 CSS。</li>\n</ul>\n<h2 id=\"语言\"><a href=\"#语言\" class=\"headerlink\" title=\"语言\"></a>语言</h2><ul>\n<li><a href=\"https://github.com/Microsoft/TypeScript\">typescript</a></li>\n<li><a href=\"https://github.com/facebook/flow\">flow</a></li>\n<li><a href=\"https://github.com/graphql/graphql-js\">graphql</a></li>\n</ul>\n<h2 id=\"文档\"><a href=\"#文档\" class=\"headerlink\" title=\"文档\"></a>文档</h2><ul>\n<li><a href=\"https://github.com/vuejs/vuepress\">vuepress</a></li>\n<li><a href=\"https://github.com/pedronauck/docz\">docz</a></li>\n</ul>\n<h2 id=\"工程\"><a href=\"#工程\" class=\"headerlink\" title=\"工程\"></a>工程</h2><ul>\n<li><a href=\"https://github.com/lerna/lerna\">lerna</a> - monorepo 管理。</li>\n<li><a href=\"https://github.com/lerna/lerna-changelog\">lerna-changelog</a> - 为 lerna 项目自动生成 changelog。</li>\n<li><a href=\"https://github.com/eslint/eslint\">eslint</a> - JS 风格约束。</li>\n<li><a href=\"https://github.com/airbnb/javascript\">eslint-config-airbnb</a></li>\n<li><a href=\"https://github.com/prettier/prettier\">prettier</a> - 更主观的风格自动修改。</li>\n<li><a href=\"https://github.com/yeoman/generator\">yeoman-generator</a> - 脚手架工具。</li>\n<li><a href=\"https://github.com/zeit/serve\">serve</a> - 本地静态服务器。</li>\n<li><a href=\"https://github.com/sindresorhus/np\">np</a> - npm publish 辅助，自动 push、打 tag、升版本等。</li>\n<li><a href=\"https://github.com/okonet/lint-staged\">lint-staged</a> - eslint 提速，只 lint 提交的代码。</li>\n<li><a href=\"https://github.com/marketplace/coveralls\">coveralls</a> - 覆盖率。</li>\n<li><a href=\"https://github.com/typicode/husky\">husky</a> - 添加 git hooks。</li>\n<li><a href=\"https://github.com/kentcdodds/cross-env\">cross-env</a> - 跨平台的环境变量声明。</li>\n<li><a href=\"https://github.com/popomore/projj\">projj</a> - 本地 git 项目管理，支持 github 和 gitlab。</li>\n<li><a href=\"https://github.com/creationix/nvm\">nvm</a> - 管理 node 版本。</li>\n<li><a href=\"https://github.com/kimmobrunfeldt/concurrently\">concurrently</a> - 在 npm scripts 里并行执行命令。</li>\n<li><a href=\"https://github.com/zeit/ncc\">@zeit/ncc</a> - 打包为 npm 包为一个文件。</li>\n</ul>\n<h2 id=\"编辑器\"><a href=\"#编辑器\" class=\"headerlink\" title=\"编辑器\"></a>编辑器</h2><ul>\n<li><a href=\"https://code.visualstudio.com/\" target=\"_blank\" rel=\"noopener\">VSCode</a></li>\n<li><a href=\"https://www.jetbrains.com/idea/\" target=\"_blank\" rel=\"noopener\">IntelliJ IDEA</a></li>\n<li><a href=\"https://codesandbox.io/\" target=\"_blank\" rel=\"noopener\">codesandbox</a></li>\n<li><a href=\"https://stackblitz.com/\" target=\"_blank\" rel=\"noopener\">stackblitz</a></li>\n</ul>\n<h2 id=\"css\"><a href=\"#css\" class=\"headerlink\" title=\"css\"></a>css</h2><ul>\n<li><a href=\"https://github.com/css-modules/css-modules\">css modules</a></li>\n<li><a href=\"https://github.com/emotion-js/emotion\">emotion</a></li>\n</ul>\n<h2 id=\"命令行\"><a href=\"#命令行\" class=\"headerlink\" title=\"命令行\"></a>命令行</h2><ul>\n<li><a href=\"https://github.com/yargs/yargs\">yargs</a> - 命令行入口套件。</li>\n<li><a href=\"https://github.com/yargs/yargs-parser\">yargs-parser</a> - 命令行参数解析。</li>\n<li><a href=\"https://github.com/chalk/chalk\">chalk</a> - 输出不同颜色。</li>\n<li><a href=\"https://github.com/cheeriojs/cheerio\">cheerio</a> - 用类 jQuery 语法处理 HTML。</li>\n<li><a href=\"https://github.com/paulmillr/chokidar\">chokidar</a> - 文件监听。</li>\n<li><a href=\"https://github.com/sindresorhus/clipboardy\">clipboardy</a> - 复制文本到粘贴板。</li>\n<li><a href=\"https://github.com/visionmedia/debug\">debug</a> - 打印调试信息。</li>\n<li><a href=\"https://github.com/brianc/node-deprecate\">deprecate</a> - 给过期警告。</li>\n<li><a href=\"https://github.com/isaacs/node-glob\">glob</a> - 文件查找。</li>\n<li><a href=\"https://github.com/terkelg/tiny-glob\">tiny-glob</a> - 文件查找。</li>\n<li><a href=\"https://github.com/klaussinani/signale\">signale</a> - 漂亮的日志打印。</li>\n<li><a href=\"https://github.com/npm/node-semver\">semver</a> - semver 版本处理。</li>\n<li><a href=\"https://github.com/yeoman/update-notifier\">update-notifier</a> - 更新提醒。</li>\n<li><a href=\"https://github.com/isaacs/rimraf\">rimraf</a> - 删除文件。</li>\n<li><a href=\"https://github.com/dougwilson/nodejs-depd\">depd</a> - 给出 deprecated 警告。</li>\n</ul>\n<h2 id=\"请求处理\"><a href=\"#请求处理\" class=\"headerlink\" title=\"请求处理\"></a>请求处理</h2><ul>\n<li><a href=\"https://github.com/github/fetch\">whatwg-fetch</a></li>\n<li><a href=\"https://github.com/sindresorhus/got\">got</a></li>\n<li><a href=\"https://github.com/axios/axios\">axios</a></li>\n<li><a href=\"https://github.com/request/request\">request</a></li>\n<li><a href=\"https://github.com/ded/reqwest\">reqwest</a></li>\n</ul>\n<h2 id=\"语法解析\"><a href=\"#语法解析\" class=\"headerlink\" title=\"语法解析\"></a>语法解析</h2><ul>\n<li><a href=\"https://github.com/estools/esquery\">esquery</a> - 语法树查询。</li>\n</ul>\n<h2 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h2><ul>\n<li><a href=\"https://github.com/electron/electron\">electron</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"GitHub\"><a href=\"#GitHub\" class=\"headerlink\" title=\"GitHub\"></a><a href=\"https://github.com/chengheai/stud-libs\">GitHub</a></h3><h2 id=\"前端库2018-12-19\"><a href=\"#前端库2018-12-19\" class=\"headerlink\" title=\"前端库2018/12/19\"></a>前端库2018/12/19</h2><h2 id=\"打包工具\"><a href=\"#打包工具\" class=\"headerlink\" title=\"打包工具\"></a>打包工具</h2><ul>\n<li><a href=\"https://github.com/webpack/webpack\">webpack</a> - 打包项目。</li>\n<li><a href=\"https://github.com/rollup/rollup\">rollup</a> - 打包 npm 库。</li>\n<li><a href=\"https://github.com/parcel-bundler/parcel\">parcel</a> - webpack 竞品，但发展前景不乐观，再观察一段时间。</li>\n<li><a href=\"https://github.com/systemjs/systemjs\">systemjs</a> - 针对一些特殊场景会比较有用，比如云 ide，支付宝小程序 IDE 等。</li>\n<li><a href=\"https://github.com/developit/microbundle\">microbundle</a> - 基于 rollup，简化配置。</li>\n<li><a href=\"https://github.com/webpack/webpack-dev-server\">webpack-dev-server</a> - webpack 开发服务器。</li>\n<li><a href=\"https://github.com/webpack/webpack-dev-middleware\">webpack-dev-middleware</a> - webpack 中间件。</li>\n<li><a href=\"https://github.com/vuejs/vue-cli\">vue-cli</a> - vue 命令行工具。</li>\n<li><a href=\"https://github.com/facebook/create-react-app\">create-react-app</a> - react 官方脚手架。</li>\n<li><a href=\"https://github.com/survivejs/webpack-merge\">webpack-merge</a> - 合并 webpack 配置。</li>\n<li><a href=\"https://github.com/neutrinojs/webpack-chain\">webpack-chain</a> - 通过 chain 风格 api 的方式修改 webpack 配置。</li>\n</ul>\n<h3 id=\"webpack-loader-和插件\"><a href=\"#webpack-loader-和插件\" class=\"headerlink\" title=\"webpack loader 和插件\"></a>webpack loader 和插件</h3><ul>\n<li><a href=\"https://github.com/mzgoddard/hard-source-webpack-plugin\">hard-source-webpack-plugin</a> - 性能提升 70%，但有坑。</li>\n<li><a href=\"https://github.com/smooth-code/svgr\">svgr</a> - svg 转 react 组件。</li>\n<li><a href=\"https://github.com/postcss/postcss\">postcss</a> - CSS 界的 babel。</li>\n<li><a href=\"https://github.com/postcss/autoprefixer\">autoprefixer</a> - 为 CSS 选择权自动加 prefix。</li>\n<li><a href=\"https://github.com/cssnano/cssnano\">cssnano</a> - CSS 压缩，也有类 preset 的概念。</li>\n<li><a href=\"https://github.com/webpack-contrib/mini-css-extract-plugin\">mini-css-extract-plugin</a> - 提取 CSS 为单独文件。</li>\n<li><a href=\"https://github.com/nuxt/webpackbar\">webpackbar</a> - webpack 进度条。</li>\n<li><a href=\"https://github.com/webpack-contrib/webpack-bundle-analyzer\">webpack-bundle-analyzer</a> - 构建产物占比分析。</li>\n<li><a href=\"https://github.com/webpack-contrib/uglifyjs-webpack-plugin\">uglifyjs-webpack-plugin</a> - JS 压缩，产物为 ES5 语法。</li>\n<li><a href=\"https://github.com/webpack-contrib/terser-webpack-plugin\">terser-webpack-plugin</a> - JS 压缩，产物为 ES6 语法。</li>\n<li><a href=\"https://github.com/danethurber/webpack-manifest-plugin\">webpack-manifest-plugin</a> - 生成 manifest.json。</li>\n<li><a href=\"https://github.com/webpack-contrib/copy-webpack-plugin\">copy-webpack-plugin</a> - 复制额外的文件到输出目录。</li>\n<li><a href=\"https://github.com/Urthen/case-sensitive-paths-webpack-plugin\">case-sensitive-paths-webpack-plugin</a> - 大小写敏感检测，能规避一些问题，但构建时性能消耗较大。</li>\n<li><a href=\"https://github.com/shepherdwind/css-hot-loader\">css-hot-loader</a> - CSS 热更新，搭配 mini-css-extract-plugin 使用。</li>\n<li><a href=\"https://github.com/darrenscerri/duplicate-package-checker-webpack-plugin\">duplicate-package-checker-webpack-plugin</a> - 重复依赖检测。</li>\n</ul>\n<h2 id=\"包管理\"><a href=\"#包管理\" class=\"headerlink\" title=\"包管理\"></a>包管理</h2><ul>\n<li><a href=\"https://github.com/yarnpkg/yarn\">yarn</a></li>\n<li><a href=\"https://github.com/npm/cli\">npm</a></li>\n</ul>\n<h2 id=\"babel\"><a href=\"#babel\" class=\"headerlink\" title=\"babel\"></a>babel</h2><ul>\n<li><a href=\"https://github.com/babel/babel\">babel</a></li>\n<li><a href=\"https://github.com/sokra/rawact\">babel-plugin-rawest</a> - React 的 DOM 直出方案。</li>\n<li><a href=\"https://github.com/kentcdodds/babel-plugin-macros\">babel-plugin-macros</a> - 前端文件写 node 逻辑。</li>\n<li><a href=\"https://github.com/airbnb/babel-plugin-dynamic-import-node\">babel-plugin-dynamic-import-node</a> - 有些场景下会需要禁用 <code>import()</code> 语法。</li>\n<li><a href=\"https://github.com/vslinko/babel-plugin-react-require\">babel-plugin-react-require</a> - 自动为 jsx 语法加 react 引用。</li>\n<li><a href=\"https://github.com/nkt/babel-plugin-react-remove-prop-types\">babel-plugin-react-remove-prop-types</a> - 删除 prop-types，生产环境用。</li>\n</ul>\n<h2 id=\"测试\"><a href=\"#测试\" class=\"headerlink\" title=\"测试\"></a>测试</h2><ul>\n<li><a href=\"https://github.com/facebook/jest\">jest</a></li>\n<li><a href=\"https://github.com/kulshekhar/ts-jest\">ts-jest</a></li>\n<li><a href=\"https://github.com/airbnb/enzyme\">enzyme</a></li>\n<li><a href=\"https://github.com/jsdom/jsdom\">jsdom</a></li>\n<li><a href=\"https://github.com/GoogleChrome/puppeteer\">puppeteer</a></li>\n<li><a href=\"https://github.com/facebook/react/tree/master/packages/react-test-renderer\">react-test-rerender</a> - 官方出品。</li>\n<li><a href=\"https://github.com/kentcdodds/react-testing-library\">react-testing-library</a> - kentcdodds 出品。</li>\n</ul>\n<h2 id=\"框架\"><a href=\"#框架\" class=\"headerlink\" title=\"框架\"></a>框架</h2><ul>\n<li><a href=\"https://github.com/facebook/react\">react</a></li>\n<li><a href=\"https://github.com/vuejs/vue\">vue</a></li>\n<li><a href=\"https://github.com/zeit/next.js\">next.js</a></li>\n<li><a href=\"https://github.com/nuxt/nuxt.js\">nuxt.js</a></li>\n<li><a href=\"https://github.com/gatsbyjs/gatsby\">gastby</a></li>\n<li><a href=\"https://github.com/umijs/umi\">umi</a></li>\n<li><a href=\"https://github.com/choojs/choo\">choo</a></li>\n<li><a href=\"https://github.com/NervJS/taro\">taro</a> - 用 React 写小程序，适配微信和支付宝等。</li>\n<li><a href=\"https://github.com/Meituan-Dianping/mpvue\">mpvue</a> - 用 Vue 写小程序。</li>\n<li><a href=\"https://github.com/jaredpalmer/after.js\">after.js</a></li>\n</ul>\n<h2 id=\"react-相关库\"><a href=\"#react-相关库\" class=\"headerlink\" title=\"react 相关库\"></a>react 相关库</h2><ul>\n<li><a href=\"https://github.com/developit/preact\">preact</a> - 轻量级 React 实现。</li>\n<li><a href=\"https://github.com/infernojs/inferno\">inferno</a> - 轻量级 React 实现。</li>\n<li><a href=\"https://github.com/ReactTraining/react-router\">react-router</a> - React 路由方案。</li>\n<li><a href=\"https://github.com/reach/router\">reach-router</a> - React 路由方案，较新，优势是可访问性。</li>\n<li><a href=\"https://github.com/router5/router5\">router5</a> - 通用的路由方案。</li>\n<li><a href=\"https://github.com/jamiebuilds/react-loadable\">react-loadable</a> - 按需加载 react 组件。</li>\n<li><a href=\"https://github.com/ant-design/ant-design\">ant-design</a> - 蚂蚁金服的 React UI 库。</li>\n<li><a href=\"https://github.com/mui-org/material-ui\">material-ui</a> - UI 库。</li>\n<li><a href=\"https://github.com/yahoo/react-intl\">react-intl</a> - React 的国际化方案。</li>\n<li><a href=\"https://github.com/react-dnd/react-dnd\">react-dnd</a> - 拖拽实现。</li>\n<li><a href=\"https://github.com/nfl/react-helmet\">react-helmet</a> - 修改 html 的 header 内容。</li>\n</ul>\n<h2 id=\"vue-相关库\"><a href=\"#vue-相关库\" class=\"headerlink\" title=\"vue 相关库\"></a>vue 相关库</h2><ul>\n<li><a href=\"https://github.com/vuejs/vue-router\">vue-router</a></li>\n</ul>\n<h2 id=\"工具类\"><a href=\"#工具类\" class=\"headerlink\" title=\"工具类\"></a>工具类</h2><ul>\n<li><a href=\"https://github.com/ReactTraining/history\">history</a></li>\n<li><a href=\"https://github.com/pillarjs/path-to-regexp\">path-to-regexp</a></li>\n<li><a href=\"https://github.com/lodash/lodash\">lodash</a></li>\n<li><a href=\"https://github.com/ftlabs/fastclick\">fastclick</a></li>\n</ul>\n<h2 id=\"数据流\"><a href=\"#数据流\" class=\"headerlink\" title=\"数据流\"></a>数据流</h2><ul>\n<li><a href=\"https://github.com/reduxjs/redux\">redux</a></li>\n<li><a href=\"https://github.com/mweststrate/immer\">immer</a></li>\n<li><a href=\"https://github.com/mobxjs/mobx\">mobx</a></li>\n<li><a href=\"https://github.com/jamiebuilds/unstated\">unstated</a></li>\n<li><a href=\"https://github.com/ReactiveX/rxjs\">rxjs</a></li>\n<li><a href=\"https://github.com/dvajs/dva\">dva</a></li>\n<li><a href=\"https://github.com/rematch/rematch\">rematch</a> - 基于 redux。</li>\n<li><a href=\"https://github.com/vuejs/vuex\">vuex</a></li>\n<li><a href=\"https://github.com/ngrx/platform\">ngrx</a></li>\n</ul>\n<h3 id=\"redux-扩展\"><a href=\"#redux-扩展\" class=\"headerlink\" title=\"redux 扩展\"></a>redux 扩展</h3><ul>\n<li><a href=\"https://github.com/reduxjs/react-redux\">react-redux</a> - 绑定 react 和 redux。</li>\n<li><a href=\"https://github.com/redux-saga/redux-saga\">redux-saga</a></li>\n<li><a href=\"https://github.com/rt2zz/redux-persist\">redux-persist</a></li>\n<li><a href=\"https://github.com/henrikjoreteg/redux-bundler\">redux-bundler</a></li>\n<li><a href=\"https://github.com/anish000kumar/redux-box\">redux-box</a></li>\n</ul>\n<h2 id=\"性能优化\"><a href=\"#性能优化\" class=\"headerlink\" title=\"性能优化\"></a>性能优化</h2><ul>\n<li><a href=\"https://github.com/GoogleChrome/workbox\">workbox</a> - PWA 方案，Google 出品。</li>\n<li><a href=\"https://github.com/addyosmani/critical\">critical</a> - 提取关键 CSS。</li>\n</ul>\n<h2 id=\"语言\"><a href=\"#语言\" class=\"headerlink\" title=\"语言\"></a>语言</h2><ul>\n<li><a href=\"https://github.com/Microsoft/TypeScript\">typescript</a></li>\n<li><a href=\"https://github.com/facebook/flow\">flow</a></li>\n<li><a href=\"https://github.com/graphql/graphql-js\">graphql</a></li>\n</ul>\n<h2 id=\"文档\"><a href=\"#文档\" class=\"headerlink\" title=\"文档\"></a>文档</h2><ul>\n<li><a href=\"https://github.com/vuejs/vuepress\">vuepress</a></li>\n<li><a href=\"https://github.com/pedronauck/docz\">docz</a></li>\n</ul>\n<h2 id=\"工程\"><a href=\"#工程\" class=\"headerlink\" title=\"工程\"></a>工程</h2><ul>\n<li><a href=\"https://github.com/lerna/lerna\">lerna</a> - monorepo 管理。</li>\n<li><a href=\"https://github.com/lerna/lerna-changelog\">lerna-changelog</a> - 为 lerna 项目自动生成 changelog。</li>\n<li><a href=\"https://github.com/eslint/eslint\">eslint</a> - JS 风格约束。</li>\n<li><a href=\"https://github.com/airbnb/javascript\">eslint-config-airbnb</a></li>\n<li><a href=\"https://github.com/prettier/prettier\">prettier</a> - 更主观的风格自动修改。</li>\n<li><a href=\"https://github.com/yeoman/generator\">yeoman-generator</a> - 脚手架工具。</li>\n<li><a href=\"https://github.com/zeit/serve\">serve</a> - 本地静态服务器。</li>\n<li><a href=\"https://github.com/sindresorhus/np\">np</a> - npm publish 辅助，自动 push、打 tag、升版本等。</li>\n<li><a href=\"https://github.com/okonet/lint-staged\">lint-staged</a> - eslint 提速，只 lint 提交的代码。</li>\n<li><a href=\"https://github.com/marketplace/coveralls\">coveralls</a> - 覆盖率。</li>\n<li><a href=\"https://github.com/typicode/husky\">husky</a> - 添加 git hooks。</li>\n<li><a href=\"https://github.com/kentcdodds/cross-env\">cross-env</a> - 跨平台的环境变量声明。</li>\n<li><a href=\"https://github.com/popomore/projj\">projj</a> - 本地 git 项目管理，支持 github 和 gitlab。</li>\n<li><a href=\"https://github.com/creationix/nvm\">nvm</a> - 管理 node 版本。</li>\n<li><a href=\"https://github.com/kimmobrunfeldt/concurrently\">concurrently</a> - 在 npm scripts 里并行执行命令。</li>\n<li><a href=\"https://github.com/zeit/ncc\">@zeit/ncc</a> - 打包为 npm 包为一个文件。</li>\n</ul>\n<h2 id=\"编辑器\"><a href=\"#编辑器\" class=\"headerlink\" title=\"编辑器\"></a>编辑器</h2><ul>\n<li><a href=\"https://code.visualstudio.com/\" target=\"_blank\" rel=\"noopener\">VSCode</a></li>\n<li><a href=\"https://www.jetbrains.com/idea/\" target=\"_blank\" rel=\"noopener\">IntelliJ IDEA</a></li>\n<li><a href=\"https://codesandbox.io/\" target=\"_blank\" rel=\"noopener\">codesandbox</a></li>\n<li><a href=\"https://stackblitz.com/\" target=\"_blank\" rel=\"noopener\">stackblitz</a></li>\n</ul>\n<h2 id=\"css\"><a href=\"#css\" class=\"headerlink\" title=\"css\"></a>css</h2><ul>\n<li><a href=\"https://github.com/css-modules/css-modules\">css modules</a></li>\n<li><a href=\"https://github.com/emotion-js/emotion\">emotion</a></li>\n</ul>\n<h2 id=\"命令行\"><a href=\"#命令行\" class=\"headerlink\" title=\"命令行\"></a>命令行</h2><ul>\n<li><a href=\"https://github.com/yargs/yargs\">yargs</a> - 命令行入口套件。</li>\n<li><a href=\"https://github.com/yargs/yargs-parser\">yargs-parser</a> - 命令行参数解析。</li>\n<li><a href=\"https://github.com/chalk/chalk\">chalk</a> - 输出不同颜色。</li>\n<li><a href=\"https://github.com/cheeriojs/cheerio\">cheerio</a> - 用类 jQuery 语法处理 HTML。</li>\n<li><a href=\"https://github.com/paulmillr/chokidar\">chokidar</a> - 文件监听。</li>\n<li><a href=\"https://github.com/sindresorhus/clipboardy\">clipboardy</a> - 复制文本到粘贴板。</li>\n<li><a href=\"https://github.com/visionmedia/debug\">debug</a> - 打印调试信息。</li>\n<li><a href=\"https://github.com/brianc/node-deprecate\">deprecate</a> - 给过期警告。</li>\n<li><a href=\"https://github.com/isaacs/node-glob\">glob</a> - 文件查找。</li>\n<li><a href=\"https://github.com/terkelg/tiny-glob\">tiny-glob</a> - 文件查找。</li>\n<li><a href=\"https://github.com/klaussinani/signale\">signale</a> - 漂亮的日志打印。</li>\n<li><a href=\"https://github.com/npm/node-semver\">semver</a> - semver 版本处理。</li>\n<li><a href=\"https://github.com/yeoman/update-notifier\">update-notifier</a> - 更新提醒。</li>\n<li><a href=\"https://github.com/isaacs/rimraf\">rimraf</a> - 删除文件。</li>\n<li><a href=\"https://github.com/dougwilson/nodejs-depd\">depd</a> - 给出 deprecated 警告。</li>\n</ul>\n<h2 id=\"请求处理\"><a href=\"#请求处理\" class=\"headerlink\" title=\"请求处理\"></a>请求处理</h2><ul>\n<li><a href=\"https://github.com/github/fetch\">whatwg-fetch</a></li>\n<li><a href=\"https://github.com/sindresorhus/got\">got</a></li>\n<li><a href=\"https://github.com/axios/axios\">axios</a></li>\n<li><a href=\"https://github.com/request/request\">request</a></li>\n<li><a href=\"https://github.com/ded/reqwest\">reqwest</a></li>\n</ul>\n<h2 id=\"语法解析\"><a href=\"#语法解析\" class=\"headerlink\" title=\"语法解析\"></a>语法解析</h2><ul>\n<li><a href=\"https://github.com/estools/esquery\">esquery</a> - 语法树查询。</li>\n</ul>\n<h2 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h2><ul>\n<li><a href=\"https://github.com/electron/electron\">electron</a></li>\n</ul>\n"},{"title":"多个el-select共用一个options且一个option只能用一次","date":"2019-10-21T14:01:16.000Z","_content":"\n## 需求\n\n一个表单多个下拉框，假如 options 里有中国，美国，第一个 select 选择里中国那么第二个 select 的 options 中国就置为灰色，反之我第二个选里中国，第一个 options 中中国就置为灰色\n\n## 效果\n\n![](https://github.com/chengheai/review-demo-image/blob/master/2019-10-21%2022-06-05.2019-10-21%2022_07_14.gif?raw=true)\n\n## DEMO\n\n<font size=8>[在线 demo ⛩⛽️🚁✈️📡💈🧧🏮](https://chengheai.github.io/daily-vue-demo/#/select)</font>\n\n## 代码\n\n```html\n<template>\n  <div>\n    <el-form :model=\"ruleForm\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\">\n      <div v-for=\"(item, index) in ruleForm.list\" :key=\"index\">\n        <el-select\n          v-model=\"item.type\"\n          clearable\n          @change=\"selectChange(item.type,index)\"\n          placeholder=\"请选择\"\n        >\n          <el-option\n            v-for=\"(item,optionIndex)  in options\"\n            :key=\"optionIndex\"\n            :label=\"item.label\"\n            :disabled=\"getDisable(item.value)\"\n            :value=\"item.value\"\n          ></el-option>\n        </el-select>\n        <i\n          v-if=\"index === 0 && ruleForm.list[0].type !== '' && ruleForm.list.length<2\"\n          class=\"el-icon-circle-plus-outline ico\"\n          @click=\"add\"\n        ></i>\n        <i v-if=\"index !==0\" class=\"el-icon-remove-outline ico\" @click=\"del(index)\"></i>\n      </div>\n    </el-form>\n  </div>\n</template>\n```\n\n```javascript\n<script>\n/* eslint-disable */\n// 添加数组自定义事件 用来删除数组中的某一项\nArray.prototype.indexOf = function(val) {\n  for (var i = 0; i < this.length; i++) {\n    if (this[i] == val) {\n      return i;\n    }\n  }\n  return -1;\n};\nArray.prototype.remove = function(val) {\n  var index = this.indexOf(val);\n  if (index > -1) {\n    this.splice(index, 1);\n  }\n};\nexport default {\n  data() {\n    return {\n      ruleForm: {\n        list: [\n          {\n            type: '',\n          },\n        ],\n      },\n      options: [\n        {\n          label: '中国',\n          value: 1,\n        },\n        {\n          label: '美国',\n          value: 2,\n        },\n      ],\n      selectedOptions: [],\n    };\n  },\n  methods: {\n    selectChange(value, index) {\n      console.log(arguments);\n      console.log(value, index);\n      this.selectedOptions[index] = value;\n    },\n    getDisable(value) {\n      if (this.selectedOptions.indexOf(value) >= 0) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n    add() {\n      this.ruleForm.list.push({\n        type: '',\n      });\n    },\n    del(index) {\n      // 删除时恢复可选\n      if (this.ruleForm.list[index] || this.ruleForm.list[index] == 0) {\n        this.selectedOptions.remove(this.ruleForm.list[index].type);\n      }\n      console.log(this.selectedOptions);\n      this.ruleForm.list.splice(index, 1);\n    },\n  },\n};\n</script>\n\n<style lang=\"css\" scoped>\n.ico {\n  font-size: 40px;\n}\n</style>\n\n```\n","source":"_posts/多个el-select共用一个options且一个option只能用一次.md","raw":"---\ntitle: 多个el-select共用一个options且一个option只能用一次\ndate: 2019-10-21 22:01:16\ntags: ['element-ui']\n---\n\n## 需求\n\n一个表单多个下拉框，假如 options 里有中国，美国，第一个 select 选择里中国那么第二个 select 的 options 中国就置为灰色，反之我第二个选里中国，第一个 options 中中国就置为灰色\n\n## 效果\n\n![](https://github.com/chengheai/review-demo-image/blob/master/2019-10-21%2022-06-05.2019-10-21%2022_07_14.gif?raw=true)\n\n## DEMO\n\n<font size=8>[在线 demo ⛩⛽️🚁✈️📡💈🧧🏮](https://chengheai.github.io/daily-vue-demo/#/select)</font>\n\n## 代码\n\n```html\n<template>\n  <div>\n    <el-form :model=\"ruleForm\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\">\n      <div v-for=\"(item, index) in ruleForm.list\" :key=\"index\">\n        <el-select\n          v-model=\"item.type\"\n          clearable\n          @change=\"selectChange(item.type,index)\"\n          placeholder=\"请选择\"\n        >\n          <el-option\n            v-for=\"(item,optionIndex)  in options\"\n            :key=\"optionIndex\"\n            :label=\"item.label\"\n            :disabled=\"getDisable(item.value)\"\n            :value=\"item.value\"\n          ></el-option>\n        </el-select>\n        <i\n          v-if=\"index === 0 && ruleForm.list[0].type !== '' && ruleForm.list.length<2\"\n          class=\"el-icon-circle-plus-outline ico\"\n          @click=\"add\"\n        ></i>\n        <i v-if=\"index !==0\" class=\"el-icon-remove-outline ico\" @click=\"del(index)\"></i>\n      </div>\n    </el-form>\n  </div>\n</template>\n```\n\n```javascript\n<script>\n/* eslint-disable */\n// 添加数组自定义事件 用来删除数组中的某一项\nArray.prototype.indexOf = function(val) {\n  for (var i = 0; i < this.length; i++) {\n    if (this[i] == val) {\n      return i;\n    }\n  }\n  return -1;\n};\nArray.prototype.remove = function(val) {\n  var index = this.indexOf(val);\n  if (index > -1) {\n    this.splice(index, 1);\n  }\n};\nexport default {\n  data() {\n    return {\n      ruleForm: {\n        list: [\n          {\n            type: '',\n          },\n        ],\n      },\n      options: [\n        {\n          label: '中国',\n          value: 1,\n        },\n        {\n          label: '美国',\n          value: 2,\n        },\n      ],\n      selectedOptions: [],\n    };\n  },\n  methods: {\n    selectChange(value, index) {\n      console.log(arguments);\n      console.log(value, index);\n      this.selectedOptions[index] = value;\n    },\n    getDisable(value) {\n      if (this.selectedOptions.indexOf(value) >= 0) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n    add() {\n      this.ruleForm.list.push({\n        type: '',\n      });\n    },\n    del(index) {\n      // 删除时恢复可选\n      if (this.ruleForm.list[index] || this.ruleForm.list[index] == 0) {\n        this.selectedOptions.remove(this.ruleForm.list[index].type);\n      }\n      console.log(this.selectedOptions);\n      this.ruleForm.list.splice(index, 1);\n    },\n  },\n};\n</script>\n\n<style lang=\"css\" scoped>\n.ico {\n  font-size: 40px;\n}\n</style>\n\n```\n","slug":"多个el-select共用一个options且一个option只能用一次","published":1,"updated":"2021-10-09T08:48:32.087Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzac9002y5c54ghviqt2s","content":"<h2 id=\"需求\"><a href=\"#需求\" class=\"headerlink\" title=\"需求\"></a>需求</h2><p>一个表单多个下拉框，假如 options 里有中国，美国，第一个 select 选择里中国那么第二个 select 的 options 中国就置为灰色，反之我第二个选里中国，第一个 options 中中国就置为灰色</p>\n<h2 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/2019-10-21%2022-06-05.2019-10-21%2022_07_14.gif?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"DEMO\"><a href=\"#DEMO\" class=\"headerlink\" title=\"DEMO\"></a>DEMO</h2><font size=\"8\"><a href=\"https://chengheai.github.io/daily-vue-demo/#/select\" target=\"_blank\" rel=\"noopener\">在线 demo ⛩⛽️🚁✈️📡💈🧧🏮</a></font>\n\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-form</span> <span class=\"attr\">:model</span>=<span class=\"string\">\"ruleForm\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"ruleForm\"</span> <span class=\"attr\">label-width</span>=<span class=\"string\">\"100px\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"demo-ruleForm\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"(item, index) in ruleForm.list\"</span> <span class=\"attr\">:key</span>=<span class=\"string\">\"index\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">el-select</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">v-model</span>=<span class=\"string\">\"item.type\"</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">clearable</span></span></span><br><span class=\"line\"><span class=\"tag\">          @<span class=\"attr\">change</span>=<span class=\"string\">\"selectChange(item.type,index)\"</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">placeholder</span>=<span class=\"string\">\"请选择\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        &gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">el-option</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">v-for</span>=<span class=\"string\">\"(item,optionIndex)  in options\"</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">:key</span>=<span class=\"string\">\"optionIndex\"</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">:label</span>=<span class=\"string\">\"item.label\"</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">:disabled</span>=<span class=\"string\">\"getDisable(item.value)\"</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">:value</span>=<span class=\"string\">\"item.value\"</span></span></span><br><span class=\"line\"><span class=\"tag\">          &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-option</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">el-select</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">i</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">v-if</span>=<span class=\"string\">\"index === 0 &amp;&amp; ruleForm.list[0].type !== '' &amp;&amp; ruleForm.list.length&lt;2\"</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">class</span>=<span class=\"string\">\"el-icon-circle-plus-outline ico\"</span></span></span><br><span class=\"line\"><span class=\"tag\">          @<span class=\"attr\">click</span>=<span class=\"string\">\"add\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">v-if</span>=<span class=\"string\">\"index !==0\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"el-icon-remove-outline ico\"</span> @<span class=\"attr\">click</span>=<span class=\"string\">\"del(index)\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">el-form</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\"><span class=\"comment\">/* eslint-disable */</span></span><br><span class=\"line\"><span class=\"comment\">// 添加数组自定义事件 用来删除数组中的某一项</span></span><br><span class=\"line\"><span class=\"built_in\">Array</span>.prototype.indexOf = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">val</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>[i] == val) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> i;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"built_in\">Array</span>.prototype.remove = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">val</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> index = <span class=\"keyword\">this</span>.indexOf(val);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (index &gt; <span class=\"number\">-1</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.splice(index, <span class=\"number\">1</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  data() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      ruleForm: &#123;</span><br><span class=\"line\">        list: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            type: <span class=\"string\">''</span>,</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        ],</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      options: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          label: <span class=\"string\">'中国'</span>,</span><br><span class=\"line\">          value: <span class=\"number\">1</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          label: <span class=\"string\">'美国'</span>,</span><br><span class=\"line\">          value: <span class=\"number\">2</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      ],</span><br><span class=\"line\">      selectedOptions: [],</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    selectChange(value, index) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"built_in\">arguments</span>);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(value, index);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.selectedOptions[index] = value;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    getDisable(value) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.selectedOptions.indexOf(value) &gt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    add() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.ruleForm.list.push(&#123;</span><br><span class=\"line\">        type: <span class=\"string\">''</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    del(index) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 删除时恢复可选</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.ruleForm.list[index] || <span class=\"keyword\">this</span>.ruleForm.list[index] == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.selectedOptions.remove(<span class=\"keyword\">this</span>.ruleForm.list[index].type);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.selectedOptions);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.ruleForm.list.splice(index, <span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">&lt;<span class=\"regexp\">/script&gt;</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">&lt;style lang=\"css\" scoped&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">.ico &#123;</span></span><br><span class=\"line\"><span class=\"regexp\">  font-size: 40px;</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">&lt;/</span>style&gt;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"需求\"><a href=\"#需求\" class=\"headerlink\" title=\"需求\"></a>需求</h2><p>一个表单多个下拉框，假如 options 里有中国，美国，第一个 select 选择里中国那么第二个 select 的 options 中国就置为灰色，反之我第二个选里中国，第一个 options 中中国就置为灰色</p>\n<h2 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/2019-10-21%2022-06-05.2019-10-21%2022_07_14.gif?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"DEMO\"><a href=\"#DEMO\" class=\"headerlink\" title=\"DEMO\"></a>DEMO</h2><font size=\"8\"><a href=\"https://chengheai.github.io/daily-vue-demo/#/select\" target=\"_blank\" rel=\"noopener\">在线 demo ⛩⛽️🚁✈️📡💈🧧🏮</a></font>\n\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-form</span> <span class=\"attr\">:model</span>=<span class=\"string\">\"ruleForm\"</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"ruleForm\"</span> <span class=\"attr\">label-width</span>=<span class=\"string\">\"100px\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"demo-ruleForm\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"(item, index) in ruleForm.list\"</span> <span class=\"attr\">:key</span>=<span class=\"string\">\"index\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">el-select</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">v-model</span>=<span class=\"string\">\"item.type\"</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">clearable</span></span></span><br><span class=\"line\"><span class=\"tag\">          @<span class=\"attr\">change</span>=<span class=\"string\">\"selectChange(item.type,index)\"</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">placeholder</span>=<span class=\"string\">\"请选择\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        &gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">el-option</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">v-for</span>=<span class=\"string\">\"(item,optionIndex)  in options\"</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">:key</span>=<span class=\"string\">\"optionIndex\"</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">:label</span>=<span class=\"string\">\"item.label\"</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">:disabled</span>=<span class=\"string\">\"getDisable(item.value)\"</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">:value</span>=<span class=\"string\">\"item.value\"</span></span></span><br><span class=\"line\"><span class=\"tag\">          &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-option</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">el-select</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">i</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">v-if</span>=<span class=\"string\">\"index === 0 &amp;&amp; ruleForm.list[0].type !== '' &amp;&amp; ruleForm.list.length&lt;2\"</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">class</span>=<span class=\"string\">\"el-icon-circle-plus-outline ico\"</span></span></span><br><span class=\"line\"><span class=\"tag\">          @<span class=\"attr\">click</span>=<span class=\"string\">\"add\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">v-if</span>=<span class=\"string\">\"index !==0\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"el-icon-remove-outline ico\"</span> @<span class=\"attr\">click</span>=<span class=\"string\">\"del(index)\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">el-form</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\"><span class=\"comment\">/* eslint-disable */</span></span><br><span class=\"line\"><span class=\"comment\">// 添加数组自定义事件 用来删除数组中的某一项</span></span><br><span class=\"line\"><span class=\"built_in\">Array</span>.prototype.indexOf = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">val</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>[i] == val) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> i;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"built_in\">Array</span>.prototype.remove = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">val</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> index = <span class=\"keyword\">this</span>.indexOf(val);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (index &gt; <span class=\"number\">-1</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.splice(index, <span class=\"number\">1</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  data() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      ruleForm: &#123;</span><br><span class=\"line\">        list: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            type: <span class=\"string\">''</span>,</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        ],</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      options: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          label: <span class=\"string\">'中国'</span>,</span><br><span class=\"line\">          value: <span class=\"number\">1</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          label: <span class=\"string\">'美国'</span>,</span><br><span class=\"line\">          value: <span class=\"number\">2</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      ],</span><br><span class=\"line\">      selectedOptions: [],</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    selectChange(value, index) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"built_in\">arguments</span>);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(value, index);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.selectedOptions[index] = value;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    getDisable(value) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.selectedOptions.indexOf(value) &gt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    add() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.ruleForm.list.push(&#123;</span><br><span class=\"line\">        type: <span class=\"string\">''</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    del(index) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 删除时恢复可选</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.ruleForm.list[index] || <span class=\"keyword\">this</span>.ruleForm.list[index] == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.selectedOptions.remove(<span class=\"keyword\">this</span>.ruleForm.list[index].type);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.selectedOptions);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.ruleForm.list.splice(index, <span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">&lt;<span class=\"regexp\">/script&gt;</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">&lt;style lang=\"css\" scoped&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">.ico &#123;</span></span><br><span class=\"line\"><span class=\"regexp\">  font-size: 40px;</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">&lt;/</span>style&gt;</span><br></pre></td></tr></table></figure>\n"},{"title":"常见js中易错小题介绍","date":"2019-07-16T05:31:49.000Z","_content":"## 前说\n在前端面试过程中，有时候会因为一些小题而使你与offer失之交臂，这也反应出你的基础知识点不扎实，或做事粗心大意，很多公司也喜欢出这样的题目来考察面试者的基本水平。下面总结了一些典型的面试易错题。\n## 典题\n### 1、\n下面哪个是错误的？\n\n  A : li:nth-of-child(1)\n  B : li:nth-of-type(1)\n  C : li:nth-last-child(1)\n  D : li:nth-last-of-type(1)\n答案：A\n解析：只有nth-child() 没有nth-of-child()\n### 2、\n关于IE的window对象表述正确的有：()\n  A. window.opener属性本身就是指向window\n  B. window.reload()方法可以用来刷新当前页面\n  C. window.location = 'a.html' 和 window.location.href = 'a.html'的作用都是把当前页面替换成a.html页面\n  D. 定义了全局变量g， 可以通过window.g来取得该变量\n\n 答案：ACD\n 解析：window不存在reload()方法， 只有location.reload()\n ### 3、\n 运行结果是什么？\n``` javascript\nvar a = 'HelloWorld'\nconsole.log(a.split('').sort().join(''));\n```\n答案：HWdellloor\n解析：sort根据Unicode排序\n资料： [ sort ](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/sort) [ Unicode ](https://baike.baidu.com/item/Unicode/750500?fr=aladdin) [ ASCII ](https://baike.baidu.com/item/ASCII/309296?fr=aladdin) [ Unicode与ASCII的区别 ](http://m.elecfans.com/article/601592.html)\n\n\n\n","source":"_posts/常见js中易错小题介绍.md","raw":"---\ntitle: 常见js中易错小题介绍\ndate: 2019-07-16 13:31:49\ntags: ['面试题', 'JavaScript']\n---\n## 前说\n在前端面试过程中，有时候会因为一些小题而使你与offer失之交臂，这也反应出你的基础知识点不扎实，或做事粗心大意，很多公司也喜欢出这样的题目来考察面试者的基本水平。下面总结了一些典型的面试易错题。\n## 典题\n### 1、\n下面哪个是错误的？\n\n  A : li:nth-of-child(1)\n  B : li:nth-of-type(1)\n  C : li:nth-last-child(1)\n  D : li:nth-last-of-type(1)\n答案：A\n解析：只有nth-child() 没有nth-of-child()\n### 2、\n关于IE的window对象表述正确的有：()\n  A. window.opener属性本身就是指向window\n  B. window.reload()方法可以用来刷新当前页面\n  C. window.location = 'a.html' 和 window.location.href = 'a.html'的作用都是把当前页面替换成a.html页面\n  D. 定义了全局变量g， 可以通过window.g来取得该变量\n\n 答案：ACD\n 解析：window不存在reload()方法， 只有location.reload()\n ### 3、\n 运行结果是什么？\n``` javascript\nvar a = 'HelloWorld'\nconsole.log(a.split('').sort().join(''));\n```\n答案：HWdellloor\n解析：sort根据Unicode排序\n资料： [ sort ](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/sort) [ Unicode ](https://baike.baidu.com/item/Unicode/750500?fr=aladdin) [ ASCII ](https://baike.baidu.com/item/ASCII/309296?fr=aladdin) [ Unicode与ASCII的区别 ](http://m.elecfans.com/article/601592.html)\n\n\n\n","slug":"常见js中易错小题介绍","published":1,"updated":"2021-10-09T08:48:32.088Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzaca00315c541jcg7i01","content":"<h2 id=\"前说\"><a href=\"#前说\" class=\"headerlink\" title=\"前说\"></a>前说</h2><p>在前端面试过程中，有时候会因为一些小题而使你与offer失之交臂，这也反应出你的基础知识点不扎实，或做事粗心大意，很多公司也喜欢出这样的题目来考察面试者的基本水平。下面总结了一些典型的面试易错题。</p>\n<h2 id=\"典题\"><a href=\"#典题\" class=\"headerlink\" title=\"典题\"></a>典题</h2><h3 id=\"1、\"><a href=\"#1、\" class=\"headerlink\" title=\"1、\"></a>1、</h3><p>下面哪个是错误的？</p>\n<p>  A : li:nth-of-child(1)<br>  B : li:nth-of-type(1)<br>  C : li:nth-last-child(1)<br>  D : li:nth-last-of-type(1)<br>答案：A<br>解析：只有nth-child() 没有nth-of-child()</p>\n<h3 id=\"2、\"><a href=\"#2、\" class=\"headerlink\" title=\"2、\"></a>2、</h3><p>关于IE的window对象表述正确的有：()<br>  A. window.opener属性本身就是指向window<br>  B. window.reload()方法可以用来刷新当前页面<br>  C. window.location = ‘a.html’ 和 window.location.href = ‘a.html’的作用都是把当前页面替换成a.html页面<br>  D. 定义了全局变量g， 可以通过window.g来取得该变量</p>\n<p> 答案：ACD<br> 解析：window不存在reload()方法， 只有location.reload()</p>\n<h3 id=\"3、\"><a href=\"#3、\" class=\"headerlink\" title=\"3、\"></a>3、</h3><p> 运行结果是什么？<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"string\">'HelloWorld'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(a.split(<span class=\"string\">''</span>).sort().join(<span class=\"string\">''</span>));</span><br></pre></td></tr></table></figure></p>\n<p>答案：HWdellloor<br>解析：sort根据Unicode排序<br>资料： <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/sort\" target=\"_blank\" rel=\"noopener\"> sort </a> <a href=\"https://baike.baidu.com/item/Unicode/750500?fr=aladdin\" target=\"_blank\" rel=\"noopener\"> Unicode </a> <a href=\"https://baike.baidu.com/item/ASCII/309296?fr=aladdin\" target=\"_blank\" rel=\"noopener\"> ASCII </a> <a href=\"http://m.elecfans.com/article/601592.html\" target=\"_blank\" rel=\"noopener\"> Unicode与ASCII的区别 </a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"前说\"><a href=\"#前说\" class=\"headerlink\" title=\"前说\"></a>前说</h2><p>在前端面试过程中，有时候会因为一些小题而使你与offer失之交臂，这也反应出你的基础知识点不扎实，或做事粗心大意，很多公司也喜欢出这样的题目来考察面试者的基本水平。下面总结了一些典型的面试易错题。</p>\n<h2 id=\"典题\"><a href=\"#典题\" class=\"headerlink\" title=\"典题\"></a>典题</h2><h3 id=\"1、\"><a href=\"#1、\" class=\"headerlink\" title=\"1、\"></a>1、</h3><p>下面哪个是错误的？</p>\n<p>  A : li:nth-of-child(1)<br>  B : li:nth-of-type(1)<br>  C : li:nth-last-child(1)<br>  D : li:nth-last-of-type(1)<br>答案：A<br>解析：只有nth-child() 没有nth-of-child()</p>\n<h3 id=\"2、\"><a href=\"#2、\" class=\"headerlink\" title=\"2、\"></a>2、</h3><p>关于IE的window对象表述正确的有：()<br>  A. window.opener属性本身就是指向window<br>  B. window.reload()方法可以用来刷新当前页面<br>  C. window.location = ‘a.html’ 和 window.location.href = ‘a.html’的作用都是把当前页面替换成a.html页面<br>  D. 定义了全局变量g， 可以通过window.g来取得该变量</p>\n<p> 答案：ACD<br> 解析：window不存在reload()方法， 只有location.reload()</p>\n<h3 id=\"3、\"><a href=\"#3、\" class=\"headerlink\" title=\"3、\"></a>3、</h3><p> 运行结果是什么？<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"string\">'HelloWorld'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(a.split(<span class=\"string\">''</span>).sort().join(<span class=\"string\">''</span>));</span><br></pre></td></tr></table></figure></p>\n<p>答案：HWdellloor<br>解析：sort根据Unicode排序<br>资料： <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/sort\" target=\"_blank\" rel=\"noopener\"> sort </a> <a href=\"https://baike.baidu.com/item/Unicode/750500?fr=aladdin\" target=\"_blank\" rel=\"noopener\"> Unicode </a> <a href=\"https://baike.baidu.com/item/ASCII/309296?fr=aladdin\" target=\"_blank\" rel=\"noopener\"> ASCII </a> <a href=\"http://m.elecfans.com/article/601592.html\" target=\"_blank\" rel=\"noopener\"> Unicode与ASCII的区别 </a></p>\n"},{"title":"小程序中优雅的获取手机号","date":"2020-01-08T13:33:09.000Z","_content":"\n## 前言\n\n最近在写小程序项目，有个获取手机号功能，网上荡了一下，虽不说是代码问题，有些文章都是残缺不全的，说到容易错误的区域又并未使用代码避免，说而不做的问题，索性自己结合网上的文章及官网文档写了一套完整的代码，完全开箱即用 🏄🏻‍♂️🏮🎹🐸\n\n## 效果\n\n![](https://github.com/chengheai/review-demo-image/blob/master/WX20200108-214825@2x.png?raw=true)\n\n## 代码\n\n```javascript\n//Page Object\nPage({\n  data: {},\n  getPhoneNumber: function(e) {\n    let that = this;\n    console.log('e', e);\n    //-----------------是否授权，授权通过进入主页面，授权拒绝则停留在登录界面\n    if (e.detail.errMsg == 'getPhoneNumber:fail user deny') {\n      //用户点击拒绝\n      wx.showModal({\n        content: '请输入手机号',\n        showCancel: false,\n        success(res) {\n          if (res.confirm) {\n            // your code ...\n          }\n        },\n      });\n    } else {\n      let phoneQuery = {\n        encryptedData: e.detail.encryptedData,\n        iv: e.detail.iv,\n        // other params...\n        openid: wx.getStorageSync('openid'),\n      };\n      // 检查是session_key否过期\n      wx.checkSession({\n        success() {\n          //session_key 未过期，并且在本生命周期一直有效\n          console.log('session_key 未过期，并且在本生命周期一直有效');\n          wx.request({\n            url: 'https://xxx.com/api/v1/xx',\n            method: 'POST',\n            data: phoneQuery,\n            success: function(res) {\n              // your code...\n            },\n            fail: function(err) {\n              // your code...\n            },\n          });\n        },\n        fail() {\n          that.myLogin();\n          // session_key 已经失效，需要重新执行登录流程\n        },\n      });\n    }\n  },\n  // login\n  myLogin() {\n    wx.login({\n      success: res => {\n        //用code传给服务器调换session_key\n        let query = {\n          code: res.code,\n        };\n        // my_login为wx.request({})封装\n        my_login(query).then(res => {\n          // other code...\n          wx.setStorageSync('unionid', unionid);\n        });\n      },\n    });\n  },\n  //options(Object)\n  onLoad: function(options) {},\n  onReady: function() {},\n  onShow: function() {},\n  onHide: function() {},\n  onUnload: function() {},\n  onPullDownRefresh: function() {},\n  onReachBottom: function() {},\n  onShareAppMessage: function() {},\n  onPageScroll: function() {},\n  //item(index,pagePath,text)\n  onTabItemTap: function(item) {},\n});\n```\n","source":"_posts/小程序中优雅的获取手机号.md","raw":"---\ntitle: 小程序中优雅的获取手机号\ndate: 2020-01-08 21:33:09\ntags: ['小程序']\n---\n\n## 前言\n\n最近在写小程序项目，有个获取手机号功能，网上荡了一下，虽不说是代码问题，有些文章都是残缺不全的，说到容易错误的区域又并未使用代码避免，说而不做的问题，索性自己结合网上的文章及官网文档写了一套完整的代码，完全开箱即用 🏄🏻‍♂️🏮🎹🐸\n\n## 效果\n\n![](https://github.com/chengheai/review-demo-image/blob/master/WX20200108-214825@2x.png?raw=true)\n\n## 代码\n\n```javascript\n//Page Object\nPage({\n  data: {},\n  getPhoneNumber: function(e) {\n    let that = this;\n    console.log('e', e);\n    //-----------------是否授权，授权通过进入主页面，授权拒绝则停留在登录界面\n    if (e.detail.errMsg == 'getPhoneNumber:fail user deny') {\n      //用户点击拒绝\n      wx.showModal({\n        content: '请输入手机号',\n        showCancel: false,\n        success(res) {\n          if (res.confirm) {\n            // your code ...\n          }\n        },\n      });\n    } else {\n      let phoneQuery = {\n        encryptedData: e.detail.encryptedData,\n        iv: e.detail.iv,\n        // other params...\n        openid: wx.getStorageSync('openid'),\n      };\n      // 检查是session_key否过期\n      wx.checkSession({\n        success() {\n          //session_key 未过期，并且在本生命周期一直有效\n          console.log('session_key 未过期，并且在本生命周期一直有效');\n          wx.request({\n            url: 'https://xxx.com/api/v1/xx',\n            method: 'POST',\n            data: phoneQuery,\n            success: function(res) {\n              // your code...\n            },\n            fail: function(err) {\n              // your code...\n            },\n          });\n        },\n        fail() {\n          that.myLogin();\n          // session_key 已经失效，需要重新执行登录流程\n        },\n      });\n    }\n  },\n  // login\n  myLogin() {\n    wx.login({\n      success: res => {\n        //用code传给服务器调换session_key\n        let query = {\n          code: res.code,\n        };\n        // my_login为wx.request({})封装\n        my_login(query).then(res => {\n          // other code...\n          wx.setStorageSync('unionid', unionid);\n        });\n      },\n    });\n  },\n  //options(Object)\n  onLoad: function(options) {},\n  onReady: function() {},\n  onShow: function() {},\n  onHide: function() {},\n  onUnload: function() {},\n  onPullDownRefresh: function() {},\n  onReachBottom: function() {},\n  onShareAppMessage: function() {},\n  onPageScroll: function() {},\n  //item(index,pagePath,text)\n  onTabItemTap: function(item) {},\n});\n```\n","slug":"小程序中优雅的获取手机号","published":1,"updated":"2021-10-09T08:48:32.088Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzacb00335c542zz1y11y","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>最近在写小程序项目，有个获取手机号功能，网上荡了一下，虽不说是代码问题，有些文章都是残缺不全的，说到容易错误的区域又并未使用代码避免，说而不做的问题，索性自己结合网上的文章及官网文档写了一套完整的代码，完全开箱即用 🏄🏻‍♂️🏮🎹🐸</p>\n<h2 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WX20200108-214825@2x.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//Page Object</span></span><br><span class=\"line\">Page(&#123;</span><br><span class=\"line\">  data: &#123;&#125;,</span><br><span class=\"line\">  getPhoneNumber: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> that = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'e'</span>, e);</span><br><span class=\"line\">    <span class=\"comment\">//-----------------是否授权，授权通过进入主页面，授权拒绝则停留在登录界面</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (e.detail.errMsg == <span class=\"string\">'getPhoneNumber:fail user deny'</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">//用户点击拒绝</span></span><br><span class=\"line\">      wx.showModal(&#123;</span><br><span class=\"line\">        content: <span class=\"string\">'请输入手机号'</span>,</span><br><span class=\"line\">        showCancel: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        success(res) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (res.confirm) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// your code ...</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> phoneQuery = &#123;</span><br><span class=\"line\">        encryptedData: e.detail.encryptedData,</span><br><span class=\"line\">        iv: e.detail.iv,</span><br><span class=\"line\">        <span class=\"comment\">// other params...</span></span><br><span class=\"line\">        openid: wx.getStorageSync(<span class=\"string\">'openid'</span>),</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      <span class=\"comment\">// 检查是session_key否过期</span></span><br><span class=\"line\">      wx.checkSession(&#123;</span><br><span class=\"line\">        success() &#123;</span><br><span class=\"line\">          <span class=\"comment\">//session_key 未过期，并且在本生命周期一直有效</span></span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">'session_key 未过期，并且在本生命周期一直有效'</span>);</span><br><span class=\"line\">          wx.request(&#123;</span><br><span class=\"line\">            url: <span class=\"string\">'https://xxx.com/api/v1/xx'</span>,</span><br><span class=\"line\">            method: <span class=\"string\">'POST'</span>,</span><br><span class=\"line\">            data: phoneQuery,</span><br><span class=\"line\">            success: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">              <span class=\"comment\">// your code...</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            fail: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">              <span class=\"comment\">// your code...</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        fail() &#123;</span><br><span class=\"line\">          that.myLogin();</span><br><span class=\"line\">          <span class=\"comment\">// session_key 已经失效，需要重新执行登录流程</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// login</span></span><br><span class=\"line\">  myLogin() &#123;</span><br><span class=\"line\">    wx.login(&#123;</span><br><span class=\"line\">      success: <span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//用code传给服务器调换session_key</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> query = &#123;</span><br><span class=\"line\">          code: res.code,</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        <span class=\"comment\">// my_login为wx.request(&#123;&#125;)封装</span></span><br><span class=\"line\">        my_login(query).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"comment\">// other code...</span></span><br><span class=\"line\">          wx.setStorageSync(<span class=\"string\">'unionid'</span>, unionid);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">//options(Object)</span></span><br><span class=\"line\">  onLoad: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">options</span>) </span>&#123;&#125;,</span><br><span class=\"line\">  onReady: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;&#125;,</span><br><span class=\"line\">  onShow: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;&#125;,</span><br><span class=\"line\">  onHide: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;&#125;,</span><br><span class=\"line\">  onUnload: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;&#125;,</span><br><span class=\"line\">  onPullDownRefresh: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;&#125;,</span><br><span class=\"line\">  onReachBottom: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;&#125;,</span><br><span class=\"line\">  onShareAppMessage: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;&#125;,</span><br><span class=\"line\">  onPageScroll: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;&#125;,</span><br><span class=\"line\">  <span class=\"comment\">//item(index,pagePath,text)</span></span><br><span class=\"line\">  onTabItemTap: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item</span>) </span>&#123;&#125;,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>最近在写小程序项目，有个获取手机号功能，网上荡了一下，虽不说是代码问题，有些文章都是残缺不全的，说到容易错误的区域又并未使用代码避免，说而不做的问题，索性自己结合网上的文章及官网文档写了一套完整的代码，完全开箱即用 🏄🏻‍♂️🏮🎹🐸</p>\n<h2 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WX20200108-214825@2x.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//Page Object</span></span><br><span class=\"line\">Page(&#123;</span><br><span class=\"line\">  data: &#123;&#125;,</span><br><span class=\"line\">  getPhoneNumber: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> that = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'e'</span>, e);</span><br><span class=\"line\">    <span class=\"comment\">//-----------------是否授权，授权通过进入主页面，授权拒绝则停留在登录界面</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (e.detail.errMsg == <span class=\"string\">'getPhoneNumber:fail user deny'</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">//用户点击拒绝</span></span><br><span class=\"line\">      wx.showModal(&#123;</span><br><span class=\"line\">        content: <span class=\"string\">'请输入手机号'</span>,</span><br><span class=\"line\">        showCancel: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        success(res) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (res.confirm) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// your code ...</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> phoneQuery = &#123;</span><br><span class=\"line\">        encryptedData: e.detail.encryptedData,</span><br><span class=\"line\">        iv: e.detail.iv,</span><br><span class=\"line\">        <span class=\"comment\">// other params...</span></span><br><span class=\"line\">        openid: wx.getStorageSync(<span class=\"string\">'openid'</span>),</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      <span class=\"comment\">// 检查是session_key否过期</span></span><br><span class=\"line\">      wx.checkSession(&#123;</span><br><span class=\"line\">        success() &#123;</span><br><span class=\"line\">          <span class=\"comment\">//session_key 未过期，并且在本生命周期一直有效</span></span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">'session_key 未过期，并且在本生命周期一直有效'</span>);</span><br><span class=\"line\">          wx.request(&#123;</span><br><span class=\"line\">            url: <span class=\"string\">'https://xxx.com/api/v1/xx'</span>,</span><br><span class=\"line\">            method: <span class=\"string\">'POST'</span>,</span><br><span class=\"line\">            data: phoneQuery,</span><br><span class=\"line\">            success: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">              <span class=\"comment\">// your code...</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            fail: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">              <span class=\"comment\">// your code...</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        fail() &#123;</span><br><span class=\"line\">          that.myLogin();</span><br><span class=\"line\">          <span class=\"comment\">// session_key 已经失效，需要重新执行登录流程</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// login</span></span><br><span class=\"line\">  myLogin() &#123;</span><br><span class=\"line\">    wx.login(&#123;</span><br><span class=\"line\">      success: <span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//用code传给服务器调换session_key</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> query = &#123;</span><br><span class=\"line\">          code: res.code,</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        <span class=\"comment\">// my_login为wx.request(&#123;&#125;)封装</span></span><br><span class=\"line\">        my_login(query).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"comment\">// other code...</span></span><br><span class=\"line\">          wx.setStorageSync(<span class=\"string\">'unionid'</span>, unionid);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">//options(Object)</span></span><br><span class=\"line\">  onLoad: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">options</span>) </span>&#123;&#125;,</span><br><span class=\"line\">  onReady: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;&#125;,</span><br><span class=\"line\">  onShow: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;&#125;,</span><br><span class=\"line\">  onHide: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;&#125;,</span><br><span class=\"line\">  onUnload: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;&#125;,</span><br><span class=\"line\">  onPullDownRefresh: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;&#125;,</span><br><span class=\"line\">  onReachBottom: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;&#125;,</span><br><span class=\"line\">  onShareAppMessage: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;&#125;,</span><br><span class=\"line\">  onPageScroll: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;&#125;,</span><br><span class=\"line\">  <span class=\"comment\">//item(index,pagePath,text)</span></span><br><span class=\"line\">  onTabItemTap: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item</span>) </span>&#123;&#125;,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n"},{"title":"微信支付当前页面的URL未注册问题[单页面]","date":"2019-08-13T13:22:06.000Z","_content":"## 前言\n微信支付时，当调用微信支付的时候，微信会判断当前页面和微信公众号后台设置的支付授权目录是否一致，他会把页面最后一次刷新的url作为判断依据（如果用户刷新了任何页面，这个页面就是支付页面），这个时候，单页应用的路由中‘#’后面的内容也会被传递过去，在微信的判断流程里，这个url和设置的目录是不匹配的，因为涉及到多个页面都会发起支付请求，所有设置多个带页面参数的url是不合理的，所以这里在‘#’前面添加了‘?’，让微信忽略‘?’后面的内容。\n## 设置支付目录\n### 支付根目录\n``` javascript\nhttp://www.paytest.com/app/\n```\n### 支付页面\n``` javascript\nhttp://www.paytest.com/app/#/pay1\n\nhttp://www.paytest.com/app/#/pay2\n\nhttp://www.paytest.com/app/#/pay3\n```\n## 解决方式\n当我在'#'前面添加'?',这个时候微信会把'?'后面的内容当做参数而vue可以识别'?#',这样既可以避免出现出现提示当前页面url未注册的错误在视图加载后，修改url（这样不会触发页面重新加载，其他框架也可做类似处理）\n## 解决代码\n``` javascript\n  mounted() {\n    if (window.location.href.indexOf(\"?#\") < 0) {\n      window.location.href = window.location.href.replace(\"#\", \"?#\");\n    }\n  }\n```","source":"_posts/微信支付当前页面的URL未注册问题-单页面.md","raw":"---\ntitle: '微信支付当前页面的URL未注册问题[单页面]'\ndate: 2019-08-13 21:22:06\ntags: ['微信支付']\n---\n## 前言\n微信支付时，当调用微信支付的时候，微信会判断当前页面和微信公众号后台设置的支付授权目录是否一致，他会把页面最后一次刷新的url作为判断依据（如果用户刷新了任何页面，这个页面就是支付页面），这个时候，单页应用的路由中‘#’后面的内容也会被传递过去，在微信的判断流程里，这个url和设置的目录是不匹配的，因为涉及到多个页面都会发起支付请求，所有设置多个带页面参数的url是不合理的，所以这里在‘#’前面添加了‘?’，让微信忽略‘?’后面的内容。\n## 设置支付目录\n### 支付根目录\n``` javascript\nhttp://www.paytest.com/app/\n```\n### 支付页面\n``` javascript\nhttp://www.paytest.com/app/#/pay1\n\nhttp://www.paytest.com/app/#/pay2\n\nhttp://www.paytest.com/app/#/pay3\n```\n## 解决方式\n当我在'#'前面添加'?',这个时候微信会把'?'后面的内容当做参数而vue可以识别'?#',这样既可以避免出现出现提示当前页面url未注册的错误在视图加载后，修改url（这样不会触发页面重新加载，其他框架也可做类似处理）\n## 解决代码\n``` javascript\n  mounted() {\n    if (window.location.href.indexOf(\"?#\") < 0) {\n      window.location.href = window.location.href.replace(\"#\", \"?#\");\n    }\n  }\n```","slug":"微信支付当前页面的URL未注册问题-单页面","published":1,"updated":"2021-10-09T08:48:32.090Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzacc00365c54uc0757eq","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>微信支付时，当调用微信支付的时候，微信会判断当前页面和微信公众号后台设置的支付授权目录是否一致，他会把页面最后一次刷新的url作为判断依据（如果用户刷新了任何页面，这个页面就是支付页面），这个时候，单页应用的路由中‘#’后面的内容也会被传递过去，在微信的判断流程里，这个url和设置的目录是不匹配的，因为涉及到多个页面都会发起支付请求，所有设置多个带页面参数的url是不合理的，所以这里在‘#’前面添加了‘?’，让微信忽略‘?’后面的内容。</p>\n<h2 id=\"设置支付目录\"><a href=\"#设置支付目录\" class=\"headerlink\" title=\"设置支付目录\"></a>设置支付目录</h2><h3 id=\"支付根目录\"><a href=\"#支付根目录\" class=\"headerlink\" title=\"支付根目录\"></a>支付根目录</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http:<span class=\"comment\">//www.paytest.com/app/</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"支付页面\"><a href=\"#支付页面\" class=\"headerlink\" title=\"支付页面\"></a>支付页面</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http:<span class=\"comment\">//www.paytest.com/app/#/pay1</span></span><br><span class=\"line\"></span><br><span class=\"line\">http:<span class=\"comment\">//www.paytest.com/app/#/pay2</span></span><br><span class=\"line\"></span><br><span class=\"line\">http:<span class=\"comment\">//www.paytest.com/app/#/pay3</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"解决方式\"><a href=\"#解决方式\" class=\"headerlink\" title=\"解决方式\"></a>解决方式</h2><p>当我在’#’前面添加’?’,这个时候微信会把’?’后面的内容当做参数而vue可以识别’?#’,这样既可以避免出现出现提示当前页面url未注册的错误在视图加载后，修改url（这样不会触发页面重新加载，其他框架也可做类似处理）</p>\n<h2 id=\"解决代码\"><a href=\"#解决代码\" class=\"headerlink\" title=\"解决代码\"></a>解决代码</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mounted() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">window</span>.location.href.indexOf(<span class=\"string\">\"?#\"</span>) &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.location.href = <span class=\"built_in\">window</span>.location.href.replace(<span class=\"string\">\"#\"</span>, <span class=\"string\">\"?#\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>微信支付时，当调用微信支付的时候，微信会判断当前页面和微信公众号后台设置的支付授权目录是否一致，他会把页面最后一次刷新的url作为判断依据（如果用户刷新了任何页面，这个页面就是支付页面），这个时候，单页应用的路由中‘#’后面的内容也会被传递过去，在微信的判断流程里，这个url和设置的目录是不匹配的，因为涉及到多个页面都会发起支付请求，所有设置多个带页面参数的url是不合理的，所以这里在‘#’前面添加了‘?’，让微信忽略‘?’后面的内容。</p>\n<h2 id=\"设置支付目录\"><a href=\"#设置支付目录\" class=\"headerlink\" title=\"设置支付目录\"></a>设置支付目录</h2><h3 id=\"支付根目录\"><a href=\"#支付根目录\" class=\"headerlink\" title=\"支付根目录\"></a>支付根目录</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http:<span class=\"comment\">//www.paytest.com/app/</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"支付页面\"><a href=\"#支付页面\" class=\"headerlink\" title=\"支付页面\"></a>支付页面</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http:<span class=\"comment\">//www.paytest.com/app/#/pay1</span></span><br><span class=\"line\"></span><br><span class=\"line\">http:<span class=\"comment\">//www.paytest.com/app/#/pay2</span></span><br><span class=\"line\"></span><br><span class=\"line\">http:<span class=\"comment\">//www.paytest.com/app/#/pay3</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"解决方式\"><a href=\"#解决方式\" class=\"headerlink\" title=\"解决方式\"></a>解决方式</h2><p>当我在’#’前面添加’?’,这个时候微信会把’?’后面的内容当做参数而vue可以识别’?#’,这样既可以避免出现出现提示当前页面url未注册的错误在视图加载后，修改url（这样不会触发页面重新加载，其他框架也可做类似处理）</p>\n<h2 id=\"解决代码\"><a href=\"#解决代码\" class=\"headerlink\" title=\"解决代码\"></a>解决代码</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mounted() &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">window</span>.location.href.indexOf(<span class=\"string\">\"?#\"</span>) &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.location.href = <span class=\"built_in\">window</span>.location.href.replace(<span class=\"string\">\"#\"</span>, <span class=\"string\">\"?#\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"怎么使用docker运行nuxt项目","date":"2020-01-07T13:18:36.000Z","_content":"\n## 个人日常 DEMO\n\n```bash\ngit clone git@github.com:chengheai/ssr-project.git\n```\n\n## 添加 Dockerfile\n\n```javascript\ntouch Dockerfile\nvi Dockerfile\nFROM node:8.11.0\n\nWORKDIR /opt\nADD node_modules /opt/node_modules\nADD server /opt/server\nADD .nuxt /opt/.nuxt\nADD static /opt/static\nADD nuxt.config.js /opt\nADD package.json /opt\nEXPOSE 3000\nCMD [\"npm\", \"run\", \"start\"]\n\n```\n\n~FROM node:8.11.0：该 image 文件继承官方的 node image，冒号表示标签，这里标签是 8.11.0，即 8.11.0 版本的 node。\n~ADD . /opt：将当前目录文件下的所有文件（除了.dockerignore 排除的路径），都拷贝进入 image 文件的/opt 目录。\n~WORKDIR /opt：指定接下来的工作路径为/opt。\n~RUN npm install 或者 ADD node_modules：在/opt 目录下，运行 npm install 命令安装依赖。注意，安装后所有的依赖，都将打包进入 image 文件。\n~EXPOSE 3000: 3000 端口暴露出来， 允许外部连接这个端口。\n\n## 添加.dockerignore\n\n```bash\ntouch .dockerignore\nvi .dockerignore\n  .git\n  # node_modules\n  npm-debug.log\n\n```\n\n## build\n\n```bash\ndocker image build -t ssr-project.\n# 或者\ndocker image build -t ssr-project:0.0.1 .\n# 最后面的空格和点不要漏\n```\n\n![](https://github.com/chengheai/review-demo-image/blob/master/WechatIMG370.png?raw=true)\n\n## start\n\n```bash\n$ docker run -d --name ssr-server -p 3000:3000 test-ssr\nssr-server: 容器名称\ntest-ssr: 镜像\n关闭\n$ docker stop ssr-server\n```\n\n```bash\nokcer image ls // 查看 image\ndocker image build -t ssr-project.  // 常见image\ndocker rmi [containerID] // 删除指定镜像\ndocker run -it --rm -p 3000:3000 ssr-project // docker container run命令会从 image 文件生成容器。--rm参数，在容器终止运行后自动删除容器文件\ndocker ps // 列出本机正在运行的容器\ndocker ps -a  // 列出本机所有容器，包括终止运行的容器\ndocker container ls // 列出本机正在运行的容器\ndocker container ls --all // 列出本机所有容器，包括终止运行的容器\ndocker container rm [containerID] // 删除指定容器\ndocker container kill [containerID] // 终止容器运行，相当于向容器里面的主进程发出 SIGKILL 信号\ndocker container stop [containerID] // 终止容器运行，相当于向容器里面的主进程发出 SIGTERM 信号，然后过一段时间再发出 SIGKILL 信号\ndocker container start [containerID] // 启动已经生成、已经停止运行的容器\ndocker container logs [containerID] // 用来查看 docker 容器的输出，即容器里面 Shell 的标准输出\ndocker container exec -it [containerID] /bin/bash // 用于进入一个正在运行的 docker 容器 进入容器就可以在容器的 Shell 执行命令了\ndocker container cp [containID]:[/path/to/file] . // 用于从正在运行的 Docker 容器里面，将文件拷贝到本机\n```\n\n## 附录\n\n[docker 常用指令说明](https://www.cnblogs.com/DeepInThought/p/10896790.html)\n","source":"_posts/怎么使用docker运行nuxt项目.md","raw":"---\ntitle: 怎么使用docker运行nuxt项目\ndate: 2020-01-07 21:18:36\ntags: ['docker']\n---\n\n## 个人日常 DEMO\n\n```bash\ngit clone git@github.com:chengheai/ssr-project.git\n```\n\n## 添加 Dockerfile\n\n```javascript\ntouch Dockerfile\nvi Dockerfile\nFROM node:8.11.0\n\nWORKDIR /opt\nADD node_modules /opt/node_modules\nADD server /opt/server\nADD .nuxt /opt/.nuxt\nADD static /opt/static\nADD nuxt.config.js /opt\nADD package.json /opt\nEXPOSE 3000\nCMD [\"npm\", \"run\", \"start\"]\n\n```\n\n~FROM node:8.11.0：该 image 文件继承官方的 node image，冒号表示标签，这里标签是 8.11.0，即 8.11.0 版本的 node。\n~ADD . /opt：将当前目录文件下的所有文件（除了.dockerignore 排除的路径），都拷贝进入 image 文件的/opt 目录。\n~WORKDIR /opt：指定接下来的工作路径为/opt。\n~RUN npm install 或者 ADD node_modules：在/opt 目录下，运行 npm install 命令安装依赖。注意，安装后所有的依赖，都将打包进入 image 文件。\n~EXPOSE 3000: 3000 端口暴露出来， 允许外部连接这个端口。\n\n## 添加.dockerignore\n\n```bash\ntouch .dockerignore\nvi .dockerignore\n  .git\n  # node_modules\n  npm-debug.log\n\n```\n\n## build\n\n```bash\ndocker image build -t ssr-project.\n# 或者\ndocker image build -t ssr-project:0.0.1 .\n# 最后面的空格和点不要漏\n```\n\n![](https://github.com/chengheai/review-demo-image/blob/master/WechatIMG370.png?raw=true)\n\n## start\n\n```bash\n$ docker run -d --name ssr-server -p 3000:3000 test-ssr\nssr-server: 容器名称\ntest-ssr: 镜像\n关闭\n$ docker stop ssr-server\n```\n\n```bash\nokcer image ls // 查看 image\ndocker image build -t ssr-project.  // 常见image\ndocker rmi [containerID] // 删除指定镜像\ndocker run -it --rm -p 3000:3000 ssr-project // docker container run命令会从 image 文件生成容器。--rm参数，在容器终止运行后自动删除容器文件\ndocker ps // 列出本机正在运行的容器\ndocker ps -a  // 列出本机所有容器，包括终止运行的容器\ndocker container ls // 列出本机正在运行的容器\ndocker container ls --all // 列出本机所有容器，包括终止运行的容器\ndocker container rm [containerID] // 删除指定容器\ndocker container kill [containerID] // 终止容器运行，相当于向容器里面的主进程发出 SIGKILL 信号\ndocker container stop [containerID] // 终止容器运行，相当于向容器里面的主进程发出 SIGTERM 信号，然后过一段时间再发出 SIGKILL 信号\ndocker container start [containerID] // 启动已经生成、已经停止运行的容器\ndocker container logs [containerID] // 用来查看 docker 容器的输出，即容器里面 Shell 的标准输出\ndocker container exec -it [containerID] /bin/bash // 用于进入一个正在运行的 docker 容器 进入容器就可以在容器的 Shell 执行命令了\ndocker container cp [containID]:[/path/to/file] . // 用于从正在运行的 Docker 容器里面，将文件拷贝到本机\n```\n\n## 附录\n\n[docker 常用指令说明](https://www.cnblogs.com/DeepInThought/p/10896790.html)\n","slug":"怎么使用docker运行nuxt项目","published":1,"updated":"2021-10-09T08:48:32.091Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzacd00385c54wlnedtax","content":"<h2 id=\"个人日常-DEMO\"><a href=\"#个人日常-DEMO\" class=\"headerlink\" title=\"个人日常 DEMO\"></a>个人日常 DEMO</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> git@github.com:chengheai/ssr-project.git</span><br></pre></td></tr></table></figure>\n<h2 id=\"添加-Dockerfile\"><a href=\"#添加-Dockerfile\" class=\"headerlink\" title=\"添加 Dockerfile\"></a>添加 Dockerfile</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">touch Dockerfile</span><br><span class=\"line\">vi Dockerfile</span><br><span class=\"line\">FROM node:<span class=\"number\">8.11</span><span class=\"number\">.0</span></span><br><span class=\"line\"></span><br><span class=\"line\">WORKDIR /opt</span><br><span class=\"line\">ADD node_modules /opt/node_modules</span><br><span class=\"line\">ADD server /opt/server</span><br><span class=\"line\">ADD .nuxt /opt/.nuxt</span><br><span class=\"line\">ADD <span class=\"keyword\">static</span> /opt/<span class=\"keyword\">static</span></span><br><span class=\"line\">ADD nuxt.config.js /opt</span><br><span class=\"line\">ADD package.json /opt</span><br><span class=\"line\">EXPOSE <span class=\"number\">3000</span></span><br><span class=\"line\">CMD [<span class=\"string\">\"npm\"</span>, <span class=\"string\">\"run\"</span>, <span class=\"string\">\"start\"</span>]</span><br></pre></td></tr></table></figure>\n<p>~FROM node:8.11.0：该 image 文件继承官方的 node image，冒号表示标签，这里标签是 8.11.0，即 8.11.0 版本的 node。<br>~ADD . /opt：将当前目录文件下的所有文件（除了.dockerignore 排除的路径），都拷贝进入 image 文件的/opt 目录。<br>~WORKDIR /opt：指定接下来的工作路径为/opt。<br>~RUN npm install 或者 ADD node_modules：在/opt 目录下，运行 npm install 命令安装依赖。注意，安装后所有的依赖，都将打包进入 image 文件。<br>~EXPOSE 3000: 3000 端口暴露出来， 允许外部连接这个端口。</p>\n<h2 id=\"添加-dockerignore\"><a href=\"#添加-dockerignore\" class=\"headerlink\" title=\"添加.dockerignore\"></a>添加.dockerignore</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">touch .dockerignore</span><br><span class=\"line\">vi .dockerignore</span><br><span class=\"line\">  .git</span><br><span class=\"line\">  <span class=\"comment\"># node_modules</span></span><br><span class=\"line\">  npm-debug.log</span><br></pre></td></tr></table></figure>\n<h2 id=\"build\"><a href=\"#build\" class=\"headerlink\" title=\"build\"></a>build</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker image build -t ssr-project.</span><br><span class=\"line\"><span class=\"comment\"># 或者</span></span><br><span class=\"line\">docker image build -t ssr-project:0.0.1 .</span><br><span class=\"line\"><span class=\"comment\"># 最后面的空格和点不要漏</span></span><br></pre></td></tr></table></figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WechatIMG370.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"start\"><a href=\"#start\" class=\"headerlink\" title=\"start\"></a>start</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ docker run -d --name ssr-server -p 3000:3000 <span class=\"built_in\">test</span>-ssr</span><br><span class=\"line\">ssr-server: 容器名称</span><br><span class=\"line\"><span class=\"built_in\">test</span>-ssr: 镜像</span><br><span class=\"line\">关闭</span><br><span class=\"line\">$ docker stop ssr-server</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">okcer image ls // 查看 image</span><br><span class=\"line\">docker image build -t ssr-project.  // 常见image</span><br><span class=\"line\">docker rmi [containerID] // 删除指定镜像</span><br><span class=\"line\">docker run -it --rm -p 3000:3000 ssr-project // docker container run命令会从 image 文件生成容器。--rm参数，在容器终止运行后自动删除容器文件</span><br><span class=\"line\">docker ps // 列出本机正在运行的容器</span><br><span class=\"line\">docker ps -a  // 列出本机所有容器，包括终止运行的容器</span><br><span class=\"line\">docker container ls // 列出本机正在运行的容器</span><br><span class=\"line\">docker container ls --all // 列出本机所有容器，包括终止运行的容器</span><br><span class=\"line\">docker container rm [containerID] // 删除指定容器</span><br><span class=\"line\">docker container <span class=\"built_in\">kill</span> [containerID] // 终止容器运行，相当于向容器里面的主进程发出 SIGKILL 信号</span><br><span class=\"line\">docker container stop [containerID] // 终止容器运行，相当于向容器里面的主进程发出 SIGTERM 信号，然后过一段时间再发出 SIGKILL 信号</span><br><span class=\"line\">docker container start [containerID] // 启动已经生成、已经停止运行的容器</span><br><span class=\"line\">docker container logs [containerID] // 用来查看 docker 容器的输出，即容器里面 Shell 的标准输出</span><br><span class=\"line\">docker container <span class=\"built_in\">exec</span> -it [containerID] /bin/bash // 用于进入一个正在运行的 docker 容器 进入容器就可以在容器的 Shell 执行命令了</span><br><span class=\"line\">docker container cp [containID]:[/path/to/file] . // 用于从正在运行的 Docker 容器里面，将文件拷贝到本机</span><br></pre></td></tr></table></figure>\n<h2 id=\"附录\"><a href=\"#附录\" class=\"headerlink\" title=\"附录\"></a>附录</h2><p><a href=\"https://www.cnblogs.com/DeepInThought/p/10896790.html\" target=\"_blank\" rel=\"noopener\">docker 常用指令说明</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"个人日常-DEMO\"><a href=\"#个人日常-DEMO\" class=\"headerlink\" title=\"个人日常 DEMO\"></a>个人日常 DEMO</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> git@github.com:chengheai/ssr-project.git</span><br></pre></td></tr></table></figure>\n<h2 id=\"添加-Dockerfile\"><a href=\"#添加-Dockerfile\" class=\"headerlink\" title=\"添加 Dockerfile\"></a>添加 Dockerfile</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">touch Dockerfile</span><br><span class=\"line\">vi Dockerfile</span><br><span class=\"line\">FROM node:<span class=\"number\">8.11</span><span class=\"number\">.0</span></span><br><span class=\"line\"></span><br><span class=\"line\">WORKDIR /opt</span><br><span class=\"line\">ADD node_modules /opt/node_modules</span><br><span class=\"line\">ADD server /opt/server</span><br><span class=\"line\">ADD .nuxt /opt/.nuxt</span><br><span class=\"line\">ADD <span class=\"keyword\">static</span> /opt/<span class=\"keyword\">static</span></span><br><span class=\"line\">ADD nuxt.config.js /opt</span><br><span class=\"line\">ADD package.json /opt</span><br><span class=\"line\">EXPOSE <span class=\"number\">3000</span></span><br><span class=\"line\">CMD [<span class=\"string\">\"npm\"</span>, <span class=\"string\">\"run\"</span>, <span class=\"string\">\"start\"</span>]</span><br></pre></td></tr></table></figure>\n<p>~FROM node:8.11.0：该 image 文件继承官方的 node image，冒号表示标签，这里标签是 8.11.0，即 8.11.0 版本的 node。<br>~ADD . /opt：将当前目录文件下的所有文件（除了.dockerignore 排除的路径），都拷贝进入 image 文件的/opt 目录。<br>~WORKDIR /opt：指定接下来的工作路径为/opt。<br>~RUN npm install 或者 ADD node_modules：在/opt 目录下，运行 npm install 命令安装依赖。注意，安装后所有的依赖，都将打包进入 image 文件。<br>~EXPOSE 3000: 3000 端口暴露出来， 允许外部连接这个端口。</p>\n<h2 id=\"添加-dockerignore\"><a href=\"#添加-dockerignore\" class=\"headerlink\" title=\"添加.dockerignore\"></a>添加.dockerignore</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">touch .dockerignore</span><br><span class=\"line\">vi .dockerignore</span><br><span class=\"line\">  .git</span><br><span class=\"line\">  <span class=\"comment\"># node_modules</span></span><br><span class=\"line\">  npm-debug.log</span><br></pre></td></tr></table></figure>\n<h2 id=\"build\"><a href=\"#build\" class=\"headerlink\" title=\"build\"></a>build</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker image build -t ssr-project.</span><br><span class=\"line\"><span class=\"comment\"># 或者</span></span><br><span class=\"line\">docker image build -t ssr-project:0.0.1 .</span><br><span class=\"line\"><span class=\"comment\"># 最后面的空格和点不要漏</span></span><br></pre></td></tr></table></figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WechatIMG370.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"start\"><a href=\"#start\" class=\"headerlink\" title=\"start\"></a>start</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ docker run -d --name ssr-server -p 3000:3000 <span class=\"built_in\">test</span>-ssr</span><br><span class=\"line\">ssr-server: 容器名称</span><br><span class=\"line\"><span class=\"built_in\">test</span>-ssr: 镜像</span><br><span class=\"line\">关闭</span><br><span class=\"line\">$ docker stop ssr-server</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">okcer image ls // 查看 image</span><br><span class=\"line\">docker image build -t ssr-project.  // 常见image</span><br><span class=\"line\">docker rmi [containerID] // 删除指定镜像</span><br><span class=\"line\">docker run -it --rm -p 3000:3000 ssr-project // docker container run命令会从 image 文件生成容器。--rm参数，在容器终止运行后自动删除容器文件</span><br><span class=\"line\">docker ps // 列出本机正在运行的容器</span><br><span class=\"line\">docker ps -a  // 列出本机所有容器，包括终止运行的容器</span><br><span class=\"line\">docker container ls // 列出本机正在运行的容器</span><br><span class=\"line\">docker container ls --all // 列出本机所有容器，包括终止运行的容器</span><br><span class=\"line\">docker container rm [containerID] // 删除指定容器</span><br><span class=\"line\">docker container <span class=\"built_in\">kill</span> [containerID] // 终止容器运行，相当于向容器里面的主进程发出 SIGKILL 信号</span><br><span class=\"line\">docker container stop [containerID] // 终止容器运行，相当于向容器里面的主进程发出 SIGTERM 信号，然后过一段时间再发出 SIGKILL 信号</span><br><span class=\"line\">docker container start [containerID] // 启动已经生成、已经停止运行的容器</span><br><span class=\"line\">docker container logs [containerID] // 用来查看 docker 容器的输出，即容器里面 Shell 的标准输出</span><br><span class=\"line\">docker container <span class=\"built_in\">exec</span> -it [containerID] /bin/bash // 用于进入一个正在运行的 docker 容器 进入容器就可以在容器的 Shell 执行命令了</span><br><span class=\"line\">docker container cp [containID]:[/path/to/file] . // 用于从正在运行的 Docker 容器里面，将文件拷贝到本机</span><br></pre></td></tr></table></figure>\n<h2 id=\"附录\"><a href=\"#附录\" class=\"headerlink\" title=\"附录\"></a>附录</h2><p><a href=\"https://www.cnblogs.com/DeepInThought/p/10896790.html\" target=\"_blank\" rel=\"noopener\">docker 常用指令说明</a></p>\n"},{"title":"有关前端js中this指向的问题笔记","date":"2019-07-08T11:52:05.000Z","_content":"## 前言\n在以往的ECMAScript 5中，this的指向可谓是多种多样，在各个公司面试题也是必考项，现收集几个面试题进行解析：\n## 原题解析\n### 题1:\n``` javascript\nvar o = {\n  fn: function(){\n    var a = 1;\n    console.log(this.a);\n  }\n}\no.a = 2;\no.fn.a = 3;\no.fn();\n```\n*分析:\n``` javascript\no.a = 2; // 赋值, 即给对象o添加一个a属性，值为2\no.fn.a = 3; // 赋值, fn函数添加属性 a 为 3\no.fn(); // 对象调用，this是函数对象o里面\n\n```\n答案：2\n### 题2:\n\n``` javascript\nvar o = {\nfunction fun(){\n  var a = 1;\n  this.a = 2;\n  function fn(){\n    return this.a;\n  }\n  fn.a = 3;\n  return fn;\n}\nvar result = fun()();\nconsole.log(result)\n```\n*分析:\n``` javascript\n  var a = 1; // 全局变量\n  this.a = 2; // 全局添加属性\n  var result = fun()(); // 函数直接调用，this window对象\n\n```\n答案：2\n### 题3:\n\n``` javascript\nvar a = 1;\nvar obj = {\n  a: 2,\n  fn: (function(){\n    this.a = 3;\n    return function(){\n      return this.a;\n    }\n  })()\n}\nvar fn = obj.fn;\nvar result1 = obj.fn();\nvar result2 = fn();\nconsole.log('result1: ', result1);\nconsole.log('result2: ', result2);\n```\n*分析:\n``` javascript\n  补充知识点：\n  // 自运行函数是先执行的；比如\n  var o ={\n    a: 1+1  // 先执行 1 + 1；\n  }\n  this.a = 3; // 全局变量\n  var result1 = obj.fn(); // obj对象调用，指向对象内部 a值\n  var result2 = fn(); // global调用a, 值为3\n```\n答案：2, 3\n### 题4:\n\n``` javascript\nvar arr = [fn1,fn2];\nfunction fn1(){\n  return this.length;\n}\nfunction fn2(){\n  return this[0];\n}\nvar a = arr[0]();\nvar b = arr[1]()();\nconsole.log('a: ', a);\nconsole.log('b: ', b);\n```\n*分析:\n``` javascript\n  // 枚举\n  return this.length; // this是数组\n  var b = arr[1]()(); // global调用\n   // 在浏览器中与在弄的环境中运行结果都不一样\n  //  node:\n  //  a: 2;\n  //  b: undefined;\n```\n答案：2, undefined;\n### 题5:\n\n``` javascript\nfunction f(){\n  console.log(this.a)\n};\nf.a = 100;\n怎么使函数中打印100？\n```\n*分析:\n``` javascript\n  // 方法一 call 方法\n  f.call(f);\n  // 方法二  arguments.callee\n  原函数更改为：\n  function f(){\n    console.log(arguments.callee.a)\n  }\n  f.a = 100;\n  f();\n```\n答案：f.call(f), console.log(arguments.callee.a);","source":"_posts/有关前端js中this指向的问题笔记.md","raw":"---\ntitle: 有关前端js中this指向的问题笔记\ndate: 2019-07-08 19:52:05\ntags: ['JavaScript', 'this']\n---\n## 前言\n在以往的ECMAScript 5中，this的指向可谓是多种多样，在各个公司面试题也是必考项，现收集几个面试题进行解析：\n## 原题解析\n### 题1:\n``` javascript\nvar o = {\n  fn: function(){\n    var a = 1;\n    console.log(this.a);\n  }\n}\no.a = 2;\no.fn.a = 3;\no.fn();\n```\n*分析:\n``` javascript\no.a = 2; // 赋值, 即给对象o添加一个a属性，值为2\no.fn.a = 3; // 赋值, fn函数添加属性 a 为 3\no.fn(); // 对象调用，this是函数对象o里面\n\n```\n答案：2\n### 题2:\n\n``` javascript\nvar o = {\nfunction fun(){\n  var a = 1;\n  this.a = 2;\n  function fn(){\n    return this.a;\n  }\n  fn.a = 3;\n  return fn;\n}\nvar result = fun()();\nconsole.log(result)\n```\n*分析:\n``` javascript\n  var a = 1; // 全局变量\n  this.a = 2; // 全局添加属性\n  var result = fun()(); // 函数直接调用，this window对象\n\n```\n答案：2\n### 题3:\n\n``` javascript\nvar a = 1;\nvar obj = {\n  a: 2,\n  fn: (function(){\n    this.a = 3;\n    return function(){\n      return this.a;\n    }\n  })()\n}\nvar fn = obj.fn;\nvar result1 = obj.fn();\nvar result2 = fn();\nconsole.log('result1: ', result1);\nconsole.log('result2: ', result2);\n```\n*分析:\n``` javascript\n  补充知识点：\n  // 自运行函数是先执行的；比如\n  var o ={\n    a: 1+1  // 先执行 1 + 1；\n  }\n  this.a = 3; // 全局变量\n  var result1 = obj.fn(); // obj对象调用，指向对象内部 a值\n  var result2 = fn(); // global调用a, 值为3\n```\n答案：2, 3\n### 题4:\n\n``` javascript\nvar arr = [fn1,fn2];\nfunction fn1(){\n  return this.length;\n}\nfunction fn2(){\n  return this[0];\n}\nvar a = arr[0]();\nvar b = arr[1]()();\nconsole.log('a: ', a);\nconsole.log('b: ', b);\n```\n*分析:\n``` javascript\n  // 枚举\n  return this.length; // this是数组\n  var b = arr[1]()(); // global调用\n   // 在浏览器中与在弄的环境中运行结果都不一样\n  //  node:\n  //  a: 2;\n  //  b: undefined;\n```\n答案：2, undefined;\n### 题5:\n\n``` javascript\nfunction f(){\n  console.log(this.a)\n};\nf.a = 100;\n怎么使函数中打印100？\n```\n*分析:\n``` javascript\n  // 方法一 call 方法\n  f.call(f);\n  // 方法二  arguments.callee\n  原函数更改为：\n  function f(){\n    console.log(arguments.callee.a)\n  }\n  f.a = 100;\n  f();\n```\n答案：f.call(f), console.log(arguments.callee.a);","slug":"有关前端js中this指向的问题笔记","published":1,"updated":"2021-10-09T08:48:32.092Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzace003b5c5415mcukhr","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>在以往的ECMAScript 5中，this的指向可谓是多种多样，在各个公司面试题也是必考项，现收集几个面试题进行解析：</p>\n<h2 id=\"原题解析\"><a href=\"#原题解析\" class=\"headerlink\" title=\"原题解析\"></a>原题解析</h2><h3 id=\"题1\"><a href=\"#题1\" class=\"headerlink\" title=\"题1:\"></a>题1:</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> o = &#123;</span><br><span class=\"line\">  fn: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.a);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">o.a = <span class=\"number\">2</span>;</span><br><span class=\"line\">o.fn.a = <span class=\"number\">3</span>;</span><br><span class=\"line\">o.fn();</span><br></pre></td></tr></table></figure>\n<p>*分析:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">o.a = <span class=\"number\">2</span>; <span class=\"comment\">// 赋值, 即给对象o添加一个a属性，值为2</span></span><br><span class=\"line\">o.fn.a = <span class=\"number\">3</span>; <span class=\"comment\">// 赋值, fn函数添加属性 a 为 3</span></span><br><span class=\"line\">o.fn(); <span class=\"comment\">// 对象调用，this是函数对象o里面</span></span><br></pre></td></tr></table></figure></p>\n<p>答案：2</p>\n<h3 id=\"题2\"><a href=\"#题2\" class=\"headerlink\" title=\"题2:\"></a>题2:</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> o = &#123;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fun</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.a = <span class=\"number\">2</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.a;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  fn.a = <span class=\"number\">3</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fn;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> result = fun()();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(result)</span><br></pre></td></tr></table></figure>\n<p>*分析:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">1</span>; <span class=\"comment\">// 全局变量</span></span><br><span class=\"line\"><span class=\"keyword\">this</span>.a = <span class=\"number\">2</span>; <span class=\"comment\">// 全局添加属性</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> result = fun()(); <span class=\"comment\">// 函数直接调用，this window对象</span></span><br></pre></td></tr></table></figure></p>\n<p>答案：2</p>\n<h3 id=\"题3\"><a href=\"#题3\" class=\"headerlink\" title=\"题3:\"></a>题3:</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">  a: <span class=\"number\">2</span>,</span><br><span class=\"line\">  fn: (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.a = <span class=\"number\">3</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.a;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;)()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> fn = obj.fn;</span><br><span class=\"line\"><span class=\"keyword\">var</span> result1 = obj.fn();</span><br><span class=\"line\"><span class=\"keyword\">var</span> result2 = fn();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'result1: '</span>, result1);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'result2: '</span>, result2);</span><br></pre></td></tr></table></figure>\n<p>*分析:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">补充知识点：</span><br><span class=\"line\"><span class=\"comment\">// 自运行函数是先执行的；比如</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> o =&#123;</span><br><span class=\"line\">  a: <span class=\"number\">1</span>+<span class=\"number\">1</span>  <span class=\"comment\">// 先执行 1 + 1；</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">this</span>.a = <span class=\"number\">3</span>; <span class=\"comment\">// 全局变量</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> result1 = obj.fn(); <span class=\"comment\">// obj对象调用，指向对象内部 a值</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> result2 = fn(); <span class=\"comment\">// global调用a, 值为3</span></span><br></pre></td></tr></table></figure></p>\n<p>答案：2, 3</p>\n<h3 id=\"题4\"><a href=\"#题4\" class=\"headerlink\" title=\"题4:\"></a>题4:</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [fn1,fn2];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn1</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.length;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn2</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>[<span class=\"number\">0</span>];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> a = arr[<span class=\"number\">0</span>]();</span><br><span class=\"line\"><span class=\"keyword\">var</span> b = arr[<span class=\"number\">1</span>]()();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'a: '</span>, a);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'b: '</span>, b);</span><br></pre></td></tr></table></figure>\n<p>*分析:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 枚举</span></span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.length; <span class=\"comment\">// this是数组</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> b = arr[<span class=\"number\">1</span>]()(); <span class=\"comment\">// global调用</span></span><br><span class=\"line\"> <span class=\"comment\">// 在浏览器中与在弄的环境中运行结果都不一样</span></span><br><span class=\"line\"><span class=\"comment\">//  node:</span></span><br><span class=\"line\"><span class=\"comment\">//  a: 2;</span></span><br><span class=\"line\"><span class=\"comment\">//  b: undefined;</span></span><br></pre></td></tr></table></figure></p>\n<p>答案：2, undefined;</p>\n<h3 id=\"题5\"><a href=\"#题5\" class=\"headerlink\" title=\"题5:\"></a>题5:</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.a)</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">f.a = <span class=\"number\">100</span>;</span><br><span class=\"line\">怎么使函数中打印<span class=\"number\">100</span>？</span><br></pre></td></tr></table></figure>\n<p>*分析:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 方法一 call 方法</span></span><br><span class=\"line\">f.call(f);</span><br><span class=\"line\"><span class=\"comment\">// 方法二  arguments.callee</span></span><br><span class=\"line\">原函数更改为：</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"built_in\">arguments</span>.callee.a)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">f.a = <span class=\"number\">100</span>;</span><br><span class=\"line\">f();</span><br></pre></td></tr></table></figure></p>\n<p>答案：f.call(f), console.log(arguments.callee.a);</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>在以往的ECMAScript 5中，this的指向可谓是多种多样，在各个公司面试题也是必考项，现收集几个面试题进行解析：</p>\n<h2 id=\"原题解析\"><a href=\"#原题解析\" class=\"headerlink\" title=\"原题解析\"></a>原题解析</h2><h3 id=\"题1\"><a href=\"#题1\" class=\"headerlink\" title=\"题1:\"></a>题1:</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> o = &#123;</span><br><span class=\"line\">  fn: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.a);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">o.a = <span class=\"number\">2</span>;</span><br><span class=\"line\">o.fn.a = <span class=\"number\">3</span>;</span><br><span class=\"line\">o.fn();</span><br></pre></td></tr></table></figure>\n<p>*分析:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">o.a = <span class=\"number\">2</span>; <span class=\"comment\">// 赋值, 即给对象o添加一个a属性，值为2</span></span><br><span class=\"line\">o.fn.a = <span class=\"number\">3</span>; <span class=\"comment\">// 赋值, fn函数添加属性 a 为 3</span></span><br><span class=\"line\">o.fn(); <span class=\"comment\">// 对象调用，this是函数对象o里面</span></span><br></pre></td></tr></table></figure></p>\n<p>答案：2</p>\n<h3 id=\"题2\"><a href=\"#题2\" class=\"headerlink\" title=\"题2:\"></a>题2:</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> o = &#123;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fun</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.a = <span class=\"number\">2</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.a;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  fn.a = <span class=\"number\">3</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fn;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> result = fun()();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(result)</span><br></pre></td></tr></table></figure>\n<p>*分析:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">1</span>; <span class=\"comment\">// 全局变量</span></span><br><span class=\"line\"><span class=\"keyword\">this</span>.a = <span class=\"number\">2</span>; <span class=\"comment\">// 全局添加属性</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> result = fun()(); <span class=\"comment\">// 函数直接调用，this window对象</span></span><br></pre></td></tr></table></figure></p>\n<p>答案：2</p>\n<h3 id=\"题3\"><a href=\"#题3\" class=\"headerlink\" title=\"题3:\"></a>题3:</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">  a: <span class=\"number\">2</span>,</span><br><span class=\"line\">  fn: (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.a = <span class=\"number\">3</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.a;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;)()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> fn = obj.fn;</span><br><span class=\"line\"><span class=\"keyword\">var</span> result1 = obj.fn();</span><br><span class=\"line\"><span class=\"keyword\">var</span> result2 = fn();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'result1: '</span>, result1);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'result2: '</span>, result2);</span><br></pre></td></tr></table></figure>\n<p>*分析:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">补充知识点：</span><br><span class=\"line\"><span class=\"comment\">// 自运行函数是先执行的；比如</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> o =&#123;</span><br><span class=\"line\">  a: <span class=\"number\">1</span>+<span class=\"number\">1</span>  <span class=\"comment\">// 先执行 1 + 1；</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">this</span>.a = <span class=\"number\">3</span>; <span class=\"comment\">// 全局变量</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> result1 = obj.fn(); <span class=\"comment\">// obj对象调用，指向对象内部 a值</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> result2 = fn(); <span class=\"comment\">// global调用a, 值为3</span></span><br></pre></td></tr></table></figure></p>\n<p>答案：2, 3</p>\n<h3 id=\"题4\"><a href=\"#题4\" class=\"headerlink\" title=\"题4:\"></a>题4:</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [fn1,fn2];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn1</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.length;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn2</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>[<span class=\"number\">0</span>];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> a = arr[<span class=\"number\">0</span>]();</span><br><span class=\"line\"><span class=\"keyword\">var</span> b = arr[<span class=\"number\">1</span>]()();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'a: '</span>, a);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'b: '</span>, b);</span><br></pre></td></tr></table></figure>\n<p>*分析:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 枚举</span></span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.length; <span class=\"comment\">// this是数组</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> b = arr[<span class=\"number\">1</span>]()(); <span class=\"comment\">// global调用</span></span><br><span class=\"line\"> <span class=\"comment\">// 在浏览器中与在弄的环境中运行结果都不一样</span></span><br><span class=\"line\"><span class=\"comment\">//  node:</span></span><br><span class=\"line\"><span class=\"comment\">//  a: 2;</span></span><br><span class=\"line\"><span class=\"comment\">//  b: undefined;</span></span><br></pre></td></tr></table></figure></p>\n<p>答案：2, undefined;</p>\n<h3 id=\"题5\"><a href=\"#题5\" class=\"headerlink\" title=\"题5:\"></a>题5:</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.a)</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">f.a = <span class=\"number\">100</span>;</span><br><span class=\"line\">怎么使函数中打印<span class=\"number\">100</span>？</span><br></pre></td></tr></table></figure>\n<p>*分析:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 方法一 call 方法</span></span><br><span class=\"line\">f.call(f);</span><br><span class=\"line\"><span class=\"comment\">// 方法二  arguments.callee</span></span><br><span class=\"line\">原函数更改为：</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"built_in\">arguments</span>.callee.a)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">f.a = <span class=\"number\">100</span>;</span><br><span class=\"line\">f();</span><br></pre></td></tr></table></figure></p>\n<p>答案：f.call(f), console.log(arguments.callee.a);</p>\n"},{"title":"vue-ssr服务端渲染添加多个swiper","date":"2019-08-27T12:51:48.000Z","_content":"## 问题\n一个ssr项目添加多个swiper会引起轮播图混乱。\n## 前言\n在使用nuxt.js实际开发项目中，会出现类似这样的情况，一个页面写两个【PC端一个，移动端一个】或者多个【其他需求】，在官方github有关服务端渲染的文档少之又少，只有一个简单的使用[demo](https://github.com/surmon-china/vue-awesome-swiper/blob/master/examples/nuxt-ssr-example/nuxt-ssr-example.vue),且与vue-cli项目使用还有点差别，那怎么解决？\n## 单个使用\n``` html\n<template>\n  <div v-swiper:mySwiper=\"swiperOption\">\n    <div class=\"swiper-wrapper\">\n      <div class=\"swiper-slide\" v-for=\"banner in banners\">\n        <img :src=\"banner\">\n      </div>\n    </div>\n    <div class=\"swiper-pagination swiper-pagination-bullets\"></div>\n  </div>\n</template>\n\n<script>\n  export default {\n    data () {\n      return {\n        banners: [\n          '/1.jpg',\n          '/2.jpg',\n          '/3.jpg'\n        ],\n        swiperOption: {\n          loop: true,\n          slidesPerView: 'auto',\n          centeredSlides: true,\n          spaceBetween: 30,\n          pagination: {\n            el: '.swiper-pagination',\n            dynamicBullets: true\n          },\n          on: {\n            slideChange() {\n              console.log('onSlideChangeEnd', this);\n            },\n            tap() {\n              console.log('onTap', this);\n            }\n          }\n        }\n      }\n    },\n    mounted() {\n      console.log('app init', this)\n      setTimeout(() => {\n        this.banners.push('/5.jpg')\n        console.log('banners update')\n      }, 3000)\n      console.log(\n        'This is current swiper instance object', this.mySwiper, \n        'I will slideTo banners 3')\n       this.mySwiper.slideTo(3)\n    }\n  }\n</script>\n```\n## 多个使用\n\n``` html\n<template>\n  <div v-swiper:mySwiper=\"swiperOption\" key='1'>\n    <div class=\"swiper-wrapper\">\n      <div class=\"swiper-slide\" v-for=\"banner in banners\">\n        <img :src=\"banner\">\n      </div>\n    </div>\n    <div class=\"swiper-pagination swiper-pagination-bullets\"></div>\n  </div>\n  <div v-swiper:mySwiper=\"swiperOption\" key='2'>\n    <div class=\"swiper-wrapper\">\n      <div class=\"swiper-slide\" v-for=\"banner in banners\">\n        <img :src=\"banner\">\n      </div>\n    </div>\n    <div class=\"swiper-pagination swiper-pagination-bullets\"></div>\n  </div>\n  <div v-swiper:mySwiper=\"swiperOption\" key='3'>\n    <div class=\"swiper-wrapper\">\n      <div class=\"swiper-slide\" v-for=\"banner in banners\">\n        <img :src=\"banner\">\n      </div>\n    </div>\n    <div class=\"swiper-pagination swiper-pagination-bullets\"></div>\n  </div>\n  <div v-swiper:mySwiper=\"swiperOption\" key='N'>\n    <div class=\"swiper-wrapper\">\n      <div class=\"swiper-slide\" v-for=\"banner in banners\">\n        <img :src=\"banner\">\n      </div>\n    </div>\n    <div class=\"swiper-pagination swiper-pagination-bullets\"></div>\n  </div>\n</template>\n<script>\n// your codes\n.....\n</script>\n```\n这样一来就不会有重复的mySwiper，从而解决了多个swiper混乱的问题","source":"_posts/服务端渲染添加多个swiper.md","raw":"---\ntitle: vue-ssr服务端渲染添加多个swiper\ndate: 2019-08-27 20:51:48\ntags: ['SSR','vue']\n---\n## 问题\n一个ssr项目添加多个swiper会引起轮播图混乱。\n## 前言\n在使用nuxt.js实际开发项目中，会出现类似这样的情况，一个页面写两个【PC端一个，移动端一个】或者多个【其他需求】，在官方github有关服务端渲染的文档少之又少，只有一个简单的使用[demo](https://github.com/surmon-china/vue-awesome-swiper/blob/master/examples/nuxt-ssr-example/nuxt-ssr-example.vue),且与vue-cli项目使用还有点差别，那怎么解决？\n## 单个使用\n``` html\n<template>\n  <div v-swiper:mySwiper=\"swiperOption\">\n    <div class=\"swiper-wrapper\">\n      <div class=\"swiper-slide\" v-for=\"banner in banners\">\n        <img :src=\"banner\">\n      </div>\n    </div>\n    <div class=\"swiper-pagination swiper-pagination-bullets\"></div>\n  </div>\n</template>\n\n<script>\n  export default {\n    data () {\n      return {\n        banners: [\n          '/1.jpg',\n          '/2.jpg',\n          '/3.jpg'\n        ],\n        swiperOption: {\n          loop: true,\n          slidesPerView: 'auto',\n          centeredSlides: true,\n          spaceBetween: 30,\n          pagination: {\n            el: '.swiper-pagination',\n            dynamicBullets: true\n          },\n          on: {\n            slideChange() {\n              console.log('onSlideChangeEnd', this);\n            },\n            tap() {\n              console.log('onTap', this);\n            }\n          }\n        }\n      }\n    },\n    mounted() {\n      console.log('app init', this)\n      setTimeout(() => {\n        this.banners.push('/5.jpg')\n        console.log('banners update')\n      }, 3000)\n      console.log(\n        'This is current swiper instance object', this.mySwiper, \n        'I will slideTo banners 3')\n       this.mySwiper.slideTo(3)\n    }\n  }\n</script>\n```\n## 多个使用\n\n``` html\n<template>\n  <div v-swiper:mySwiper=\"swiperOption\" key='1'>\n    <div class=\"swiper-wrapper\">\n      <div class=\"swiper-slide\" v-for=\"banner in banners\">\n        <img :src=\"banner\">\n      </div>\n    </div>\n    <div class=\"swiper-pagination swiper-pagination-bullets\"></div>\n  </div>\n  <div v-swiper:mySwiper=\"swiperOption\" key='2'>\n    <div class=\"swiper-wrapper\">\n      <div class=\"swiper-slide\" v-for=\"banner in banners\">\n        <img :src=\"banner\">\n      </div>\n    </div>\n    <div class=\"swiper-pagination swiper-pagination-bullets\"></div>\n  </div>\n  <div v-swiper:mySwiper=\"swiperOption\" key='3'>\n    <div class=\"swiper-wrapper\">\n      <div class=\"swiper-slide\" v-for=\"banner in banners\">\n        <img :src=\"banner\">\n      </div>\n    </div>\n    <div class=\"swiper-pagination swiper-pagination-bullets\"></div>\n  </div>\n  <div v-swiper:mySwiper=\"swiperOption\" key='N'>\n    <div class=\"swiper-wrapper\">\n      <div class=\"swiper-slide\" v-for=\"banner in banners\">\n        <img :src=\"banner\">\n      </div>\n    </div>\n    <div class=\"swiper-pagination swiper-pagination-bullets\"></div>\n  </div>\n</template>\n<script>\n// your codes\n.....\n</script>\n```\n这样一来就不会有重复的mySwiper，从而解决了多个swiper混乱的问题","slug":"服务端渲染添加多个swiper","published":1,"updated":"2021-10-09T08:48:32.093Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzacf003d5c540i97mawx","content":"<h2 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h2><p>一个ssr项目添加多个swiper会引起轮播图混乱。</p>\n<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>在使用nuxt.js实际开发项目中，会出现类似这样的情况，一个页面写两个【PC端一个，移动端一个】或者多个【其他需求】，在官方github有关服务端渲染的文档少之又少，只有一个简单的使用<a href=\"https://github.com/surmon-china/vue-awesome-swiper/blob/master/examples/nuxt-ssr-example/nuxt-ssr-example.vue\">demo</a>,且与vue-cli项目使用还有点差别，那怎么解决？</p>\n<h2 id=\"单个使用\"><a href=\"#单个使用\" class=\"headerlink\" title=\"单个使用\"></a>单个使用</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">v-swiper:mySwiper</span>=<span class=\"string\">\"swiperOption\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-wrapper\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-slide\"</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"banner in banners\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">:src</span>=<span class=\"string\">\"banner\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-pagination swiper-pagination-bullets\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">  <span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span><br><span class=\"line\">    data () &#123;</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\">        banners: [</span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"string\">'/1.jpg'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"string\">'/2.jpg'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"string\">'/3.jpg'</span></span></span><br><span class=\"line\">        ],</span><br><span class=\"line\">        swiperOption: &#123;</span><br><span class=\"line\"><span class=\"javascript\">          loop: <span class=\"literal\">true</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">          slidesPerView: <span class=\"string\">'auto'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">          centeredSlides: <span class=\"literal\">true</span>,</span></span><br><span class=\"line\">          spaceBetween: 30,</span><br><span class=\"line\">          pagination: &#123;</span><br><span class=\"line\"><span class=\"javascript\">            el: <span class=\"string\">'.swiper-pagination'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">            dynamicBullets: <span class=\"literal\">true</span></span></span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          on: &#123;</span><br><span class=\"line\">            slideChange() &#123;</span><br><span class=\"line\"><span class=\"javascript\">              <span class=\"built_in\">console</span>.log(<span class=\"string\">'onSlideChangeEnd'</span>, <span class=\"keyword\">this</span>);</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            tap() &#123;</span><br><span class=\"line\"><span class=\"javascript\">              <span class=\"built_in\">console</span>.log(<span class=\"string\">'onTap'</span>, <span class=\"keyword\">this</span>);</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    mounted() &#123;</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'app init'</span>, <span class=\"keyword\">this</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">      setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">this</span>.banners.push(<span class=\"string\">'/5.jpg'</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'banners update'</span>)</span></span><br><span class=\"line\">      &#125;, 3000)</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"built_in\">console</span>.log(</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"string\">'This is current swiper instance object'</span>, <span class=\"keyword\">this</span>.mySwiper, </span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"string\">'I will slideTo banners 3'</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">       <span class=\"keyword\">this</span>.mySwiper.slideTo(<span class=\"number\">3</span>)</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"多个使用\"><a href=\"#多个使用\" class=\"headerlink\" title=\"多个使用\"></a>多个使用</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">v-swiper:mySwiper</span>=<span class=\"string\">\"swiperOption\"</span> <span class=\"attr\">key</span>=<span class=\"string\">'1'</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-wrapper\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-slide\"</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"banner in banners\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">:src</span>=<span class=\"string\">\"banner\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-pagination swiper-pagination-bullets\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">v-swiper:mySwiper</span>=<span class=\"string\">\"swiperOption\"</span> <span class=\"attr\">key</span>=<span class=\"string\">'2'</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-wrapper\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-slide\"</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"banner in banners\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">:src</span>=<span class=\"string\">\"banner\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-pagination swiper-pagination-bullets\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">v-swiper:mySwiper</span>=<span class=\"string\">\"swiperOption\"</span> <span class=\"attr\">key</span>=<span class=\"string\">'3'</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-wrapper\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-slide\"</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"banner in banners\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">:src</span>=<span class=\"string\">\"banner\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-pagination swiper-pagination-bullets\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">v-swiper:mySwiper</span>=<span class=\"string\">\"swiperOption\"</span> <span class=\"attr\">key</span>=<span class=\"string\">'N'</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-wrapper\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-slide\"</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"banner in banners\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">:src</span>=<span class=\"string\">\"banner\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-pagination swiper-pagination-bullets\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"comment\">// your codes</span></span></span><br><span class=\"line\">.....</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>这样一来就不会有重复的mySwiper，从而解决了多个swiper混乱的问题</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h2><p>一个ssr项目添加多个swiper会引起轮播图混乱。</p>\n<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>在使用nuxt.js实际开发项目中，会出现类似这样的情况，一个页面写两个【PC端一个，移动端一个】或者多个【其他需求】，在官方github有关服务端渲染的文档少之又少，只有一个简单的使用<a href=\"https://github.com/surmon-china/vue-awesome-swiper/blob/master/examples/nuxt-ssr-example/nuxt-ssr-example.vue\">demo</a>,且与vue-cli项目使用还有点差别，那怎么解决？</p>\n<h2 id=\"单个使用\"><a href=\"#单个使用\" class=\"headerlink\" title=\"单个使用\"></a>单个使用</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">v-swiper:mySwiper</span>=<span class=\"string\">\"swiperOption\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-wrapper\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-slide\"</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"banner in banners\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">:src</span>=<span class=\"string\">\"banner\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-pagination swiper-pagination-bullets\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">  <span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span><br><span class=\"line\">    data () &#123;</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\">        banners: [</span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"string\">'/1.jpg'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"string\">'/2.jpg'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"string\">'/3.jpg'</span></span></span><br><span class=\"line\">        ],</span><br><span class=\"line\">        swiperOption: &#123;</span><br><span class=\"line\"><span class=\"javascript\">          loop: <span class=\"literal\">true</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">          slidesPerView: <span class=\"string\">'auto'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">          centeredSlides: <span class=\"literal\">true</span>,</span></span><br><span class=\"line\">          spaceBetween: 30,</span><br><span class=\"line\">          pagination: &#123;</span><br><span class=\"line\"><span class=\"javascript\">            el: <span class=\"string\">'.swiper-pagination'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">            dynamicBullets: <span class=\"literal\">true</span></span></span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          on: &#123;</span><br><span class=\"line\">            slideChange() &#123;</span><br><span class=\"line\"><span class=\"javascript\">              <span class=\"built_in\">console</span>.log(<span class=\"string\">'onSlideChangeEnd'</span>, <span class=\"keyword\">this</span>);</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            tap() &#123;</span><br><span class=\"line\"><span class=\"javascript\">              <span class=\"built_in\">console</span>.log(<span class=\"string\">'onTap'</span>, <span class=\"keyword\">this</span>);</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    mounted() &#123;</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'app init'</span>, <span class=\"keyword\">this</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">      setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">this</span>.banners.push(<span class=\"string\">'/5.jpg'</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'banners update'</span>)</span></span><br><span class=\"line\">      &#125;, 3000)</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"built_in\">console</span>.log(</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"string\">'This is current swiper instance object'</span>, <span class=\"keyword\">this</span>.mySwiper, </span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"string\">'I will slideTo banners 3'</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">       <span class=\"keyword\">this</span>.mySwiper.slideTo(<span class=\"number\">3</span>)</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"多个使用\"><a href=\"#多个使用\" class=\"headerlink\" title=\"多个使用\"></a>多个使用</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">v-swiper:mySwiper</span>=<span class=\"string\">\"swiperOption\"</span> <span class=\"attr\">key</span>=<span class=\"string\">'1'</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-wrapper\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-slide\"</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"banner in banners\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">:src</span>=<span class=\"string\">\"banner\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-pagination swiper-pagination-bullets\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">v-swiper:mySwiper</span>=<span class=\"string\">\"swiperOption\"</span> <span class=\"attr\">key</span>=<span class=\"string\">'2'</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-wrapper\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-slide\"</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"banner in banners\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">:src</span>=<span class=\"string\">\"banner\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-pagination swiper-pagination-bullets\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">v-swiper:mySwiper</span>=<span class=\"string\">\"swiperOption\"</span> <span class=\"attr\">key</span>=<span class=\"string\">'3'</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-wrapper\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-slide\"</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"banner in banners\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">:src</span>=<span class=\"string\">\"banner\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-pagination swiper-pagination-bullets\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">v-swiper:mySwiper</span>=<span class=\"string\">\"swiperOption\"</span> <span class=\"attr\">key</span>=<span class=\"string\">'N'</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-wrapper\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-slide\"</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"banner in banners\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">:src</span>=<span class=\"string\">\"banner\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"swiper-pagination swiper-pagination-bullets\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"comment\">// your codes</span></span></span><br><span class=\"line\">.....</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>这样一来就不会有重复的mySwiper，从而解决了多个swiper混乱的问题</p>\n"},{"title":"浅谈js中函数的继承方式","date":"2019-07-09T07:17:09.000Z","_content":"![]('https://github.com/chengheai/review-demo-image/blob/master/u=1418646752,692709038&fm=173&app=49&f=JPEG.jpeg?raw=true')\n<center><font face=\"黑体\" color=red size=4>～～ 回首往昔， 更近一步 ～～</font></center>\n\n## 招式\n### 1. ES5 构造函数继承\n``` javascript\nfunction Parent() {\n  this.name = 'parent';\n  this.colors = ['black', 'yellow', 'red']\n}\nfunction Child() {\n  Parent.call(this);\n  this.type = 'child';\n}\nvar q1 = new Child();\nconsole.log(q1.name); // parent\nconsole.log(q1.colors); // [ 'black', 'yellow', 'red' ]\n```\n再看\n``` javascript\nfunction Parent() {\n  this.name = 'parent';\n  this.colors = ['black', 'yellow', 'red']\n}\nfunction Child() {\n  Parent.call(this);\n  this.type = 'child';\n}\nParent.prototype.age = 12;\nParent.prototype.say = function(){\n  console.log('hello');\n}\nvar q1 = new Child();\nconsole.log(q1);\nconsole.log(q1.age); // undefined\nconsole.log(q1.say()); // 报错\n```\n总结：Child无法继承Parent的原型对象，并没有真正的实现继承（部分继承）\n\n### 2. ES5 原型链继承\n``` javascript\nfunction Parent() {\n  this.name = 'parent';\n  this.colors = ['black', 'yellow', 'red']\n}\nfunction Child() {\n  this.type = 'child';\n}\nParent.prototype.age = 12;\nParent.prototype.say = function(){\n  console.log('hello');\n}\nChild.prototype = new Parent();\nvar q1 = new Child();\n// console.log(q1);\nconsole.log(q1.age); // 12\nconsole.log(q1.say()); // hello\n```\n再看\n``` javascript\nfunction Parent() {\n  this.name = 'parent';\n  this.colors = ['black', 'yellow', 'red']\n}\nfunction Child() {\n  this.type = 'child';\n}\nParent.prototype.age = 12;\nParent.prototype.say = function(){\n  console.log('hello');\n}\nChild.prototype = new Parent();\nvar q1 = new Child();\nvar q2 = new Child();\nq1.colors.push('pink');\nconsole.log(q1.colors) // [ 'black', 'yellow', 'red', 'pink' ]\nconsole.log(q2.colors) // [ 'black', 'yellow', 'red', 'pink' ]\n```\n结论：被new出来的实例不能隔离\n### 3. 组合继承(构造函数和原型链继承)\n``` javascript\nfunction Parent() {\n  this.name = 'parent';\n  this.colors = ['black', 'yellow', 'red']\n}\nfunction Child() {\n  Parent.call(this);\n  this.type = 'child';\n}\nParent.prototype.age = 12;\nParent.prototype.say = function(){\n  console.log('hello');\n}\nChild.prototype = new Parent();\nvar q1 = new Child();\nvar q2 = new Child();\nq1.colors.push('pink');\nconsole.log(q1.colors) // [ 'black', 'yellow', 'red','pink']\nconsole.log(q2.colors) // [ 'black', 'yellow', 'red', ]\n\n```\n结论：父类的构造函数被执行了两次，第一次是Child.prototype = new Parent()，第二次是在实例化的时候，这是没有必要的。\n\n优化\n``` javascript\nfunction Parent() {\n  this.name = 'parent';\n  this.colors = ['black', 'yellow', 'red']\n}\nfunction Child() {\n  Parent.call(this);\n  this.type = 'child';\n}\nParent.prototype.age = 12;\nParent.prototype.say = function(){\n  console.log('hello');\n}\nChild.prototype = Object.create(Parent.prototype);\nChild.prototype.constructor = Child;\nvar q1 = new Child();\nvar q2 = new Child();\nq1.colors.push('pink');\nconsole.log(q1.colors) // [ 'black', 'yellow', 'red', 'pink' ]\nconsole.log(q2.colors) // [ 'black', 'yellow', 'red', ]\n```\n结论：Object.create是一种创建对象的方式，它会创建一个中间对象\n### 4. ES6 class继承\n``` javascript\n// es6的继承\nclass Parent {\n  constructor(name) {\n    this.name = name;\n  }\n  say() {\n    console.log('parent has say method. ' + this.name);\n  }\n}\n\nclass Child extends Parent {\n  constructor(name) {\n    super(name);\n  }\n\n  fly() {\n    console.log('chid can fly...');\n  }\n}\nvar p = new Child('tom');\np.say();\np.fly();\n\n```\n结论：文档，谢谢～ https://es6.ruanyifeng.com/?search=extend&x=0&y=0#docs/class-extends\n\n\n\n\n","source":"_posts/浅谈js中函数的继承方式.md","raw":"---\ntitle: 浅谈js中函数的继承方式\ndate: 2019-07-09 15:17:09\ntags: ['JavaScript']\n---\n![]('https://github.com/chengheai/review-demo-image/blob/master/u=1418646752,692709038&fm=173&app=49&f=JPEG.jpeg?raw=true')\n<center><font face=\"黑体\" color=red size=4>～～ 回首往昔， 更近一步 ～～</font></center>\n\n## 招式\n### 1. ES5 构造函数继承\n``` javascript\nfunction Parent() {\n  this.name = 'parent';\n  this.colors = ['black', 'yellow', 'red']\n}\nfunction Child() {\n  Parent.call(this);\n  this.type = 'child';\n}\nvar q1 = new Child();\nconsole.log(q1.name); // parent\nconsole.log(q1.colors); // [ 'black', 'yellow', 'red' ]\n```\n再看\n``` javascript\nfunction Parent() {\n  this.name = 'parent';\n  this.colors = ['black', 'yellow', 'red']\n}\nfunction Child() {\n  Parent.call(this);\n  this.type = 'child';\n}\nParent.prototype.age = 12;\nParent.prototype.say = function(){\n  console.log('hello');\n}\nvar q1 = new Child();\nconsole.log(q1);\nconsole.log(q1.age); // undefined\nconsole.log(q1.say()); // 报错\n```\n总结：Child无法继承Parent的原型对象，并没有真正的实现继承（部分继承）\n\n### 2. ES5 原型链继承\n``` javascript\nfunction Parent() {\n  this.name = 'parent';\n  this.colors = ['black', 'yellow', 'red']\n}\nfunction Child() {\n  this.type = 'child';\n}\nParent.prototype.age = 12;\nParent.prototype.say = function(){\n  console.log('hello');\n}\nChild.prototype = new Parent();\nvar q1 = new Child();\n// console.log(q1);\nconsole.log(q1.age); // 12\nconsole.log(q1.say()); // hello\n```\n再看\n``` javascript\nfunction Parent() {\n  this.name = 'parent';\n  this.colors = ['black', 'yellow', 'red']\n}\nfunction Child() {\n  this.type = 'child';\n}\nParent.prototype.age = 12;\nParent.prototype.say = function(){\n  console.log('hello');\n}\nChild.prototype = new Parent();\nvar q1 = new Child();\nvar q2 = new Child();\nq1.colors.push('pink');\nconsole.log(q1.colors) // [ 'black', 'yellow', 'red', 'pink' ]\nconsole.log(q2.colors) // [ 'black', 'yellow', 'red', 'pink' ]\n```\n结论：被new出来的实例不能隔离\n### 3. 组合继承(构造函数和原型链继承)\n``` javascript\nfunction Parent() {\n  this.name = 'parent';\n  this.colors = ['black', 'yellow', 'red']\n}\nfunction Child() {\n  Parent.call(this);\n  this.type = 'child';\n}\nParent.prototype.age = 12;\nParent.prototype.say = function(){\n  console.log('hello');\n}\nChild.prototype = new Parent();\nvar q1 = new Child();\nvar q2 = new Child();\nq1.colors.push('pink');\nconsole.log(q1.colors) // [ 'black', 'yellow', 'red','pink']\nconsole.log(q2.colors) // [ 'black', 'yellow', 'red', ]\n\n```\n结论：父类的构造函数被执行了两次，第一次是Child.prototype = new Parent()，第二次是在实例化的时候，这是没有必要的。\n\n优化\n``` javascript\nfunction Parent() {\n  this.name = 'parent';\n  this.colors = ['black', 'yellow', 'red']\n}\nfunction Child() {\n  Parent.call(this);\n  this.type = 'child';\n}\nParent.prototype.age = 12;\nParent.prototype.say = function(){\n  console.log('hello');\n}\nChild.prototype = Object.create(Parent.prototype);\nChild.prototype.constructor = Child;\nvar q1 = new Child();\nvar q2 = new Child();\nq1.colors.push('pink');\nconsole.log(q1.colors) // [ 'black', 'yellow', 'red', 'pink' ]\nconsole.log(q2.colors) // [ 'black', 'yellow', 'red', ]\n```\n结论：Object.create是一种创建对象的方式，它会创建一个中间对象\n### 4. ES6 class继承\n``` javascript\n// es6的继承\nclass Parent {\n  constructor(name) {\n    this.name = name;\n  }\n  say() {\n    console.log('parent has say method. ' + this.name);\n  }\n}\n\nclass Child extends Parent {\n  constructor(name) {\n    super(name);\n  }\n\n  fly() {\n    console.log('chid can fly...');\n  }\n}\nvar p = new Child('tom');\np.say();\np.fly();\n\n```\n结论：文档，谢谢～ https://es6.ruanyifeng.com/?search=extend&x=0&y=0#docs/class-extends\n\n\n\n\n","slug":"浅谈js中函数的继承方式","published":1,"updated":"2021-10-09T08:48:32.093Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzach003f5c54hrxzxo5g","content":"<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/u=1418646752,692709038&fm=173&app=49&f=JPEG.jpeg?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<center><font face=\"黑体\" color=\"red\" size=\"4\">～～ 回首往昔， 更近一步 ～～</font></center>\n\n<h2 id=\"招式\"><a href=\"#招式\" class=\"headerlink\" title=\"招式\"></a>招式</h2><h3 id=\"1-ES5-构造函数继承\"><a href=\"#1-ES5-构造函数继承\" class=\"headerlink\" title=\"1. ES5 构造函数继承\"></a>1. ES5 构造函数继承</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Parent</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = <span class=\"string\">'parent'</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.colors = [<span class=\"string\">'black'</span>, <span class=\"string\">'yellow'</span>, <span class=\"string\">'red'</span>]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Child</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  Parent.call(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.type = <span class=\"string\">'child'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> q1 = <span class=\"keyword\">new</span> Child();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(q1.name); <span class=\"comment\">// parent</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(q1.colors); <span class=\"comment\">// [ 'black', 'yellow', 'red' ]</span></span><br></pre></td></tr></table></figure>\n<p>再看<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Parent</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = <span class=\"string\">'parent'</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.colors = [<span class=\"string\">'black'</span>, <span class=\"string\">'yellow'</span>, <span class=\"string\">'red'</span>]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Child</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  Parent.call(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.type = <span class=\"string\">'child'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Parent.prototype.age = <span class=\"number\">12</span>;</span><br><span class=\"line\">Parent.prototype.say = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'hello'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> q1 = <span class=\"keyword\">new</span> Child();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(q1);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(q1.age); <span class=\"comment\">// undefined</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(q1.say()); <span class=\"comment\">// 报错</span></span><br></pre></td></tr></table></figure></p>\n<p>总结：Child无法继承Parent的原型对象，并没有真正的实现继承（部分继承）</p>\n<h3 id=\"2-ES5-原型链继承\"><a href=\"#2-ES5-原型链继承\" class=\"headerlink\" title=\"2. ES5 原型链继承\"></a>2. ES5 原型链继承</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Parent</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = <span class=\"string\">'parent'</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.colors = [<span class=\"string\">'black'</span>, <span class=\"string\">'yellow'</span>, <span class=\"string\">'red'</span>]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Child</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.type = <span class=\"string\">'child'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Parent.prototype.age = <span class=\"number\">12</span>;</span><br><span class=\"line\">Parent.prototype.say = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'hello'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Child.prototype = <span class=\"keyword\">new</span> Parent();</span><br><span class=\"line\"><span class=\"keyword\">var</span> q1 = <span class=\"keyword\">new</span> Child();</span><br><span class=\"line\"><span class=\"comment\">// console.log(q1);</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(q1.age); <span class=\"comment\">// 12</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(q1.say()); <span class=\"comment\">// hello</span></span><br></pre></td></tr></table></figure>\n<p>再看<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Parent</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = <span class=\"string\">'parent'</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.colors = [<span class=\"string\">'black'</span>, <span class=\"string\">'yellow'</span>, <span class=\"string\">'red'</span>]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Child</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.type = <span class=\"string\">'child'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Parent.prototype.age = <span class=\"number\">12</span>;</span><br><span class=\"line\">Parent.prototype.say = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'hello'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Child.prototype = <span class=\"keyword\">new</span> Parent();</span><br><span class=\"line\"><span class=\"keyword\">var</span> q1 = <span class=\"keyword\">new</span> Child();</span><br><span class=\"line\"><span class=\"keyword\">var</span> q2 = <span class=\"keyword\">new</span> Child();</span><br><span class=\"line\">q1.colors.push(<span class=\"string\">'pink'</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(q1.colors) <span class=\"comment\">// [ 'black', 'yellow', 'red', 'pink' ]</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(q2.colors) <span class=\"comment\">// [ 'black', 'yellow', 'red', 'pink' ]</span></span><br></pre></td></tr></table></figure></p>\n<p>结论：被new出来的实例不能隔离</p>\n<h3 id=\"3-组合继承-构造函数和原型链继承\"><a href=\"#3-组合继承-构造函数和原型链继承\" class=\"headerlink\" title=\"3. 组合继承(构造函数和原型链继承)\"></a>3. 组合继承(构造函数和原型链继承)</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Parent</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = <span class=\"string\">'parent'</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.colors = [<span class=\"string\">'black'</span>, <span class=\"string\">'yellow'</span>, <span class=\"string\">'red'</span>]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Child</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  Parent.call(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.type = <span class=\"string\">'child'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Parent.prototype.age = <span class=\"number\">12</span>;</span><br><span class=\"line\">Parent.prototype.say = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'hello'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Child.prototype = <span class=\"keyword\">new</span> Parent();</span><br><span class=\"line\"><span class=\"keyword\">var</span> q1 = <span class=\"keyword\">new</span> Child();</span><br><span class=\"line\"><span class=\"keyword\">var</span> q2 = <span class=\"keyword\">new</span> Child();</span><br><span class=\"line\">q1.colors.push(<span class=\"string\">'pink'</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(q1.colors) <span class=\"comment\">// [ 'black', 'yellow', 'red','pink']</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(q2.colors) <span class=\"comment\">// [ 'black', 'yellow', 'red', ]</span></span><br></pre></td></tr></table></figure>\n<p>结论：父类的构造函数被执行了两次，第一次是Child.prototype = new Parent()，第二次是在实例化的时候，这是没有必要的。</p>\n<p>优化<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Parent</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = <span class=\"string\">'parent'</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.colors = [<span class=\"string\">'black'</span>, <span class=\"string\">'yellow'</span>, <span class=\"string\">'red'</span>]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Child</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  Parent.call(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.type = <span class=\"string\">'child'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Parent.prototype.age = <span class=\"number\">12</span>;</span><br><span class=\"line\">Parent.prototype.say = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'hello'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Child.prototype = <span class=\"built_in\">Object</span>.create(Parent.prototype);</span><br><span class=\"line\">Child.prototype.constructor = Child;</span><br><span class=\"line\"><span class=\"keyword\">var</span> q1 = <span class=\"keyword\">new</span> Child();</span><br><span class=\"line\"><span class=\"keyword\">var</span> q2 = <span class=\"keyword\">new</span> Child();</span><br><span class=\"line\">q1.colors.push(<span class=\"string\">'pink'</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(q1.colors) <span class=\"comment\">// [ 'black', 'yellow', 'red', 'pink' ]</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(q2.colors) <span class=\"comment\">// [ 'black', 'yellow', 'red', ]</span></span><br></pre></td></tr></table></figure></p>\n<p>结论：Object.create是一种创建对象的方式，它会创建一个中间对象</p>\n<h3 id=\"4-ES6-class继承\"><a href=\"#4-ES6-class继承\" class=\"headerlink\" title=\"4. ES6 class继承\"></a>4. ES6 class继承</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// es6的继承</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Parent</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(name) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  say() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'parent has say method. '</span> + <span class=\"keyword\">this</span>.name);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Child</span> <span class=\"keyword\">extends</span> <span class=\"title\">Parent</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(name) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>(name);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  fly() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'chid can fly...'</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> Child(<span class=\"string\">'tom'</span>);</span><br><span class=\"line\">p.say();</span><br><span class=\"line\">p.fly();</span><br></pre></td></tr></table></figure>\n<p>结论：文档，谢谢～ <a href=\"https://es6.ruanyifeng.com/?search=extend&amp;x=0&amp;y=0#docs/class-extends\" target=\"_blank\" rel=\"noopener\">https://es6.ruanyifeng.com/?search=extend&amp;x=0&amp;y=0#docs/class-extends</a></p>\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/u=1418646752,692709038&fm=173&app=49&f=JPEG.jpeg?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<center><font face=\"黑体\" color=\"red\" size=\"4\">～～ 回首往昔， 更近一步 ～～</font></center>\n\n<h2 id=\"招式\"><a href=\"#招式\" class=\"headerlink\" title=\"招式\"></a>招式</h2><h3 id=\"1-ES5-构造函数继承\"><a href=\"#1-ES5-构造函数继承\" class=\"headerlink\" title=\"1. ES5 构造函数继承\"></a>1. ES5 构造函数继承</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Parent</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = <span class=\"string\">'parent'</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.colors = [<span class=\"string\">'black'</span>, <span class=\"string\">'yellow'</span>, <span class=\"string\">'red'</span>]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Child</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  Parent.call(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.type = <span class=\"string\">'child'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> q1 = <span class=\"keyword\">new</span> Child();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(q1.name); <span class=\"comment\">// parent</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(q1.colors); <span class=\"comment\">// [ 'black', 'yellow', 'red' ]</span></span><br></pre></td></tr></table></figure>\n<p>再看<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Parent</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = <span class=\"string\">'parent'</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.colors = [<span class=\"string\">'black'</span>, <span class=\"string\">'yellow'</span>, <span class=\"string\">'red'</span>]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Child</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  Parent.call(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.type = <span class=\"string\">'child'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Parent.prototype.age = <span class=\"number\">12</span>;</span><br><span class=\"line\">Parent.prototype.say = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'hello'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> q1 = <span class=\"keyword\">new</span> Child();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(q1);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(q1.age); <span class=\"comment\">// undefined</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(q1.say()); <span class=\"comment\">// 报错</span></span><br></pre></td></tr></table></figure></p>\n<p>总结：Child无法继承Parent的原型对象，并没有真正的实现继承（部分继承）</p>\n<h3 id=\"2-ES5-原型链继承\"><a href=\"#2-ES5-原型链继承\" class=\"headerlink\" title=\"2. ES5 原型链继承\"></a>2. ES5 原型链继承</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Parent</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = <span class=\"string\">'parent'</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.colors = [<span class=\"string\">'black'</span>, <span class=\"string\">'yellow'</span>, <span class=\"string\">'red'</span>]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Child</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.type = <span class=\"string\">'child'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Parent.prototype.age = <span class=\"number\">12</span>;</span><br><span class=\"line\">Parent.prototype.say = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'hello'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Child.prototype = <span class=\"keyword\">new</span> Parent();</span><br><span class=\"line\"><span class=\"keyword\">var</span> q1 = <span class=\"keyword\">new</span> Child();</span><br><span class=\"line\"><span class=\"comment\">// console.log(q1);</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(q1.age); <span class=\"comment\">// 12</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(q1.say()); <span class=\"comment\">// hello</span></span><br></pre></td></tr></table></figure>\n<p>再看<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Parent</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = <span class=\"string\">'parent'</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.colors = [<span class=\"string\">'black'</span>, <span class=\"string\">'yellow'</span>, <span class=\"string\">'red'</span>]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Child</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.type = <span class=\"string\">'child'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Parent.prototype.age = <span class=\"number\">12</span>;</span><br><span class=\"line\">Parent.prototype.say = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'hello'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Child.prototype = <span class=\"keyword\">new</span> Parent();</span><br><span class=\"line\"><span class=\"keyword\">var</span> q1 = <span class=\"keyword\">new</span> Child();</span><br><span class=\"line\"><span class=\"keyword\">var</span> q2 = <span class=\"keyword\">new</span> Child();</span><br><span class=\"line\">q1.colors.push(<span class=\"string\">'pink'</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(q1.colors) <span class=\"comment\">// [ 'black', 'yellow', 'red', 'pink' ]</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(q2.colors) <span class=\"comment\">// [ 'black', 'yellow', 'red', 'pink' ]</span></span><br></pre></td></tr></table></figure></p>\n<p>结论：被new出来的实例不能隔离</p>\n<h3 id=\"3-组合继承-构造函数和原型链继承\"><a href=\"#3-组合继承-构造函数和原型链继承\" class=\"headerlink\" title=\"3. 组合继承(构造函数和原型链继承)\"></a>3. 组合继承(构造函数和原型链继承)</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Parent</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = <span class=\"string\">'parent'</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.colors = [<span class=\"string\">'black'</span>, <span class=\"string\">'yellow'</span>, <span class=\"string\">'red'</span>]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Child</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  Parent.call(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.type = <span class=\"string\">'child'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Parent.prototype.age = <span class=\"number\">12</span>;</span><br><span class=\"line\">Parent.prototype.say = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'hello'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Child.prototype = <span class=\"keyword\">new</span> Parent();</span><br><span class=\"line\"><span class=\"keyword\">var</span> q1 = <span class=\"keyword\">new</span> Child();</span><br><span class=\"line\"><span class=\"keyword\">var</span> q2 = <span class=\"keyword\">new</span> Child();</span><br><span class=\"line\">q1.colors.push(<span class=\"string\">'pink'</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(q1.colors) <span class=\"comment\">// [ 'black', 'yellow', 'red','pink']</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(q2.colors) <span class=\"comment\">// [ 'black', 'yellow', 'red', ]</span></span><br></pre></td></tr></table></figure>\n<p>结论：父类的构造函数被执行了两次，第一次是Child.prototype = new Parent()，第二次是在实例化的时候，这是没有必要的。</p>\n<p>优化<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Parent</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = <span class=\"string\">'parent'</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.colors = [<span class=\"string\">'black'</span>, <span class=\"string\">'yellow'</span>, <span class=\"string\">'red'</span>]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Child</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  Parent.call(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.type = <span class=\"string\">'child'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Parent.prototype.age = <span class=\"number\">12</span>;</span><br><span class=\"line\">Parent.prototype.say = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'hello'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Child.prototype = <span class=\"built_in\">Object</span>.create(Parent.prototype);</span><br><span class=\"line\">Child.prototype.constructor = Child;</span><br><span class=\"line\"><span class=\"keyword\">var</span> q1 = <span class=\"keyword\">new</span> Child();</span><br><span class=\"line\"><span class=\"keyword\">var</span> q2 = <span class=\"keyword\">new</span> Child();</span><br><span class=\"line\">q1.colors.push(<span class=\"string\">'pink'</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(q1.colors) <span class=\"comment\">// [ 'black', 'yellow', 'red', 'pink' ]</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(q2.colors) <span class=\"comment\">// [ 'black', 'yellow', 'red', ]</span></span><br></pre></td></tr></table></figure></p>\n<p>结论：Object.create是一种创建对象的方式，它会创建一个中间对象</p>\n<h3 id=\"4-ES6-class继承\"><a href=\"#4-ES6-class继承\" class=\"headerlink\" title=\"4. ES6 class继承\"></a>4. ES6 class继承</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// es6的继承</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Parent</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(name) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  say() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'parent has say method. '</span> + <span class=\"keyword\">this</span>.name);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Child</span> <span class=\"keyword\">extends</span> <span class=\"title\">Parent</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(name) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>(name);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  fly() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'chid can fly...'</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> Child(<span class=\"string\">'tom'</span>);</span><br><span class=\"line\">p.say();</span><br><span class=\"line\">p.fly();</span><br></pre></td></tr></table></figure>\n<p>结论：文档，谢谢～ <a href=\"https://es6.ruanyifeng.com/?search=extend&amp;x=0&amp;y=0#docs/class-extends\" target=\"_blank\" rel=\"noopener\">https://es6.ruanyifeng.com/?search=extend&amp;x=0&amp;y=0#docs/class-extends</a></p>\n"},{"title":"深入理解js中防抖跟截流的区别","date":"2021-07-15T13:29:55.000Z","_content":"## 前言\n在日常项目开发中，通常会碰到监听处理的操作，比如监听浏览器窗口大小改变，监听滚动事件，监听输入事件等等，然而做这方面功能的时候就要想着怎么优化性能，防抖跟截流就派上用场了\n## 防抖\n> 触发高频事件后delay内函数只会执行一次，如果delay内高频事件再次被触发，则重新计算时间\n\n1. 实现方式：每次触发事件时设置一个延迟调用方法，并且取消之前的延时调用方法\n2. 缺点：如果事件在规定的时间间隔内被不断的触发，则调用方法会被不断的延迟\n\n``` javascript\n//debounce\nfunction debounce(method, delay) {\n  let timer = null\n  return function () {\n    let self = this\n    if (timer) {\n      clearTimeout(timer)\n      timer = null\n    }\n    timer = setTimeout(function () {\n      method.apply(self, arguments)\n    }, delay)\n  }\n}\n\n// 处理函数\nfunction handle() {\n    console.log(xxx);\n}\n// 滚动事件\nwindow.addEventListener('scroll', debounce(handle,1000));\n```\n# 节流\n> 指在规定时间内只触发一次事件，减少事件执行的频率\n\n1. 实现方式：每次触发事件时，如果当前有等待执行的延时函数，则直接return\n\n``` javascript\nfunction throttle(fn,delay) {\n  let canRun = true\n  return function () {\n    let self = this\n    if (!canRun) return\n    canRun = false\n    setTimeout(() => {\n      fn.apply(self, arguments)\n      canRun = true\n    }, delay)\n  }\n}\n\n```\n\n# 其他版本\n\n``` javascript\n// 时间戳\nfunction throttle1 (fn, delay) {\n  let prev = Date.now()\n  return () => {\n    let now = Date.now()\n    if (now - prev >= delay) {\n      fn()\n      prev = Date.now()\n    }\n  }\n}\n\n// 定时器\nfunction throttle2 (fn, delay) {\n  let timer = null\n  return () => {\n    if (!timer) {\n      timer = setTimeout(() => {\n        fn()\n        timer = null\n      }, delay)\n    }\n  }\n}\n```\n# demo\n[throttle 截流](https://chengheai.github.io/daily-vue-demo/#/throttle)\n[debounce 防抖](https://chengheai.github.io/daily-vue-demo/#/debounce)\n# 总结\n一般情况下onresize，onkeyup事件使用防抖；onscroll、onmousemove等事件使用截流。","source":"_posts/深入理解js中防抖跟截流的区别.md","raw":"---\ntitle: 深入理解js中防抖跟截流的区别\ndate: 2021-07-15 21:29:55\ntags: [Javascript]\n---\n## 前言\n在日常项目开发中，通常会碰到监听处理的操作，比如监听浏览器窗口大小改变，监听滚动事件，监听输入事件等等，然而做这方面功能的时候就要想着怎么优化性能，防抖跟截流就派上用场了\n## 防抖\n> 触发高频事件后delay内函数只会执行一次，如果delay内高频事件再次被触发，则重新计算时间\n\n1. 实现方式：每次触发事件时设置一个延迟调用方法，并且取消之前的延时调用方法\n2. 缺点：如果事件在规定的时间间隔内被不断的触发，则调用方法会被不断的延迟\n\n``` javascript\n//debounce\nfunction debounce(method, delay) {\n  let timer = null\n  return function () {\n    let self = this\n    if (timer) {\n      clearTimeout(timer)\n      timer = null\n    }\n    timer = setTimeout(function () {\n      method.apply(self, arguments)\n    }, delay)\n  }\n}\n\n// 处理函数\nfunction handle() {\n    console.log(xxx);\n}\n// 滚动事件\nwindow.addEventListener('scroll', debounce(handle,1000));\n```\n# 节流\n> 指在规定时间内只触发一次事件，减少事件执行的频率\n\n1. 实现方式：每次触发事件时，如果当前有等待执行的延时函数，则直接return\n\n``` javascript\nfunction throttle(fn,delay) {\n  let canRun = true\n  return function () {\n    let self = this\n    if (!canRun) return\n    canRun = false\n    setTimeout(() => {\n      fn.apply(self, arguments)\n      canRun = true\n    }, delay)\n  }\n}\n\n```\n\n# 其他版本\n\n``` javascript\n// 时间戳\nfunction throttle1 (fn, delay) {\n  let prev = Date.now()\n  return () => {\n    let now = Date.now()\n    if (now - prev >= delay) {\n      fn()\n      prev = Date.now()\n    }\n  }\n}\n\n// 定时器\nfunction throttle2 (fn, delay) {\n  let timer = null\n  return () => {\n    if (!timer) {\n      timer = setTimeout(() => {\n        fn()\n        timer = null\n      }, delay)\n    }\n  }\n}\n```\n# demo\n[throttle 截流](https://chengheai.github.io/daily-vue-demo/#/throttle)\n[debounce 防抖](https://chengheai.github.io/daily-vue-demo/#/debounce)\n# 总结\n一般情况下onresize，onkeyup事件使用防抖；onscroll、onmousemove等事件使用截流。","slug":"深入理解js中防抖跟截流的区别","published":1,"updated":"2021-10-09T08:48:32.094Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzach003h5c54tsbgrx3z","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>在日常项目开发中，通常会碰到监听处理的操作，比如监听浏览器窗口大小改变，监听滚动事件，监听输入事件等等，然而做这方面功能的时候就要想着怎么优化性能，防抖跟截流就派上用场了</p>\n<h2 id=\"防抖\"><a href=\"#防抖\" class=\"headerlink\" title=\"防抖\"></a>防抖</h2><blockquote>\n<p>触发高频事件后delay内函数只会执行一次，如果delay内高频事件再次被触发，则重新计算时间</p>\n</blockquote>\n<ol>\n<li>实现方式：每次触发事件时设置一个延迟调用方法，并且取消之前的延时调用方法</li>\n<li>缺点：如果事件在规定的时间间隔内被不断的触发，则调用方法会被不断的延迟</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//debounce</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">debounce</span>(<span class=\"params\">method, delay</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> timer = <span class=\"literal\">null</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> self = <span class=\"keyword\">this</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (timer) &#123;</span><br><span class=\"line\">      clearTimeout(timer)</span><br><span class=\"line\">      timer = <span class=\"literal\">null</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    timer = setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      method.apply(self, <span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">    &#125;, delay)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 处理函数</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handle</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(xxx);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 滚动事件</span></span><br><span class=\"line\"><span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">'scroll'</span>, debounce(handle,<span class=\"number\">1000</span>));</span><br></pre></td></tr></table></figure>\n<h1 id=\"节流\"><a href=\"#节流\" class=\"headerlink\" title=\"节流\"></a>节流</h1><blockquote>\n<p>指在规定时间内只触发一次事件，减少事件执行的频率</p>\n</blockquote>\n<ol>\n<li>实现方式：每次触发事件时，如果当前有等待执行的延时函数，则直接return</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">throttle</span>(<span class=\"params\">fn,delay</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> canRun = <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> self = <span class=\"keyword\">this</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!canRun) <span class=\"keyword\">return</span></span><br><span class=\"line\">    canRun = <span class=\"literal\">false</span></span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      fn.apply(self, <span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">      canRun = <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;, delay)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"其他版本\"><a href=\"#其他版本\" class=\"headerlink\" title=\"其他版本\"></a>其他版本</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 时间戳</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">throttle1</span> (<span class=\"params\">fn, delay</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> prev = <span class=\"built_in\">Date</span>.now()</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> now = <span class=\"built_in\">Date</span>.now()</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (now - prev &gt;= delay) &#123;</span><br><span class=\"line\">      fn()</span><br><span class=\"line\">      prev = <span class=\"built_in\">Date</span>.now()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 定时器</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">throttle2</span> (<span class=\"params\">fn, delay</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> timer = <span class=\"literal\">null</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!timer) &#123;</span><br><span class=\"line\">      timer = setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">        fn()</span><br><span class=\"line\">        timer = <span class=\"literal\">null</span></span><br><span class=\"line\">      &#125;, delay)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"demo\"><a href=\"#demo\" class=\"headerlink\" title=\"demo\"></a>demo</h1><p><a href=\"https://chengheai.github.io/daily-vue-demo/#/throttle\" target=\"_blank\" rel=\"noopener\">throttle 截流</a><br><a href=\"https://chengheai.github.io/daily-vue-demo/#/debounce\" target=\"_blank\" rel=\"noopener\">debounce 防抖</a></p>\n<h1 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h1><p>一般情况下onresize，onkeyup事件使用防抖；onscroll、onmousemove等事件使用截流。</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>在日常项目开发中，通常会碰到监听处理的操作，比如监听浏览器窗口大小改变，监听滚动事件，监听输入事件等等，然而做这方面功能的时候就要想着怎么优化性能，防抖跟截流就派上用场了</p>\n<h2 id=\"防抖\"><a href=\"#防抖\" class=\"headerlink\" title=\"防抖\"></a>防抖</h2><blockquote>\n<p>触发高频事件后delay内函数只会执行一次，如果delay内高频事件再次被触发，则重新计算时间</p>\n</blockquote>\n<ol>\n<li>实现方式：每次触发事件时设置一个延迟调用方法，并且取消之前的延时调用方法</li>\n<li>缺点：如果事件在规定的时间间隔内被不断的触发，则调用方法会被不断的延迟</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//debounce</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">debounce</span>(<span class=\"params\">method, delay</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> timer = <span class=\"literal\">null</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> self = <span class=\"keyword\">this</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (timer) &#123;</span><br><span class=\"line\">      clearTimeout(timer)</span><br><span class=\"line\">      timer = <span class=\"literal\">null</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    timer = setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      method.apply(self, <span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">    &#125;, delay)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 处理函数</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handle</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(xxx);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 滚动事件</span></span><br><span class=\"line\"><span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">'scroll'</span>, debounce(handle,<span class=\"number\">1000</span>));</span><br></pre></td></tr></table></figure>\n<h1 id=\"节流\"><a href=\"#节流\" class=\"headerlink\" title=\"节流\"></a>节流</h1><blockquote>\n<p>指在规定时间内只触发一次事件，减少事件执行的频率</p>\n</blockquote>\n<ol>\n<li>实现方式：每次触发事件时，如果当前有等待执行的延时函数，则直接return</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">throttle</span>(<span class=\"params\">fn,delay</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> canRun = <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> self = <span class=\"keyword\">this</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!canRun) <span class=\"keyword\">return</span></span><br><span class=\"line\">    canRun = <span class=\"literal\">false</span></span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      fn.apply(self, <span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">      canRun = <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;, delay)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"其他版本\"><a href=\"#其他版本\" class=\"headerlink\" title=\"其他版本\"></a>其他版本</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 时间戳</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">throttle1</span> (<span class=\"params\">fn, delay</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> prev = <span class=\"built_in\">Date</span>.now()</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> now = <span class=\"built_in\">Date</span>.now()</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (now - prev &gt;= delay) &#123;</span><br><span class=\"line\">      fn()</span><br><span class=\"line\">      prev = <span class=\"built_in\">Date</span>.now()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 定时器</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">throttle2</span> (<span class=\"params\">fn, delay</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> timer = <span class=\"literal\">null</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!timer) &#123;</span><br><span class=\"line\">      timer = setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">        fn()</span><br><span class=\"line\">        timer = <span class=\"literal\">null</span></span><br><span class=\"line\">      &#125;, delay)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"demo\"><a href=\"#demo\" class=\"headerlink\" title=\"demo\"></a>demo</h1><p><a href=\"https://chengheai.github.io/daily-vue-demo/#/throttle\" target=\"_blank\" rel=\"noopener\">throttle 截流</a><br><a href=\"https://chengheai.github.io/daily-vue-demo/#/debounce\" target=\"_blank\" rel=\"noopener\">debounce 防抖</a></p>\n<h1 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h1><p>一般情况下onresize，onkeyup事件使用防抖；onscroll、onmousemove等事件使用截流。</p>\n"},{"title":"怎么在npm官网上传自己的包","date":"2018-10-14T15:26:35.000Z","_content":"**注意：因为courage package已经发布到npm了，而npm包不存在重名的，你需要改个别的名字。**\n##### demo：\n\\[git](https://github.com/chengheai/npm-publish)\n- 第一步:\n在项目的根目录下创建一个名字为node_modules的目录，此目录用来放置所有的node模块\n\n- 第二步:\n在node_modules目录下名字courage目录;\n\n- 第三步:\ncourage目录下新建两个文件：\n- index.js\n``` javascript\n'use strict'\n\nvar now = new Date(),\n  hour = now.getHours(),\n  greeting\n\nif (hour < 6) {greeting = '凌晨好！';}\nelse if (hour < 9) {greeting = '早上好！';}\nelse if (hour < 12) {greeting = '上午好！';}\nelse if (hour < 14) {greeting = '中午好！';}\nelse if (hour < 17) {greeting = '下午好！';}\nelse if (hour < 19) {greeting = '傍晚好！';}\nelse if (hour < 22) {greeting = '晚上好！';}else {greeting = '夜深了，早点休息！';}\nfunction greetings () {\n  console.log(greeting)\n}\nmodule.exports = greetings\n\n```\n- package.json\n```\n{\n  \"name\": \"courage\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"keywords\": [],\n  \"author\": \"https://github.com/chengheai\",\n  \"license\": \"ISC\"\n}\n\n```\n- 发布courage包到npm\n- 首先要注册一个npm账号(如果没有的话)\n- 注册完后，在命令窗口运行`npm adduser(登陆npm)`,会提示你输入用户名和密码；\n- 登陆成功后，在courage目录下执行命令npm publish(发布package)\n- 发布成功后就可以登陆到npm官网去看自己发布的package。\n\n###### 使用\n1.先新建一个空的目录npm-test;然后在命令行中切换到npm-test目录;\n2.然后执行npm install courage命令;\n3.执行成功后在npm-test目录下看到多了一个node_modules的目录，在node_modules目录中就可以看到我们刚才发布的courage package;\n4.然后再npm-test目录下新建一个greeting.js来测试一下greetings()方法，greeting.js中的内容如下：\n``` javascript\nconst greeting = require('courage');\ngreeting()\n```\n##### 如何更新courage版本发布到npm的package？\n- 进入到courage目录, 对index.js做一些修改(做为要更新的内容)\n- 然后再命令行执行npm version patch, 此命令会把package.json的version更新到0.02\n- 然后执行npm publish就可以更新到npm了\n\n\n","source":"_posts/怎么在npm官网上传自己的包.md","raw":"---\ntitle: 怎么在npm官网上传自己的包\ndate: 2018-10-14 23:26:35\ntags: [npm, nodejs]\ncategories:\n  - nodejs后端开发\n---\n**注意：因为courage package已经发布到npm了，而npm包不存在重名的，你需要改个别的名字。**\n##### demo：\n\\[git](https://github.com/chengheai/npm-publish)\n- 第一步:\n在项目的根目录下创建一个名字为node_modules的目录，此目录用来放置所有的node模块\n\n- 第二步:\n在node_modules目录下名字courage目录;\n\n- 第三步:\ncourage目录下新建两个文件：\n- index.js\n``` javascript\n'use strict'\n\nvar now = new Date(),\n  hour = now.getHours(),\n  greeting\n\nif (hour < 6) {greeting = '凌晨好！';}\nelse if (hour < 9) {greeting = '早上好！';}\nelse if (hour < 12) {greeting = '上午好！';}\nelse if (hour < 14) {greeting = '中午好！';}\nelse if (hour < 17) {greeting = '下午好！';}\nelse if (hour < 19) {greeting = '傍晚好！';}\nelse if (hour < 22) {greeting = '晚上好！';}else {greeting = '夜深了，早点休息！';}\nfunction greetings () {\n  console.log(greeting)\n}\nmodule.exports = greetings\n\n```\n- package.json\n```\n{\n  \"name\": \"courage\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"keywords\": [],\n  \"author\": \"https://github.com/chengheai\",\n  \"license\": \"ISC\"\n}\n\n```\n- 发布courage包到npm\n- 首先要注册一个npm账号(如果没有的话)\n- 注册完后，在命令窗口运行`npm adduser(登陆npm)`,会提示你输入用户名和密码；\n- 登陆成功后，在courage目录下执行命令npm publish(发布package)\n- 发布成功后就可以登陆到npm官网去看自己发布的package。\n\n###### 使用\n1.先新建一个空的目录npm-test;然后在命令行中切换到npm-test目录;\n2.然后执行npm install courage命令;\n3.执行成功后在npm-test目录下看到多了一个node_modules的目录，在node_modules目录中就可以看到我们刚才发布的courage package;\n4.然后再npm-test目录下新建一个greeting.js来测试一下greetings()方法，greeting.js中的内容如下：\n``` javascript\nconst greeting = require('courage');\ngreeting()\n```\n##### 如何更新courage版本发布到npm的package？\n- 进入到courage目录, 对index.js做一些修改(做为要更新的内容)\n- 然后再命令行执行npm version patch, 此命令会把package.json的version更新到0.02\n- 然后执行npm publish就可以更新到npm了\n\n\n","slug":"怎么在npm官网上传自己的包","published":1,"updated":"2021-10-09T08:48:32.091Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzacj003k5c546p2kfiqu","content":"<p><strong>注意：因为courage package已经发布到npm了，而npm包不存在重名的，你需要改个别的名字。</strong></p>\n<h5 id=\"demo：\"><a href=\"#demo：\" class=\"headerlink\" title=\"demo：\"></a>demo：</h5><p>[git](<a href=\"https://github.com/chengheai/npm-publish\">https://github.com/chengheai/npm-publish</a>)</p>\n<ul>\n<li><p>第一步:<br>在项目的根目录下创建一个名字为node_modules的目录，此目录用来放置所有的node模块</p>\n</li>\n<li><p>第二步:<br>在node_modules目录下名字courage目录;</p>\n</li>\n<li><p>第三步:<br>courage目录下新建两个文件：</p>\n</li>\n<li><p>index.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">'use strict'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> now = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(),</span><br><span class=\"line\">  hour = now.getHours(),</span><br><span class=\"line\">  greeting</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (hour &lt; <span class=\"number\">6</span>) &#123;greeting = <span class=\"string\">'凌晨好！'</span>;&#125;</span><br><span class=\"line\"><span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (hour &lt; <span class=\"number\">9</span>) &#123;greeting = <span class=\"string\">'早上好！'</span>;&#125;</span><br><span class=\"line\"><span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (hour &lt; <span class=\"number\">12</span>) &#123;greeting = <span class=\"string\">'上午好！'</span>;&#125;</span><br><span class=\"line\"><span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (hour &lt; <span class=\"number\">14</span>) &#123;greeting = <span class=\"string\">'中午好！'</span>;&#125;</span><br><span class=\"line\"><span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (hour &lt; <span class=\"number\">17</span>) &#123;greeting = <span class=\"string\">'下午好！'</span>;&#125;</span><br><span class=\"line\"><span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (hour &lt; <span class=\"number\">19</span>) &#123;greeting = <span class=\"string\">'傍晚好！'</span>;&#125;</span><br><span class=\"line\"><span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (hour &lt; <span class=\"number\">22</span>) &#123;greeting = <span class=\"string\">'晚上好！'</span>;&#125;<span class=\"keyword\">else</span> &#123;greeting = <span class=\"string\">'夜深了，早点休息！'</span>;&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">greetings</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(greeting)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = greetings</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>package.json</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;name&quot;: &quot;courage&quot;,</span><br><span class=\"line\">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class=\"line\">  &quot;description&quot;: &quot;&quot;,</span><br><span class=\"line\">  &quot;main&quot;: &quot;index.js&quot;,</span><br><span class=\"line\">  &quot;keywords&quot;: [],</span><br><span class=\"line\">  &quot;author&quot;: &quot;https://github.com/chengheai&quot;,</span><br><span class=\"line\">  &quot;license&quot;: &quot;ISC&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>发布courage包到npm</p>\n</li>\n<li>首先要注册一个npm账号(如果没有的话)</li>\n<li>注册完后，在命令窗口运行<code>npm adduser(登陆npm)</code>,会提示你输入用户名和密码；</li>\n<li>登陆成功后，在courage目录下执行命令npm publish(发布package)</li>\n<li>发布成功后就可以登陆到npm官网去看自己发布的package。</li>\n</ul>\n<h6 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h6><p>1.先新建一个空的目录npm-test;然后在命令行中切换到npm-test目录;<br>2.然后执行npm install courage命令;<br>3.执行成功后在npm-test目录下看到多了一个node_modules的目录，在node_modules目录中就可以看到我们刚才发布的courage package;<br>4.然后再npm-test目录下新建一个greeting.js来测试一下greetings()方法，greeting.js中的内容如下：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> greeting = <span class=\"built_in\">require</span>(<span class=\"string\">'courage'</span>);</span><br><span class=\"line\">greeting()</span><br></pre></td></tr></table></figure></p>\n<h5 id=\"如何更新courage版本发布到npm的package？\"><a href=\"#如何更新courage版本发布到npm的package？\" class=\"headerlink\" title=\"如何更新courage版本发布到npm的package？\"></a>如何更新courage版本发布到npm的package？</h5><ul>\n<li>进入到courage目录, 对index.js做一些修改(做为要更新的内容)</li>\n<li>然后再命令行执行npm version patch, 此命令会把package.json的version更新到0.02</li>\n<li>然后执行npm publish就可以更新到npm了</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p><strong>注意：因为courage package已经发布到npm了，而npm包不存在重名的，你需要改个别的名字。</strong></p>\n<h5 id=\"demo：\"><a href=\"#demo：\" class=\"headerlink\" title=\"demo：\"></a>demo：</h5><p>[git](<a href=\"https://github.com/chengheai/npm-publish\">https://github.com/chengheai/npm-publish</a>)</p>\n<ul>\n<li><p>第一步:<br>在项目的根目录下创建一个名字为node_modules的目录，此目录用来放置所有的node模块</p>\n</li>\n<li><p>第二步:<br>在node_modules目录下名字courage目录;</p>\n</li>\n<li><p>第三步:<br>courage目录下新建两个文件：</p>\n</li>\n<li><p>index.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">'use strict'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> now = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(),</span><br><span class=\"line\">  hour = now.getHours(),</span><br><span class=\"line\">  greeting</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (hour &lt; <span class=\"number\">6</span>) &#123;greeting = <span class=\"string\">'凌晨好！'</span>;&#125;</span><br><span class=\"line\"><span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (hour &lt; <span class=\"number\">9</span>) &#123;greeting = <span class=\"string\">'早上好！'</span>;&#125;</span><br><span class=\"line\"><span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (hour &lt; <span class=\"number\">12</span>) &#123;greeting = <span class=\"string\">'上午好！'</span>;&#125;</span><br><span class=\"line\"><span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (hour &lt; <span class=\"number\">14</span>) &#123;greeting = <span class=\"string\">'中午好！'</span>;&#125;</span><br><span class=\"line\"><span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (hour &lt; <span class=\"number\">17</span>) &#123;greeting = <span class=\"string\">'下午好！'</span>;&#125;</span><br><span class=\"line\"><span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (hour &lt; <span class=\"number\">19</span>) &#123;greeting = <span class=\"string\">'傍晚好！'</span>;&#125;</span><br><span class=\"line\"><span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (hour &lt; <span class=\"number\">22</span>) &#123;greeting = <span class=\"string\">'晚上好！'</span>;&#125;<span class=\"keyword\">else</span> &#123;greeting = <span class=\"string\">'夜深了，早点休息！'</span>;&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">greetings</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(greeting)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = greetings</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>package.json</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;name&quot;: &quot;courage&quot;,</span><br><span class=\"line\">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class=\"line\">  &quot;description&quot;: &quot;&quot;,</span><br><span class=\"line\">  &quot;main&quot;: &quot;index.js&quot;,</span><br><span class=\"line\">  &quot;keywords&quot;: [],</span><br><span class=\"line\">  &quot;author&quot;: &quot;https://github.com/chengheai&quot;,</span><br><span class=\"line\">  &quot;license&quot;: &quot;ISC&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>发布courage包到npm</p>\n</li>\n<li>首先要注册一个npm账号(如果没有的话)</li>\n<li>注册完后，在命令窗口运行<code>npm adduser(登陆npm)</code>,会提示你输入用户名和密码；</li>\n<li>登陆成功后，在courage目录下执行命令npm publish(发布package)</li>\n<li>发布成功后就可以登陆到npm官网去看自己发布的package。</li>\n</ul>\n<h6 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h6><p>1.先新建一个空的目录npm-test;然后在命令行中切换到npm-test目录;<br>2.然后执行npm install courage命令;<br>3.执行成功后在npm-test目录下看到多了一个node_modules的目录，在node_modules目录中就可以看到我们刚才发布的courage package;<br>4.然后再npm-test目录下新建一个greeting.js来测试一下greetings()方法，greeting.js中的内容如下：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> greeting = <span class=\"built_in\">require</span>(<span class=\"string\">'courage'</span>);</span><br><span class=\"line\">greeting()</span><br></pre></td></tr></table></figure></p>\n<h5 id=\"如何更新courage版本发布到npm的package？\"><a href=\"#如何更新courage版本发布到npm的package？\" class=\"headerlink\" title=\"如何更新courage版本发布到npm的package？\"></a>如何更新courage版本发布到npm的package？</h5><ul>\n<li>进入到courage目录, 对index.js做一些修改(做为要更新的内容)</li>\n<li>然后再命令行执行npm version patch, 此命令会把package.json的version更新到0.02</li>\n<li>然后执行npm publish就可以更新到npm了</li>\n</ul>\n"},{"layout":"vue","title":"vue点击收起部分隐藏","date":"2018-11-06T12:51:46.000Z","_content":"\\[demo](https://chengheai.github.io/Element-UI/docs/)\n### 效果\n![](/images/WX20181106-205401@2x.png)\n![](/images/WX20181106-205333@2x.png)\n### 代码\n``` html\n  <div>\n    <div v-for=\"item in showdetailList\" :key='item.message'>\n      <h3>{{item.message}}</h3>\n    </div>\n  </div>\n  <el-button type=\"success\" v-if=\"items.length > 2\" v-on:click=\"changeFoldState\">\n    <span>{{brandFold?'展开':'收起'}}</span>\n  </el-button>\n```\n``` javascript\ndata(){\n  return {\n    brandFold: true,\n      items: [{\n        message: \"Foo\"\n      }, {\n        message: \"Bar\"\n      }, {\n        message: \"alex\"\n      }]\n  }\n},\ncomputed: {\n  showetailList: {\n    get: function () {\n      if (this.brandFold) {\n        if (this.items.length < 3) {\n          return this.items\n        }\n        let newArr = []\n        for (var i = 0; i < 2; i++) {\n          let item = this.items[i]\n          newArr.push(item)\n        }\n        return newArr\n      }\n      return this.items\n    },\n    set: function (val) {\n      this.showdetailList = val\n    }\n  }\n},\nmethods: {\n  changeFoldState() {\n    this.brandFold = !this.brandFold\n  }\n}\n```\n\n","source":"_posts/点击收起部分隐藏.md","raw":"---\nlayout: vue\ntitle: vue点击收起部分隐藏\ndate: 2018-11-06 20:51:46\ntags: Vue\n---\n\\[demo](https://chengheai.github.io/Element-UI/docs/)\n### 效果\n![](/images/WX20181106-205401@2x.png)\n![](/images/WX20181106-205333@2x.png)\n### 代码\n``` html\n  <div>\n    <div v-for=\"item in showdetailList\" :key='item.message'>\n      <h3>{{item.message}}</h3>\n    </div>\n  </div>\n  <el-button type=\"success\" v-if=\"items.length > 2\" v-on:click=\"changeFoldState\">\n    <span>{{brandFold?'展开':'收起'}}</span>\n  </el-button>\n```\n``` javascript\ndata(){\n  return {\n    brandFold: true,\n      items: [{\n        message: \"Foo\"\n      }, {\n        message: \"Bar\"\n      }, {\n        message: \"alex\"\n      }]\n  }\n},\ncomputed: {\n  showetailList: {\n    get: function () {\n      if (this.brandFold) {\n        if (this.items.length < 3) {\n          return this.items\n        }\n        let newArr = []\n        for (var i = 0; i < 2; i++) {\n          let item = this.items[i]\n          newArr.push(item)\n        }\n        return newArr\n      }\n      return this.items\n    },\n    set: function (val) {\n      this.showdetailList = val\n    }\n  }\n},\nmethods: {\n  changeFoldState() {\n    this.brandFold = !this.brandFold\n  }\n}\n```\n\n","slug":"点击收起部分隐藏","published":1,"updated":"2021-10-09T08:48:32.094Z","comments":1,"photos":[],"link":"","_id":"ckumjzack003m5c54a1c5ajvk","content":"<p>[demo](<a href=\"https://chengheai.github.io/Element-UI/docs/\" target=\"_blank\" rel=\"noopener\">https://chengheai.github.io/Element-UI/docs/</a>)</p>\n<h3 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h3><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/images/WX20181106-205401@2x.png\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/images/WX20181106-205333@2x.png\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h3 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"item in showdetailList\"</span> <span class=\"attr\">:key</span>=<span class=\"string\">'item.message'</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h3</span>&gt;</span>&#123;&#123;item.message&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">h3</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">el-button</span> <span class=\"attr\">type</span>=<span class=\"string\">\"success\"</span> <span class=\"attr\">v-if</span>=<span class=\"string\">\"items.length &gt; 2\"</span> <span class=\"attr\">v-on:click</span>=<span class=\"string\">\"changeFoldState\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>&#123;&#123;brandFold?'展开':'收起'&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">el-button</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">data()&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    brandFold: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      items: [&#123;</span><br><span class=\"line\">        message: <span class=\"string\">\"Foo\"</span></span><br><span class=\"line\">      &#125;, &#123;</span><br><span class=\"line\">        message: <span class=\"string\">\"Bar\"</span></span><br><span class=\"line\">      &#125;, &#123;</span><br><span class=\"line\">        message: <span class=\"string\">\"alex\"</span></span><br><span class=\"line\">      &#125;]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">computed: &#123;</span><br><span class=\"line\">  showetailList: &#123;</span><br><span class=\"line\">    <span class=\"keyword\">get</span>: function () &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.brandFold) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.items.length &lt; <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.items</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> newArr = []</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">2</span>; i++) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">let</span> item = <span class=\"keyword\">this</span>.items[i]</span><br><span class=\"line\">          newArr.push(item)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> newArr</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.items</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"keyword\">set</span>: function (val) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.showdetailList = val</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">methods: &#123;</span><br><span class=\"line\">  changeFoldState() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.brandFold = !<span class=\"keyword\">this</span>.brandFold</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>[demo](<a href=\"https://chengheai.github.io/Element-UI/docs/\" target=\"_blank\" rel=\"noopener\">https://chengheai.github.io/Element-UI/docs/</a>)</p>\n<h3 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h3><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/images/WX20181106-205401@2x.png\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/images/WX20181106-205333@2x.png\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h3 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">v-for</span>=<span class=\"string\">\"item in showdetailList\"</span> <span class=\"attr\">:key</span>=<span class=\"string\">'item.message'</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h3</span>&gt;</span>&#123;&#123;item.message&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">h3</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">el-button</span> <span class=\"attr\">type</span>=<span class=\"string\">\"success\"</span> <span class=\"attr\">v-if</span>=<span class=\"string\">\"items.length &gt; 2\"</span> <span class=\"attr\">v-on:click</span>=<span class=\"string\">\"changeFoldState\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>&#123;&#123;brandFold?'展开':'收起'&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">el-button</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">data()&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    brandFold: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      items: [&#123;</span><br><span class=\"line\">        message: <span class=\"string\">\"Foo\"</span></span><br><span class=\"line\">      &#125;, &#123;</span><br><span class=\"line\">        message: <span class=\"string\">\"Bar\"</span></span><br><span class=\"line\">      &#125;, &#123;</span><br><span class=\"line\">        message: <span class=\"string\">\"alex\"</span></span><br><span class=\"line\">      &#125;]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">computed: &#123;</span><br><span class=\"line\">  showetailList: &#123;</span><br><span class=\"line\">    <span class=\"keyword\">get</span>: function () &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.brandFold) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.items.length &lt; <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.items</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> newArr = []</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">2</span>; i++) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">let</span> item = <span class=\"keyword\">this</span>.items[i]</span><br><span class=\"line\">          newArr.push(item)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> newArr</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.items</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"keyword\">set</span>: function (val) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.showdetailList = val</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">methods: &#123;</span><br><span class=\"line\">  changeFoldState() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.brandFold = !<span class=\"keyword\">this</span>.brandFold</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n"},{"title":"解决iOS12及一下弹框滚动会带动body内容滑动","date":"2019-11-20T13:32:55.000Z","_content":"\n## 前言\n\n在移动项目开发中往往会写一些 H5 页面，一个项目可能只有一两个页面，引入其他 UI 组件项目显得太臃肿，也没有啥必要，毕竟那些组件都是被人写的，有的时候不能一味的去使用他人写好的代码，有时间也需要自己谢谢，锻炼自己的同时也在巩固一些基础知识～～\n\n## 插件【 NPM 】\n\n[v-scroll-lock](https://github.com/phegman/v-scroll-lock)\n这个插件虽然很好，但是在华为手机 📱 上却不起作用，而且还有不好的效果【亲测 🍄🐷🐸🦋】\n[【在线测试】](https://v-scroll-lock.peterhegman.com/)\n\n## 问题\n\n一个页面弹出一个框，框里的内容可以滚动，但是滚动弹框时，body 内容也在动 【前提是你的 body 超过屏幕的高度】，然而在 iOS13 ，安卓手机没有问题，但是在 iOS12 及以下就会出现这个问题，通过代码 `document.body.style.overflow = \"hidden\";`，并不管用，原因是：在苹果 🧬 手机上就不存在这个属性，在它看来，我的页面有内容就该给客户全部展示出来，为什么要 hidden 呢 🍌，这个方法行不通时，我们准备给它添加另外一个属性`document.body.style.position = \"fixed\";`,发现可以正常，但是感觉怪怪的，因为 fixed 的 top 为 0\n\n## 问题总结\n\n～弹窗时给 body 设置 overflow:hidden；（ios 不理你）\n～弹窗时给 body 设置 position:fixed；(滚动位置会丢失)\n\n## 代码\n\n```javascript\nwatch: {\n  dialogStatus: function(news, olds) {\n      if (news) {\n        document.body.style.overflow = \"hidden\";\n        let scrollTop =\n          document.body.scrollTop || document.documentElement.scrollTop;\n        document.body.style.cssText +=\n          \"position:fixed;width:100%;top:-\" + scrollTop + \"px;\";\n      } else {\n        document.body.style.overflow = \"\";\n        document.body.style.position = \"static\";\n        let top = document.body.style.top;\n        document.body.scrollTop = document.documentElement.scrollTop = -parseInt(\n          top\n        );\n      }\n    },\n}\n```\n","source":"_posts/解决iOS12及一下弹框滚动会带动body内容滑动.md","raw":"---\ntitle: 解决iOS12及一下弹框滚动会带动body内容滑动\ndate: 2019-11-20 21:32:55\ntags: ['小技巧']\n---\n\n## 前言\n\n在移动项目开发中往往会写一些 H5 页面，一个项目可能只有一两个页面，引入其他 UI 组件项目显得太臃肿，也没有啥必要，毕竟那些组件都是被人写的，有的时候不能一味的去使用他人写好的代码，有时间也需要自己谢谢，锻炼自己的同时也在巩固一些基础知识～～\n\n## 插件【 NPM 】\n\n[v-scroll-lock](https://github.com/phegman/v-scroll-lock)\n这个插件虽然很好，但是在华为手机 📱 上却不起作用，而且还有不好的效果【亲测 🍄🐷🐸🦋】\n[【在线测试】](https://v-scroll-lock.peterhegman.com/)\n\n## 问题\n\n一个页面弹出一个框，框里的内容可以滚动，但是滚动弹框时，body 内容也在动 【前提是你的 body 超过屏幕的高度】，然而在 iOS13 ，安卓手机没有问题，但是在 iOS12 及以下就会出现这个问题，通过代码 `document.body.style.overflow = \"hidden\";`，并不管用，原因是：在苹果 🧬 手机上就不存在这个属性，在它看来，我的页面有内容就该给客户全部展示出来，为什么要 hidden 呢 🍌，这个方法行不通时，我们准备给它添加另外一个属性`document.body.style.position = \"fixed\";`,发现可以正常，但是感觉怪怪的，因为 fixed 的 top 为 0\n\n## 问题总结\n\n～弹窗时给 body 设置 overflow:hidden；（ios 不理你）\n～弹窗时给 body 设置 position:fixed；(滚动位置会丢失)\n\n## 代码\n\n```javascript\nwatch: {\n  dialogStatus: function(news, olds) {\n      if (news) {\n        document.body.style.overflow = \"hidden\";\n        let scrollTop =\n          document.body.scrollTop || document.documentElement.scrollTop;\n        document.body.style.cssText +=\n          \"position:fixed;width:100%;top:-\" + scrollTop + \"px;\";\n      } else {\n        document.body.style.overflow = \"\";\n        document.body.style.position = \"static\";\n        let top = document.body.style.top;\n        document.body.scrollTop = document.documentElement.scrollTop = -parseInt(\n          top\n        );\n      }\n    },\n}\n```\n","slug":"解决iOS12及一下弹框滚动会带动body内容滑动","published":1,"updated":"2021-10-09T08:48:32.096Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzacm003p5c546tqx9d55","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>在移动项目开发中往往会写一些 H5 页面，一个项目可能只有一两个页面，引入其他 UI 组件项目显得太臃肿，也没有啥必要，毕竟那些组件都是被人写的，有的时候不能一味的去使用他人写好的代码，有时间也需要自己谢谢，锻炼自己的同时也在巩固一些基础知识～～</p>\n<h2 id=\"插件【-NPM-】\"><a href=\"#插件【-NPM-】\" class=\"headerlink\" title=\"插件【 NPM 】\"></a>插件【 NPM 】</h2><p><a href=\"https://github.com/phegman/v-scroll-lock\">v-scroll-lock</a><br>这个插件虽然很好，但是在华为手机 📱 上却不起作用，而且还有不好的效果【亲测 🍄🐷🐸🦋】<br><a href=\"https://v-scroll-lock.peterhegman.com/\" target=\"_blank\" rel=\"noopener\">【在线测试】</a></p>\n<h2 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h2><p>一个页面弹出一个框，框里的内容可以滚动，但是滚动弹框时，body 内容也在动 【前提是你的 body 超过屏幕的高度】，然而在 iOS13 ，安卓手机没有问题，但是在 iOS12 及以下就会出现这个问题，通过代码 <code>document.body.style.overflow = &quot;hidden&quot;;</code>，并不管用，原因是：在苹果 🧬 手机上就不存在这个属性，在它看来，我的页面有内容就该给客户全部展示出来，为什么要 hidden 呢 🍌，这个方法行不通时，我们准备给它添加另外一个属性<code>document.body.style.position = &quot;fixed&quot;;</code>,发现可以正常，但是感觉怪怪的，因为 fixed 的 top 为 0</p>\n<h2 id=\"问题总结\"><a href=\"#问题总结\" class=\"headerlink\" title=\"问题总结\"></a>问题总结</h2><p>～弹窗时给 body 设置 overflow:hidden；（ios 不理你）<br>～弹窗时给 body 设置 position:fixed；(滚动位置会丢失)</p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">watch: &#123;</span><br><span class=\"line\">  dialogStatus: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">news, olds</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (news) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">document</span>.body.style.overflow = <span class=\"string\">\"hidden\"</span>;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> scrollTop =</span><br><span class=\"line\">          <span class=\"built_in\">document</span>.body.scrollTop || <span class=\"built_in\">document</span>.documentElement.scrollTop;</span><br><span class=\"line\">        <span class=\"built_in\">document</span>.body.style.cssText +=</span><br><span class=\"line\">          <span class=\"string\">\"position:fixed;width:100%;top:-\"</span> + scrollTop + <span class=\"string\">\"px;\"</span>;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">document</span>.body.style.overflow = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">        <span class=\"built_in\">document</span>.body.style.position = <span class=\"string\">\"static\"</span>;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> top = <span class=\"built_in\">document</span>.body.style.top;</span><br><span class=\"line\">        <span class=\"built_in\">document</span>.body.scrollTop = <span class=\"built_in\">document</span>.documentElement.scrollTop = -<span class=\"built_in\">parseInt</span>(</span><br><span class=\"line\">          top</span><br><span class=\"line\">        );</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>在移动项目开发中往往会写一些 H5 页面，一个项目可能只有一两个页面，引入其他 UI 组件项目显得太臃肿，也没有啥必要，毕竟那些组件都是被人写的，有的时候不能一味的去使用他人写好的代码，有时间也需要自己谢谢，锻炼自己的同时也在巩固一些基础知识～～</p>\n<h2 id=\"插件【-NPM-】\"><a href=\"#插件【-NPM-】\" class=\"headerlink\" title=\"插件【 NPM 】\"></a>插件【 NPM 】</h2><p><a href=\"https://github.com/phegman/v-scroll-lock\">v-scroll-lock</a><br>这个插件虽然很好，但是在华为手机 📱 上却不起作用，而且还有不好的效果【亲测 🍄🐷🐸🦋】<br><a href=\"https://v-scroll-lock.peterhegman.com/\" target=\"_blank\" rel=\"noopener\">【在线测试】</a></p>\n<h2 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h2><p>一个页面弹出一个框，框里的内容可以滚动，但是滚动弹框时，body 内容也在动 【前提是你的 body 超过屏幕的高度】，然而在 iOS13 ，安卓手机没有问题，但是在 iOS12 及以下就会出现这个问题，通过代码 <code>document.body.style.overflow = &quot;hidden&quot;;</code>，并不管用，原因是：在苹果 🧬 手机上就不存在这个属性，在它看来，我的页面有内容就该给客户全部展示出来，为什么要 hidden 呢 🍌，这个方法行不通时，我们准备给它添加另外一个属性<code>document.body.style.position = &quot;fixed&quot;;</code>,发现可以正常，但是感觉怪怪的，因为 fixed 的 top 为 0</p>\n<h2 id=\"问题总结\"><a href=\"#问题总结\" class=\"headerlink\" title=\"问题总结\"></a>问题总结</h2><p>～弹窗时给 body 设置 overflow:hidden；（ios 不理你）<br>～弹窗时给 body 设置 position:fixed；(滚动位置会丢失)</p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">watch: &#123;</span><br><span class=\"line\">  dialogStatus: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">news, olds</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (news) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">document</span>.body.style.overflow = <span class=\"string\">\"hidden\"</span>;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> scrollTop =</span><br><span class=\"line\">          <span class=\"built_in\">document</span>.body.scrollTop || <span class=\"built_in\">document</span>.documentElement.scrollTop;</span><br><span class=\"line\">        <span class=\"built_in\">document</span>.body.style.cssText +=</span><br><span class=\"line\">          <span class=\"string\">\"position:fixed;width:100%;top:-\"</span> + scrollTop + <span class=\"string\">\"px;\"</span>;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">document</span>.body.style.overflow = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">        <span class=\"built_in\">document</span>.body.style.position = <span class=\"string\">\"static\"</span>;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> top = <span class=\"built_in\">document</span>.body.style.top;</span><br><span class=\"line\">        <span class=\"built_in\">document</span>.body.scrollTop = <span class=\"built_in\">document</span>.documentElement.scrollTop = -<span class=\"built_in\">parseInt</span>(</span><br><span class=\"line\">          top</span><br><span class=\"line\">        );</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n"},{"title":"解决vscode中js文件提示typescript语法报错","date":"2019-09-11T13:45:33.000Z","_content":"## 前言\n最近在vue项目中，全局安装了一下typescript，再看看vue项目代码就有一大堆ts提示错误\n然后网上一搜也没啥好答案\n～例如：\n❌❌解决办法：在设置里面加上 \"javascript.validate.enable\": false 禁用默认的 js 验证\n这样禁用那我js写错了都不知道。。。\n## 正解\n～设置中搜索tsconfig ->Check JS Experimental Decorators 去掉勾选☑️🐳\n![](https://github.com/chengheai/review-demo-image/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20190911110647.png?raw=true)\n","source":"_posts/解决vscode中js文件提示typescript语法报错.md","raw":"---\ntitle: 解决vscode中js文件提示typescript语法报错\ndate: 2019-09-11 21:45:33\ntags: ['vscode']\n---\n## 前言\n最近在vue项目中，全局安装了一下typescript，再看看vue项目代码就有一大堆ts提示错误\n然后网上一搜也没啥好答案\n～例如：\n❌❌解决办法：在设置里面加上 \"javascript.validate.enable\": false 禁用默认的 js 验证\n这样禁用那我js写错了都不知道。。。\n## 正解\n～设置中搜索tsconfig ->Check JS Experimental Decorators 去掉勾选☑️🐳\n![](https://github.com/chengheai/review-demo-image/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20190911110647.png?raw=true)\n","slug":"解决vscode中js文件提示typescript语法报错","published":1,"updated":"2021-10-09T08:48:32.096Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzacm003q5c542g1mmh56","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>最近在vue项目中，全局安装了一下typescript，再看看vue项目代码就有一大堆ts提示错误<br>然后网上一搜也没啥好答案<br>～例如：<br>❌❌解决办法：在设置里面加上 “javascript.validate.enable”: false 禁用默认的 js 验证<br>这样禁用那我js写错了都不知道。。。</p>\n<h2 id=\"正解\"><a href=\"#正解\" class=\"headerlink\" title=\"正解\"></a>正解</h2><p>～设置中搜索tsconfig -&gt;Check JS Experimental Decorators 去掉勾选☑️🐳<br><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20190911110647.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>最近在vue项目中，全局安装了一下typescript，再看看vue项目代码就有一大堆ts提示错误<br>然后网上一搜也没啥好答案<br>～例如：<br>❌❌解决办法：在设置里面加上 “javascript.validate.enable”: false 禁用默认的 js 验证<br>这样禁用那我js写错了都不知道。。。</p>\n<h2 id=\"正解\"><a href=\"#正解\" class=\"headerlink\" title=\"正解\"></a>正解</h2><p>～设置中搜索tsconfig -&gt;Check JS Experimental Decorators 去掉勾选☑️🐳<br><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20190911110647.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></p>\n"},{"title":"解决vue中移动端ios键盘收起页面不归位问题","date":"2020-03-24T12:36:07.000Z","_content":"\n## 前言\n\n网上找的例子\n千篇一律～～～～～\n![](https://github.com/chengheai/review-demo-image/blob/master/WX20200324-204643@2x.png?raw=true)\n\n## 代码\n\n```html\n<template>\n  <div>\n    <div @focusout=\"inputBlur\" @focusin=\"inputFocus\">\n      <input type=\"tel\" placeholder=\"请输入手机号\" />\n      <input type=\"number\" placeholder=\"请输入验证码\" />\n    </div>\n  </div>\n</template>\n\n<script>\n  export default {\n    data() {\n      return {\n        timer: null,\n      };\n    },\n    methods: {\n      inputBlur(e) {\n        if (e && e.target && e.target.tagName && e.target.tagName.toLowerCase() === 'input') {\n          this.timer = setTimeout(() => {\n            window.scrollTo(0, 0);\n          }, 0);\n        }\n      },\n      inputFocus(e) {\n        if (e && e.target && e.target.tagName && e.target.tagName.toLowerCase() === 'input') {\n          clearTimeout(this.timer);\n        }\n      },\n    },\n  };\n</script>\n\n<style lang=\"scss\" scoped></style>\n```\n","source":"_posts/解决vue中移动端ios键盘收起页面不归位问题.md","raw":"---\ntitle: 解决vue中移动端ios键盘收起页面不归位问题\ndate: 2020-03-24 20:36:07\ntags: ['vue']\n---\n\n## 前言\n\n网上找的例子\n千篇一律～～～～～\n![](https://github.com/chengheai/review-demo-image/blob/master/WX20200324-204643@2x.png?raw=true)\n\n## 代码\n\n```html\n<template>\n  <div>\n    <div @focusout=\"inputBlur\" @focusin=\"inputFocus\">\n      <input type=\"tel\" placeholder=\"请输入手机号\" />\n      <input type=\"number\" placeholder=\"请输入验证码\" />\n    </div>\n  </div>\n</template>\n\n<script>\n  export default {\n    data() {\n      return {\n        timer: null,\n      };\n    },\n    methods: {\n      inputBlur(e) {\n        if (e && e.target && e.target.tagName && e.target.tagName.toLowerCase() === 'input') {\n          this.timer = setTimeout(() => {\n            window.scrollTo(0, 0);\n          }, 0);\n        }\n      },\n      inputFocus(e) {\n        if (e && e.target && e.target.tagName && e.target.tagName.toLowerCase() === 'input') {\n          clearTimeout(this.timer);\n        }\n      },\n    },\n  };\n</script>\n\n<style lang=\"scss\" scoped></style>\n```\n","slug":"解决vue中移动端ios键盘收起页面不归位问题","published":1,"updated":"2021-10-09T08:48:32.097Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzacn003s5c54fnra30vf","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>网上找的例子<br>千篇一律～～～～～<br><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WX20200324-204643@2x.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> @<span class=\"attr\">focusout</span>=<span class=\"string\">\"inputBlur\"</span> @<span class=\"attr\">focusin</span>=<span class=\"string\">\"inputFocus\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"tel\"</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">\"请输入手机号\"</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"number\"</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">\"请输入验证码\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">  <span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span><br><span class=\"line\">    data() &#123;</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        timer: <span class=\"literal\">null</span>,</span></span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    methods: &#123;</span><br><span class=\"line\">      inputBlur(e) &#123;</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">if</span> (e &amp;&amp; e.target &amp;&amp; e.target.tagName &amp;&amp; e.target.tagName.toLowerCase() === <span class=\"string\">'input'</span>) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">this</span>.timer = setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"built_in\">window</span>.scrollTo(<span class=\"number\">0</span>, <span class=\"number\">0</span>);</span></span><br><span class=\"line\">          &#125;, 0);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      inputFocus(e) &#123;</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">if</span> (e &amp;&amp; e.target &amp;&amp; e.target.tagName &amp;&amp; e.target.tagName.toLowerCase() === <span class=\"string\">'input'</span>) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">          clearTimeout(<span class=\"keyword\">this</span>.timer);</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"scss\"</span> <span class=\"attr\">scoped</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>网上找的例子<br>千篇一律～～～～～<br><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WX20200324-204643@2x.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> @<span class=\"attr\">focusout</span>=<span class=\"string\">\"inputBlur\"</span> @<span class=\"attr\">focusin</span>=<span class=\"string\">\"inputFocus\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"tel\"</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">\"请输入手机号\"</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"number\"</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">\"请输入验证码\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">  <span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span><br><span class=\"line\">    data() &#123;</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        timer: <span class=\"literal\">null</span>,</span></span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    methods: &#123;</span><br><span class=\"line\">      inputBlur(e) &#123;</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">if</span> (e &amp;&amp; e.target &amp;&amp; e.target.tagName &amp;&amp; e.target.tagName.toLowerCase() === <span class=\"string\">'input'</span>) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">this</span>.timer = setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"built_in\">window</span>.scrollTo(<span class=\"number\">0</span>, <span class=\"number\">0</span>);</span></span><br><span class=\"line\">          &#125;, 0);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      inputFocus(e) &#123;</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">if</span> (e &amp;&amp; e.target &amp;&amp; e.target.tagName &amp;&amp; e.target.tagName.toLowerCase() === <span class=\"string\">'input'</span>) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">          clearTimeout(<span class=\"keyword\">this</span>.timer);</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"scss\"</span> <span class=\"attr\">scoped</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br></pre></td></tr></table></figure>\n"},{"title":"原生js实现redux中getState,subscribe,listener,dispatch函数","date":"2020-03-01T12:05:52.000Z","_content":"\n## 原生代码\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n  <!-- 原生js实现dispatch 函数 -->\n\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Document</title>\n  </head>\n\n  <body>\n    <div id=\"title\">标题</div>\n    <div id=\"content\">内容</div>\n    <script>\n      var render = function(state) {\n        document.getElementById('title').innerHTML = state.title;\n        document.getElementById('content').innerHTML = state.content;\n      };\n      // 自定义一个dispatch过程\n      var appReducer = function(state, action) {\n        // 返回默认的state\n        if (!state) {\n          return {\n            title: '初始化title',\n            content: '初始化content',\n          };\n        }\n        //返回相应的state\n        switch (action.type) {\n          case 'CHANGE_TITLE':\n            // state修改\n            return {\n              ...state,\n              title: action.newTitle,\n            };\n          default:\n            return state;\n        }\n      };\n      // 希望调用createStore就返回一个store\n      // 纯函数 传入什么返回什么\n      var createStore = function(reducer) {\n        var state = null;\n        // 监听者们\n        var listeners = [];\n        var dispatch = function(action) {\n          //\n          state = reducer(state, action); // reducer返回新的state\n          listeners.forEach(listener => listener());\n        };\n        dispatch({});\n        getState = function() {\n          return state;\n        };\n        // 订阅\n        var subscribe = function(listener) {\n          listeners.push(listener);\n        };\n        return {\n          subscribe,\n          dispatch,\n          getState,\n        };\n      };\n      // store 包含subscribe,dispatch,getState\n      var store = createStore(appReducer);\n\n      store.subscribe(function() {\n        render(store.getState());\n      });\n      store.subscribe(function() {\n        console.log(store.getState());\n      });\n      store.dispatch({\n        type: 'CHANGE_TITLE',\n        newTitle: 'this is new title',\n      });\n      render(store.getState());\n    </script>\n  </body>\n</html>\n```\n","source":"_posts/原生js实现redux中getState-subscribe-listener-dispatch函数.md","raw":"---\ntitle: '原生js实现redux中getState,subscribe,listener,dispatch函数'\ndate: 2020-03-01 20:05:52\ntags: ['redux']\n---\n\n## 原生代码\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n  <!-- 原生js实现dispatch 函数 -->\n\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Document</title>\n  </head>\n\n  <body>\n    <div id=\"title\">标题</div>\n    <div id=\"content\">内容</div>\n    <script>\n      var render = function(state) {\n        document.getElementById('title').innerHTML = state.title;\n        document.getElementById('content').innerHTML = state.content;\n      };\n      // 自定义一个dispatch过程\n      var appReducer = function(state, action) {\n        // 返回默认的state\n        if (!state) {\n          return {\n            title: '初始化title',\n            content: '初始化content',\n          };\n        }\n        //返回相应的state\n        switch (action.type) {\n          case 'CHANGE_TITLE':\n            // state修改\n            return {\n              ...state,\n              title: action.newTitle,\n            };\n          default:\n            return state;\n        }\n      };\n      // 希望调用createStore就返回一个store\n      // 纯函数 传入什么返回什么\n      var createStore = function(reducer) {\n        var state = null;\n        // 监听者们\n        var listeners = [];\n        var dispatch = function(action) {\n          //\n          state = reducer(state, action); // reducer返回新的state\n          listeners.forEach(listener => listener());\n        };\n        dispatch({});\n        getState = function() {\n          return state;\n        };\n        // 订阅\n        var subscribe = function(listener) {\n          listeners.push(listener);\n        };\n        return {\n          subscribe,\n          dispatch,\n          getState,\n        };\n      };\n      // store 包含subscribe,dispatch,getState\n      var store = createStore(appReducer);\n\n      store.subscribe(function() {\n        render(store.getState());\n      });\n      store.subscribe(function() {\n        console.log(store.getState());\n      });\n      store.dispatch({\n        type: 'CHANGE_TITLE',\n        newTitle: 'this is new title',\n      });\n      render(store.getState());\n    </script>\n  </body>\n</html>\n```\n","slug":"原生js实现redux中getState-subscribe-listener-dispatch函数","published":1,"updated":"2021-10-09T08:48:32.086Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzacp003v5c5465b14kqz","content":"<h2 id=\"原生代码\"><a href=\"#原生代码\" class=\"headerlink\" title=\"原生代码\"></a>原生代码</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- 原生js实现dispatch 函数 --&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"title\"</span>&gt;</span>标题<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"content\"</span>&gt;</span>内容<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> render = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">state</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'title'</span>).innerHTML = state.title;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'content'</span>).innerHTML = state.content;</span></span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">// 自定义一个dispatch过程</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> appReducer = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">state, action</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// 返回默认的state</span></span></span><br><span class=\"line\">        if (!state) &#123;</span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            title: <span class=\"string\">'初始化title'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">            content: <span class=\"string\">'初始化content'</span>,</span></span><br><span class=\"line\">          &#125;;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//返回相应的state</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">switch</span> (action.type) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">case</span> <span class=\"string\">'CHANGE_TITLE'</span>:</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// state修改</span></span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\">              ...state,</span><br><span class=\"line\">              title: action.newTitle,</span><br><span class=\"line\">            &#125;;</span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">default</span>:</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">return</span> state;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">// 希望调用createStore就返回一个store</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">// 纯函数 传入什么返回什么</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> createStore = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">reducer</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> state = <span class=\"literal\">null</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// 监听者们</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> listeners = [];</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> dispatch = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">action</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"comment\">//</span></span></span><br><span class=\"line\"><span class=\"javascript\">          state = reducer(state, action); <span class=\"comment\">// reducer返回新的state</span></span></span><br><span class=\"line\"><span class=\"javascript\">          listeners.forEach(<span class=\"function\"><span class=\"params\">listener</span> =&gt;</span> listener());</span></span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        dispatch(&#123;&#125;);</span><br><span class=\"line\"><span class=\"javascript\">        getState = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">return</span> state;</span></span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// 订阅</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> subscribe = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">listener</span>) </span>&#123;</span></span><br><span class=\"line\">          listeners.push(listener);</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\">          subscribe,</span><br><span class=\"line\">          dispatch,</span><br><span class=\"line\">          getState,</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">// store 包含subscribe,dispatch,getState</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> store = createStore(appReducer);</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">      store.subscribe(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\">        render(store.getState());</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\"><span class=\"javascript\">      store.subscribe(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(store.getState());</span></span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">      store.dispatch(&#123;</span><br><span class=\"line\"><span class=\"javascript\">        type: <span class=\"string\">'CHANGE_TITLE'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">        newTitle: <span class=\"string\">'this is new title'</span>,</span></span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">      render(store.getState());</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"原生代码\"><a href=\"#原生代码\" class=\"headerlink\" title=\"原生代码\"></a>原生代码</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- 原生js实现dispatch 函数 --&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"title\"</span>&gt;</span>标题<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"content\"</span>&gt;</span>内容<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> render = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">state</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'title'</span>).innerHTML = state.title;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'content'</span>).innerHTML = state.content;</span></span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">// 自定义一个dispatch过程</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> appReducer = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">state, action</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// 返回默认的state</span></span></span><br><span class=\"line\">        if (!state) &#123;</span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            title: <span class=\"string\">'初始化title'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">            content: <span class=\"string\">'初始化content'</span>,</span></span><br><span class=\"line\">          &#125;;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//返回相应的state</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">switch</span> (action.type) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">case</span> <span class=\"string\">'CHANGE_TITLE'</span>:</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// state修改</span></span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\">              ...state,</span><br><span class=\"line\">              title: action.newTitle,</span><br><span class=\"line\">            &#125;;</span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">default</span>:</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">return</span> state;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">// 希望调用createStore就返回一个store</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">// 纯函数 传入什么返回什么</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> createStore = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">reducer</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> state = <span class=\"literal\">null</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// 监听者们</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> listeners = [];</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> dispatch = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">action</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"comment\">//</span></span></span><br><span class=\"line\"><span class=\"javascript\">          state = reducer(state, action); <span class=\"comment\">// reducer返回新的state</span></span></span><br><span class=\"line\"><span class=\"javascript\">          listeners.forEach(<span class=\"function\"><span class=\"params\">listener</span> =&gt;</span> listener());</span></span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        dispatch(&#123;&#125;);</span><br><span class=\"line\"><span class=\"javascript\">        getState = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">return</span> state;</span></span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// 订阅</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> subscribe = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">listener</span>) </span>&#123;</span></span><br><span class=\"line\">          listeners.push(listener);</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\">          subscribe,</span><br><span class=\"line\">          dispatch,</span><br><span class=\"line\">          getState,</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">// store 包含subscribe,dispatch,getState</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> store = createStore(appReducer);</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">      store.subscribe(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\">        render(store.getState());</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\"><span class=\"javascript\">      store.subscribe(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(store.getState());</span></span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">      store.dispatch(&#123;</span><br><span class=\"line\"><span class=\"javascript\">        type: <span class=\"string\">'CHANGE_TITLE'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">        newTitle: <span class=\"string\">'this is new title'</span>,</span></span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">      render(store.getState());</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n"},{"title":"面试题[1,2,3].map(parseInt)解析","date":"2019-07-16T02:11:03.000Z","_content":"## 题目\n``` javascript\nlet a = ['1','2','3'].map(parseInt);\nconsole.log(a);\n```\n## 答案\n``` javascript\n// [ 1, NaN, NaN ]\n```\n## 解析\n### 代码解析\n1、传入一个参数\n``` javascript\nvar arr = [\"1\", \"2\", \"3\"].map(function(item){\n　// 这个地方只传入一个参数\n  return item;\n});\nconsole.log(arr);\n// [\"1\", \"2\", \"3\"]\n```\n2、 传入两个参数\n``` javascript\nvar arr = [\"1\", \"2\", \"3\"].map(function(item, index){\n　// 这个地方传入两个参数\n  return \"value:\" + item + \", index:\" + index;\n});\nconsole.log(arr);\n// [\"value:1, index:0\", \"value:2, index:1\", \"value:3, index:2\"]\n```\n3、map标准的语句\n``` javascript\narr.map(function(item, index, arr){\n  .....\n});\n```\n即，此时原题可以变换为：\n``` javascript\nvar arr = [\"1\",\"2\",\"3\"];\narr.map((value,index,array) => parseInt(value,index));\n//parseInt(string,radix)\n```\n### Map、parseInt 公式分析\n[Map文档](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/map)\n[parseInt文档](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/parseInt)\n\n这里只讲parseInt\n#### 语法\nparseInt(string, radix);\n#### 参数\n<font size=6>string</font>\n要被解析的值。如果参数不是一个字符串，则将其转换为字符串(使用  ToString 抽象操作)。字符串开头的空白符将会被忽略。\n<font size=6>radix</font>\n一个介于2和36之间的整数(数学系统的基础)，表示上述字符串的基数。比如参数\"10\"表示使用我们通常使用的十进制数值系统。始终指定此参数可以消除阅读该代码时的困惑并且保证转换结果可预测。当未指定基数时，不同的实现会产生不同的结果，通常将值默认为10。\n相信到这里你应该懂了吧～～\n#### 分解 求解步骤\nparseInt('1', 0); // 1 (parseInt的处理方式，这个地方item没有以\"0x\"或者\"0X\"开始，8和10这个基数由实现环境来定，ES5规定使用10来作为基数，因此这个0相当于传递了10)\nparseInt('2', 1); // NaN (因为parseInt的定义，超出了radix的界限)\nparseInt('3', 2); // NaN (虽然没有超出界限，但是二进制里面没有3，因此返回NaN)\n\n","source":"_posts/面试题-1-2-3-map-parseInt-解析.md","raw":"---\ntitle: '面试题[1,2,3].map(parseInt)解析'\ndate: 2019-07-16 10:11:03\ntags: ['面试题', 'Javascript']\n---\n## 题目\n``` javascript\nlet a = ['1','2','3'].map(parseInt);\nconsole.log(a);\n```\n## 答案\n``` javascript\n// [ 1, NaN, NaN ]\n```\n## 解析\n### 代码解析\n1、传入一个参数\n``` javascript\nvar arr = [\"1\", \"2\", \"3\"].map(function(item){\n　// 这个地方只传入一个参数\n  return item;\n});\nconsole.log(arr);\n// [\"1\", \"2\", \"3\"]\n```\n2、 传入两个参数\n``` javascript\nvar arr = [\"1\", \"2\", \"3\"].map(function(item, index){\n　// 这个地方传入两个参数\n  return \"value:\" + item + \", index:\" + index;\n});\nconsole.log(arr);\n// [\"value:1, index:0\", \"value:2, index:1\", \"value:3, index:2\"]\n```\n3、map标准的语句\n``` javascript\narr.map(function(item, index, arr){\n  .....\n});\n```\n即，此时原题可以变换为：\n``` javascript\nvar arr = [\"1\",\"2\",\"3\"];\narr.map((value,index,array) => parseInt(value,index));\n//parseInt(string,radix)\n```\n### Map、parseInt 公式分析\n[Map文档](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/map)\n[parseInt文档](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/parseInt)\n\n这里只讲parseInt\n#### 语法\nparseInt(string, radix);\n#### 参数\n<font size=6>string</font>\n要被解析的值。如果参数不是一个字符串，则将其转换为字符串(使用  ToString 抽象操作)。字符串开头的空白符将会被忽略。\n<font size=6>radix</font>\n一个介于2和36之间的整数(数学系统的基础)，表示上述字符串的基数。比如参数\"10\"表示使用我们通常使用的十进制数值系统。始终指定此参数可以消除阅读该代码时的困惑并且保证转换结果可预测。当未指定基数时，不同的实现会产生不同的结果，通常将值默认为10。\n相信到这里你应该懂了吧～～\n#### 分解 求解步骤\nparseInt('1', 0); // 1 (parseInt的处理方式，这个地方item没有以\"0x\"或者\"0X\"开始，8和10这个基数由实现环境来定，ES5规定使用10来作为基数，因此这个0相当于传递了10)\nparseInt('2', 1); // NaN (因为parseInt的定义，超出了radix的界限)\nparseInt('3', 2); // NaN (虽然没有超出界限，但是二进制里面没有3，因此返回NaN)\n\n","slug":"面试题-1-2-3-map-parseInt-解析","published":1,"updated":"2021-10-09T08:48:32.097Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzacr003x5c54ix2pufi6","content":"<h2 id=\"题目\"><a href=\"#题目\" class=\"headerlink\" title=\"题目\"></a>题目</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> a = [<span class=\"string\">'1'</span>,<span class=\"string\">'2'</span>,<span class=\"string\">'3'</span>].map(<span class=\"built_in\">parseInt</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(a);</span><br></pre></td></tr></table></figure>\n<h2 id=\"答案\"><a href=\"#答案\" class=\"headerlink\" title=\"答案\"></a>答案</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// [ 1, NaN, NaN ]</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"解析\"><a href=\"#解析\" class=\"headerlink\" title=\"解析\"></a>解析</h2><h3 id=\"代码解析\"><a href=\"#代码解析\" class=\"headerlink\" title=\"代码解析\"></a>代码解析</h3><p>1、传入一个参数<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"string\">\"1\"</span>, <span class=\"string\">\"2\"</span>, <span class=\"string\">\"3\"</span>].map(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item</span>)</span>&#123;</span><br><span class=\"line\">　<span class=\"comment\">// 这个地方只传入一个参数</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> item;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(arr);</span><br><span class=\"line\"><span class=\"comment\">// [\"1\", \"2\", \"3\"]</span></span><br></pre></td></tr></table></figure></p>\n<p>2、 传入两个参数<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"string\">\"1\"</span>, <span class=\"string\">\"2\"</span>, <span class=\"string\">\"3\"</span>].map(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item, index</span>)</span>&#123;</span><br><span class=\"line\">　<span class=\"comment\">// 这个地方传入两个参数</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">\"value:\"</span> + item + <span class=\"string\">\", index:\"</span> + index;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(arr);</span><br><span class=\"line\"><span class=\"comment\">// [\"value:1, index:0\", \"value:2, index:1\", \"value:3, index:2\"]</span></span><br></pre></td></tr></table></figure></p>\n<p>3、map标准的语句<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">arr.map(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item, index, arr</span>)</span>&#123;</span><br><span class=\"line\">  .....</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>即，此时原题可以变换为：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"string\">\"1\"</span>,<span class=\"string\">\"2\"</span>,<span class=\"string\">\"3\"</span>];</span><br><span class=\"line\">arr.map(<span class=\"function\">(<span class=\"params\">value,index,array</span>) =&gt;</span> <span class=\"built_in\">parseInt</span>(value,index));</span><br><span class=\"line\"><span class=\"comment\">//parseInt(string,radix)</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"Map、parseInt-公式分析\"><a href=\"#Map、parseInt-公式分析\" class=\"headerlink\" title=\"Map、parseInt 公式分析\"></a>Map、parseInt 公式分析</h3><p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/map\" target=\"_blank\" rel=\"noopener\">Map文档</a><br><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/parseInt\" target=\"_blank\" rel=\"noopener\">parseInt文档</a></p>\n<p>这里只讲parseInt</p>\n<h4 id=\"语法\"><a href=\"#语法\" class=\"headerlink\" title=\"语法\"></a>语法</h4><p>parseInt(string, radix);</p>\n<h4 id=\"参数\"><a href=\"#参数\" class=\"headerlink\" title=\"参数\"></a>参数</h4><p><font size=\"6\">string</font><br>要被解析的值。如果参数不是一个字符串，则将其转换为字符串(使用  ToString 抽象操作)。字符串开头的空白符将会被忽略。</p>\n<p><font size=\"6\">radix</font><br>一个介于2和36之间的整数(数学系统的基础)，表示上述字符串的基数。比如参数”10”表示使用我们通常使用的十进制数值系统。始终指定此参数可以消除阅读该代码时的困惑并且保证转换结果可预测。当未指定基数时，不同的实现会产生不同的结果，通常将值默认为10。<br>相信到这里你应该懂了吧～～</p>\n<h4 id=\"分解-求解步骤\"><a href=\"#分解-求解步骤\" class=\"headerlink\" title=\"分解 求解步骤\"></a>分解 求解步骤</h4><p>parseInt(‘1’, 0); // 1 (parseInt的处理方式，这个地方item没有以”0x”或者”0X”开始，8和10这个基数由实现环境来定，ES5规定使用10来作为基数，因此这个0相当于传递了10)<br>parseInt(‘2’, 1); // NaN (因为parseInt的定义，超出了radix的界限)<br>parseInt(‘3’, 2); // NaN (虽然没有超出界限，但是二进制里面没有3，因此返回NaN)</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"题目\"><a href=\"#题目\" class=\"headerlink\" title=\"题目\"></a>题目</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> a = [<span class=\"string\">'1'</span>,<span class=\"string\">'2'</span>,<span class=\"string\">'3'</span>].map(<span class=\"built_in\">parseInt</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(a);</span><br></pre></td></tr></table></figure>\n<h2 id=\"答案\"><a href=\"#答案\" class=\"headerlink\" title=\"答案\"></a>答案</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// [ 1, NaN, NaN ]</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"解析\"><a href=\"#解析\" class=\"headerlink\" title=\"解析\"></a>解析</h2><h3 id=\"代码解析\"><a href=\"#代码解析\" class=\"headerlink\" title=\"代码解析\"></a>代码解析</h3><p>1、传入一个参数<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"string\">\"1\"</span>, <span class=\"string\">\"2\"</span>, <span class=\"string\">\"3\"</span>].map(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item</span>)</span>&#123;</span><br><span class=\"line\">　<span class=\"comment\">// 这个地方只传入一个参数</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> item;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(arr);</span><br><span class=\"line\"><span class=\"comment\">// [\"1\", \"2\", \"3\"]</span></span><br></pre></td></tr></table></figure></p>\n<p>2、 传入两个参数<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"string\">\"1\"</span>, <span class=\"string\">\"2\"</span>, <span class=\"string\">\"3\"</span>].map(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item, index</span>)</span>&#123;</span><br><span class=\"line\">　<span class=\"comment\">// 这个地方传入两个参数</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">\"value:\"</span> + item + <span class=\"string\">\", index:\"</span> + index;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(arr);</span><br><span class=\"line\"><span class=\"comment\">// [\"value:1, index:0\", \"value:2, index:1\", \"value:3, index:2\"]</span></span><br></pre></td></tr></table></figure></p>\n<p>3、map标准的语句<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">arr.map(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item, index, arr</span>)</span>&#123;</span><br><span class=\"line\">  .....</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>即，此时原题可以变换为：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"string\">\"1\"</span>,<span class=\"string\">\"2\"</span>,<span class=\"string\">\"3\"</span>];</span><br><span class=\"line\">arr.map(<span class=\"function\">(<span class=\"params\">value,index,array</span>) =&gt;</span> <span class=\"built_in\">parseInt</span>(value,index));</span><br><span class=\"line\"><span class=\"comment\">//parseInt(string,radix)</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"Map、parseInt-公式分析\"><a href=\"#Map、parseInt-公式分析\" class=\"headerlink\" title=\"Map、parseInt 公式分析\"></a>Map、parseInt 公式分析</h3><p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/map\" target=\"_blank\" rel=\"noopener\">Map文档</a><br><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/parseInt\" target=\"_blank\" rel=\"noopener\">parseInt文档</a></p>\n<p>这里只讲parseInt</p>\n<h4 id=\"语法\"><a href=\"#语法\" class=\"headerlink\" title=\"语法\"></a>语法</h4><p>parseInt(string, radix);</p>\n<h4 id=\"参数\"><a href=\"#参数\" class=\"headerlink\" title=\"参数\"></a>参数</h4><p><font size=\"6\">string</font><br>要被解析的值。如果参数不是一个字符串，则将其转换为字符串(使用  ToString 抽象操作)。字符串开头的空白符将会被忽略。</p>\n<p><font size=\"6\">radix</font><br>一个介于2和36之间的整数(数学系统的基础)，表示上述字符串的基数。比如参数”10”表示使用我们通常使用的十进制数值系统。始终指定此参数可以消除阅读该代码时的困惑并且保证转换结果可预测。当未指定基数时，不同的实现会产生不同的结果，通常将值默认为10。<br>相信到这里你应该懂了吧～～</p>\n<h4 id=\"分解-求解步骤\"><a href=\"#分解-求解步骤\" class=\"headerlink\" title=\"分解 求解步骤\"></a>分解 求解步骤</h4><p>parseInt(‘1’, 0); // 1 (parseInt的处理方式，这个地方item没有以”0x”或者”0X”开始，8和10这个基数由实现环境来定，ES5规定使用10来作为基数，因此这个0相当于传递了10)<br>parseInt(‘2’, 1); // NaN (因为parseInt的定义，超出了radix的界限)<br>parseInt(‘3’, 2); // NaN (虽然没有超出界限，但是二进制里面没有3，因此返回NaN)</p>\n"},{"title":"常见的.eslintrc.js配置及rules说明","date":"2018-11-08T07:58:22.000Z","_content":"### 规则级别\n\"off\"或者0，不启用这个规则\n\n\"warn\"或者1，出现问题会有警告\n\n\"error\"或者2，出现问题会报错\n### 关闭ESLint检测\n```\n/* eslint-disable */\n\nconsole.log('hello world');\n\n/* eslint-enable */\n```\n### 配置eslintrc.js\n``` javascript\n// https://eslint.org/docs/user-guide/configuring\n\nmodule.exports = {\n\n  //此项是用来告诉eslint找当前配置文件不能往父级查找\n  root: true,\n\n  //此项是用来指定eslint解析器的，解析器必须符合规则，babel-eslint解析器是对babel解析器的包装使其与ESLint解析\n  parser: 'babel-eslint',\n\n  //此项是用来指定javaScript语言类型和风格，sourceType用来指定js导入的方式，默认是script，此处设置为module，指某块导入方式\n  parserOptions: {\n    // 设置 script(默认) 或 module，如果代码是在ECMASCRIPT中的模块\n    sourceType: 'module',\n    \"ecmaVersion\": 6,\n    \"ecmaFeatures\": {\n      \"jsx\": true\n    }\n  },\n\n  // 此项指定环境的全局变量，下面的配置指定为浏览器环境\n  env: {\n    \"browser\": true,\n    \"node\": true,\n    \"commonjs\": true,\n    \"es6\": true,\n    \"amd\": true\n  },\n  // https://github.com/standard/standard/blob/master/docs/RULES-en.md\n  // 此项是用来配置标准的js风格，就是说写代码的时候要规范的写，如果你使用vs-code我觉得应该可以避免出错\n  extends: 'vue',\n  // 此项是用来提供插件的，插件名称省略了eslint-plugin-，下面这个配置是用来规范html的\n  plugins: [\n    'html',\n    \"flow-vars\", \n    \"react\"\n  ],\n  /* \n   下面这些rules是用来设置从插件来的规范代码的规则，使用必须去掉前缀eslint-plugin-\n    主要有如下的设置规则，可以设置字符串也可以设置数字，两者效果一致\n    \"off\" -> 0 关闭规则\n    \"warn\" -> 1 开启警告规则\n    \"error\" -> 2 开启错误规则\n  */\n  rules: {\n    // 不需要\n    \"space-before-function-paren\": 0,  // 函数定义时括号前面要不要有空格\n    \"eol-last\": 0,  // 文件以单一的换行符结束\n    \"no-extra-semi\": 0, // 可以多余的冒号\n    \"semi\": 0,  // 语句可以不需要分号结尾\n    \"eqeqeq\": 0, // 必须使用全等\n    \"one-var\": 0, // 连续声明\n    \"no-undef\": 0, // 可以 有未定义的变量\n\n    // 警告\n    \"no-extra-boolean-cast\": 1, // 不必要的bool转换\n    \"no-extra-parens\": 1, // 非必要的括号\n    \"no-empty\": 1, // 块语句中的内容不能为空\n    \"no-use-before-define\": [1, \"nofunc\"], // 未定义前不能使用\n    \"complexity\": [1, 10], // 循环复杂度\n    \"no-unused-vars\": 1, // 不能有声明后未被使用的变量或参数\n    // vue\n    \"flow-vars/define-flow-type\": 1,\n    \"flow-vars/use-flow-type\": 1,\n\n    // react\n    \"react/jsx-uses-react\": 2,\n    \"react/jsx-uses-vars\": 2,\n\n    // 错误\n    \"comma-dangle\": [2, \"never\"], // 对象字面量项尾不能有逗号\n    \"no-debugger\": 2, // 禁止使用debugger\n    \"no-constant-condition\": 2, // 禁止在条件中使用常量表达式 if(true) if(1)\n    \"no-dupe-args\": 2, // 函数参数不能重复\n    \"no-dupe-keys\": 2, // 在创建对象字面量时不允许键重复 {a:1,a:1}\n    \"no-duplicate-case\": 2, // switch中的case标签不能重复\n    \"no-empty-character-class\": 2, // 正则表达式中的[]内容不能为空\n    \"no-invalid-regexp\": 2, // 禁止无效的正则表达式\n    \"no-func-assign\": 2, // 禁止重复的函数声明\n    \"valid-typeof\": 2,  // 必须使用合法的typeof的值\n    \"no-unreachable\": 2, // 不能有无法执行的代码\n    \"no-unexpected-multiline\": 2, // 避免多行表达式\n    \"no-sparse-arrays\": 2, // 禁止稀疏数组， [1,,2]\n    \"no-shadow-restricted-names\": 2, // 严格模式中规定的限制标识符不能作为声明时的变量名使用\n    \"no-cond-assign\": 2, // 禁止在条件表达式中使用赋值语句\n    \"no-native-reassign\": 2, // 不能重写native对象\n\n    // 代码风格\n    \"no-else-return\": 1, // 如果if语句里面有return,后面不能跟else语句\n    \"no-multi-spaces\": 1, // 不能用多余的空格\n    \"key-spacing\": [1, {  // 对象字面量中冒号的前后空格\n      \"beforeColon\": false,\n      \"afterColon\": true\n    }],\n    \"block-scoped-var\": 2, // 块语句中使用var\n    \"consistent-return\": 2, // return 后面是否允许省略\n    \"accessor-pairs\": 2, // 在对象中使用getter/setter\n    \"dot-location\": [2, \"property\"], // 对象访问符的位置，换行的时候在行首还是行尾\n    \"no-lone-blocks\": 2, // 禁止不必要的嵌套块\n    \"no-labels\": 2, // 禁止标签声明\n    \"no-extend-native\": 2, // 禁止扩展native对象\n    \"no-floating-decimal\": 2, // 禁止省略浮点数中的0 .5 3.\n    \"no-loop-func\": 2, // 禁止在循环中使用函数（如果没有引用外部变量不形成闭包就可以）\n    \"no-new-func\": 2,  // 禁止使用new Function\n    \"no-self-compare\": 2, // 不能比较自身\n    \"no-sequences\": 2, // 禁止使用逗号运算符\n    \"no-throw-literal\": 2, // 禁止抛出字面量错误 throw \"error\";\n    \"no-return-assign\": [2, \"always\"], // return 语句中不能有赋值表达式\n    \"no-redeclare\": [2, {   // 禁止重复声明变量\n      \"builtinGlobals\": true\n    }],\n    \"no-unused-expressions\": [2, {  // 禁止无用的表达式\n      \"allowShortCircuit\": true,\n      \"allowTernary\": true\n    }],\n    \"no-useless-call\": 2, // 禁止不必要的call和apply\n    \"no-useless-concat\": 2,\n    \"no-void\": 2, // 禁用void操作符\n    \"no-with\": 2, // 禁用with\n    \"space-infix-ops\": 2, // 中缀操作符周围要不要有空格\n    \"valid-jsdoc\": [2, { // jsdoc规则\n      \"requireParamDescription\": true,\n      \"requireReturnDescription\": true\n    }],\n    \"no-warning-comments\": [2, {  // 不能有警告备注\n      \"terms\": [\"todo\", \"fixme\", \"any other term\"],\n      \"location\": \"anywhere\"\n    }],\n    \"curly\": 1, // 必须使用 if(){} 中的{}\n\n    // common js\n    \"no-duplicate-imports\": 1\n  }\n}\n```\n### 常用规则\n\n规则的细节请到ESLint官方网站查看[官网](http://eslint.org/docs/rules/)\n``` bash\n'rules': {\n      \"comma-dangle\": [\"error\", \"never\"], //是否允许对象中出现结尾逗号\n      \"no-cond-assign\": 2, //条件语句的条件中不允许出现赋值运算符\n      \"no-console\": 2, //不允许出现console语句\n      \"no-constant-condition\": 2, //条件语句的条件中不允许出现恒定不变的量\n      \"no-control-regex\": 2, //正则表达式中不允许出现控制字符\n      \"no-debugger\": 2, //不允许出现debugger语句\n      \"no-dupe-args\": 2, //函数定义的时候不允许出现重复的参数\n      \"no-dupe-keys\": 2, //对象中不允许出现重复的键\n      \"no-duplicate-case\": 2, //switch语句中不允许出现重复的case标签\n      \"no-empty\": 2, //不允许出现空的代码块\n      \"no-empty-character-class\": 2, //正则表达式中不允许出现空的字符组\n      \"no-ex-assign\": 2, //在try catch语句中不允许重新分配异常变量\n      \"no-extra-boolean-cast\": 2, //不允许出现不必要的布尔值转换\n      \"no-extra-parens\": 0, //不允许出现不必要的圆括号\n      \"no-extra-semi\": 2, //不允许出现不必要的分号\n      \"no-func-assign\": 2, //不允许重新分配函数声明\n      \"no-inner-declarations\": [\"error\", \"functions\"], //不允许在嵌套代码块里声明函数\n      \"no-invalid-regexp\": 2, //不允许在RegExp构造函数里出现无效的正则表达式\n      \"no-irregular-whitespace\": 2, //不允许出现不规则的空格\n      \"no-negated-in-lhs\": 2, //不允许在in表达式语句中对最左边的运算数使用取反操作\n      \"no-obj-calls\": 2, //不允许把全局对象属性当做函数来调用\n      \"no-regex-spaces\": 2, //正则表达式中不允许出现多个连续空格\n      \"quote-props\": 2, //对象中的属性名是否需要用引号引起来\n      \"no-sparse-arrays\": 2, //数组中不允许出现空位置\n      \"no-unreachable\": 2, //在return，throw，continue，break语句后不允许出现不可能到达的语句\n      \"use-isnan\": 2, //要求检查NaN的时候使用isNaN()\n      \"valid-jsdoc\": [\"error\", {\n          \"requireReturn\": false,\n          \"requireParamDescription\": false,\n          \"requireReturnDescription\": true\n      }], //强制JSDoc注释\n      \"valid-typeof\": [\"error\", {\n          \"requireStringLiterals\": true\n      }], //在使用typeof表达式比较的时候强制使用有效的字符串\n      \"block-scoped-var\": 2, //将变量声明放在合适的代码块里\n      \"complexity\": 0, //限制条件语句的复杂度\n      \"consistent-return\": 2, //无论有没有返回值都强制要求return语句返回一个值\n      \"curly\": [\"error\", \"all\"], //强制使用花括号的风格\n      \"default-case\": 0, //在switch语句中需要有default语句\n      \"dot-notation\": [\"error\", {\"allowKeywords\": false, \"allowPattern\": \"\"}], //获取对象属性的时候使用点号\n      \"eqeqeq\": [\"error\", \"smart\"], //比较的时候使用严格等于\n      \"no-alert\": 1, //不允许使用alert，confirm，prompt语句\n      \"no-caller\": 2, //不允许使用arguments.callee和arguments.caller属性\n      \"guard-for-in\": 0, //监视for in循环，防止出现不可预料的情况\n      \"no-div-regex\": 2, //不能使用看起来像除法的正则表达式\n      \"no-else-return\": 0, //如果if语句有return，else里的return不用放在else里\n      \"no-labels\": [\"error\", {\n          \"allowLoop\": false,\n          \"allowSwitch\": false\n      }], //不允许标签语句\n      \"no-eq-null\": 2, //不允许对null用==或者!=\n      \"no-eval\": 2, //不允许使用eval()\n      \"no-extend-native\": 2, //不允许扩展原生对象\n      \"no-extra-bind\": 2, //不允许不必要的函数绑定\n      \"no-fallthrough\": 2, //不允许switch按顺序全部执行所有case\n      \"no-floating-decimal\": 2, //不允许浮点数缺失数字\n      \"no-implied-eval\": 2, //不允许使用隐式eval()\n      \"no-iterator\": 2, //不允许使用__iterator__属性\n      \"no-lone-blocks\": 2, //不允许不必要的嵌套代码块\n      \"no-loop-func\": 2, //不允许在循环语句中进行函数声明\n      \"no-multi-spaces\": 2, //不允许出现多余的空格\n      \"no-multi-str\": 2, //不允许用\\来让字符串换行\n      \"no-global-assign\": 2, //不允许重新分配原生对象\n      \"no-new\": 2, //不允许new一个实例后不赋值或者不比较\n      \"no-new-func\": 2, //不允许使用new Function\n      \"no-new-wrappers\": 2, //不允许使用new String，Number和Boolean对象\n      \"no-octal\": 2, //不允许使用八进制字面值\n      \"no-octal-escape\": 2, //不允许使用八进制转义序列\n      \"no-param-reassign\": 0, //不允许重新分配函数参数\"no-proto\": 2, //不允许使用__proto__属性\n      \"no-redeclare\": 2, //不允许变量重复声明\n      \"no-return-assign\": 2, //不允许在return语句中使用分配语句\n      \"no-script-url\": 2, //不允许使用javascript:void(0)\n      \"no-self-compare\": 2, //不允许自己和自己比较\n      \"no-sequences\": 2, //不允许使用逗号表达式\n      \"no-throw-literal\": 2, //不允许抛出字面量错误 throw \"error\"\n      \"no-unused-expressions\": 2, //不允许无用的表达式\n      \"no-void\": 2, //不允许void操作符\n      \"no-warning-comments\": [1, {\"terms\": [\"todo\", \"fixme\", \"any other term\"]}], //不允许警告备注\n      \"no-with\": 2, //不允许使用with语句\n      \"radix\": 1, //使用parseInt时强制使用基数来指定是十进制还是其他进制\n      \"vars-on-top\": 0, //var必须放在作用域顶部\n      \"wrap-iife\": [2, \"any\"], //立即执行表达式的括号风格\n      \"yoda\": [2, \"never\", {\"exceptRange\": true}], //不允许在if条件中使用yoda条件\n      \"strict\": [2, \"function\"], //使用严格模式\n      \"no-catch-shadow\": 2, //不允许try catch语句接受的err变量与外部变量重名\"no-delete-var\": 2, //不允许使用delete操作符\n      \"no-label-var\": 2, //不允许标签和变量同名\n      \"no-shadow\": 2, //外部作用域中的变量不能与它所包含的作用域中的变量或参数同名\n      \"no-shadow-restricted-names\": 2, //js关键字和保留字不能作为函数名或者变量名\n      \"no-undef\": 2, //不允许未声明的变量\n      \"no-undef-init\": 2, //不允许初始化变量时给变量赋值undefined\n      \"no-undefined\": 2, //不允许把undefined当做标识符使用\n      \"no-unused-vars\": [2, {\"vars\": \"all\", \"args\": \"after-used\"}], //不允许有声明后未使用的变量或者参数\n      \"no-use-before-define\": [2, \"nofunc\"], //不允许在未定义之前就使用变量\"indent\": 2, //强制一致的缩进风格\n      \"brace-style\": [2, \"1tbs\", { \"allowSingleLine\": false}], //大括号风格\n      \"camelcase\": [2, {\"properties\": \"never\"}], //强制驼峰命名规则\n      \"comma-style\": [2, \"last\"], //逗号风格\n      \"consistent-this\": [0, \"self\"], //当获取当前环境的this是用一样的风格\n      \"eol-last\": 2, //文件以换行符结束\n      \"func-names\": 0, //函数表达式必须有名字\n      \"func-style\": 0, //函数风格，规定只能使用函数声明或者函数表达式\n      \"key-spacing\": [2, {\"beforeColon\": false, \"afterColon\": true}], //对象字面量中冒号的前后空格\n      \"max-nested-callbacks\": 0, //回调嵌套深度\n      \"new-cap\": [2, {\"newIsCap\": true, \"capIsNew\": false}], //构造函数名字首字母要大写\n      \"new-parens\": 2, //new时构造函数必须有小括号\n      \"newline-after-var\": 0, //变量声明后必须空一行\n      \"no-array-constructor\": 2, //不允许使用数组构造器\n      \"no-inline-comments\": 0, //不允许行内注释\n      \"no-lonely-if\": 0, //不允许else语句内只有if语句\n      \"no-mixed-spaces-and-tabs\": [2, \"smart-tabs\"], //不允许混用tab和空格\n      \"no-multiple-empty-lines\": [2, {\"max\": 2}], //空行最多不能超过两行\n      \"no-nested-ternary\": 2, //不允许使用嵌套的三目运算符\n      \"no-new-object\": 2, //禁止使用new Object()\n      \"fun-call-spacing\": 2, //函数调用时，函数名与()之间不能有空格\n      \"no-ternary\": 0, //不允许使用三目运算符\n      \"no-trailing-spaces\": 2, //一行最后不允许有空格\n      \"no-underscore-dangle\": 2, //不允许标识符以下划线开头\n      \"no-extra-parens\": 0, //不允许出现多余的括号\n      \"one-var\": 0, //强制变量声明放在一起\n      \"operator-assignment\": 0, //赋值运算符的风格\n      \"padded-blocks\": [2, \"never\"], //块内行首行尾是否空行\n      \"quote-props\": 0, //对象字面量中属性名加引号\n      \"quotes\": [1, \"single\", \"avoid-escape\"], //引号风格\n      \"semi\": [2, \"always\"], //强制语句分号结尾\n      \"semi-spacing\": [2, {\"before\": false, \"after\": true}], //分后前后空格\n      \"sort-vars\": 0, //变量声明时排序\n      \"space-before-blocks\": [2, \"always\"], //块前的空格\n      \"space-before-function-paren\": [2, {\"anonymous\": \"always\", \"named\": \"never\"}], //函数定义时括号前的空格\n      \"space-infix-ops\": [2, {\"int32Hint\": true}], //操作符周围的空格\n      \"keyword-spacing\": 2, //关键字前后的空格\n      \"space-unary-ops\": [2, { \"words\": true, \"nonwords\": false}], //一元运算符前后不要加空格\n      \"wrap-regex\": 2, //正则表达式字面量用括号括起来\n      \"no-var\": 0, //使用let和const代替var\n      \"generator-star-spacing\": [2, \"both\"], //生成器函数前后空格\n      \"max-depth\": 0, //嵌套块深度\n      \"max-len\": 0, //一行最大长度，单位为字符\n      \"max-params\": 0, //函数最多能有多少个参数\n      \"max-statements\": 0, //函数内最多有几个声明\n      \"no-bitwise\": 0, //不允许使用位运算符\n      \"no-plusplus\": 0 //不允许使用++ --运算符\n  }\n```\n### FaceBook React\n[facebook/react](https://github.com/facebook/react/blob/master/.eslintrc.js)\n\n","source":"_posts/常见的-eslintrc-js配置及rules说明.md","raw":"---\ntitle: 常见的.eslintrc.js配置及rules说明\ndate: 2018-11-08 15:58:22\ntags: EsLint\n---\n### 规则级别\n\"off\"或者0，不启用这个规则\n\n\"warn\"或者1，出现问题会有警告\n\n\"error\"或者2，出现问题会报错\n### 关闭ESLint检测\n```\n/* eslint-disable */\n\nconsole.log('hello world');\n\n/* eslint-enable */\n```\n### 配置eslintrc.js\n``` javascript\n// https://eslint.org/docs/user-guide/configuring\n\nmodule.exports = {\n\n  //此项是用来告诉eslint找当前配置文件不能往父级查找\n  root: true,\n\n  //此项是用来指定eslint解析器的，解析器必须符合规则，babel-eslint解析器是对babel解析器的包装使其与ESLint解析\n  parser: 'babel-eslint',\n\n  //此项是用来指定javaScript语言类型和风格，sourceType用来指定js导入的方式，默认是script，此处设置为module，指某块导入方式\n  parserOptions: {\n    // 设置 script(默认) 或 module，如果代码是在ECMASCRIPT中的模块\n    sourceType: 'module',\n    \"ecmaVersion\": 6,\n    \"ecmaFeatures\": {\n      \"jsx\": true\n    }\n  },\n\n  // 此项指定环境的全局变量，下面的配置指定为浏览器环境\n  env: {\n    \"browser\": true,\n    \"node\": true,\n    \"commonjs\": true,\n    \"es6\": true,\n    \"amd\": true\n  },\n  // https://github.com/standard/standard/blob/master/docs/RULES-en.md\n  // 此项是用来配置标准的js风格，就是说写代码的时候要规范的写，如果你使用vs-code我觉得应该可以避免出错\n  extends: 'vue',\n  // 此项是用来提供插件的，插件名称省略了eslint-plugin-，下面这个配置是用来规范html的\n  plugins: [\n    'html',\n    \"flow-vars\", \n    \"react\"\n  ],\n  /* \n   下面这些rules是用来设置从插件来的规范代码的规则，使用必须去掉前缀eslint-plugin-\n    主要有如下的设置规则，可以设置字符串也可以设置数字，两者效果一致\n    \"off\" -> 0 关闭规则\n    \"warn\" -> 1 开启警告规则\n    \"error\" -> 2 开启错误规则\n  */\n  rules: {\n    // 不需要\n    \"space-before-function-paren\": 0,  // 函数定义时括号前面要不要有空格\n    \"eol-last\": 0,  // 文件以单一的换行符结束\n    \"no-extra-semi\": 0, // 可以多余的冒号\n    \"semi\": 0,  // 语句可以不需要分号结尾\n    \"eqeqeq\": 0, // 必须使用全等\n    \"one-var\": 0, // 连续声明\n    \"no-undef\": 0, // 可以 有未定义的变量\n\n    // 警告\n    \"no-extra-boolean-cast\": 1, // 不必要的bool转换\n    \"no-extra-parens\": 1, // 非必要的括号\n    \"no-empty\": 1, // 块语句中的内容不能为空\n    \"no-use-before-define\": [1, \"nofunc\"], // 未定义前不能使用\n    \"complexity\": [1, 10], // 循环复杂度\n    \"no-unused-vars\": 1, // 不能有声明后未被使用的变量或参数\n    // vue\n    \"flow-vars/define-flow-type\": 1,\n    \"flow-vars/use-flow-type\": 1,\n\n    // react\n    \"react/jsx-uses-react\": 2,\n    \"react/jsx-uses-vars\": 2,\n\n    // 错误\n    \"comma-dangle\": [2, \"never\"], // 对象字面量项尾不能有逗号\n    \"no-debugger\": 2, // 禁止使用debugger\n    \"no-constant-condition\": 2, // 禁止在条件中使用常量表达式 if(true) if(1)\n    \"no-dupe-args\": 2, // 函数参数不能重复\n    \"no-dupe-keys\": 2, // 在创建对象字面量时不允许键重复 {a:1,a:1}\n    \"no-duplicate-case\": 2, // switch中的case标签不能重复\n    \"no-empty-character-class\": 2, // 正则表达式中的[]内容不能为空\n    \"no-invalid-regexp\": 2, // 禁止无效的正则表达式\n    \"no-func-assign\": 2, // 禁止重复的函数声明\n    \"valid-typeof\": 2,  // 必须使用合法的typeof的值\n    \"no-unreachable\": 2, // 不能有无法执行的代码\n    \"no-unexpected-multiline\": 2, // 避免多行表达式\n    \"no-sparse-arrays\": 2, // 禁止稀疏数组， [1,,2]\n    \"no-shadow-restricted-names\": 2, // 严格模式中规定的限制标识符不能作为声明时的变量名使用\n    \"no-cond-assign\": 2, // 禁止在条件表达式中使用赋值语句\n    \"no-native-reassign\": 2, // 不能重写native对象\n\n    // 代码风格\n    \"no-else-return\": 1, // 如果if语句里面有return,后面不能跟else语句\n    \"no-multi-spaces\": 1, // 不能用多余的空格\n    \"key-spacing\": [1, {  // 对象字面量中冒号的前后空格\n      \"beforeColon\": false,\n      \"afterColon\": true\n    }],\n    \"block-scoped-var\": 2, // 块语句中使用var\n    \"consistent-return\": 2, // return 后面是否允许省略\n    \"accessor-pairs\": 2, // 在对象中使用getter/setter\n    \"dot-location\": [2, \"property\"], // 对象访问符的位置，换行的时候在行首还是行尾\n    \"no-lone-blocks\": 2, // 禁止不必要的嵌套块\n    \"no-labels\": 2, // 禁止标签声明\n    \"no-extend-native\": 2, // 禁止扩展native对象\n    \"no-floating-decimal\": 2, // 禁止省略浮点数中的0 .5 3.\n    \"no-loop-func\": 2, // 禁止在循环中使用函数（如果没有引用外部变量不形成闭包就可以）\n    \"no-new-func\": 2,  // 禁止使用new Function\n    \"no-self-compare\": 2, // 不能比较自身\n    \"no-sequences\": 2, // 禁止使用逗号运算符\n    \"no-throw-literal\": 2, // 禁止抛出字面量错误 throw \"error\";\n    \"no-return-assign\": [2, \"always\"], // return 语句中不能有赋值表达式\n    \"no-redeclare\": [2, {   // 禁止重复声明变量\n      \"builtinGlobals\": true\n    }],\n    \"no-unused-expressions\": [2, {  // 禁止无用的表达式\n      \"allowShortCircuit\": true,\n      \"allowTernary\": true\n    }],\n    \"no-useless-call\": 2, // 禁止不必要的call和apply\n    \"no-useless-concat\": 2,\n    \"no-void\": 2, // 禁用void操作符\n    \"no-with\": 2, // 禁用with\n    \"space-infix-ops\": 2, // 中缀操作符周围要不要有空格\n    \"valid-jsdoc\": [2, { // jsdoc规则\n      \"requireParamDescription\": true,\n      \"requireReturnDescription\": true\n    }],\n    \"no-warning-comments\": [2, {  // 不能有警告备注\n      \"terms\": [\"todo\", \"fixme\", \"any other term\"],\n      \"location\": \"anywhere\"\n    }],\n    \"curly\": 1, // 必须使用 if(){} 中的{}\n\n    // common js\n    \"no-duplicate-imports\": 1\n  }\n}\n```\n### 常用规则\n\n规则的细节请到ESLint官方网站查看[官网](http://eslint.org/docs/rules/)\n``` bash\n'rules': {\n      \"comma-dangle\": [\"error\", \"never\"], //是否允许对象中出现结尾逗号\n      \"no-cond-assign\": 2, //条件语句的条件中不允许出现赋值运算符\n      \"no-console\": 2, //不允许出现console语句\n      \"no-constant-condition\": 2, //条件语句的条件中不允许出现恒定不变的量\n      \"no-control-regex\": 2, //正则表达式中不允许出现控制字符\n      \"no-debugger\": 2, //不允许出现debugger语句\n      \"no-dupe-args\": 2, //函数定义的时候不允许出现重复的参数\n      \"no-dupe-keys\": 2, //对象中不允许出现重复的键\n      \"no-duplicate-case\": 2, //switch语句中不允许出现重复的case标签\n      \"no-empty\": 2, //不允许出现空的代码块\n      \"no-empty-character-class\": 2, //正则表达式中不允许出现空的字符组\n      \"no-ex-assign\": 2, //在try catch语句中不允许重新分配异常变量\n      \"no-extra-boolean-cast\": 2, //不允许出现不必要的布尔值转换\n      \"no-extra-parens\": 0, //不允许出现不必要的圆括号\n      \"no-extra-semi\": 2, //不允许出现不必要的分号\n      \"no-func-assign\": 2, //不允许重新分配函数声明\n      \"no-inner-declarations\": [\"error\", \"functions\"], //不允许在嵌套代码块里声明函数\n      \"no-invalid-regexp\": 2, //不允许在RegExp构造函数里出现无效的正则表达式\n      \"no-irregular-whitespace\": 2, //不允许出现不规则的空格\n      \"no-negated-in-lhs\": 2, //不允许在in表达式语句中对最左边的运算数使用取反操作\n      \"no-obj-calls\": 2, //不允许把全局对象属性当做函数来调用\n      \"no-regex-spaces\": 2, //正则表达式中不允许出现多个连续空格\n      \"quote-props\": 2, //对象中的属性名是否需要用引号引起来\n      \"no-sparse-arrays\": 2, //数组中不允许出现空位置\n      \"no-unreachable\": 2, //在return，throw，continue，break语句后不允许出现不可能到达的语句\n      \"use-isnan\": 2, //要求检查NaN的时候使用isNaN()\n      \"valid-jsdoc\": [\"error\", {\n          \"requireReturn\": false,\n          \"requireParamDescription\": false,\n          \"requireReturnDescription\": true\n      }], //强制JSDoc注释\n      \"valid-typeof\": [\"error\", {\n          \"requireStringLiterals\": true\n      }], //在使用typeof表达式比较的时候强制使用有效的字符串\n      \"block-scoped-var\": 2, //将变量声明放在合适的代码块里\n      \"complexity\": 0, //限制条件语句的复杂度\n      \"consistent-return\": 2, //无论有没有返回值都强制要求return语句返回一个值\n      \"curly\": [\"error\", \"all\"], //强制使用花括号的风格\n      \"default-case\": 0, //在switch语句中需要有default语句\n      \"dot-notation\": [\"error\", {\"allowKeywords\": false, \"allowPattern\": \"\"}], //获取对象属性的时候使用点号\n      \"eqeqeq\": [\"error\", \"smart\"], //比较的时候使用严格等于\n      \"no-alert\": 1, //不允许使用alert，confirm，prompt语句\n      \"no-caller\": 2, //不允许使用arguments.callee和arguments.caller属性\n      \"guard-for-in\": 0, //监视for in循环，防止出现不可预料的情况\n      \"no-div-regex\": 2, //不能使用看起来像除法的正则表达式\n      \"no-else-return\": 0, //如果if语句有return，else里的return不用放在else里\n      \"no-labels\": [\"error\", {\n          \"allowLoop\": false,\n          \"allowSwitch\": false\n      }], //不允许标签语句\n      \"no-eq-null\": 2, //不允许对null用==或者!=\n      \"no-eval\": 2, //不允许使用eval()\n      \"no-extend-native\": 2, //不允许扩展原生对象\n      \"no-extra-bind\": 2, //不允许不必要的函数绑定\n      \"no-fallthrough\": 2, //不允许switch按顺序全部执行所有case\n      \"no-floating-decimal\": 2, //不允许浮点数缺失数字\n      \"no-implied-eval\": 2, //不允许使用隐式eval()\n      \"no-iterator\": 2, //不允许使用__iterator__属性\n      \"no-lone-blocks\": 2, //不允许不必要的嵌套代码块\n      \"no-loop-func\": 2, //不允许在循环语句中进行函数声明\n      \"no-multi-spaces\": 2, //不允许出现多余的空格\n      \"no-multi-str\": 2, //不允许用\\来让字符串换行\n      \"no-global-assign\": 2, //不允许重新分配原生对象\n      \"no-new\": 2, //不允许new一个实例后不赋值或者不比较\n      \"no-new-func\": 2, //不允许使用new Function\n      \"no-new-wrappers\": 2, //不允许使用new String，Number和Boolean对象\n      \"no-octal\": 2, //不允许使用八进制字面值\n      \"no-octal-escape\": 2, //不允许使用八进制转义序列\n      \"no-param-reassign\": 0, //不允许重新分配函数参数\"no-proto\": 2, //不允许使用__proto__属性\n      \"no-redeclare\": 2, //不允许变量重复声明\n      \"no-return-assign\": 2, //不允许在return语句中使用分配语句\n      \"no-script-url\": 2, //不允许使用javascript:void(0)\n      \"no-self-compare\": 2, //不允许自己和自己比较\n      \"no-sequences\": 2, //不允许使用逗号表达式\n      \"no-throw-literal\": 2, //不允许抛出字面量错误 throw \"error\"\n      \"no-unused-expressions\": 2, //不允许无用的表达式\n      \"no-void\": 2, //不允许void操作符\n      \"no-warning-comments\": [1, {\"terms\": [\"todo\", \"fixme\", \"any other term\"]}], //不允许警告备注\n      \"no-with\": 2, //不允许使用with语句\n      \"radix\": 1, //使用parseInt时强制使用基数来指定是十进制还是其他进制\n      \"vars-on-top\": 0, //var必须放在作用域顶部\n      \"wrap-iife\": [2, \"any\"], //立即执行表达式的括号风格\n      \"yoda\": [2, \"never\", {\"exceptRange\": true}], //不允许在if条件中使用yoda条件\n      \"strict\": [2, \"function\"], //使用严格模式\n      \"no-catch-shadow\": 2, //不允许try catch语句接受的err变量与外部变量重名\"no-delete-var\": 2, //不允许使用delete操作符\n      \"no-label-var\": 2, //不允许标签和变量同名\n      \"no-shadow\": 2, //外部作用域中的变量不能与它所包含的作用域中的变量或参数同名\n      \"no-shadow-restricted-names\": 2, //js关键字和保留字不能作为函数名或者变量名\n      \"no-undef\": 2, //不允许未声明的变量\n      \"no-undef-init\": 2, //不允许初始化变量时给变量赋值undefined\n      \"no-undefined\": 2, //不允许把undefined当做标识符使用\n      \"no-unused-vars\": [2, {\"vars\": \"all\", \"args\": \"after-used\"}], //不允许有声明后未使用的变量或者参数\n      \"no-use-before-define\": [2, \"nofunc\"], //不允许在未定义之前就使用变量\"indent\": 2, //强制一致的缩进风格\n      \"brace-style\": [2, \"1tbs\", { \"allowSingleLine\": false}], //大括号风格\n      \"camelcase\": [2, {\"properties\": \"never\"}], //强制驼峰命名规则\n      \"comma-style\": [2, \"last\"], //逗号风格\n      \"consistent-this\": [0, \"self\"], //当获取当前环境的this是用一样的风格\n      \"eol-last\": 2, //文件以换行符结束\n      \"func-names\": 0, //函数表达式必须有名字\n      \"func-style\": 0, //函数风格，规定只能使用函数声明或者函数表达式\n      \"key-spacing\": [2, {\"beforeColon\": false, \"afterColon\": true}], //对象字面量中冒号的前后空格\n      \"max-nested-callbacks\": 0, //回调嵌套深度\n      \"new-cap\": [2, {\"newIsCap\": true, \"capIsNew\": false}], //构造函数名字首字母要大写\n      \"new-parens\": 2, //new时构造函数必须有小括号\n      \"newline-after-var\": 0, //变量声明后必须空一行\n      \"no-array-constructor\": 2, //不允许使用数组构造器\n      \"no-inline-comments\": 0, //不允许行内注释\n      \"no-lonely-if\": 0, //不允许else语句内只有if语句\n      \"no-mixed-spaces-and-tabs\": [2, \"smart-tabs\"], //不允许混用tab和空格\n      \"no-multiple-empty-lines\": [2, {\"max\": 2}], //空行最多不能超过两行\n      \"no-nested-ternary\": 2, //不允许使用嵌套的三目运算符\n      \"no-new-object\": 2, //禁止使用new Object()\n      \"fun-call-spacing\": 2, //函数调用时，函数名与()之间不能有空格\n      \"no-ternary\": 0, //不允许使用三目运算符\n      \"no-trailing-spaces\": 2, //一行最后不允许有空格\n      \"no-underscore-dangle\": 2, //不允许标识符以下划线开头\n      \"no-extra-parens\": 0, //不允许出现多余的括号\n      \"one-var\": 0, //强制变量声明放在一起\n      \"operator-assignment\": 0, //赋值运算符的风格\n      \"padded-blocks\": [2, \"never\"], //块内行首行尾是否空行\n      \"quote-props\": 0, //对象字面量中属性名加引号\n      \"quotes\": [1, \"single\", \"avoid-escape\"], //引号风格\n      \"semi\": [2, \"always\"], //强制语句分号结尾\n      \"semi-spacing\": [2, {\"before\": false, \"after\": true}], //分后前后空格\n      \"sort-vars\": 0, //变量声明时排序\n      \"space-before-blocks\": [2, \"always\"], //块前的空格\n      \"space-before-function-paren\": [2, {\"anonymous\": \"always\", \"named\": \"never\"}], //函数定义时括号前的空格\n      \"space-infix-ops\": [2, {\"int32Hint\": true}], //操作符周围的空格\n      \"keyword-spacing\": 2, //关键字前后的空格\n      \"space-unary-ops\": [2, { \"words\": true, \"nonwords\": false}], //一元运算符前后不要加空格\n      \"wrap-regex\": 2, //正则表达式字面量用括号括起来\n      \"no-var\": 0, //使用let和const代替var\n      \"generator-star-spacing\": [2, \"both\"], //生成器函数前后空格\n      \"max-depth\": 0, //嵌套块深度\n      \"max-len\": 0, //一行最大长度，单位为字符\n      \"max-params\": 0, //函数最多能有多少个参数\n      \"max-statements\": 0, //函数内最多有几个声明\n      \"no-bitwise\": 0, //不允许使用位运算符\n      \"no-plusplus\": 0 //不允许使用++ --运算符\n  }\n```\n### FaceBook React\n[facebook/react](https://github.com/facebook/react/blob/master/.eslintrc.js)\n\n","slug":"常见的-eslintrc-js配置及rules说明","published":1,"updated":"2021-10-09T08:48:32.089Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzadw007c5c54odxk9skc","content":"<h3 id=\"规则级别\"><a href=\"#规则级别\" class=\"headerlink\" title=\"规则级别\"></a>规则级别</h3><p>“off”或者0，不启用这个规则</p>\n<p>“warn”或者1，出现问题会有警告</p>\n<p>“error”或者2，出现问题会报错</p>\n<h3 id=\"关闭ESLint检测\"><a href=\"#关闭ESLint检测\" class=\"headerlink\" title=\"关闭ESLint检测\"></a>关闭ESLint检测</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/* eslint-disable */</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(&apos;hello world&apos;);</span><br><span class=\"line\"></span><br><span class=\"line\">/* eslint-enable */</span><br></pre></td></tr></table></figure>\n<h3 id=\"配置eslintrc-js\"><a href=\"#配置eslintrc-js\" class=\"headerlink\" title=\"配置eslintrc.js\"></a>配置eslintrc.js</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// https://eslint.org/docs/user-guide/configuring</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//此项是用来告诉eslint找当前配置文件不能往父级查找</span></span><br><span class=\"line\">  root: <span class=\"literal\">true</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//此项是用来指定eslint解析器的，解析器必须符合规则，babel-eslint解析器是对babel解析器的包装使其与ESLint解析</span></span><br><span class=\"line\">  parser: <span class=\"string\">'babel-eslint'</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//此项是用来指定javaScript语言类型和风格，sourceType用来指定js导入的方式，默认是script，此处设置为module，指某块导入方式</span></span><br><span class=\"line\">  parserOptions: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 设置 script(默认) 或 module，如果代码是在ECMASCRIPT中的模块</span></span><br><span class=\"line\">    sourceType: <span class=\"string\">'module'</span>,</span><br><span class=\"line\">    <span class=\"string\">\"ecmaVersion\"</span>: <span class=\"number\">6</span>,</span><br><span class=\"line\">    <span class=\"string\">\"ecmaFeatures\"</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">\"jsx\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 此项指定环境的全局变量，下面的配置指定为浏览器环境</span></span><br><span class=\"line\">  env: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"browser\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"string\">\"node\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"string\">\"commonjs\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"string\">\"es6\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"string\">\"amd\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// https://github.com/standard/standard/blob/master/docs/RULES-en.md</span></span><br><span class=\"line\">  <span class=\"comment\">// 此项是用来配置标准的js风格，就是说写代码的时候要规范的写，如果你使用vs-code我觉得应该可以避免出错</span></span><br><span class=\"line\">  extends: <span class=\"string\">'vue'</span>,</span><br><span class=\"line\">  <span class=\"comment\">// 此项是用来提供插件的，插件名称省略了eslint-plugin-，下面这个配置是用来规范html的</span></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"string\">'html'</span>,</span><br><span class=\"line\">    <span class=\"string\">\"flow-vars\"</span>, </span><br><span class=\"line\">    <span class=\"string\">\"react\"</span></span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"comment\">/* </span></span><br><span class=\"line\"><span class=\"comment\">   下面这些rules是用来设置从插件来的规范代码的规则，使用必须去掉前缀eslint-plugin-</span></span><br><span class=\"line\"><span class=\"comment\">    主要有如下的设置规则，可以设置字符串也可以设置数字，两者效果一致</span></span><br><span class=\"line\"><span class=\"comment\">    \"off\" -&gt; 0 关闭规则</span></span><br><span class=\"line\"><span class=\"comment\">    \"warn\" -&gt; 1 开启警告规则</span></span><br><span class=\"line\"><span class=\"comment\">    \"error\" -&gt; 2 开启错误规则</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">  rules: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 不需要</span></span><br><span class=\"line\">    <span class=\"string\">\"space-before-function-paren\"</span>: <span class=\"number\">0</span>,  <span class=\"comment\">// 函数定义时括号前面要不要有空格</span></span><br><span class=\"line\">    <span class=\"string\">\"eol-last\"</span>: <span class=\"number\">0</span>,  <span class=\"comment\">// 文件以单一的换行符结束</span></span><br><span class=\"line\">    <span class=\"string\">\"no-extra-semi\"</span>: <span class=\"number\">0</span>, <span class=\"comment\">// 可以多余的冒号</span></span><br><span class=\"line\">    <span class=\"string\">\"semi\"</span>: <span class=\"number\">0</span>,  <span class=\"comment\">// 语句可以不需要分号结尾</span></span><br><span class=\"line\">    <span class=\"string\">\"eqeqeq\"</span>: <span class=\"number\">0</span>, <span class=\"comment\">// 必须使用全等</span></span><br><span class=\"line\">    <span class=\"string\">\"one-var\"</span>: <span class=\"number\">0</span>, <span class=\"comment\">// 连续声明</span></span><br><span class=\"line\">    <span class=\"string\">\"no-undef\"</span>: <span class=\"number\">0</span>, <span class=\"comment\">// 可以 有未定义的变量</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 警告</span></span><br><span class=\"line\">    <span class=\"string\">\"no-extra-boolean-cast\"</span>: <span class=\"number\">1</span>, <span class=\"comment\">// 不必要的bool转换</span></span><br><span class=\"line\">    <span class=\"string\">\"no-extra-parens\"</span>: <span class=\"number\">1</span>, <span class=\"comment\">// 非必要的括号</span></span><br><span class=\"line\">    <span class=\"string\">\"no-empty\"</span>: <span class=\"number\">1</span>, <span class=\"comment\">// 块语句中的内容不能为空</span></span><br><span class=\"line\">    <span class=\"string\">\"no-use-before-define\"</span>: [<span class=\"number\">1</span>, <span class=\"string\">\"nofunc\"</span>], <span class=\"comment\">// 未定义前不能使用</span></span><br><span class=\"line\">    <span class=\"string\">\"complexity\"</span>: [<span class=\"number\">1</span>, <span class=\"number\">10</span>], <span class=\"comment\">// 循环复杂度</span></span><br><span class=\"line\">    <span class=\"string\">\"no-unused-vars\"</span>: <span class=\"number\">1</span>, <span class=\"comment\">// 不能有声明后未被使用的变量或参数</span></span><br><span class=\"line\">    <span class=\"comment\">// vue</span></span><br><span class=\"line\">    <span class=\"string\">\"flow-vars/define-flow-type\"</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">    <span class=\"string\">\"flow-vars/use-flow-type\"</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// react</span></span><br><span class=\"line\">    <span class=\"string\">\"react/jsx-uses-react\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">    <span class=\"string\">\"react/jsx-uses-vars\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 错误</span></span><br><span class=\"line\">    <span class=\"string\">\"comma-dangle\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"never\"</span>], <span class=\"comment\">// 对象字面量项尾不能有逗号</span></span><br><span class=\"line\">    <span class=\"string\">\"no-debugger\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁止使用debugger</span></span><br><span class=\"line\">    <span class=\"string\">\"no-constant-condition\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁止在条件中使用常量表达式 if(true) if(1)</span></span><br><span class=\"line\">    <span class=\"string\">\"no-dupe-args\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 函数参数不能重复</span></span><br><span class=\"line\">    <span class=\"string\">\"no-dupe-keys\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 在创建对象字面量时不允许键重复 &#123;a:1,a:1&#125;</span></span><br><span class=\"line\">    <span class=\"string\">\"no-duplicate-case\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// switch中的case标签不能重复</span></span><br><span class=\"line\">    <span class=\"string\">\"no-empty-character-class\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 正则表达式中的[]内容不能为空</span></span><br><span class=\"line\">    <span class=\"string\">\"no-invalid-regexp\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁止无效的正则表达式</span></span><br><span class=\"line\">    <span class=\"string\">\"no-func-assign\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁止重复的函数声明</span></span><br><span class=\"line\">    <span class=\"string\">\"valid-typeof\"</span>: <span class=\"number\">2</span>,  <span class=\"comment\">// 必须使用合法的typeof的值</span></span><br><span class=\"line\">    <span class=\"string\">\"no-unreachable\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 不能有无法执行的代码</span></span><br><span class=\"line\">    <span class=\"string\">\"no-unexpected-multiline\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 避免多行表达式</span></span><br><span class=\"line\">    <span class=\"string\">\"no-sparse-arrays\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁止稀疏数组， [1,,2]</span></span><br><span class=\"line\">    <span class=\"string\">\"no-shadow-restricted-names\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 严格模式中规定的限制标识符不能作为声明时的变量名使用</span></span><br><span class=\"line\">    <span class=\"string\">\"no-cond-assign\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁止在条件表达式中使用赋值语句</span></span><br><span class=\"line\">    <span class=\"string\">\"no-native-reassign\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 不能重写native对象</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 代码风格</span></span><br><span class=\"line\">    <span class=\"string\">\"no-else-return\"</span>: <span class=\"number\">1</span>, <span class=\"comment\">// 如果if语句里面有return,后面不能跟else语句</span></span><br><span class=\"line\">    <span class=\"string\">\"no-multi-spaces\"</span>: <span class=\"number\">1</span>, <span class=\"comment\">// 不能用多余的空格</span></span><br><span class=\"line\">    <span class=\"string\">\"key-spacing\"</span>: [<span class=\"number\">1</span>, &#123;  <span class=\"comment\">// 对象字面量中冒号的前后空格</span></span><br><span class=\"line\">      <span class=\"string\">\"beforeColon\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">      <span class=\"string\">\"afterColon\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;],</span><br><span class=\"line\">    <span class=\"string\">\"block-scoped-var\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 块语句中使用var</span></span><br><span class=\"line\">    <span class=\"string\">\"consistent-return\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// return 后面是否允许省略</span></span><br><span class=\"line\">    <span class=\"string\">\"accessor-pairs\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 在对象中使用getter/setter</span></span><br><span class=\"line\">    <span class=\"string\">\"dot-location\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"property\"</span>], <span class=\"comment\">// 对象访问符的位置，换行的时候在行首还是行尾</span></span><br><span class=\"line\">    <span class=\"string\">\"no-lone-blocks\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁止不必要的嵌套块</span></span><br><span class=\"line\">    <span class=\"string\">\"no-labels\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁止标签声明</span></span><br><span class=\"line\">    <span class=\"string\">\"no-extend-native\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁止扩展native对象</span></span><br><span class=\"line\">    <span class=\"string\">\"no-floating-decimal\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁止省略浮点数中的0 .5 3.</span></span><br><span class=\"line\">    <span class=\"string\">\"no-loop-func\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁止在循环中使用函数（如果没有引用外部变量不形成闭包就可以）</span></span><br><span class=\"line\">    <span class=\"string\">\"no-new-func\"</span>: <span class=\"number\">2</span>,  <span class=\"comment\">// 禁止使用new Function</span></span><br><span class=\"line\">    <span class=\"string\">\"no-self-compare\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 不能比较自身</span></span><br><span class=\"line\">    <span class=\"string\">\"no-sequences\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁止使用逗号运算符</span></span><br><span class=\"line\">    <span class=\"string\">\"no-throw-literal\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁止抛出字面量错误 throw \"error\";</span></span><br><span class=\"line\">    <span class=\"string\">\"no-return-assign\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"always\"</span>], <span class=\"comment\">// return 语句中不能有赋值表达式</span></span><br><span class=\"line\">    <span class=\"string\">\"no-redeclare\"</span>: [<span class=\"number\">2</span>, &#123;   <span class=\"comment\">// 禁止重复声明变量</span></span><br><span class=\"line\">      <span class=\"string\">\"builtinGlobals\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;],</span><br><span class=\"line\">    <span class=\"string\">\"no-unused-expressions\"</span>: [<span class=\"number\">2</span>, &#123;  <span class=\"comment\">// 禁止无用的表达式</span></span><br><span class=\"line\">      <span class=\"string\">\"allowShortCircuit\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      <span class=\"string\">\"allowTernary\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;],</span><br><span class=\"line\">    <span class=\"string\">\"no-useless-call\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁止不必要的call和apply</span></span><br><span class=\"line\">    <span class=\"string\">\"no-useless-concat\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">    <span class=\"string\">\"no-void\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁用void操作符</span></span><br><span class=\"line\">    <span class=\"string\">\"no-with\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁用with</span></span><br><span class=\"line\">    <span class=\"string\">\"space-infix-ops\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 中缀操作符周围要不要有空格</span></span><br><span class=\"line\">    <span class=\"string\">\"valid-jsdoc\"</span>: [<span class=\"number\">2</span>, &#123; <span class=\"comment\">// jsdoc规则</span></span><br><span class=\"line\">      <span class=\"string\">\"requireParamDescription\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      <span class=\"string\">\"requireReturnDescription\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;],</span><br><span class=\"line\">    <span class=\"string\">\"no-warning-comments\"</span>: [<span class=\"number\">2</span>, &#123;  <span class=\"comment\">// 不能有警告备注</span></span><br><span class=\"line\">      <span class=\"string\">\"terms\"</span>: [<span class=\"string\">\"todo\"</span>, <span class=\"string\">\"fixme\"</span>, <span class=\"string\">\"any other term\"</span>],</span><br><span class=\"line\">      <span class=\"string\">\"location\"</span>: <span class=\"string\">\"anywhere\"</span></span><br><span class=\"line\">    &#125;],</span><br><span class=\"line\">    <span class=\"string\">\"curly\"</span>: <span class=\"number\">1</span>, <span class=\"comment\">// 必须使用 if()&#123;&#125; 中的&#123;&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// common js</span></span><br><span class=\"line\">    <span class=\"string\">\"no-duplicate-imports\"</span>: <span class=\"number\">1</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"常用规则\"><a href=\"#常用规则\" class=\"headerlink\" title=\"常用规则\"></a>常用规则</h3><p>规则的细节请到ESLint官方网站查看<a href=\"http://eslint.org/docs/rules/\" target=\"_blank\" rel=\"noopener\">官网</a><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">'rules'</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">\"comma-dangle\"</span>: [<span class=\"string\">\"error\"</span>, <span class=\"string\">\"never\"</span>], //是否允许对象中出现结尾逗号</span><br><span class=\"line\">      <span class=\"string\">\"no-cond-assign\"</span>: 2, //条件语句的条件中不允许出现赋值运算符</span><br><span class=\"line\">      <span class=\"string\">\"no-console\"</span>: 2, //不允许出现console语句</span><br><span class=\"line\">      <span class=\"string\">\"no-constant-condition\"</span>: 2, //条件语句的条件中不允许出现恒定不变的量</span><br><span class=\"line\">      <span class=\"string\">\"no-control-regex\"</span>: 2, //正则表达式中不允许出现控制字符</span><br><span class=\"line\">      <span class=\"string\">\"no-debugger\"</span>: 2, //不允许出现debugger语句</span><br><span class=\"line\">      <span class=\"string\">\"no-dupe-args\"</span>: 2, //函数定义的时候不允许出现重复的参数</span><br><span class=\"line\">      <span class=\"string\">\"no-dupe-keys\"</span>: 2, //对象中不允许出现重复的键</span><br><span class=\"line\">      <span class=\"string\">\"no-duplicate-case\"</span>: 2, //switch语句中不允许出现重复的<span class=\"keyword\">case</span>标签</span><br><span class=\"line\">      <span class=\"string\">\"no-empty\"</span>: 2, //不允许出现空的代码块</span><br><span class=\"line\">      <span class=\"string\">\"no-empty-character-class\"</span>: 2, //正则表达式中不允许出现空的字符组</span><br><span class=\"line\">      <span class=\"string\">\"no-ex-assign\"</span>: 2, //在try catch语句中不允许重新分配异常变量</span><br><span class=\"line\">      <span class=\"string\">\"no-extra-boolean-cast\"</span>: 2, //不允许出现不必要的布尔值转换</span><br><span class=\"line\">      <span class=\"string\">\"no-extra-parens\"</span>: 0, //不允许出现不必要的圆括号</span><br><span class=\"line\">      <span class=\"string\">\"no-extra-semi\"</span>: 2, //不允许出现不必要的分号</span><br><span class=\"line\">      <span class=\"string\">\"no-func-assign\"</span>: 2, //不允许重新分配函数声明</span><br><span class=\"line\">      <span class=\"string\">\"no-inner-declarations\"</span>: [<span class=\"string\">\"error\"</span>, <span class=\"string\">\"functions\"</span>], //不允许在嵌套代码块里声明函数</span><br><span class=\"line\">      <span class=\"string\">\"no-invalid-regexp\"</span>: 2, //不允许在RegExp构造函数里出现无效的正则表达式</span><br><span class=\"line\">      <span class=\"string\">\"no-irregular-whitespace\"</span>: 2, //不允许出现不规则的空格</span><br><span class=\"line\">      <span class=\"string\">\"no-negated-in-lhs\"</span>: 2, //不允许在<span class=\"keyword\">in</span>表达式语句中对最左边的运算数使用取反操作</span><br><span class=\"line\">      <span class=\"string\">\"no-obj-calls\"</span>: 2, //不允许把全局对象属性当做函数来调用</span><br><span class=\"line\">      <span class=\"string\">\"no-regex-spaces\"</span>: 2, //正则表达式中不允许出现多个连续空格</span><br><span class=\"line\">      <span class=\"string\">\"quote-props\"</span>: 2, //对象中的属性名是否需要用引号引起来</span><br><span class=\"line\">      <span class=\"string\">\"no-sparse-arrays\"</span>: 2, //数组中不允许出现空位置</span><br><span class=\"line\">      <span class=\"string\">\"no-unreachable\"</span>: 2, //在<span class=\"built_in\">return</span>，throw，<span class=\"built_in\">continue</span>，<span class=\"built_in\">break</span>语句后不允许出现不可能到达的语句</span><br><span class=\"line\">      <span class=\"string\">\"use-isnan\"</span>: 2, //要求检查NaN的时候使用isNaN()</span><br><span class=\"line\">      <span class=\"string\">\"valid-jsdoc\"</span>: [<span class=\"string\">\"error\"</span>, &#123;</span><br><span class=\"line\">          <span class=\"string\">\"requireReturn\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">          <span class=\"string\">\"requireParamDescription\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">          <span class=\"string\">\"requireReturnDescription\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">      &#125;], //强制JSDoc注释</span><br><span class=\"line\">      <span class=\"string\">\"valid-typeof\"</span>: [<span class=\"string\">\"error\"</span>, &#123;</span><br><span class=\"line\">          <span class=\"string\">\"requireStringLiterals\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">      &#125;], //在使用typeof表达式比较的时候强制使用有效的字符串</span><br><span class=\"line\">      <span class=\"string\">\"block-scoped-var\"</span>: 2, //将变量声明放在合适的代码块里</span><br><span class=\"line\">      <span class=\"string\">\"complexity\"</span>: 0, //限制条件语句的复杂度</span><br><span class=\"line\">      <span class=\"string\">\"consistent-return\"</span>: 2, //无论有没有返回值都强制要求<span class=\"built_in\">return</span>语句返回一个值</span><br><span class=\"line\">      <span class=\"string\">\"curly\"</span>: [<span class=\"string\">\"error\"</span>, <span class=\"string\">\"all\"</span>], //强制使用花括号的风格</span><br><span class=\"line\">      <span class=\"string\">\"default-case\"</span>: 0, //在switch语句中需要有default语句</span><br><span class=\"line\">      <span class=\"string\">\"dot-notation\"</span>: [<span class=\"string\">\"error\"</span>, &#123;<span class=\"string\">\"allowKeywords\"</span>: <span class=\"literal\">false</span>, <span class=\"string\">\"allowPattern\"</span>: <span class=\"string\">\"\"</span>&#125;], //获取对象属性的时候使用点号</span><br><span class=\"line\">      <span class=\"string\">\"eqeqeq\"</span>: [<span class=\"string\">\"error\"</span>, <span class=\"string\">\"smart\"</span>], //比较的时候使用严格等于</span><br><span class=\"line\">      <span class=\"string\">\"no-alert\"</span>: 1, //不允许使用alert，confirm，prompt语句</span><br><span class=\"line\">      <span class=\"string\">\"no-caller\"</span>: 2, //不允许使用arguments.callee和arguments.caller属性</span><br><span class=\"line\">      <span class=\"string\">\"guard-for-in\"</span>: 0, //监视<span class=\"keyword\">for</span> <span class=\"keyword\">in</span>循环，防止出现不可预料的情况</span><br><span class=\"line\">      <span class=\"string\">\"no-div-regex\"</span>: 2, //不能使用看起来像除法的正则表达式</span><br><span class=\"line\">      <span class=\"string\">\"no-else-return\"</span>: 0, //如果<span class=\"keyword\">if</span>语句有<span class=\"built_in\">return</span>，<span class=\"keyword\">else</span>里的<span class=\"built_in\">return</span>不用放在<span class=\"keyword\">else</span>里</span><br><span class=\"line\">      <span class=\"string\">\"no-labels\"</span>: [<span class=\"string\">\"error\"</span>, &#123;</span><br><span class=\"line\">          <span class=\"string\">\"allowLoop\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">          <span class=\"string\">\"allowSwitch\"</span>: <span class=\"literal\">false</span></span><br><span class=\"line\">      &#125;], //不允许标签语句</span><br><span class=\"line\">      <span class=\"string\">\"no-eq-null\"</span>: 2, //不允许对null用==或者!=</span><br><span class=\"line\">      <span class=\"string\">\"no-eval\"</span>: 2, //不允许使用<span class=\"built_in\">eval</span>()</span><br><span class=\"line\">      <span class=\"string\">\"no-extend-native\"</span>: 2, //不允许扩展原生对象</span><br><span class=\"line\">      <span class=\"string\">\"no-extra-bind\"</span>: 2, //不允许不必要的函数绑定</span><br><span class=\"line\">      <span class=\"string\">\"no-fallthrough\"</span>: 2, //不允许switch按顺序全部执行所有<span class=\"keyword\">case</span></span><br><span class=\"line\">      <span class=\"string\">\"no-floating-decimal\"</span>: 2, //不允许浮点数缺失数字</span><br><span class=\"line\">      <span class=\"string\">\"no-implied-eval\"</span>: 2, //不允许使用隐式<span class=\"built_in\">eval</span>()</span><br><span class=\"line\">      <span class=\"string\">\"no-iterator\"</span>: 2, //不允许使用__iterator__属性</span><br><span class=\"line\">      <span class=\"string\">\"no-lone-blocks\"</span>: 2, //不允许不必要的嵌套代码块</span><br><span class=\"line\">      <span class=\"string\">\"no-loop-func\"</span>: 2, //不允许在循环语句中进行函数声明</span><br><span class=\"line\">      <span class=\"string\">\"no-multi-spaces\"</span>: 2, //不允许出现多余的空格</span><br><span class=\"line\">      <span class=\"string\">\"no-multi-str\"</span>: 2, //不允许用\\来让字符串换行</span><br><span class=\"line\">      <span class=\"string\">\"no-global-assign\"</span>: 2, //不允许重新分配原生对象</span><br><span class=\"line\">      <span class=\"string\">\"no-new\"</span>: 2, //不允许new一个实例后不赋值或者不比较</span><br><span class=\"line\">      <span class=\"string\">\"no-new-func\"</span>: 2, //不允许使用new Function</span><br><span class=\"line\">      <span class=\"string\">\"no-new-wrappers\"</span>: 2, //不允许使用new String，Number和Boolean对象</span><br><span class=\"line\">      <span class=\"string\">\"no-octal\"</span>: 2, //不允许使用八进制字面值</span><br><span class=\"line\">      <span class=\"string\">\"no-octal-escape\"</span>: 2, //不允许使用八进制转义序列</span><br><span class=\"line\">      <span class=\"string\">\"no-param-reassign\"</span>: 0, //不允许重新分配函数参数<span class=\"string\">\"no-proto\"</span>: 2, //不允许使用__proto__属性</span><br><span class=\"line\">      <span class=\"string\">\"no-redeclare\"</span>: 2, //不允许变量重复声明</span><br><span class=\"line\">      <span class=\"string\">\"no-return-assign\"</span>: 2, //不允许在<span class=\"built_in\">return</span>语句中使用分配语句</span><br><span class=\"line\">      <span class=\"string\">\"no-script-url\"</span>: 2, //不允许使用javascript:void(0)</span><br><span class=\"line\">      <span class=\"string\">\"no-self-compare\"</span>: 2, //不允许自己和自己比较</span><br><span class=\"line\">      <span class=\"string\">\"no-sequences\"</span>: 2, //不允许使用逗号表达式</span><br><span class=\"line\">      <span class=\"string\">\"no-throw-literal\"</span>: 2, //不允许抛出字面量错误 throw <span class=\"string\">\"error\"</span></span><br><span class=\"line\">      <span class=\"string\">\"no-unused-expressions\"</span>: 2, //不允许无用的表达式</span><br><span class=\"line\">      <span class=\"string\">\"no-void\"</span>: 2, //不允许void操作符</span><br><span class=\"line\">      <span class=\"string\">\"no-warning-comments\"</span>: [1, &#123;<span class=\"string\">\"terms\"</span>: [<span class=\"string\">\"todo\"</span>, <span class=\"string\">\"fixme\"</span>, <span class=\"string\">\"any other term\"</span>]&#125;], //不允许警告备注</span><br><span class=\"line\">      <span class=\"string\">\"no-with\"</span>: 2, //不允许使用with语句</span><br><span class=\"line\">      <span class=\"string\">\"radix\"</span>: 1, //使用parseInt时强制使用基数来指定是十进制还是其他进制</span><br><span class=\"line\">      <span class=\"string\">\"vars-on-top\"</span>: 0, //var必须放在作用域顶部</span><br><span class=\"line\">      <span class=\"string\">\"wrap-iife\"</span>: [2, <span class=\"string\">\"any\"</span>], //立即执行表达式的括号风格</span><br><span class=\"line\">      <span class=\"string\">\"yoda\"</span>: [2, <span class=\"string\">\"never\"</span>, &#123;<span class=\"string\">\"exceptRange\"</span>: <span class=\"literal\">true</span>&#125;], //不允许在<span class=\"keyword\">if</span>条件中使用yoda条件</span><br><span class=\"line\">      <span class=\"string\">\"strict\"</span>: [2, <span class=\"string\">\"function\"</span>], //使用严格模式</span><br><span class=\"line\">      <span class=\"string\">\"no-catch-shadow\"</span>: 2, //不允许try catch语句接受的err变量与外部变量重名<span class=\"string\">\"no-delete-var\"</span>: 2, //不允许使用delete操作符</span><br><span class=\"line\">      <span class=\"string\">\"no-label-var\"</span>: 2, //不允许标签和变量同名</span><br><span class=\"line\">      <span class=\"string\">\"no-shadow\"</span>: 2, //外部作用域中的变量不能与它所包含的作用域中的变量或参数同名</span><br><span class=\"line\">      <span class=\"string\">\"no-shadow-restricted-names\"</span>: 2, //js关键字和保留字不能作为函数名或者变量名</span><br><span class=\"line\">      <span class=\"string\">\"no-undef\"</span>: 2, //不允许未声明的变量</span><br><span class=\"line\">      <span class=\"string\">\"no-undef-init\"</span>: 2, //不允许初始化变量时给变量赋值undefined</span><br><span class=\"line\">      <span class=\"string\">\"no-undefined\"</span>: 2, //不允许把undefined当做标识符使用</span><br><span class=\"line\">      <span class=\"string\">\"no-unused-vars\"</span>: [2, &#123;<span class=\"string\">\"vars\"</span>: <span class=\"string\">\"all\"</span>, <span class=\"string\">\"args\"</span>: <span class=\"string\">\"after-used\"</span>&#125;], //不允许有声明后未使用的变量或者参数</span><br><span class=\"line\">      <span class=\"string\">\"no-use-before-define\"</span>: [2, <span class=\"string\">\"nofunc\"</span>], //不允许在未定义之前就使用变量<span class=\"string\">\"indent\"</span>: 2, //强制一致的缩进风格</span><br><span class=\"line\">      <span class=\"string\">\"brace-style\"</span>: [2, <span class=\"string\">\"1tbs\"</span>, &#123; <span class=\"string\">\"allowSingleLine\"</span>: <span class=\"literal\">false</span>&#125;], //大括号风格</span><br><span class=\"line\">      <span class=\"string\">\"camelcase\"</span>: [2, &#123;<span class=\"string\">\"properties\"</span>: <span class=\"string\">\"never\"</span>&#125;], //强制驼峰命名规则</span><br><span class=\"line\">      <span class=\"string\">\"comma-style\"</span>: [2, <span class=\"string\">\"last\"</span>], //逗号风格</span><br><span class=\"line\">      <span class=\"string\">\"consistent-this\"</span>: [0, <span class=\"string\">\"self\"</span>], //当获取当前环境的this是用一样的风格</span><br><span class=\"line\">      <span class=\"string\">\"eol-last\"</span>: 2, //文件以换行符结束</span><br><span class=\"line\">      <span class=\"string\">\"func-names\"</span>: 0, //函数表达式必须有名字</span><br><span class=\"line\">      <span class=\"string\">\"func-style\"</span>: 0, //函数风格，规定只能使用函数声明或者函数表达式</span><br><span class=\"line\">      <span class=\"string\">\"key-spacing\"</span>: [2, &#123;<span class=\"string\">\"beforeColon\"</span>: <span class=\"literal\">false</span>, <span class=\"string\">\"afterColon\"</span>: <span class=\"literal\">true</span>&#125;], //对象字面量中冒号的前后空格</span><br><span class=\"line\">      <span class=\"string\">\"max-nested-callbacks\"</span>: 0, //回调嵌套深度</span><br><span class=\"line\">      <span class=\"string\">\"new-cap\"</span>: [2, &#123;<span class=\"string\">\"newIsCap\"</span>: <span class=\"literal\">true</span>, <span class=\"string\">\"capIsNew\"</span>: <span class=\"literal\">false</span>&#125;], //构造函数名字首字母要大写</span><br><span class=\"line\">      <span class=\"string\">\"new-parens\"</span>: 2, //new时构造函数必须有小括号</span><br><span class=\"line\">      <span class=\"string\">\"newline-after-var\"</span>: 0, //变量声明后必须空一行</span><br><span class=\"line\">      <span class=\"string\">\"no-array-constructor\"</span>: 2, //不允许使用数组构造器</span><br><span class=\"line\">      <span class=\"string\">\"no-inline-comments\"</span>: 0, //不允许行内注释</span><br><span class=\"line\">      <span class=\"string\">\"no-lonely-if\"</span>: 0, //不允许<span class=\"keyword\">else</span>语句内只有<span class=\"keyword\">if</span>语句</span><br><span class=\"line\">      <span class=\"string\">\"no-mixed-spaces-and-tabs\"</span>: [2, <span class=\"string\">\"smart-tabs\"</span>], //不允许混用tab和空格</span><br><span class=\"line\">      <span class=\"string\">\"no-multiple-empty-lines\"</span>: [2, &#123;<span class=\"string\">\"max\"</span>: 2&#125;], //空行最多不能超过两行</span><br><span class=\"line\">      <span class=\"string\">\"no-nested-ternary\"</span>: 2, //不允许使用嵌套的三目运算符</span><br><span class=\"line\">      <span class=\"string\">\"no-new-object\"</span>: 2, //禁止使用new Object()</span><br><span class=\"line\">      <span class=\"string\">\"fun-call-spacing\"</span>: 2, //函数调用时，函数名与()之间不能有空格</span><br><span class=\"line\">      <span class=\"string\">\"no-ternary\"</span>: 0, //不允许使用三目运算符</span><br><span class=\"line\">      <span class=\"string\">\"no-trailing-spaces\"</span>: 2, //一行最后不允许有空格</span><br><span class=\"line\">      <span class=\"string\">\"no-underscore-dangle\"</span>: 2, //不允许标识符以下划线开头</span><br><span class=\"line\">      <span class=\"string\">\"no-extra-parens\"</span>: 0, //不允许出现多余的括号</span><br><span class=\"line\">      <span class=\"string\">\"one-var\"</span>: 0, //强制变量声明放在一起</span><br><span class=\"line\">      <span class=\"string\">\"operator-assignment\"</span>: 0, //赋值运算符的风格</span><br><span class=\"line\">      <span class=\"string\">\"padded-blocks\"</span>: [2, <span class=\"string\">\"never\"</span>], //块内行首行尾是否空行</span><br><span class=\"line\">      <span class=\"string\">\"quote-props\"</span>: 0, //对象字面量中属性名加引号</span><br><span class=\"line\">      <span class=\"string\">\"quotes\"</span>: [1, <span class=\"string\">\"single\"</span>, <span class=\"string\">\"avoid-escape\"</span>], //引号风格</span><br><span class=\"line\">      <span class=\"string\">\"semi\"</span>: [2, <span class=\"string\">\"always\"</span>], //强制语句分号结尾</span><br><span class=\"line\">      <span class=\"string\">\"semi-spacing\"</span>: [2, &#123;<span class=\"string\">\"before\"</span>: <span class=\"literal\">false</span>, <span class=\"string\">\"after\"</span>: <span class=\"literal\">true</span>&#125;], //分后前后空格</span><br><span class=\"line\">      <span class=\"string\">\"sort-vars\"</span>: 0, //变量声明时排序</span><br><span class=\"line\">      <span class=\"string\">\"space-before-blocks\"</span>: [2, <span class=\"string\">\"always\"</span>], //块前的空格</span><br><span class=\"line\">      <span class=\"string\">\"space-before-function-paren\"</span>: [2, &#123;<span class=\"string\">\"anonymous\"</span>: <span class=\"string\">\"always\"</span>, <span class=\"string\">\"named\"</span>: <span class=\"string\">\"never\"</span>&#125;], //函数定义时括号前的空格</span><br><span class=\"line\">      <span class=\"string\">\"space-infix-ops\"</span>: [2, &#123;<span class=\"string\">\"int32Hint\"</span>: <span class=\"literal\">true</span>&#125;], //操作符周围的空格</span><br><span class=\"line\">      <span class=\"string\">\"keyword-spacing\"</span>: 2, //关键字前后的空格</span><br><span class=\"line\">      <span class=\"string\">\"space-unary-ops\"</span>: [2, &#123; <span class=\"string\">\"words\"</span>: <span class=\"literal\">true</span>, <span class=\"string\">\"nonwords\"</span>: <span class=\"literal\">false</span>&#125;], //一元运算符前后不要加空格</span><br><span class=\"line\">      <span class=\"string\">\"wrap-regex\"</span>: 2, //正则表达式字面量用括号括起来</span><br><span class=\"line\">      <span class=\"string\">\"no-var\"</span>: 0, //使用<span class=\"built_in\">let</span>和const代替var</span><br><span class=\"line\">      <span class=\"string\">\"generator-star-spacing\"</span>: [2, <span class=\"string\">\"both\"</span>], //生成器函数前后空格</span><br><span class=\"line\">      <span class=\"string\">\"max-depth\"</span>: 0, //嵌套块深度</span><br><span class=\"line\">      <span class=\"string\">\"max-len\"</span>: 0, //一行最大长度，单位为字符</span><br><span class=\"line\">      <span class=\"string\">\"max-params\"</span>: 0, //函数最多能有多少个参数</span><br><span class=\"line\">      <span class=\"string\">\"max-statements\"</span>: 0, //函数内最多有几个声明</span><br><span class=\"line\">      <span class=\"string\">\"no-bitwise\"</span>: 0, //不允许使用位运算符</span><br><span class=\"line\">      <span class=\"string\">\"no-plusplus\"</span>: 0 //不允许使用++ --运算符</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"FaceBook-React\"><a href=\"#FaceBook-React\" class=\"headerlink\" title=\"FaceBook React\"></a>FaceBook React</h3><p><a href=\"https://github.com/facebook/react/blob/master/.eslintrc.js\">facebook/react</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"规则级别\"><a href=\"#规则级别\" class=\"headerlink\" title=\"规则级别\"></a>规则级别</h3><p>“off”或者0，不启用这个规则</p>\n<p>“warn”或者1，出现问题会有警告</p>\n<p>“error”或者2，出现问题会报错</p>\n<h3 id=\"关闭ESLint检测\"><a href=\"#关闭ESLint检测\" class=\"headerlink\" title=\"关闭ESLint检测\"></a>关闭ESLint检测</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/* eslint-disable */</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(&apos;hello world&apos;);</span><br><span class=\"line\"></span><br><span class=\"line\">/* eslint-enable */</span><br></pre></td></tr></table></figure>\n<h3 id=\"配置eslintrc-js\"><a href=\"#配置eslintrc-js\" class=\"headerlink\" title=\"配置eslintrc.js\"></a>配置eslintrc.js</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// https://eslint.org/docs/user-guide/configuring</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//此项是用来告诉eslint找当前配置文件不能往父级查找</span></span><br><span class=\"line\">  root: <span class=\"literal\">true</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//此项是用来指定eslint解析器的，解析器必须符合规则，babel-eslint解析器是对babel解析器的包装使其与ESLint解析</span></span><br><span class=\"line\">  parser: <span class=\"string\">'babel-eslint'</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//此项是用来指定javaScript语言类型和风格，sourceType用来指定js导入的方式，默认是script，此处设置为module，指某块导入方式</span></span><br><span class=\"line\">  parserOptions: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 设置 script(默认) 或 module，如果代码是在ECMASCRIPT中的模块</span></span><br><span class=\"line\">    sourceType: <span class=\"string\">'module'</span>,</span><br><span class=\"line\">    <span class=\"string\">\"ecmaVersion\"</span>: <span class=\"number\">6</span>,</span><br><span class=\"line\">    <span class=\"string\">\"ecmaFeatures\"</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">\"jsx\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 此项指定环境的全局变量，下面的配置指定为浏览器环境</span></span><br><span class=\"line\">  env: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"browser\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"string\">\"node\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"string\">\"commonjs\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"string\">\"es6\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"string\">\"amd\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// https://github.com/standard/standard/blob/master/docs/RULES-en.md</span></span><br><span class=\"line\">  <span class=\"comment\">// 此项是用来配置标准的js风格，就是说写代码的时候要规范的写，如果你使用vs-code我觉得应该可以避免出错</span></span><br><span class=\"line\">  extends: <span class=\"string\">'vue'</span>,</span><br><span class=\"line\">  <span class=\"comment\">// 此项是用来提供插件的，插件名称省略了eslint-plugin-，下面这个配置是用来规范html的</span></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"string\">'html'</span>,</span><br><span class=\"line\">    <span class=\"string\">\"flow-vars\"</span>, </span><br><span class=\"line\">    <span class=\"string\">\"react\"</span></span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"comment\">/* </span></span><br><span class=\"line\"><span class=\"comment\">   下面这些rules是用来设置从插件来的规范代码的规则，使用必须去掉前缀eslint-plugin-</span></span><br><span class=\"line\"><span class=\"comment\">    主要有如下的设置规则，可以设置字符串也可以设置数字，两者效果一致</span></span><br><span class=\"line\"><span class=\"comment\">    \"off\" -&gt; 0 关闭规则</span></span><br><span class=\"line\"><span class=\"comment\">    \"warn\" -&gt; 1 开启警告规则</span></span><br><span class=\"line\"><span class=\"comment\">    \"error\" -&gt; 2 开启错误规则</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">  rules: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 不需要</span></span><br><span class=\"line\">    <span class=\"string\">\"space-before-function-paren\"</span>: <span class=\"number\">0</span>,  <span class=\"comment\">// 函数定义时括号前面要不要有空格</span></span><br><span class=\"line\">    <span class=\"string\">\"eol-last\"</span>: <span class=\"number\">0</span>,  <span class=\"comment\">// 文件以单一的换行符结束</span></span><br><span class=\"line\">    <span class=\"string\">\"no-extra-semi\"</span>: <span class=\"number\">0</span>, <span class=\"comment\">// 可以多余的冒号</span></span><br><span class=\"line\">    <span class=\"string\">\"semi\"</span>: <span class=\"number\">0</span>,  <span class=\"comment\">// 语句可以不需要分号结尾</span></span><br><span class=\"line\">    <span class=\"string\">\"eqeqeq\"</span>: <span class=\"number\">0</span>, <span class=\"comment\">// 必须使用全等</span></span><br><span class=\"line\">    <span class=\"string\">\"one-var\"</span>: <span class=\"number\">0</span>, <span class=\"comment\">// 连续声明</span></span><br><span class=\"line\">    <span class=\"string\">\"no-undef\"</span>: <span class=\"number\">0</span>, <span class=\"comment\">// 可以 有未定义的变量</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 警告</span></span><br><span class=\"line\">    <span class=\"string\">\"no-extra-boolean-cast\"</span>: <span class=\"number\">1</span>, <span class=\"comment\">// 不必要的bool转换</span></span><br><span class=\"line\">    <span class=\"string\">\"no-extra-parens\"</span>: <span class=\"number\">1</span>, <span class=\"comment\">// 非必要的括号</span></span><br><span class=\"line\">    <span class=\"string\">\"no-empty\"</span>: <span class=\"number\">1</span>, <span class=\"comment\">// 块语句中的内容不能为空</span></span><br><span class=\"line\">    <span class=\"string\">\"no-use-before-define\"</span>: [<span class=\"number\">1</span>, <span class=\"string\">\"nofunc\"</span>], <span class=\"comment\">// 未定义前不能使用</span></span><br><span class=\"line\">    <span class=\"string\">\"complexity\"</span>: [<span class=\"number\">1</span>, <span class=\"number\">10</span>], <span class=\"comment\">// 循环复杂度</span></span><br><span class=\"line\">    <span class=\"string\">\"no-unused-vars\"</span>: <span class=\"number\">1</span>, <span class=\"comment\">// 不能有声明后未被使用的变量或参数</span></span><br><span class=\"line\">    <span class=\"comment\">// vue</span></span><br><span class=\"line\">    <span class=\"string\">\"flow-vars/define-flow-type\"</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">    <span class=\"string\">\"flow-vars/use-flow-type\"</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// react</span></span><br><span class=\"line\">    <span class=\"string\">\"react/jsx-uses-react\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">    <span class=\"string\">\"react/jsx-uses-vars\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 错误</span></span><br><span class=\"line\">    <span class=\"string\">\"comma-dangle\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"never\"</span>], <span class=\"comment\">// 对象字面量项尾不能有逗号</span></span><br><span class=\"line\">    <span class=\"string\">\"no-debugger\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁止使用debugger</span></span><br><span class=\"line\">    <span class=\"string\">\"no-constant-condition\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁止在条件中使用常量表达式 if(true) if(1)</span></span><br><span class=\"line\">    <span class=\"string\">\"no-dupe-args\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 函数参数不能重复</span></span><br><span class=\"line\">    <span class=\"string\">\"no-dupe-keys\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 在创建对象字面量时不允许键重复 &#123;a:1,a:1&#125;</span></span><br><span class=\"line\">    <span class=\"string\">\"no-duplicate-case\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// switch中的case标签不能重复</span></span><br><span class=\"line\">    <span class=\"string\">\"no-empty-character-class\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 正则表达式中的[]内容不能为空</span></span><br><span class=\"line\">    <span class=\"string\">\"no-invalid-regexp\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁止无效的正则表达式</span></span><br><span class=\"line\">    <span class=\"string\">\"no-func-assign\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁止重复的函数声明</span></span><br><span class=\"line\">    <span class=\"string\">\"valid-typeof\"</span>: <span class=\"number\">2</span>,  <span class=\"comment\">// 必须使用合法的typeof的值</span></span><br><span class=\"line\">    <span class=\"string\">\"no-unreachable\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 不能有无法执行的代码</span></span><br><span class=\"line\">    <span class=\"string\">\"no-unexpected-multiline\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 避免多行表达式</span></span><br><span class=\"line\">    <span class=\"string\">\"no-sparse-arrays\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁止稀疏数组， [1,,2]</span></span><br><span class=\"line\">    <span class=\"string\">\"no-shadow-restricted-names\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 严格模式中规定的限制标识符不能作为声明时的变量名使用</span></span><br><span class=\"line\">    <span class=\"string\">\"no-cond-assign\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁止在条件表达式中使用赋值语句</span></span><br><span class=\"line\">    <span class=\"string\">\"no-native-reassign\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 不能重写native对象</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 代码风格</span></span><br><span class=\"line\">    <span class=\"string\">\"no-else-return\"</span>: <span class=\"number\">1</span>, <span class=\"comment\">// 如果if语句里面有return,后面不能跟else语句</span></span><br><span class=\"line\">    <span class=\"string\">\"no-multi-spaces\"</span>: <span class=\"number\">1</span>, <span class=\"comment\">// 不能用多余的空格</span></span><br><span class=\"line\">    <span class=\"string\">\"key-spacing\"</span>: [<span class=\"number\">1</span>, &#123;  <span class=\"comment\">// 对象字面量中冒号的前后空格</span></span><br><span class=\"line\">      <span class=\"string\">\"beforeColon\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">      <span class=\"string\">\"afterColon\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;],</span><br><span class=\"line\">    <span class=\"string\">\"block-scoped-var\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 块语句中使用var</span></span><br><span class=\"line\">    <span class=\"string\">\"consistent-return\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// return 后面是否允许省略</span></span><br><span class=\"line\">    <span class=\"string\">\"accessor-pairs\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 在对象中使用getter/setter</span></span><br><span class=\"line\">    <span class=\"string\">\"dot-location\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"property\"</span>], <span class=\"comment\">// 对象访问符的位置，换行的时候在行首还是行尾</span></span><br><span class=\"line\">    <span class=\"string\">\"no-lone-blocks\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁止不必要的嵌套块</span></span><br><span class=\"line\">    <span class=\"string\">\"no-labels\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁止标签声明</span></span><br><span class=\"line\">    <span class=\"string\">\"no-extend-native\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁止扩展native对象</span></span><br><span class=\"line\">    <span class=\"string\">\"no-floating-decimal\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁止省略浮点数中的0 .5 3.</span></span><br><span class=\"line\">    <span class=\"string\">\"no-loop-func\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁止在循环中使用函数（如果没有引用外部变量不形成闭包就可以）</span></span><br><span class=\"line\">    <span class=\"string\">\"no-new-func\"</span>: <span class=\"number\">2</span>,  <span class=\"comment\">// 禁止使用new Function</span></span><br><span class=\"line\">    <span class=\"string\">\"no-self-compare\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 不能比较自身</span></span><br><span class=\"line\">    <span class=\"string\">\"no-sequences\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁止使用逗号运算符</span></span><br><span class=\"line\">    <span class=\"string\">\"no-throw-literal\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁止抛出字面量错误 throw \"error\";</span></span><br><span class=\"line\">    <span class=\"string\">\"no-return-assign\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"always\"</span>], <span class=\"comment\">// return 语句中不能有赋值表达式</span></span><br><span class=\"line\">    <span class=\"string\">\"no-redeclare\"</span>: [<span class=\"number\">2</span>, &#123;   <span class=\"comment\">// 禁止重复声明变量</span></span><br><span class=\"line\">      <span class=\"string\">\"builtinGlobals\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;],</span><br><span class=\"line\">    <span class=\"string\">\"no-unused-expressions\"</span>: [<span class=\"number\">2</span>, &#123;  <span class=\"comment\">// 禁止无用的表达式</span></span><br><span class=\"line\">      <span class=\"string\">\"allowShortCircuit\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      <span class=\"string\">\"allowTernary\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;],</span><br><span class=\"line\">    <span class=\"string\">\"no-useless-call\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁止不必要的call和apply</span></span><br><span class=\"line\">    <span class=\"string\">\"no-useless-concat\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">    <span class=\"string\">\"no-void\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁用void操作符</span></span><br><span class=\"line\">    <span class=\"string\">\"no-with\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 禁用with</span></span><br><span class=\"line\">    <span class=\"string\">\"space-infix-ops\"</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 中缀操作符周围要不要有空格</span></span><br><span class=\"line\">    <span class=\"string\">\"valid-jsdoc\"</span>: [<span class=\"number\">2</span>, &#123; <span class=\"comment\">// jsdoc规则</span></span><br><span class=\"line\">      <span class=\"string\">\"requireParamDescription\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      <span class=\"string\">\"requireReturnDescription\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;],</span><br><span class=\"line\">    <span class=\"string\">\"no-warning-comments\"</span>: [<span class=\"number\">2</span>, &#123;  <span class=\"comment\">// 不能有警告备注</span></span><br><span class=\"line\">      <span class=\"string\">\"terms\"</span>: [<span class=\"string\">\"todo\"</span>, <span class=\"string\">\"fixme\"</span>, <span class=\"string\">\"any other term\"</span>],</span><br><span class=\"line\">      <span class=\"string\">\"location\"</span>: <span class=\"string\">\"anywhere\"</span></span><br><span class=\"line\">    &#125;],</span><br><span class=\"line\">    <span class=\"string\">\"curly\"</span>: <span class=\"number\">1</span>, <span class=\"comment\">// 必须使用 if()&#123;&#125; 中的&#123;&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// common js</span></span><br><span class=\"line\">    <span class=\"string\">\"no-duplicate-imports\"</span>: <span class=\"number\">1</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"常用规则\"><a href=\"#常用规则\" class=\"headerlink\" title=\"常用规则\"></a>常用规则</h3><p>规则的细节请到ESLint官方网站查看<a href=\"http://eslint.org/docs/rules/\" target=\"_blank\" rel=\"noopener\">官网</a><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">'rules'</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">\"comma-dangle\"</span>: [<span class=\"string\">\"error\"</span>, <span class=\"string\">\"never\"</span>], //是否允许对象中出现结尾逗号</span><br><span class=\"line\">      <span class=\"string\">\"no-cond-assign\"</span>: 2, //条件语句的条件中不允许出现赋值运算符</span><br><span class=\"line\">      <span class=\"string\">\"no-console\"</span>: 2, //不允许出现console语句</span><br><span class=\"line\">      <span class=\"string\">\"no-constant-condition\"</span>: 2, //条件语句的条件中不允许出现恒定不变的量</span><br><span class=\"line\">      <span class=\"string\">\"no-control-regex\"</span>: 2, //正则表达式中不允许出现控制字符</span><br><span class=\"line\">      <span class=\"string\">\"no-debugger\"</span>: 2, //不允许出现debugger语句</span><br><span class=\"line\">      <span class=\"string\">\"no-dupe-args\"</span>: 2, //函数定义的时候不允许出现重复的参数</span><br><span class=\"line\">      <span class=\"string\">\"no-dupe-keys\"</span>: 2, //对象中不允许出现重复的键</span><br><span class=\"line\">      <span class=\"string\">\"no-duplicate-case\"</span>: 2, //switch语句中不允许出现重复的<span class=\"keyword\">case</span>标签</span><br><span class=\"line\">      <span class=\"string\">\"no-empty\"</span>: 2, //不允许出现空的代码块</span><br><span class=\"line\">      <span class=\"string\">\"no-empty-character-class\"</span>: 2, //正则表达式中不允许出现空的字符组</span><br><span class=\"line\">      <span class=\"string\">\"no-ex-assign\"</span>: 2, //在try catch语句中不允许重新分配异常变量</span><br><span class=\"line\">      <span class=\"string\">\"no-extra-boolean-cast\"</span>: 2, //不允许出现不必要的布尔值转换</span><br><span class=\"line\">      <span class=\"string\">\"no-extra-parens\"</span>: 0, //不允许出现不必要的圆括号</span><br><span class=\"line\">      <span class=\"string\">\"no-extra-semi\"</span>: 2, //不允许出现不必要的分号</span><br><span class=\"line\">      <span class=\"string\">\"no-func-assign\"</span>: 2, //不允许重新分配函数声明</span><br><span class=\"line\">      <span class=\"string\">\"no-inner-declarations\"</span>: [<span class=\"string\">\"error\"</span>, <span class=\"string\">\"functions\"</span>], //不允许在嵌套代码块里声明函数</span><br><span class=\"line\">      <span class=\"string\">\"no-invalid-regexp\"</span>: 2, //不允许在RegExp构造函数里出现无效的正则表达式</span><br><span class=\"line\">      <span class=\"string\">\"no-irregular-whitespace\"</span>: 2, //不允许出现不规则的空格</span><br><span class=\"line\">      <span class=\"string\">\"no-negated-in-lhs\"</span>: 2, //不允许在<span class=\"keyword\">in</span>表达式语句中对最左边的运算数使用取反操作</span><br><span class=\"line\">      <span class=\"string\">\"no-obj-calls\"</span>: 2, //不允许把全局对象属性当做函数来调用</span><br><span class=\"line\">      <span class=\"string\">\"no-regex-spaces\"</span>: 2, //正则表达式中不允许出现多个连续空格</span><br><span class=\"line\">      <span class=\"string\">\"quote-props\"</span>: 2, //对象中的属性名是否需要用引号引起来</span><br><span class=\"line\">      <span class=\"string\">\"no-sparse-arrays\"</span>: 2, //数组中不允许出现空位置</span><br><span class=\"line\">      <span class=\"string\">\"no-unreachable\"</span>: 2, //在<span class=\"built_in\">return</span>，throw，<span class=\"built_in\">continue</span>，<span class=\"built_in\">break</span>语句后不允许出现不可能到达的语句</span><br><span class=\"line\">      <span class=\"string\">\"use-isnan\"</span>: 2, //要求检查NaN的时候使用isNaN()</span><br><span class=\"line\">      <span class=\"string\">\"valid-jsdoc\"</span>: [<span class=\"string\">\"error\"</span>, &#123;</span><br><span class=\"line\">          <span class=\"string\">\"requireReturn\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">          <span class=\"string\">\"requireParamDescription\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">          <span class=\"string\">\"requireReturnDescription\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">      &#125;], //强制JSDoc注释</span><br><span class=\"line\">      <span class=\"string\">\"valid-typeof\"</span>: [<span class=\"string\">\"error\"</span>, &#123;</span><br><span class=\"line\">          <span class=\"string\">\"requireStringLiterals\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">      &#125;], //在使用typeof表达式比较的时候强制使用有效的字符串</span><br><span class=\"line\">      <span class=\"string\">\"block-scoped-var\"</span>: 2, //将变量声明放在合适的代码块里</span><br><span class=\"line\">      <span class=\"string\">\"complexity\"</span>: 0, //限制条件语句的复杂度</span><br><span class=\"line\">      <span class=\"string\">\"consistent-return\"</span>: 2, //无论有没有返回值都强制要求<span class=\"built_in\">return</span>语句返回一个值</span><br><span class=\"line\">      <span class=\"string\">\"curly\"</span>: [<span class=\"string\">\"error\"</span>, <span class=\"string\">\"all\"</span>], //强制使用花括号的风格</span><br><span class=\"line\">      <span class=\"string\">\"default-case\"</span>: 0, //在switch语句中需要有default语句</span><br><span class=\"line\">      <span class=\"string\">\"dot-notation\"</span>: [<span class=\"string\">\"error\"</span>, &#123;<span class=\"string\">\"allowKeywords\"</span>: <span class=\"literal\">false</span>, <span class=\"string\">\"allowPattern\"</span>: <span class=\"string\">\"\"</span>&#125;], //获取对象属性的时候使用点号</span><br><span class=\"line\">      <span class=\"string\">\"eqeqeq\"</span>: [<span class=\"string\">\"error\"</span>, <span class=\"string\">\"smart\"</span>], //比较的时候使用严格等于</span><br><span class=\"line\">      <span class=\"string\">\"no-alert\"</span>: 1, //不允许使用alert，confirm，prompt语句</span><br><span class=\"line\">      <span class=\"string\">\"no-caller\"</span>: 2, //不允许使用arguments.callee和arguments.caller属性</span><br><span class=\"line\">      <span class=\"string\">\"guard-for-in\"</span>: 0, //监视<span class=\"keyword\">for</span> <span class=\"keyword\">in</span>循环，防止出现不可预料的情况</span><br><span class=\"line\">      <span class=\"string\">\"no-div-regex\"</span>: 2, //不能使用看起来像除法的正则表达式</span><br><span class=\"line\">      <span class=\"string\">\"no-else-return\"</span>: 0, //如果<span class=\"keyword\">if</span>语句有<span class=\"built_in\">return</span>，<span class=\"keyword\">else</span>里的<span class=\"built_in\">return</span>不用放在<span class=\"keyword\">else</span>里</span><br><span class=\"line\">      <span class=\"string\">\"no-labels\"</span>: [<span class=\"string\">\"error\"</span>, &#123;</span><br><span class=\"line\">          <span class=\"string\">\"allowLoop\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">          <span class=\"string\">\"allowSwitch\"</span>: <span class=\"literal\">false</span></span><br><span class=\"line\">      &#125;], //不允许标签语句</span><br><span class=\"line\">      <span class=\"string\">\"no-eq-null\"</span>: 2, //不允许对null用==或者!=</span><br><span class=\"line\">      <span class=\"string\">\"no-eval\"</span>: 2, //不允许使用<span class=\"built_in\">eval</span>()</span><br><span class=\"line\">      <span class=\"string\">\"no-extend-native\"</span>: 2, //不允许扩展原生对象</span><br><span class=\"line\">      <span class=\"string\">\"no-extra-bind\"</span>: 2, //不允许不必要的函数绑定</span><br><span class=\"line\">      <span class=\"string\">\"no-fallthrough\"</span>: 2, //不允许switch按顺序全部执行所有<span class=\"keyword\">case</span></span><br><span class=\"line\">      <span class=\"string\">\"no-floating-decimal\"</span>: 2, //不允许浮点数缺失数字</span><br><span class=\"line\">      <span class=\"string\">\"no-implied-eval\"</span>: 2, //不允许使用隐式<span class=\"built_in\">eval</span>()</span><br><span class=\"line\">      <span class=\"string\">\"no-iterator\"</span>: 2, //不允许使用__iterator__属性</span><br><span class=\"line\">      <span class=\"string\">\"no-lone-blocks\"</span>: 2, //不允许不必要的嵌套代码块</span><br><span class=\"line\">      <span class=\"string\">\"no-loop-func\"</span>: 2, //不允许在循环语句中进行函数声明</span><br><span class=\"line\">      <span class=\"string\">\"no-multi-spaces\"</span>: 2, //不允许出现多余的空格</span><br><span class=\"line\">      <span class=\"string\">\"no-multi-str\"</span>: 2, //不允许用\\来让字符串换行</span><br><span class=\"line\">      <span class=\"string\">\"no-global-assign\"</span>: 2, //不允许重新分配原生对象</span><br><span class=\"line\">      <span class=\"string\">\"no-new\"</span>: 2, //不允许new一个实例后不赋值或者不比较</span><br><span class=\"line\">      <span class=\"string\">\"no-new-func\"</span>: 2, //不允许使用new Function</span><br><span class=\"line\">      <span class=\"string\">\"no-new-wrappers\"</span>: 2, //不允许使用new String，Number和Boolean对象</span><br><span class=\"line\">      <span class=\"string\">\"no-octal\"</span>: 2, //不允许使用八进制字面值</span><br><span class=\"line\">      <span class=\"string\">\"no-octal-escape\"</span>: 2, //不允许使用八进制转义序列</span><br><span class=\"line\">      <span class=\"string\">\"no-param-reassign\"</span>: 0, //不允许重新分配函数参数<span class=\"string\">\"no-proto\"</span>: 2, //不允许使用__proto__属性</span><br><span class=\"line\">      <span class=\"string\">\"no-redeclare\"</span>: 2, //不允许变量重复声明</span><br><span class=\"line\">      <span class=\"string\">\"no-return-assign\"</span>: 2, //不允许在<span class=\"built_in\">return</span>语句中使用分配语句</span><br><span class=\"line\">      <span class=\"string\">\"no-script-url\"</span>: 2, //不允许使用javascript:void(0)</span><br><span class=\"line\">      <span class=\"string\">\"no-self-compare\"</span>: 2, //不允许自己和自己比较</span><br><span class=\"line\">      <span class=\"string\">\"no-sequences\"</span>: 2, //不允许使用逗号表达式</span><br><span class=\"line\">      <span class=\"string\">\"no-throw-literal\"</span>: 2, //不允许抛出字面量错误 throw <span class=\"string\">\"error\"</span></span><br><span class=\"line\">      <span class=\"string\">\"no-unused-expressions\"</span>: 2, //不允许无用的表达式</span><br><span class=\"line\">      <span class=\"string\">\"no-void\"</span>: 2, //不允许void操作符</span><br><span class=\"line\">      <span class=\"string\">\"no-warning-comments\"</span>: [1, &#123;<span class=\"string\">\"terms\"</span>: [<span class=\"string\">\"todo\"</span>, <span class=\"string\">\"fixme\"</span>, <span class=\"string\">\"any other term\"</span>]&#125;], //不允许警告备注</span><br><span class=\"line\">      <span class=\"string\">\"no-with\"</span>: 2, //不允许使用with语句</span><br><span class=\"line\">      <span class=\"string\">\"radix\"</span>: 1, //使用parseInt时强制使用基数来指定是十进制还是其他进制</span><br><span class=\"line\">      <span class=\"string\">\"vars-on-top\"</span>: 0, //var必须放在作用域顶部</span><br><span class=\"line\">      <span class=\"string\">\"wrap-iife\"</span>: [2, <span class=\"string\">\"any\"</span>], //立即执行表达式的括号风格</span><br><span class=\"line\">      <span class=\"string\">\"yoda\"</span>: [2, <span class=\"string\">\"never\"</span>, &#123;<span class=\"string\">\"exceptRange\"</span>: <span class=\"literal\">true</span>&#125;], //不允许在<span class=\"keyword\">if</span>条件中使用yoda条件</span><br><span class=\"line\">      <span class=\"string\">\"strict\"</span>: [2, <span class=\"string\">\"function\"</span>], //使用严格模式</span><br><span class=\"line\">      <span class=\"string\">\"no-catch-shadow\"</span>: 2, //不允许try catch语句接受的err变量与外部变量重名<span class=\"string\">\"no-delete-var\"</span>: 2, //不允许使用delete操作符</span><br><span class=\"line\">      <span class=\"string\">\"no-label-var\"</span>: 2, //不允许标签和变量同名</span><br><span class=\"line\">      <span class=\"string\">\"no-shadow\"</span>: 2, //外部作用域中的变量不能与它所包含的作用域中的变量或参数同名</span><br><span class=\"line\">      <span class=\"string\">\"no-shadow-restricted-names\"</span>: 2, //js关键字和保留字不能作为函数名或者变量名</span><br><span class=\"line\">      <span class=\"string\">\"no-undef\"</span>: 2, //不允许未声明的变量</span><br><span class=\"line\">      <span class=\"string\">\"no-undef-init\"</span>: 2, //不允许初始化变量时给变量赋值undefined</span><br><span class=\"line\">      <span class=\"string\">\"no-undefined\"</span>: 2, //不允许把undefined当做标识符使用</span><br><span class=\"line\">      <span class=\"string\">\"no-unused-vars\"</span>: [2, &#123;<span class=\"string\">\"vars\"</span>: <span class=\"string\">\"all\"</span>, <span class=\"string\">\"args\"</span>: <span class=\"string\">\"after-used\"</span>&#125;], //不允许有声明后未使用的变量或者参数</span><br><span class=\"line\">      <span class=\"string\">\"no-use-before-define\"</span>: [2, <span class=\"string\">\"nofunc\"</span>], //不允许在未定义之前就使用变量<span class=\"string\">\"indent\"</span>: 2, //强制一致的缩进风格</span><br><span class=\"line\">      <span class=\"string\">\"brace-style\"</span>: [2, <span class=\"string\">\"1tbs\"</span>, &#123; <span class=\"string\">\"allowSingleLine\"</span>: <span class=\"literal\">false</span>&#125;], //大括号风格</span><br><span class=\"line\">      <span class=\"string\">\"camelcase\"</span>: [2, &#123;<span class=\"string\">\"properties\"</span>: <span class=\"string\">\"never\"</span>&#125;], //强制驼峰命名规则</span><br><span class=\"line\">      <span class=\"string\">\"comma-style\"</span>: [2, <span class=\"string\">\"last\"</span>], //逗号风格</span><br><span class=\"line\">      <span class=\"string\">\"consistent-this\"</span>: [0, <span class=\"string\">\"self\"</span>], //当获取当前环境的this是用一样的风格</span><br><span class=\"line\">      <span class=\"string\">\"eol-last\"</span>: 2, //文件以换行符结束</span><br><span class=\"line\">      <span class=\"string\">\"func-names\"</span>: 0, //函数表达式必须有名字</span><br><span class=\"line\">      <span class=\"string\">\"func-style\"</span>: 0, //函数风格，规定只能使用函数声明或者函数表达式</span><br><span class=\"line\">      <span class=\"string\">\"key-spacing\"</span>: [2, &#123;<span class=\"string\">\"beforeColon\"</span>: <span class=\"literal\">false</span>, <span class=\"string\">\"afterColon\"</span>: <span class=\"literal\">true</span>&#125;], //对象字面量中冒号的前后空格</span><br><span class=\"line\">      <span class=\"string\">\"max-nested-callbacks\"</span>: 0, //回调嵌套深度</span><br><span class=\"line\">      <span class=\"string\">\"new-cap\"</span>: [2, &#123;<span class=\"string\">\"newIsCap\"</span>: <span class=\"literal\">true</span>, <span class=\"string\">\"capIsNew\"</span>: <span class=\"literal\">false</span>&#125;], //构造函数名字首字母要大写</span><br><span class=\"line\">      <span class=\"string\">\"new-parens\"</span>: 2, //new时构造函数必须有小括号</span><br><span class=\"line\">      <span class=\"string\">\"newline-after-var\"</span>: 0, //变量声明后必须空一行</span><br><span class=\"line\">      <span class=\"string\">\"no-array-constructor\"</span>: 2, //不允许使用数组构造器</span><br><span class=\"line\">      <span class=\"string\">\"no-inline-comments\"</span>: 0, //不允许行内注释</span><br><span class=\"line\">      <span class=\"string\">\"no-lonely-if\"</span>: 0, //不允许<span class=\"keyword\">else</span>语句内只有<span class=\"keyword\">if</span>语句</span><br><span class=\"line\">      <span class=\"string\">\"no-mixed-spaces-and-tabs\"</span>: [2, <span class=\"string\">\"smart-tabs\"</span>], //不允许混用tab和空格</span><br><span class=\"line\">      <span class=\"string\">\"no-multiple-empty-lines\"</span>: [2, &#123;<span class=\"string\">\"max\"</span>: 2&#125;], //空行最多不能超过两行</span><br><span class=\"line\">      <span class=\"string\">\"no-nested-ternary\"</span>: 2, //不允许使用嵌套的三目运算符</span><br><span class=\"line\">      <span class=\"string\">\"no-new-object\"</span>: 2, //禁止使用new Object()</span><br><span class=\"line\">      <span class=\"string\">\"fun-call-spacing\"</span>: 2, //函数调用时，函数名与()之间不能有空格</span><br><span class=\"line\">      <span class=\"string\">\"no-ternary\"</span>: 0, //不允许使用三目运算符</span><br><span class=\"line\">      <span class=\"string\">\"no-trailing-spaces\"</span>: 2, //一行最后不允许有空格</span><br><span class=\"line\">      <span class=\"string\">\"no-underscore-dangle\"</span>: 2, //不允许标识符以下划线开头</span><br><span class=\"line\">      <span class=\"string\">\"no-extra-parens\"</span>: 0, //不允许出现多余的括号</span><br><span class=\"line\">      <span class=\"string\">\"one-var\"</span>: 0, //强制变量声明放在一起</span><br><span class=\"line\">      <span class=\"string\">\"operator-assignment\"</span>: 0, //赋值运算符的风格</span><br><span class=\"line\">      <span class=\"string\">\"padded-blocks\"</span>: [2, <span class=\"string\">\"never\"</span>], //块内行首行尾是否空行</span><br><span class=\"line\">      <span class=\"string\">\"quote-props\"</span>: 0, //对象字面量中属性名加引号</span><br><span class=\"line\">      <span class=\"string\">\"quotes\"</span>: [1, <span class=\"string\">\"single\"</span>, <span class=\"string\">\"avoid-escape\"</span>], //引号风格</span><br><span class=\"line\">      <span class=\"string\">\"semi\"</span>: [2, <span class=\"string\">\"always\"</span>], //强制语句分号结尾</span><br><span class=\"line\">      <span class=\"string\">\"semi-spacing\"</span>: [2, &#123;<span class=\"string\">\"before\"</span>: <span class=\"literal\">false</span>, <span class=\"string\">\"after\"</span>: <span class=\"literal\">true</span>&#125;], //分后前后空格</span><br><span class=\"line\">      <span class=\"string\">\"sort-vars\"</span>: 0, //变量声明时排序</span><br><span class=\"line\">      <span class=\"string\">\"space-before-blocks\"</span>: [2, <span class=\"string\">\"always\"</span>], //块前的空格</span><br><span class=\"line\">      <span class=\"string\">\"space-before-function-paren\"</span>: [2, &#123;<span class=\"string\">\"anonymous\"</span>: <span class=\"string\">\"always\"</span>, <span class=\"string\">\"named\"</span>: <span class=\"string\">\"never\"</span>&#125;], //函数定义时括号前的空格</span><br><span class=\"line\">      <span class=\"string\">\"space-infix-ops\"</span>: [2, &#123;<span class=\"string\">\"int32Hint\"</span>: <span class=\"literal\">true</span>&#125;], //操作符周围的空格</span><br><span class=\"line\">      <span class=\"string\">\"keyword-spacing\"</span>: 2, //关键字前后的空格</span><br><span class=\"line\">      <span class=\"string\">\"space-unary-ops\"</span>: [2, &#123; <span class=\"string\">\"words\"</span>: <span class=\"literal\">true</span>, <span class=\"string\">\"nonwords\"</span>: <span class=\"literal\">false</span>&#125;], //一元运算符前后不要加空格</span><br><span class=\"line\">      <span class=\"string\">\"wrap-regex\"</span>: 2, //正则表达式字面量用括号括起来</span><br><span class=\"line\">      <span class=\"string\">\"no-var\"</span>: 0, //使用<span class=\"built_in\">let</span>和const代替var</span><br><span class=\"line\">      <span class=\"string\">\"generator-star-spacing\"</span>: [2, <span class=\"string\">\"both\"</span>], //生成器函数前后空格</span><br><span class=\"line\">      <span class=\"string\">\"max-depth\"</span>: 0, //嵌套块深度</span><br><span class=\"line\">      <span class=\"string\">\"max-len\"</span>: 0, //一行最大长度，单位为字符</span><br><span class=\"line\">      <span class=\"string\">\"max-params\"</span>: 0, //函数最多能有多少个参数</span><br><span class=\"line\">      <span class=\"string\">\"max-statements\"</span>: 0, //函数内最多有几个声明</span><br><span class=\"line\">      <span class=\"string\">\"no-bitwise\"</span>: 0, //不允许使用位运算符</span><br><span class=\"line\">      <span class=\"string\">\"no-plusplus\"</span>: 0 //不允许使用++ --运算符</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"FaceBook-React\"><a href=\"#FaceBook-React\" class=\"headerlink\" title=\"FaceBook React\"></a>FaceBook React</h3><p><a href=\"https://github.com/facebook/react/blob/master/.eslintrc.js\">facebook/react</a></p>\n"},{"title":"在Linux服务器上Nginx部署vue静态项目","date":"2019-09-11T13:56:37.000Z","_content":"## 前言\n最近看了看nginx，觉得挺好玩，刚好自己有一个VPN测试服务器，就自己敲了一遍，部署一个vue-cli初始化项目\n～另外给大家推荐一个免费试玩的服务器[腾讯云☁️实验室](https://cloud.tencent.com/developer/labs/lab/10078),每天有大约6个小时的时间可以使用，两个ubuntu，一个ubuntu是3小时\n3 + 3 = 6\n## 安装\n### nginx安装\n～命令行输入\n``` s\nwget http://nginx.org/download/nginx-1.12.2.tar.gz\n\n```\n``` s\n# 安装依赖\nyum -y install gcc zlib zlib-devel pcre-devel openssl openssl-devel\n# 解压缩\ntar -zxvf linux-nginx-1.12.2.tar.gz\ncd nginx-1.12.2/\n# 执行配置\n./configure\n# 编译安装(默认安装在/usr/local/nginx)\nmake\nmake install\n```\n一顿闪烁之后你将发现你的/usr/local下多了个nginx文件夹\n验证信息：\nnginx主配置文件：/usr/local/nginx/conf/nginx.conf\nnginx日志文件：/usr/local/nginx/logs/access.log\n启动Nginx：/usr/local/nginx/sbin/nginx\n\n然后直接访问ip地址，比如\\：http://192.168.1.1/\\，如果能看到如下Nginx主页说明安装成功了\n\n![](https://raw.githubusercontent.com/chengheai/review-demo-image/master/14795543-4ea3783126a0d378.webp)\n\n## 上传部署文件\nwindow机器可以使用winscp上传\nmac的话可以使用lrzsz\n这个使用mac\n执行命令\n\n``` shell\n# 打包\ntar zcvf dist.tar.gz dist/\n# 解压\ntar zxvf dist.tar.gz\n```\n在根目录下新建nginx文件夹\n``` shell\nmkdir ~/nginx\ncp -rf dist ./../vue\n```\n运行下面这段话可以nginx的配置文件\n``` shell\n$ sudo /usr/local/nginx/sbin/nginx -t\n# 下面这行代码说明 nginx 的配置文件是 /usr/local/nginx/conf/nginx.conf\nnginx: the configuration file /usr/local/nginx/conf/nginx.conf syntax is ok\nnginx: configuration file /usr/local/nginx/conf/nginx.conf test is successful\n```\n## 配置nginx\n![](https://github.com/chengheai/review-demo-image/blob/master/WechatIMG211.png?raw=true)\n修改完毕，保存退出。运行以下命令来重启 Nginx，让配置生效：\nsudo /usr/local/nginx/sbin/nginx -s reload\n刚开始因为没有配置权限，访问会出现403 Forbidden错误\n``` shell\n sudo chmod 755 ~\n sudo chmod 755 ~/nginx\n sudo chmod 755 ~/nginx/vue\n```\n最后，你能看到下面的页面\n![](https://github.com/chengheai/review-demo-image/blob/master/WX20190911-224210@2x.png?raw=true)","source":"_posts/在Linux服务器上部署vue静态项目.md","raw":"---\ntitle: 在Linux服务器上Nginx部署vue静态项目\ndate: 2019-09-11 21:56:37\ntags: ['linux','部署', 'vue']\n---\n## 前言\n最近看了看nginx，觉得挺好玩，刚好自己有一个VPN测试服务器，就自己敲了一遍，部署一个vue-cli初始化项目\n～另外给大家推荐一个免费试玩的服务器[腾讯云☁️实验室](https://cloud.tencent.com/developer/labs/lab/10078),每天有大约6个小时的时间可以使用，两个ubuntu，一个ubuntu是3小时\n3 + 3 = 6\n## 安装\n### nginx安装\n～命令行输入\n``` s\nwget http://nginx.org/download/nginx-1.12.2.tar.gz\n\n```\n``` s\n# 安装依赖\nyum -y install gcc zlib zlib-devel pcre-devel openssl openssl-devel\n# 解压缩\ntar -zxvf linux-nginx-1.12.2.tar.gz\ncd nginx-1.12.2/\n# 执行配置\n./configure\n# 编译安装(默认安装在/usr/local/nginx)\nmake\nmake install\n```\n一顿闪烁之后你将发现你的/usr/local下多了个nginx文件夹\n验证信息：\nnginx主配置文件：/usr/local/nginx/conf/nginx.conf\nnginx日志文件：/usr/local/nginx/logs/access.log\n启动Nginx：/usr/local/nginx/sbin/nginx\n\n然后直接访问ip地址，比如\\：http://192.168.1.1/\\，如果能看到如下Nginx主页说明安装成功了\n\n![](https://raw.githubusercontent.com/chengheai/review-demo-image/master/14795543-4ea3783126a0d378.webp)\n\n## 上传部署文件\nwindow机器可以使用winscp上传\nmac的话可以使用lrzsz\n这个使用mac\n执行命令\n\n``` shell\n# 打包\ntar zcvf dist.tar.gz dist/\n# 解压\ntar zxvf dist.tar.gz\n```\n在根目录下新建nginx文件夹\n``` shell\nmkdir ~/nginx\ncp -rf dist ./../vue\n```\n运行下面这段话可以nginx的配置文件\n``` shell\n$ sudo /usr/local/nginx/sbin/nginx -t\n# 下面这行代码说明 nginx 的配置文件是 /usr/local/nginx/conf/nginx.conf\nnginx: the configuration file /usr/local/nginx/conf/nginx.conf syntax is ok\nnginx: configuration file /usr/local/nginx/conf/nginx.conf test is successful\n```\n## 配置nginx\n![](https://github.com/chengheai/review-demo-image/blob/master/WechatIMG211.png?raw=true)\n修改完毕，保存退出。运行以下命令来重启 Nginx，让配置生效：\nsudo /usr/local/nginx/sbin/nginx -s reload\n刚开始因为没有配置权限，访问会出现403 Forbidden错误\n``` shell\n sudo chmod 755 ~\n sudo chmod 755 ~/nginx\n sudo chmod 755 ~/nginx/vue\n```\n最后，你能看到下面的页面\n![](https://github.com/chengheai/review-demo-image/blob/master/WX20190911-224210@2x.png?raw=true)","slug":"在Linux服务器上部署vue静态项目","published":1,"updated":"2021-10-09T08:48:32.087Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzae5007f5c54a6b0iauu","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>最近看了看nginx，觉得挺好玩，刚好自己有一个VPN测试服务器，就自己敲了一遍，部署一个vue-cli初始化项目<br>～另外给大家推荐一个免费试玩的服务器<a href=\"https://cloud.tencent.com/developer/labs/lab/10078\" target=\"_blank\" rel=\"noopener\">腾讯云☁️实验室</a>,每天有大约6个小时的时间可以使用，两个ubuntu，一个ubuntu是3小时<br>3 + 3 = 6</p>\n<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><h3 id=\"nginx安装\"><a href=\"#nginx安装\" class=\"headerlink\" title=\"nginx安装\"></a>nginx安装</h3><p>～命令行输入<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http://nginx.org/download/nginx-1.12.2.tar.gz</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 安装依赖</span><br><span class=\"line\">yum -y install gcc zlib zlib-devel pcre-devel openssl openssl-devel</span><br><span class=\"line\"># 解压缩</span><br><span class=\"line\">tar -zxvf linux-nginx-1.12.2.tar.gz</span><br><span class=\"line\">cd nginx-1.12.2/</span><br><span class=\"line\"># 执行配置</span><br><span class=\"line\">./configure</span><br><span class=\"line\"># 编译安装(默认安装在/usr/local/nginx)</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<p>一顿闪烁之后你将发现你的/usr/local下多了个nginx文件夹<br>验证信息：<br>nginx主配置文件：/usr/local/nginx/conf/nginx.conf<br>nginx日志文件：/usr/local/nginx/logs/access.log<br>启动Nginx：/usr/local/nginx/sbin/nginx</p>\n<p>然后直接访问ip地址，比如\\：<a href=\"http://192.168.1.1/\\，如果能看到如下Nginx主页说明安装成功了\" target=\"_blank\" rel=\"noopener\">http://192.168.1.1/\\，如果能看到如下Nginx主页说明安装成功了</a></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://raw.githubusercontent.com/chengheai/review-demo-image/master/14795543-4ea3783126a0d378.webp\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"上传部署文件\"><a href=\"#上传部署文件\" class=\"headerlink\" title=\"上传部署文件\"></a>上传部署文件</h2><p>window机器可以使用winscp上传<br>mac的话可以使用lrzsz<br>这个使用mac<br>执行命令</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 打包</span></span><br><span class=\"line\">tar zcvf dist.tar.gz dist/</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 解压</span></span><br><span class=\"line\">tar zxvf dist.tar.gz</span><br></pre></td></tr></table></figure>\n<p>在根目录下新建nginx文件夹<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir ~/nginx</span><br><span class=\"line\">cp -rf dist ./../vue</span><br></pre></td></tr></table></figure></p>\n<p>运行下面这段话可以nginx的配置文件<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo /usr/<span class=\"built_in\">local</span>/nginx/sbin/nginx -t</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 下面这行代码说明 nginx 的配置文件是 /usr/<span class=\"built_in\">local</span>/nginx/conf/nginx.conf</span></span><br><span class=\"line\">nginx: the configuration file /usr/local/nginx/conf/nginx.conf syntax is ok</span><br><span class=\"line\">nginx: configuration file /usr/local/nginx/conf/nginx.conf test is successful</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"配置nginx\"><a href=\"#配置nginx\" class=\"headerlink\" title=\"配置nginx\"></a>配置nginx</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WechatIMG211.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>修改完毕，保存退出。运行以下命令来重启 Nginx，让配置生效：<br>sudo /usr/local/nginx/sbin/nginx -s reload<br>刚开始因为没有配置权限，访问会出现403 Forbidden错误<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo chmod 755 ~</span><br><span class=\"line\">sudo chmod 755 ~/nginx</span><br><span class=\"line\">sudo chmod 755 ~/nginx/vue</span><br></pre></td></tr></table></figure></p>\n<p>最后，你能看到下面的页面<br><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WX20190911-224210@2x.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>最近看了看nginx，觉得挺好玩，刚好自己有一个VPN测试服务器，就自己敲了一遍，部署一个vue-cli初始化项目<br>～另外给大家推荐一个免费试玩的服务器<a href=\"https://cloud.tencent.com/developer/labs/lab/10078\" target=\"_blank\" rel=\"noopener\">腾讯云☁️实验室</a>,每天有大约6个小时的时间可以使用，两个ubuntu，一个ubuntu是3小时<br>3 + 3 = 6</p>\n<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><h3 id=\"nginx安装\"><a href=\"#nginx安装\" class=\"headerlink\" title=\"nginx安装\"></a>nginx安装</h3><p>～命令行输入<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http://nginx.org/download/nginx-1.12.2.tar.gz</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 安装依赖</span><br><span class=\"line\">yum -y install gcc zlib zlib-devel pcre-devel openssl openssl-devel</span><br><span class=\"line\"># 解压缩</span><br><span class=\"line\">tar -zxvf linux-nginx-1.12.2.tar.gz</span><br><span class=\"line\">cd nginx-1.12.2/</span><br><span class=\"line\"># 执行配置</span><br><span class=\"line\">./configure</span><br><span class=\"line\"># 编译安装(默认安装在/usr/local/nginx)</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<p>一顿闪烁之后你将发现你的/usr/local下多了个nginx文件夹<br>验证信息：<br>nginx主配置文件：/usr/local/nginx/conf/nginx.conf<br>nginx日志文件：/usr/local/nginx/logs/access.log<br>启动Nginx：/usr/local/nginx/sbin/nginx</p>\n<p>然后直接访问ip地址，比如\\：<a href=\"http://192.168.1.1/\\，如果能看到如下Nginx主页说明安装成功了\" target=\"_blank\" rel=\"noopener\">http://192.168.1.1/\\，如果能看到如下Nginx主页说明安装成功了</a></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://raw.githubusercontent.com/chengheai/review-demo-image/master/14795543-4ea3783126a0d378.webp\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"上传部署文件\"><a href=\"#上传部署文件\" class=\"headerlink\" title=\"上传部署文件\"></a>上传部署文件</h2><p>window机器可以使用winscp上传<br>mac的话可以使用lrzsz<br>这个使用mac<br>执行命令</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 打包</span></span><br><span class=\"line\">tar zcvf dist.tar.gz dist/</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 解压</span></span><br><span class=\"line\">tar zxvf dist.tar.gz</span><br></pre></td></tr></table></figure>\n<p>在根目录下新建nginx文件夹<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir ~/nginx</span><br><span class=\"line\">cp -rf dist ./../vue</span><br></pre></td></tr></table></figure></p>\n<p>运行下面这段话可以nginx的配置文件<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo /usr/<span class=\"built_in\">local</span>/nginx/sbin/nginx -t</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 下面这行代码说明 nginx 的配置文件是 /usr/<span class=\"built_in\">local</span>/nginx/conf/nginx.conf</span></span><br><span class=\"line\">nginx: the configuration file /usr/local/nginx/conf/nginx.conf syntax is ok</span><br><span class=\"line\">nginx: configuration file /usr/local/nginx/conf/nginx.conf test is successful</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"配置nginx\"><a href=\"#配置nginx\" class=\"headerlink\" title=\"配置nginx\"></a>配置nginx</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WechatIMG211.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>修改完毕，保存退出。运行以下命令来重启 Nginx，让配置生效：<br>sudo /usr/local/nginx/sbin/nginx -s reload<br>刚开始因为没有配置权限，访问会出现403 Forbidden错误<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo chmod 755 ~</span><br><span class=\"line\">sudo chmod 755 ~/nginx</span><br><span class=\"line\">sudo chmod 755 ~/nginx/vue</span><br></pre></td></tr></table></figure></p>\n<p>最后，你能看到下面的页面<br><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.com/chengheai/review-demo-image/blob/master/WX20190911-224210@2x.png?raw=true\" alt title>\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></p>\n"},{"title":"原生js实现点击复制文本","date":"2019-08-05T12:54:12.000Z","_content":"## 参考文档\n[queryCommandState](https://developer.mozilla.org/en-US/docs/Web/API/Document/queryCommandState)\n[clipboardData](https://developer.mozilla.org/en-US/docs/Web/API/ClipboardEvent/clipboardData)\n[queryCommandSupported](https://developer.mozilla.org/en-US/docs/Web/API/Document/queryCommandSupported)\n[execCommand](https://developer.mozilla.org/en-US/docs/Web/API/Document/execCommand)\n## 预览\n[demo](https://chengheai.github.io/daily-vue-demo/#/copy-board)\n## 代码\n``` javascript\n  handleCopy(text) {\n    if (window.clipboardData && window.clipboardData.setData) {\n      return window.clipboardData.setData('Text', text);\n    } else if (document.queryCommandSupported && document.queryCommandSupported('copy')) {\n      const textarea = document.createElement('textarea');\n      textarea.textContent = text;\n      textarea.style.position = 'fixed';\n      textarea.style.bottom = '0';\n      textarea.style.zIndex = '99999';\n      document.body.appendChild(textarea);\n      textarea.select();\n      try {\n        return document.execCommand('copy');\n      } catch (ex) {\n        // eslint-disable-next-line\n        console.warn('Copy to clipboard failed.', ex);\n        return false;\n      } finally {\n        document.body.removeChild(textarea);\n      }\n    }\n  }\n```\n\n","source":"_posts/原生js实现点击复制文本.md","raw":"---\ntitle: 原生js实现点击复制文本\ndate: 2019-08-05 20:54:12\ntags: ['小技巧']\n---\n## 参考文档\n[queryCommandState](https://developer.mozilla.org/en-US/docs/Web/API/Document/queryCommandState)\n[clipboardData](https://developer.mozilla.org/en-US/docs/Web/API/ClipboardEvent/clipboardData)\n[queryCommandSupported](https://developer.mozilla.org/en-US/docs/Web/API/Document/queryCommandSupported)\n[execCommand](https://developer.mozilla.org/en-US/docs/Web/API/Document/execCommand)\n## 预览\n[demo](https://chengheai.github.io/daily-vue-demo/#/copy-board)\n## 代码\n``` javascript\n  handleCopy(text) {\n    if (window.clipboardData && window.clipboardData.setData) {\n      return window.clipboardData.setData('Text', text);\n    } else if (document.queryCommandSupported && document.queryCommandSupported('copy')) {\n      const textarea = document.createElement('textarea');\n      textarea.textContent = text;\n      textarea.style.position = 'fixed';\n      textarea.style.bottom = '0';\n      textarea.style.zIndex = '99999';\n      document.body.appendChild(textarea);\n      textarea.select();\n      try {\n        return document.execCommand('copy');\n      } catch (ex) {\n        // eslint-disable-next-line\n        console.warn('Copy to clipboard failed.', ex);\n        return false;\n      } finally {\n        document.body.removeChild(textarea);\n      }\n    }\n  }\n```\n\n","slug":"原生js实现点击复制文本","published":1,"updated":"2021-10-09T08:48:32.087Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckumjzae7007g5c543m196mqq","content":"<h2 id=\"参考文档\"><a href=\"#参考文档\" class=\"headerlink\" title=\"参考文档\"></a>参考文档</h2><p><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Document/queryCommandState\" target=\"_blank\" rel=\"noopener\">queryCommandState</a><br><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/ClipboardEvent/clipboardData\" target=\"_blank\" rel=\"noopener\">clipboardData</a><br><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Document/queryCommandSupported\" target=\"_blank\" rel=\"noopener\">queryCommandSupported</a><br><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Document/execCommand\" target=\"_blank\" rel=\"noopener\">execCommand</a></p>\n<h2 id=\"预览\"><a href=\"#预览\" class=\"headerlink\" title=\"预览\"></a>预览</h2><p><a href=\"https://chengheai.github.io/daily-vue-demo/#/copy-board\" target=\"_blank\" rel=\"noopener\">demo</a></p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">handleCopy(text) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">window</span>.clipboardData &amp;&amp; <span class=\"built_in\">window</span>.clipboardData.setData) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">window</span>.clipboardData.setData(<span class=\"string\">'Text'</span>, text);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"built_in\">document</span>.queryCommandSupported &amp;&amp; <span class=\"built_in\">document</span>.queryCommandSupported(<span class=\"string\">'copy'</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> textarea = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'textarea'</span>);</span><br><span class=\"line\">    textarea.textContent = text;</span><br><span class=\"line\">    textarea.style.position = <span class=\"string\">'fixed'</span>;</span><br><span class=\"line\">    textarea.style.bottom = <span class=\"string\">'0'</span>;</span><br><span class=\"line\">    textarea.style.zIndex = <span class=\"string\">'99999'</span>;</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.body.appendChild(textarea);</span><br><span class=\"line\">    textarea.select();</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">document</span>.execCommand(<span class=\"string\">'copy'</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (ex) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// eslint-disable-next-line</span></span><br><span class=\"line\">      <span class=\"built_in\">console</span>.warn(<span class=\"string\">'Copy to clipboard failed.'</span>, ex);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">document</span>.body.removeChild(textarea);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"参考文档\"><a href=\"#参考文档\" class=\"headerlink\" title=\"参考文档\"></a>参考文档</h2><p><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Document/queryCommandState\" target=\"_blank\" rel=\"noopener\">queryCommandState</a><br><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/ClipboardEvent/clipboardData\" target=\"_blank\" rel=\"noopener\">clipboardData</a><br><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Document/queryCommandSupported\" target=\"_blank\" rel=\"noopener\">queryCommandSupported</a><br><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Document/execCommand\" target=\"_blank\" rel=\"noopener\">execCommand</a></p>\n<h2 id=\"预览\"><a href=\"#预览\" class=\"headerlink\" title=\"预览\"></a>预览</h2><p><a href=\"https://chengheai.github.io/daily-vue-demo/#/copy-board\" target=\"_blank\" rel=\"noopener\">demo</a></p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">handleCopy(text) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">window</span>.clipboardData &amp;&amp; <span class=\"built_in\">window</span>.clipboardData.setData) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">window</span>.clipboardData.setData(<span class=\"string\">'Text'</span>, text);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"built_in\">document</span>.queryCommandSupported &amp;&amp; <span class=\"built_in\">document</span>.queryCommandSupported(<span class=\"string\">'copy'</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> textarea = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'textarea'</span>);</span><br><span class=\"line\">    textarea.textContent = text;</span><br><span class=\"line\">    textarea.style.position = <span class=\"string\">'fixed'</span>;</span><br><span class=\"line\">    textarea.style.bottom = <span class=\"string\">'0'</span>;</span><br><span class=\"line\">    textarea.style.zIndex = <span class=\"string\">'99999'</span>;</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.body.appendChild(textarea);</span><br><span class=\"line\">    textarea.select();</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">document</span>.execCommand(<span class=\"string\">'copy'</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (ex) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// eslint-disable-next-line</span></span><br><span class=\"line\">      <span class=\"built_in\">console</span>.warn(<span class=\"string\">'Copy to clipboard failed.'</span>, ex);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">document</span>.body.removeChild(textarea);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"ckumjzaav000h5c54di6iovjt","category_id":"ckumjzaay000l5c541lxuv2nf","_id":"ckumjzab5000u5c54ilfqlh2g"},{"post_id":"ckumjzabd00155c547vjzurij","category_id":"ckumjzabf00195c54nmfj3662","_id":"ckumjzabk001k5c546cjoqlw1"},{"post_id":"ckumjzabe00175c54blnxykbi","category_id":"ckumjzabi001f5c54fd8bdkc9","_id":"ckumjzabn001r5c54u0u5crum"},{"post_id":"ckumjzabg001c5c54djqf6lmf","category_id":"ckumjzabk001l5c548wroa195","_id":"ckumjzabp001x5c54er3bw3p9"},{"post_id":"ckumjzabh001e5c54bzuzzzqe","category_id":"ckumjzabn001s5c54z4zho8u1","_id":"ckumjzabr00225c54pgx2j295"},{"post_id":"ckumjzacj003k5c546p2kfiqu","category_id":"ckumjzacl003n5c54mnf1rt4l","_id":"ckumjzacs003y5c54kybqvvgc"}],"PostTag":[{"post_id":"ckumjzaa800025c54rutaoi48","tag_id":"ckumjzaah00045c544izmqfbq","_id":"ckumjzaar000d5c54r5pnu2wf"},{"post_id":"ckumjzaa800025c54rutaoi48","tag_id":"ckumjzaan00085c542qfcgcrx","_id":"ckumjzaas000f5c543qgilc0l"},{"post_id":"ckumjzaai00055c54zbafpn5x","tag_id":"ckumjzaap000b5c54cika3tlw","_id":"ckumjzaax000i5c54km8hubqk"},{"post_id":"ckumjzaak00065c54taolejrn","tag_id":"ckumjzaap000b5c54cika3tlw","_id":"ckumjzaaz000n5c54h608hk28"},{"post_id":"ckumjzaal00075c54yyqwlaeg","tag_id":"ckumjzaay000k5c54jqzo2j39","_id":"ckumjzab1000r5c54pyd9vmqc"},{"post_id":"ckumjzaan00095c54kwgve51i","tag_id":"ckumjzab0000p5c5495h8x0sp","_id":"ckumjzab5000w5c548m9sxo3y"},{"post_id":"ckumjzaao000a5c54n1l7oym0","tag_id":"ckumjzab5000v5c54x7m6y36o","_id":"ckumjzabb00115c54agm1x5gu"},{"post_id":"ckumjzaaq000c5c54nwjijcjs","tag_id":"ckumjzab9000z5c54koytacwz","_id":"ckumjzabf00185c54ney7qrce"},{"post_id":"ckumjzaaq000c5c54nwjijcjs","tag_id":"ckumjzabc00135c54rzridczv","_id":"ckumjzabg001b5c54i6zbq3oy"},{"post_id":"ckumjzaar000e5c54dhvj1pxi","tag_id":"ckumjzabe00165c54t77oylq6","_id":"ckumjzabj001i5c54z2jhteby"},{"post_id":"ckumjzaar000e5c54dhvj1pxi","tag_id":"ckumjzabc00135c54rzridczv","_id":"ckumjzabl001m5c542mcpnkm1"},{"post_id":"ckumjzaav000h5c54di6iovjt","tag_id":"ckumjzabi001h5c54tn2vlysq","_id":"ckumjzabm001q5c54vtw4o0ix"},{"post_id":"ckumjzaax000j5c54xefeeall","tag_id":"ckumjzabl001o5c54c474mtn0","_id":"ckumjzabp001w5c54zuycg503"},{"post_id":"ckumjzaay000m5c54nkhwas3x","tag_id":"ckumjzabo001u5c546sseixdd","_id":"ckumjzabr00215c5488wjmrg2"},{"post_id":"ckumjzaaz000o5c54byi411pp","tag_id":"ckumjzabo001u5c546sseixdd","_id":"ckumjzabt00265c54kdil3e8y"},{"post_id":"ckumjzabr00235c54kmi0x08r","tag_id":"ckumjzabc00135c54rzridczv","_id":"ckumjzabu00285c54u1jmgbft"},{"post_id":"ckumjzabs00255c54e9kf73za","tag_id":"ckumjzabc00135c54rzridczv","_id":"ckumjzabw002b5c54sc9w0hwm"},{"post_id":"ckumjzab0000q5c54uds3mt3j","tag_id":"ckumjzab9000z5c54koytacwz","_id":"ckumjzabx002d5c54baa5qtbe"},{"post_id":"ckumjzabu00275c54qd7jdfk0","tag_id":"ckumjzab9000z5c54koytacwz","_id":"ckumjzaby002g5c54j2rtwhi1"},{"post_id":"ckumjzabu00275c54qd7jdfk0","tag_id":"ckumjzabc00135c54rzridczv","_id":"ckumjzabz002i5c54eerpr4ip"},{"post_id":"ckumjzabv002a5c549ny0kwla","tag_id":"ckumjzabc00135c54rzridczv","_id":"ckumjzac0002l5c54y31tb5yh"},{"post_id":"ckumjzabv002a5c549ny0kwla","tag_id":"ckumjzaan00085c542qfcgcrx","_id":"ckumjzac1002n5c54y9k93k0z"},{"post_id":"ckumjzab1000s5c54jah0v4ii","tag_id":"ckumjzabo001u5c546sseixdd","_id":"ckumjzac2002q5c542xsfjrxk"},{"post_id":"ckumjzac1002m5c54vtq1o3ve","tag_id":"ckumjzabc00135c54rzridczv","_id":"ckumjzac6002s5c542m2qzqmq"},{"post_id":"ckumjzac1002m5c54vtq1o3ve","tag_id":"ckumjzab9000z5c54koytacwz","_id":"ckumjzac8002v5c54mk4krnr3"},{"post_id":"ckumjzab4000t5c54xq29wny8","tag_id":"ckumjzabx002e5c54o9g0vy6r","_id":"ckumjzac9002x5c54yda0jv39"},{"post_id":"ckumjzab4000t5c54xq29wny8","tag_id":"ckumjzabc00135c54rzridczv","_id":"ckumjzaca00305c54q94vwk88"},{"post_id":"ckumjzab6000x5c54v3odcqiz","tag_id":"ckumjzac2002p5c54isn4fvxy","_id":"ckumjzacb00325c54w372603h"},{"post_id":"ckumjzab7000y5c54squpfvre","tag_id":"ckumjzab9000z5c54koytacwz","_id":"ckumjzacc00355c54ozsg71po"},{"post_id":"ckumjzac9002y5c54ghviqt2s","tag_id":"ckumjzab9000z5c54koytacwz","_id":"ckumjzacd00375c54mxxygajr"},{"post_id":"ckumjzab900105c54lom62bml","tag_id":"ckumjzac2002p5c54isn4fvxy","_id":"ckumjzace003a5c54kln4nuo1"},{"post_id":"ckumjzabb00125c54f96wpu8c","tag_id":"ckumjzac2002p5c54isn4fvxy","_id":"ckumjzacf003c5c54mfew7xt5"},{"post_id":"ckumjzabc00145c54bj8ches2","tag_id":"ckumjzace00395c54qx3ofevm","_id":"ckumjzach003g5c54qf22ljx7"},{"post_id":"ckumjzach003f5c54hrxzxo5g","tag_id":"ckumjzace00395c54qx3ofevm","_id":"ckumjzacj003j5c54w1wd3gru"},{"post_id":"ckumjzabd00155c547vjzurij","tag_id":"ckumjzac2002p5c54isn4fvxy","_id":"ckumjzack003l5c54n4ifanos"},{"post_id":"ckumjzacm003p5c546tqx9d55","tag_id":"ckumjzaan00085c542qfcgcrx","_id":"ckumjzacn003r5c54fw34raq5"},{"post_id":"ckumjzacm003q5c542g1mmh56","tag_id":"ckumjzab5000v5c54x7m6y36o","_id":"ckumjzacp003u5c54sve39eh0"},{"post_id":"ckumjzabe00175c54blnxykbi","tag_id":"ckumjzacj003i5c54wh1m1hba","_id":"ckumjzacr003w5c54s1ye3kqy"},{"post_id":"ckumjzabe00175c54blnxykbi","tag_id":"ckumjzacl003o5c54cyp40tit","_id":"ckumjzacs00405c54e9zb8quf"},{"post_id":"ckumjzacn003s5c54fnra30vf","tag_id":"ckumjzabc00135c54rzridczv","_id":"ckumjzact00415c546ycsxktr"},{"post_id":"ckumjzabf001a5c54idj32buc","tag_id":"ckumjzacp003t5c5492v9r6e7","_id":"ckumjzact00445c54qdi1jcv7"},{"post_id":"ckumjzabf001a5c54idj32buc","tag_id":"ckumjzacs003z5c54v4rlu10n","_id":"ckumjzact00455c54ooo9yv54"},{"post_id":"ckumjzabf001a5c54idj32buc","tag_id":"ckumjzact00425c54jhlna9o8","_id":"ckumjzacu00475c54lv72lboq"},{"post_id":"ckumjzabg001c5c54djqf6lmf","tag_id":"ckumjzace00395c54qx3ofevm","_id":"ckumjzacu004a5c54u49l02ks"},{"post_id":"ckumjzabg001c5c54djqf6lmf","tag_id":"ckumjzacj003i5c54wh1m1hba","_id":"ckumjzacv004b5c54ln5zb48a"},{"post_id":"ckumjzabg001c5c54djqf6lmf","tag_id":"ckumjzacu00485c54ddx9kd4f","_id":"ckumjzacv004d5c54d2z7hyet"},{"post_id":"ckumjzabh001e5c54bzuzzzqe","tag_id":"ckumjzacu00495c54tp4z4m1p","_id":"ckumjzacz004r5c54dec4nn8a"},{"post_id":"ckumjzabh001e5c54bzuzzzqe","tag_id":"ckumjzacv004c5c54dyyn5jql","_id":"ckumjzacz004s5c54eslclqpx"},{"post_id":"ckumjzabh001e5c54bzuzzzqe","tag_id":"ckumjzacv004e5c54cz141ug3","_id":"ckumjzacz004u5c54he7at5pj"},{"post_id":"ckumjzabh001e5c54bzuzzzqe","tag_id":"ckumjzacv004f5c54wu574mjp","_id":"ckumjzacz004v5c54bkdsruhz"},{"post_id":"ckumjzabh001e5c54bzuzzzqe","tag_id":"ckumjzacv004g5c547v1gtfxf","_id":"ckumjzacz004x5c54uwynq03v"},{"post_id":"ckumjzabh001e5c54bzuzzzqe","tag_id":"ckumjzace00395c54qx3ofevm","_id":"ckumjzad0004y5c54shhxok8a"},{"post_id":"ckumjzabh001e5c54bzuzzzqe","tag_id":"ckumjzacw004i5c54iz1kffev","_id":"ckumjzad000505c54fj7d4jwj"},{"post_id":"ckumjzabh001e5c54bzuzzzqe","tag_id":"ckumjzacw004j5c54zm1dv6e8","_id":"ckumjzad400515c54ryk3qyfi"},{"post_id":"ckumjzabh001e5c54bzuzzzqe","tag_id":"ckumjzacw004k5c54s6c3kp1k","_id":"ckumjzad400525c54m41b2o8w"},{"post_id":"ckumjzabh001e5c54bzuzzzqe","tag_id":"ckumjzacj003i5c54wh1m1hba","_id":"ckumjzad400545c54h24syxud"},{"post_id":"ckumjzabh001e5c54bzuzzzqe","tag_id":"ckumjzacx004m5c54l9vbwyn1","_id":"ckumjzad400555c54lvdafq77"},{"post_id":"ckumjzabh001e5c54bzuzzzqe","tag_id":"ckumjzacx004n5c548m38nc0x","_id":"ckumjzad400575c54e7msib1j"},{"post_id":"ckumjzabh001e5c54bzuzzzqe","tag_id":"ckumjzacx004o5c541m4yvl65","_id":"ckumjzad400585c54h6vf3vxs"},{"post_id":"ckumjzabh001e5c54bzuzzzqe","tag_id":"ckumjzacx004p5c5499dzhz26","_id":"ckumjzad5005a5c54969bna6j"},{"post_id":"ckumjzabi001g5c549ibuw4gd","tag_id":"ckumjzacy004q5c54y7kj8b0v","_id":"ckumjzad5005b5c54ejkrlk0p"},{"post_id":"ckumjzabj001j5c543spchu1w","tag_id":"ckumjzacz004t5c5401m0bup7","_id":"ckumjzad5005d5c5471gvmuro"},{"post_id":"ckumjzabj001j5c543spchu1w","tag_id":"ckumjzacz004w5c54yhy2t52o","_id":"ckumjzad5005e5c54se2gcmpe"},{"post_id":"ckumjzabl001n5c547a26o891","tag_id":"ckumjzabc00135c54rzridczv","_id":"ckumjzad6005g5c54fh1dx5pi"},{"post_id":"ckumjzabl001n5c547a26o891","tag_id":"ckumjzad0004z5c547ft5q8ig","_id":"ckumjzad6005h5c54ffdyx1wc"},{"post_id":"ckumjzabl001n5c547a26o891","tag_id":"ckumjzaah00045c544izmqfbq","_id":"ckumjzad6005j5c54eyus3vho"},{"post_id":"ckumjzabm001p5c54qnlrj8gw","tag_id":"ckumjzad400535c54xr377dsq","_id":"ckumjzad7005k5c545r1pawqk"},{"post_id":"ckumjzabm001p5c54qnlrj8gw","tag_id":"ckumjzad400565c545zafmhdc","_id":"ckumjzad7005m5c549q81l77w"},{"post_id":"ckumjzabm001p5c54qnlrj8gw","tag_id":"ckumjzad400595c54rt4kykux","_id":"ckumjzad7005n5c54ewdyjpxf"},{"post_id":"ckumjzabm001p5c54qnlrj8gw","tag_id":"ckumjzacz004t5c5401m0bup7","_id":"ckumjzad7005o5c54am4jluj4"},{"post_id":"ckumjzabm001p5c54qnlrj8gw","tag_id":"ckumjzacy004q5c54y7kj8b0v","_id":"ckumjzad8005q5c54yz3hf9f3"},{"post_id":"ckumjzabn001t5c54g8qsavzl","tag_id":"ckumjzabc00135c54rzridczv","_id":"ckumjzad8005r5c54mwbzf7tq"},{"post_id":"ckumjzabn001t5c54g8qsavzl","tag_id":"ckumjzabx002e5c54o9g0vy6r","_id":"ckumjzad8005t5c54c0x9rg79"},{"post_id":"ckumjzabo001v5c54takg73vm","tag_id":"ckumjzad7005l5c54rgn0jxl4","_id":"ckumjzad8005u5c54houvt6zw"},{"post_id":"ckumjzabo001v5c54takg73vm","tag_id":"ckumjzabc00135c54rzridczv","_id":"ckumjzad8005w5c546jzfllm7"},{"post_id":"ckumjzabp001y5c54wjs0603i","tag_id":"ckumjzabc00135c54rzridczv","_id":"ckumjzad9005x5c54yh1ytka2"},{"post_id":"ckumjzabp001y5c54wjs0603i","tag_id":"ckumjzad7005l5c54rgn0jxl4","_id":"ckumjzad9005z5c54h91qh6nm"},{"post_id":"ckumjzabq00205c54jk0mxjcu","tag_id":"ckumjzabc00135c54rzridczv","_id":"ckumjzad900605c54x723oclh"},{"post_id":"ckumjzabq00205c54jk0mxjcu","tag_id":"ckumjzabx002e5c54o9g0vy6r","_id":"ckumjzad900625c54li0ttgiv"},{"post_id":"ckumjzabw002c5c54qjf9emgn","tag_id":"ckumjzad8005v5c54koua0itk","_id":"ckumjzada00635c54eog7fnqo"},{"post_id":"ckumjzabx002f5c54bdplvyeg","tag_id":"ckumjzabc00135c54rzridczv","_id":"ckumjzada00655c54g4m55x8q"},{"post_id":"ckumjzabx002f5c54bdplvyeg","tag_id":"ckumjzad9005y5c54c43pts3h","_id":"ckumjzada00665c54isaufjb1"},{"post_id":"ckumjzaby002h5c5419l3p72r","tag_id":"ckumjzabc00135c54rzridczv","_id":"ckumjzada00685c54302yotq6"},{"post_id":"ckumjzaby002h5c5419l3p72r","tag_id":"ckumjzad900615c54h7z4d4uk","_id":"ckumjzadb00695c548eorw4a6"},{"post_id":"ckumjzabz002j5c545npyu1jd","tag_id":"ckumjzacs003z5c54v4rlu10n","_id":"ckumjzadb006b5c542qnwnf66"},{"post_id":"ckumjzac1002o5c54eh43ccyc","tag_id":"ckumjzace00395c54qx3ofevm","_id":"ckumjzadc006c5c54r0zkeq7r"},{"post_id":"ckumjzac5002r5c548c3spn0n","tag_id":"ckumjzadb006a5c54pgkxjpfj","_id":"ckumjzadc006e5c54vg85t7aa"},{"post_id":"ckumjzac7002t5c542eprxjls","tag_id":"ckumjzadc006d5c54371uqxtg","_id":"ckumjzadc006g5c54jftist24"},{"post_id":"ckumjzac8002w5c541pgmlcbk","tag_id":"ckumjzadc006f5c54pi9lrl36","_id":"ckumjzadd006i5c54o557flpa"},{"post_id":"ckumjzaca00315c541jcg7i01","tag_id":"ckumjzadc006d5c54371uqxtg","_id":"ckumjzade006l5c5456ped1kz"},{"post_id":"ckumjzaca00315c541jcg7i01","tag_id":"ckumjzace00395c54qx3ofevm","_id":"ckumjzade006m5c54v7aebl24"},{"post_id":"ckumjzacb00335c542zz1y11y","tag_id":"ckumjzadd006k5c54a6dl9t0n","_id":"ckumjzade006o5c54syqheiua"},{"post_id":"ckumjzacc00365c54uc0757eq","tag_id":"ckumjzade006n5c54obcvv6w8","_id":"ckumjzadf006q5c549lud2wz7"},{"post_id":"ckumjzacd00385c54wlnedtax","tag_id":"ckumjzacs003z5c54v4rlu10n","_id":"ckumjzadf006s5c544gc7h75x"},{"post_id":"ckumjzace003b5c5415mcukhr","tag_id":"ckumjzace00395c54qx3ofevm","_id":"ckumjzadf006u5c547mn9zl7u"},{"post_id":"ckumjzace003b5c5415mcukhr","tag_id":"ckumjzadf006r5c54c79be8nz","_id":"ckumjzadg006v5c549dve4quz"},{"post_id":"ckumjzacf003d5c540i97mawx","tag_id":"ckumjzadf006t5c54i3fflb1u","_id":"ckumjzadg006x5c54iblxomat"},{"post_id":"ckumjzacf003d5c540i97mawx","tag_id":"ckumjzabc00135c54rzridczv","_id":"ckumjzadg006y5c54dm9yd7dp"},{"post_id":"ckumjzach003h5c54tsbgrx3z","tag_id":"ckumjzadg006w5c548zj0mij6","_id":"ckumjzadg00705c54c716zjlk"},{"post_id":"ckumjzacj003k5c546p2kfiqu","tag_id":"ckumjzadg006z5c543btio0vi","_id":"ckumjzadh00735c54d48y013j"},{"post_id":"ckumjzacj003k5c546p2kfiqu","tag_id":"ckumjzacz004t5c5401m0bup7","_id":"ckumjzadh00745c54mu5y369w"},{"post_id":"ckumjzack003m5c54a1c5ajvk","tag_id":"ckumjzadh00725c542s2i3h69","_id":"ckumjzadh00765c54pi8nvub5"},{"post_id":"ckumjzacp003v5c5465b14kqz","tag_id":"ckumjzadh00755c54tub9vt94","_id":"ckumjzadi00785c54kd5yls2v"},{"post_id":"ckumjzacr003x5c54ix2pufi6","tag_id":"ckumjzadc006d5c54371uqxtg","_id":"ckumjzadj007a5c548dwwpkx9"},{"post_id":"ckumjzacr003x5c54ix2pufi6","tag_id":"ckumjzadg006w5c548zj0mij6","_id":"ckumjzadj007b5c54iol6tx78"},{"post_id":"ckumjzadw007c5c54odxk9skc","tag_id":"ckumjzadx007d5c5499nfggy7","_id":"ckumjzadx007e5c54x66nhlqv"},{"post_id":"ckumjzae7007g5c543m196mqq","tag_id":"ckumjzaan00085c542qfcgcrx","_id":"ckumjzaea007i5c5422dr1pxr"},{"post_id":"ckumjzae5007f5c54a6b0iauu","tag_id":"ckumjzaap000b5c54cika3tlw","_id":"ckumjzaec007j5c54d0htwiq0"},{"post_id":"ckumjzae5007f5c54a6b0iauu","tag_id":"ckumjzae9007h5c54ox7xtrq3","_id":"ckumjzaec007k5c54kyelqf7y"},{"post_id":"ckumjzae5007f5c54a6b0iauu","tag_id":"ckumjzabc00135c54rzridczv","_id":"ckumjzaed007l5c54gzki2j6d"}],"Tag":[{"name":"axios","_id":"ckumjzaah00045c544izmqfbq"},{"name":"小技巧","_id":"ckumjzaan00085c542qfcgcrx"},{"name":"linux","_id":"ckumjzaap000b5c54cika3tlw"},{"name":"mac","_id":"ckumjzaay000k5c54jqzo2j39"},{"name":"mongoDB","_id":"ckumjzab0000p5c5495h8x0sp"},{"name":"vscode","_id":"ckumjzab5000v5c54x7m6y36o"},{"name":"element-ui","_id":"ckumjzab9000z5c54koytacwz"},{"name":"vue","_id":"ckumjzabc00135c54rzridczv"},{"name":"Mint-ui","_id":"ckumjzabe00165c54t77oylq6"},{"name":"个人","_id":"ckumjzabi001h5c54tn2vlysq"},{"name":"charts","_id":"ckumjzabl001o5c54c474mtn0"},{"name":"css","_id":"ckumjzabo001u5c546sseixdd"},{"name":"element","_id":"ckumjzabx002e5c54o9g0vy6r"},{"name":"git","_id":"ckumjzac2002p5c54isn4fvxy"},{"name":"JavaScript","_id":"ckumjzace00395c54qx3ofevm"},{"name":"HTML","_id":"ckumjzacj003i5c54wh1m1hba"},{"name":"CSS3","_id":"ckumjzacl003o5c54cyp40tit"},{"name":"nginx","_id":"ckumjzacp003t5c5492v9r6e7"},{"name":"docker","_id":"ckumjzacs003z5c54v4rlu10n"},{"name":"jenkins","_id":"ckumjzact00425c54jhlna9o8"},{"name":"事件","_id":"ckumjzacu00485c54ddx9kd4f"},{"name":"Nodejs","_id":"ckumjzacu00495c54tp4z4m1p"},{"name":"Angularjs","_id":"ckumjzacv004c5c54dyyn5jql"},{"name":"Angular","_id":"ckumjzacv004e5c54cz141ug3"},{"name":"React","_id":"ckumjzacv004f5c54wu574mjp"},{"name":"dva","_id":"ckumjzacv004g5c547v1gtfxf"},{"name":"Java","_id":"ckumjzacw004i5c54iz1kffev"},{"name":"bash","_id":"ckumjzacw004j5c54zm1dv6e8"},{"name":"MongoDB","_id":"ckumjzacw004k5c54s6c3kp1k"},{"name":"CSS2","_id":"ckumjzacx004m5c54l9vbwyn1"},{"name":"ES6","_id":"ckumjzacx004n5c548m38nc0x"},{"name":"Git","_id":"ckumjzacx004o5c541m4yvl65"},{"name":"Mac","_id":"ckumjzacx004p5c5499dzhz26"},{"name":"react","_id":"ckumjzacy004q5c54y7kj8b0v"},{"name":"nodejs","_id":"ckumjzacz004t5c5401m0bup7"},{"name":"跨域","_id":"ckumjzacz004w5c54yhy2t52o"},{"name":"token","_id":"ckumjzad0004z5c547ft5q8ig"},{"name":"antd","_id":"ckumjzad400535c54xr377dsq"},{"name":"mongodb","_id":"ckumjzad400565c545zafmhdc"},{"name":"dvajs","_id":"ckumjzad400595c54rt4kykux"},{"name":"富文本","_id":"ckumjzad7005l5c54rgn0jxl4"},{"name":"水印","_id":"ckumjzad8005v5c54koua0itk"},{"name":"progress","_id":"ckumjzad9005y5c54c43pts3h"},{"name":"vue-router","_id":"ckumjzad900615c54h7z4d4uk"},{"name":"材料","_id":"ckumjzadb006a5c54pgkxjpfj"},{"name":"面试题","_id":"ckumjzadc006d5c54371uqxtg"},{"name":"总结","_id":"ckumjzadc006f5c54pi9lrl36"},{"name":"小程序","_id":"ckumjzadd006k5c54a6dl9t0n"},{"name":"微信支付","_id":"ckumjzade006n5c54obcvv6w8"},{"name":"this","_id":"ckumjzadf006r5c54c79be8nz"},{"name":"SSR","_id":"ckumjzadf006t5c54i3fflb1u"},{"name":"Javascript","_id":"ckumjzadg006w5c548zj0mij6"},{"name":"npm","_id":"ckumjzadg006z5c543btio0vi"},{"name":"Vue","_id":"ckumjzadh00725c542s2i3h69"},{"name":"redux","_id":"ckumjzadh00755c54tub9vt94"},{"name":"EsLint","_id":"ckumjzadx007d5c5499nfggy7"},{"name":"部署","_id":"ckumjzae9007h5c54ox7xtrq3"}]}}